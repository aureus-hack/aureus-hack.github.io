function X2JS(a){"use strict";function b(){void 0===a.escapeMode&&(a.escapeMode=!0),a.attributePrefix=a.attributePrefix||"_",a.arrayAccessForm=a.arrayAccessForm||"none",a.emptyNodeForm=a.emptyNodeForm||"text",void 0===a.enableToStringFunc&&(a.enableToStringFunc=!0),a.arrayAccessFormPaths=a.arrayAccessFormPaths||[],void 0===a.skipEmptyTextNodesForObj&&(a.skipEmptyTextNodesForObj=!0)}function c(a){var b=a.localName;return null==b&&(b=a.baseName),null!=b&&""!=b||(b=a.nodeName),b}function d(a){return a.prefix}function e(a){return"string"==typeof a?a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"):a}function f(a){return a.replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").replace(/&#x2F;/g,"/")}function g(b,c,d){switch(a.arrayAccessForm){case"property":b[c]instanceof Array?b[c+"_asArray"]=b[c]:b[c+"_asArray"]=[b[c]]}if(!(b[c]instanceof Array)&&a.arrayAccessFormPaths.length>0){for(var e=0;e<a.arrayAccessFormPaths.length;e++){var f=a.arrayAccessFormPaths[e];if("string"==typeof f){if(f==d)break}else if(f instanceof RegExp){if(f.test(d))break}else if("function"==typeof f&&f(b,c,d))break}e!=a.arrayAccessFormPaths.length&&(b[c]=[b[c]])}}function h(b,e){if(b.nodeType==t.DOCUMENT_NODE){for(var i=new Object,j=b.childNodes,k=0;k<j.length;k++){var l=j.item(k);if(l.nodeType==t.ELEMENT_NODE){var m=c(l);i[m]=h(l,m)}}return i}if(b.nodeType==t.ELEMENT_NODE){var i=new Object;i.__cnt=0;for(var j=b.childNodes,k=0;k<j.length;k++){var l=j.item(k),m=c(l);l.nodeType!=t.COMMENT_NODE&&(i.__cnt++,null==i[m]?(i[m]=h(l,e+"."+m),g(i,m,e+"."+m)):(null!=i[m]&&(i[m]instanceof Array||(i[m]=[i[m]],g(i,m,e+"."+m))),i[m][i[m].length]=h(l,e+"."+m)))}for(var n=0;n<b.attributes.length;n++){var o=b.attributes.item(n);i.__cnt++,i[a.attributePrefix+o.name]=o.value}var p=d(b);return null!=p&&""!=p&&(i.__cnt++,i.__prefix=p),null!=i["#text"]&&(i.__text=i["#text"],i.__text instanceof Array&&(i.__text=i.__text.join("\n")),a.escapeMode&&(i.__text=f(i.__text)),delete i["#text"],"property"==a.arrayAccessForm&&delete i["#text_asArray"]),null!=i["#cdata-section"]&&(i.__cdata=i["#cdata-section"],delete i["#cdata-section"],"property"==a.arrayAccessForm&&delete i["#cdata-section_asArray"]),1==i.__cnt&&null!=i.__text?i=i.__text:0==i.__cnt&&"text"==a.emptyNodeForm?i="":i.__cnt>1&&null!=i.__text&&a.skipEmptyTextNodesForObj&&""==i.__text.trim()&&delete i.__text,delete i.__cnt,(a.enableToStringFunc&&null!=i.__text||null!=i.__cdata)&&(i.toString=function(){return(null!=this.__text?this.__text:"")+(null!=this.__cdata?this.__cdata:"")}),i}if(b.nodeType==t.TEXT_NODE||b.nodeType==t.CDATA_SECTION_NODE)return b.nodeValue}function i(b,c,d,e){var f="<"+(null!=b&&null!=b.__prefix?b.__prefix+":":"")+c;if(null!=d)for(var g=0;g<d.length;g++){var h=d[g],i=b[h];f+=" "+h.substr(a.attributePrefix.length)+"='"+i+"'"}return f+=e?"/>":">"}function j(a,b){return"</"+(null!=a.__prefix?a.__prefix+":":"")+b+">"}function k(a,b){return a.indexOf(b,a.length-b.length)!==-1}function l(b,c){return!!("property"==a.arrayAccessForm&&k(c.toString(),"_asArray")||0==c.toString().indexOf(a.attributePrefix)||0==c.toString().indexOf("__")||b[c]instanceof Function)}function m(a){var b=0;if(a instanceof Object)for(var c in a)l(a,c)||b++;return b}function n(b){var c=[];if(b instanceof Object)for(var d in b)d.toString().indexOf("__")==-1&&0==d.toString().indexOf(a.attributePrefix)&&c.push(d);return c}function o(b){var c="";return null!=b.__cdata&&(c+="<![CDATA["+b.__cdata+"]]>"),null!=b.__text&&(c+=a.escapeMode?e(b.__text):b.__text),c}function p(b){var c="";return b instanceof Object?c+=o(b):null!=b&&(c+=a.escapeMode?e(b):b),c}function q(a,b,c){var d="";if(0==a.length)d+=i(a,b,c,!0);else for(var e=0;e<a.length;e++)d+=i(a[e],b,n(a[e]),!1),d+=r(a[e]),d+=j(a[e],b);return d}function r(a){var b="",c=m(a);if(c>0)for(var d in a)if(!l(a,d)){var e=a[d],f=n(e);if(null==e||void 0==e)b+=i(e,d,f,!0);else if(e instanceof Object)if(e instanceof Array)b+=q(e,d,f);else{var g=m(e);g>0||null!=e.__text||null!=e.__cdata?(b+=i(e,d,f,!1),b+=r(e),b+=j(e,d)):b+=i(e,d,f,!0)}else b+=i(e,d,f,!1),b+=p(e),b+=j(e,d)}return b+=p(a)}var s="1.1.3";a=a||{},b();var t={ELEMENT_NODE:1,TEXT_NODE:3,CDATA_SECTION_NODE:4,COMMENT_NODE:8,DOCUMENT_NODE:9};this.parseXmlString=function(a){if(void 0===a)return null;var b;if(window.DOMParser){var c=new window.DOMParser;b=c.parseFromString(a,"text/xml")}else 0==a.indexOf("<?")&&(a=a.substr(a.indexOf("?>")+2)),b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a);return b},this.asArray=function(a){return a instanceof Array?a:[a]},this.xml2json=function(a){return h(a)},this.xml_str2json=function(a){var b=this.parseXmlString(a);return this.xml2json(b)},this.json2xml_str=function(a){return r(a)},this.json2xml=function(a){var b=this.json2xml_str(a);return this.parseXmlString(b)},this.getVersion=function(){return s}}!function(a,b){"use strict";"object"==typeof exports&&module?module.exports=b():"function"==typeof define&&define.amd?define(b):a.PubSub=b()}("object"==typeof window&&window||this,function(){"use strict";function a(a){var b;for(b in a)if(a.hasOwnProperty(b))return!0;return!1}function b(a){return function(){throw a}}function c(a,c,d){try{a(c,d)}catch(a){setTimeout(b(a),0)}}function d(a,b,c){a(b,c)}function e(a,b,e,f){var g,h=j[b],i=f?d:c;if(j.hasOwnProperty(b))for(g in h)h.hasOwnProperty(g)&&i(h[g],a,e)}function f(a,b,c){return function(){var d=String(a),f=d.lastIndexOf(".");for(e(a,a,b,c);f!==-1;)d=d.substr(0,f),f=d.lastIndexOf("."),e(a,d,b)}}function g(b){for(var c=String(b),d=Boolean(j.hasOwnProperty(c)&&a(j[c])),e=c.lastIndexOf(".");!d&&e!==-1;)c=c.substr(0,e),e=c.lastIndexOf("."),d=Boolean(j.hasOwnProperty(c)&&a(j[c]));return d}function h(a,b,c,d){var e=f(a,b,d),h=g(a);return!!h&&(c===!0?e():setTimeout(e,0),!0)}var i={},j={},k=-1;return i.publish=function(a,b){return h(a,b,!1,i.immediateExceptions)},i.publishSync=function(a,b){return h(a,b,!0,i.immediateExceptions)},i.subscribe=function(a,b){if("function"!=typeof b)return!1;j.hasOwnProperty(a)||(j[a]={});var c="uid_"+String(++k);return j[a][c]=b,c},i.unsubscribe=function(a){var b,c,d,e="string"==typeof a,f=!1;for(b in j)if(j.hasOwnProperty(b)){if(c=j[b],e&&c[a]){delete c[a],f=a;break}if(!e)for(d in c)c.hasOwnProperty(d)&&c[d]===a&&(delete c[d],f=!0)}return f},i}),function(a){"use strict";function b(a,b){return b=b||Error,function(){var c,d,e=2,f=arguments,g=f[0],h="["+(a?a+":":"")+g+"] ",i=f[1];for(h+=i.replace(/\{\d+\}/g,function(a){var b=+a.slice(1,-1),c=b+e;return c<f.length?sa(f[c]):a}),h+="\nhttp://errors.angularjs.org/1.5.5/"+(a?a+"/":"")+g,d=e,c="?";d<f.length;d++,c="&")h+=c+"p"+(d-e)+"="+encodeURIComponent(sa(f[d]));return new b(h)}}function c(a){if(null==a||A(a))return!1;if(Td(a)||v(a)||Id&&a instanceof Id)return!0;var b="length"in Object(a)&&a.length;return w(b)&&(b>=0&&(b-1 in a||a instanceof Array)||"function"==typeof a.item)}function d(a,b,e){var f,g;if(a)if(y(a))for(f in a)"prototype"==f||"length"==f||"name"==f||a.hasOwnProperty&&!a.hasOwnProperty(f)||b.call(e,a[f],f,a);else if(Td(a)||c(a)){var h="object"!=typeof a;for(f=0,g=a.length;f<g;f++)(h||f in a)&&b.call(e,a[f],f,a)}else if(a.forEach&&a.forEach!==d)a.forEach(b,e,a);else if(u(a))for(f in a)b.call(e,a[f],f,a);else if("function"==typeof a.hasOwnProperty)for(f in a)a.hasOwnProperty(f)&&b.call(e,a[f],f,a);else for(f in a)Cd.call(a,f)&&b.call(e,a[f],f,a);return a}function e(a,b,c){for(var d=Object.keys(a).sort(),e=0;e<d.length;e++)b.call(c,a[d[e]],d[e]);return d}function f(a){return function(b,c){a(c,b)}}function g(){return++Sd}function h(a,b){b?a.$$hashKey=b:delete a.$$hashKey}function i(a,b,c){for(var d=a.$$hashKey,e=0,f=b.length;e<f;++e){var g=b[e];if(t(g)||y(g))for(var j=Object.keys(g),k=0,l=j.length;k<l;k++){var m=j[k],n=g[m];c&&t(n)?x(n)?a[m]=new Date(n.valueOf()):z(n)?a[m]=new RegExp(n):n.nodeName?a[m]=n.cloneNode(!0):J(n)?a[m]=n.clone():(t(a[m])||(a[m]=Td(n)?[]:{}),i(a[m],[n],!0)):a[m]=n}}return h(a,d),a}function j(a){return i(a,Ld.call(arguments,1),!1)}function k(a){return i(a,Ld.call(arguments,1),!0)}function l(a){return parseInt(a,10)}function m(a,b){return j(Object.create(a),b)}function n(){}function o(a){return a}function p(a){return function(){return a}}function q(a){return y(a.toString)&&a.toString!==Od}function r(a){return"undefined"==typeof a}function s(a){return"undefined"!=typeof a}function t(a){return null!==a&&"object"==typeof a}function u(a){return null!==a&&"object"==typeof a&&!Pd(a)}function v(a){return"string"==typeof a}function w(a){return"number"==typeof a}function x(a){return"[object Date]"===Od.call(a)}function y(a){return"function"==typeof a}function z(a){return"[object RegExp]"===Od.call(a)}function A(a){return a&&a.window===a}function B(a){return a&&a.$evalAsync&&a.$watch}function C(a){return"[object File]"===Od.call(a)}function D(a){return"[object FormData]"===Od.call(a)}function E(a){return"[object Blob]"===Od.call(a)}function F(a){return"boolean"==typeof a}function G(a){return a&&y(a.then)}function H(a){return a&&w(a.length)&&Ud.test(Od.call(a))}function I(a){return"[object ArrayBuffer]"===Od.call(a)}function J(a){return!(!a||!(a.nodeName||a.prop&&a.attr&&a.find))}function K(a){var b,c={},d=a.split(",");for(b=0;b<d.length;b++)c[d[b]]=!0;return c}function L(a){return Dd(a.nodeName||a[0]&&a[0].nodeName)}function M(a,b){var c=a.indexOf(b);return c>=0&&a.splice(c,1),c}function N(a,b){function c(a,b){var c,d=b.$$hashKey;if(Td(a))for(var f=0,g=a.length;f<g;f++)b.push(e(a[f]));else if(u(a))for(c in a)b[c]=e(a[c]);else if(a&&"function"==typeof a.hasOwnProperty)for(c in a)a.hasOwnProperty(c)&&(b[c]=e(a[c]));else for(c in a)Cd.call(a,c)&&(b[c]=e(a[c]));return h(b,d),b}function e(a){if(!t(a))return a;var b=g.indexOf(a);if(b!==-1)return i[b];if(A(a)||B(a))throw Qd("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var d=!1,e=f(a);return void 0===e&&(e=Td(a)?[]:Object.create(Pd(a)),d=!0),g.push(a),i.push(e),d?c(a,e):e}function f(a){switch(Od.call(a)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new a.constructor(e(a.buffer));case"[object ArrayBuffer]":if(!a.slice){var b=new ArrayBuffer(a.byteLength);return new Uint8Array(b).set(new Uint8Array(a)),b}return a.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new a.constructor(a.valueOf());case"[object RegExp]":var c=new RegExp(a.source,a.toString().match(/[^\/]*$/)[0]);return c.lastIndex=a.lastIndex,c;case"[object Blob]":return new a.constructor([a],{type:a.type})}if(y(a.cloneNode))return a.cloneNode(!0)}var g=[],i=[];if(b){if(H(b)||I(b))throw Qd("cpta","Can't copy! TypedArray destination cannot be mutated.");if(a===b)throw Qd("cpi","Can't copy! Source and destination are identical.");return Td(b)?b.length=0:d(b,function(a,c){"$$hashKey"!==c&&delete b[c]}),g.push(a),i.push(b),c(a,b)}return e(a)}function O(a,b){if(Td(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(t(a)){b=b||{};for(var e in a)"$"===e.charAt(0)&&"$"===e.charAt(1)||(b[e]=a[e])}return b||a}function P(a,b){if(a===b)return!0;if(null===a||null===b)return!1;if(a!==a&&b!==b)return!0;var c,d,e,f=typeof a,g=typeof b;if(f==g&&"object"==f){if(!Td(a)){if(x(a))return!!x(b)&&P(a.getTime(),b.getTime());if(z(a))return!!z(b)&&a.toString()==b.toString();if(B(a)||B(b)||A(a)||A(b)||Td(b)||x(b)||z(b))return!1;e=pa();for(d in a)if("$"!==d.charAt(0)&&!y(a[d])){if(!P(a[d],b[d]))return!1;e[d]=!0}for(d in b)if(!(d in e)&&"$"!==d.charAt(0)&&s(b[d])&&!y(b[d]))return!1;return!0}if(!Td(b))return!1;if((c=a.length)==b.length){for(d=0;d<c;d++)if(!P(a[d],b[d]))return!1;return!0}}return!1}function Q(a,b,c){return a.concat(Ld.call(b,c))}function R(a,b){return Ld.call(a,b||0)}function S(a,b){var c=arguments.length>2?R(arguments,2):[];return!y(b)||b instanceof RegExp?b:c.length?function(){return arguments.length?b.apply(a,Q(c,arguments,0)):b.apply(a,c)}:function(){return arguments.length?b.apply(a,arguments):b.call(a)}}function T(b,c){var d=c;return"string"==typeof b&&"$"===b.charAt(0)&&"$"===b.charAt(1)?d=void 0:A(c)?d="$WINDOW":c&&a.document===c?d="$DOCUMENT":B(c)&&(d="$SCOPE"),d}function U(a,b){if(!r(a))return w(b)||(b=b?2:null),JSON.stringify(a,T,b)}function V(a){return v(a)?JSON.parse(a):a}function W(a,b){a=a.replace(Zd,"");var c=Date.parse("Jan 01, 1970 00:00:00 "+a)/6e4;return isNaN(c)?b:c}function X(a,b){return a=new Date(a.getTime()),a.setMinutes(a.getMinutes()+b),a}function Y(a,b,c){c=c?-1:1;var d=a.getTimezoneOffset(),e=W(b,d);return X(a,c*(e-d))}function Z(a){a=Id(a).clone();try{a.empty()}catch(a){}var b=Id("<div>").append(a).html();try{return a[0].nodeType===de?Dd(b):b.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(a,b){return"<"+Dd(b)})}catch(a){return Dd(b)}}function $(a){try{return decodeURIComponent(a)}catch(a){}}function _(a){var b={};return d((a||"").split("&"),function(a){var c,d,e;a&&(d=a=a.replace(/\+/g,"%20"),c=a.indexOf("="),c!==-1&&(d=a.substring(0,c),e=a.substring(c+1)),d=$(d),s(d)&&(e=!s(e)||$(e),Cd.call(b,d)?Td(b[d])?b[d].push(e):b[d]=[b[d],e]:b[d]=e))}),b}function aa(a){var b=[];return d(a,function(a,c){Td(a)?d(a,function(a){b.push(ca(c,!0)+(a===!0?"":"="+ca(a,!0)))}):b.push(ca(c,!0)+(a===!0?"":"="+ca(a,!0)))}),b.length?b.join("&"):""}function ba(a){return ca(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function ca(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,b?"%20":"+")}function da(a,b){var c,d,e=$d.length;for(d=0;d<e;++d)if(c=$d[d]+b,v(c=a.getAttribute(c)))return c;return null}function ea(a,b){var c,e,f={};d($d,function(b){var d=b+"app";!c&&a.hasAttribute&&a.hasAttribute(d)&&(c=a,e=a.getAttribute(d))}),d($d,function(b){var d,f=b+"app";!c&&(d=a.querySelector("["+f.replace(":","\\:")+"]"))&&(c=d,e=d.getAttribute(f))}),c&&(f.strictDi=null!==da(c,"strict-di"),b(c,e?[e]:[],f))}function fa(b,c,e){t(e)||(e={});var f={strictDi:!1};e=j(f,e);var g=function(){if(b=Id(b),b.injector()){var d=b[0]===a.document?"document":Z(b);throw Qd("btstrpd","App already bootstrapped with this element '{0}'",d.replace(/</,"&lt;").replace(/>/,"&gt;"))}c=c||[],c.unshift(["$provide",function(a){a.value("$rootElement",b)}]),e.debugInfoEnabled&&c.push(["$compileProvider",function(a){a.debugInfoEnabled(!0)}]),c.unshift("ng");var f=cb(c,e.strictDi);return f.invoke(["$rootScope","$rootElement","$compile","$injector",function(a,b,c,d){a.$apply(function(){b.data("$injector",d),c(b)(a)})}]),f},h=/^NG_ENABLE_DEBUG_INFO!/,i=/^NG_DEFER_BOOTSTRAP!/;return a&&h.test(a.name)&&(e.debugInfoEnabled=!0,a.name=a.name.replace(h,"")),a&&!i.test(a.name)?g():(a.name=a.name.replace(i,""),Rd.resumeBootstrap=function(a){return d(a,function(a){c.push(a)}),g()},void(y(Rd.resumeDeferredBootstrap)&&Rd.resumeDeferredBootstrap()))}function ga(){a.name="NG_ENABLE_DEBUG_INFO!"+a.name,a.location.reload()}function ha(a){var b=Rd.element(a).injector();if(!b)throw Qd("test","no injector found for element argument to getTestability");return b.get("$$testability")}function ia(a,b){return b=b||"_",a.replace(_d,function(a,c){return(c?b:"")+a.toLowerCase()})}function ja(){var b;if(!ae){var c=Yd();Jd=r(c)?a.jQuery:c?a[c]:void 0,Jd&&Jd.fn.on?(Id=Jd,j(Jd.fn,{scope:we.scope,isolateScope:we.isolateScope,controller:we.controller,injector:we.injector,inheritedData:we.inheritedData}),b=Jd.cleanData,Jd.cleanData=function(a){for(var c,d,e=0;null!=(d=a[e]);e++)c=Jd._data(d,"events"),c&&c.$destroy&&Jd(d).triggerHandler("$destroy");b(a)}):Id=Da,Rd.element=Id,ae=!0}}function ka(a,b,c){if(!a)throw Qd("areq","Argument '{0}' is {1}",b||"?",c||"required");return a}function la(a,b,c){return c&&Td(a)&&(a=a[a.length-1]),ka(y(a),b,"not a function, got "+(a&&"object"==typeof a?a.constructor.name||"Object":typeof a)),a}function ma(a,b){if("hasOwnProperty"===a)throw Qd("badname","hasOwnProperty is not a valid {0} name",b)}function na(a,b,c){if(!b)return a;for(var d,e=b.split("."),f=a,g=e.length,h=0;h<g;h++)d=e[h],a&&(a=(f=a)[d]);return!c&&y(a)?S(f,a):a}function oa(a){for(var b,c=a[0],d=a[a.length-1],e=1;c!==d&&(c=c.nextSibling);e++)(b||a[e]!==c)&&(b||(b=Id(Ld.call(a,0,e))),b.push(c));return b||a}function pa(){return Object.create(null)}function qa(a){function c(a,b,c){return a[b]||(a[b]=c())}var d=b("$injector"),e=b("ng"),f=c(a,"angular",Object);return f.$$minErr=f.$$minErr||b,c(f,"module",function(){var a={};return function(b,f,g){var h=function(a,b){if("hasOwnProperty"===a)throw e("badname","hasOwnProperty is not a valid {0} name",b)};return h(b,"module"),f&&a.hasOwnProperty(b)&&(a[b]=null),c(a,b,function(){function a(a,b,c,d){return d||(d=e),function(){return d[c||"push"]([a,b,arguments]),k}}function c(a,c){return function(d,f){return f&&y(f)&&(f.$$moduleName=b),e.push([a,c,arguments]),k}}if(!f)throw d("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",b);var e=[],h=[],i=[],j=a("$injector","invoke","push",h),k={_invokeQueue:e,_configBlocks:h,_runBlocks:i,requires:f,name:b,provider:c("$provide","provider"),factory:c("$provide","factory"),service:c("$provide","service"),value:a("$provide","value"),constant:a("$provide","constant","unshift"),decorator:c("$provide","decorator"),animation:c("$animateProvider","register"),filter:c("$filterProvider","register"),controller:c("$controllerProvider","register"),directive:c("$compileProvider","directive"),component:c("$compileProvider","component"),config:j,run:function(a){return i.push(a),this}};return g&&j(g),k})}})}function ra(a){var b=[];return JSON.stringify(a,function(a,c){if(c=T(a,c),t(c)){if(b.indexOf(c)>=0)return"...";b.push(c)}return c})}function sa(a){return"function"==typeof a?a.toString().replace(/ \{[\s\S]*$/,""):r(a)?"undefined":"string"!=typeof a?ra(a):a}function ta(c){j(c,{bootstrap:fa,copy:N,extend:j,merge:k,equals:P,element:Id,forEach:d,injector:cb,noop:n,bind:S,toJson:U,fromJson:V,identity:o,isUndefined:r,isDefined:s,isString:v,isFunction:y,isObject:t,isNumber:w,isElement:J,isArray:Td,version:he,isDate:x,lowercase:Dd,uppercase:Ed,callbacks:{counter:0},getTestability:ha,$$minErr:b,$$csp:Xd,reloadWithDebugInfo:ga}),(Kd=qa(a))("ng",["ngLocale"],["$provide",function(a){a.provider({$$sanitizeUri:wc}),a.provider("$compile",nb).directive({a:Ef,input:Xf,textarea:Xf,form:Jf,script:Sg,select:Vg,style:Xg,option:Wg,ngBind:$f,ngBindHtml:ag,ngBindTemplate:_f,ngClass:cg,ngClassEven:eg,ngClassOdd:dg,ngCloak:fg,ngController:gg,ngForm:Kf,ngHide:Lg,ngIf:jg,ngInclude:kg,ngInit:mg,ngNonBindable:Cg,ngPluralize:Gg,ngRepeat:Hg,ngShow:Kg,ngStyle:Mg,ngSwitch:Ng,ngSwitchWhen:Og,ngSwitchDefault:Pg,ngOptions:Fg,ngTransclude:Rg,ngModel:zg,ngList:ng,ngChange:bg,pattern:Zg,ngPattern:Zg,required:Yg,ngRequired:Yg,minlength:_g,ngMinlength:_g,maxlength:$g,ngMaxlength:$g,ngValue:Zf,ngModelOptions:Bg}).directive({ngInclude:lg}).directive(Ff).directive(hg),a.provider({$anchorScroll:db,$animate:Me,$animateCss:Pe,$$animateJs:Ke,$$animateQueue:Le,$$AnimateRunner:Oe,$$animateAsyncRun:Ne,$browser:jb,$cacheFactory:kb,$controller:tb,$document:ub,$exceptionHandler:vb,$filter:Kc,$$forceReflow:Ve,$interpolate:Jb,$interval:Kb,$http:Fb,$httpParamSerializer:xb,$httpParamSerializerJQLike:yb,$httpBackend:Hb,$xhrFactory:Gb,$location:Yb,$log:Zb,$parse:qc,$rootScope:vc,$q:rc,$$q:sc,$sce:Ac,$sceDelegate:zc,$sniffer:Bc,$templateCache:lb,$templateRequest:Cc,$$testability:Dc,$timeout:Ec,$window:Hc,$$rAF:uc,$$jqLite:Ya,$$HashMap:Ae,$$cookieReader:Jc})}])}function ua(){return++je}function va(a){return a.replace(me,function(a,b,c,d){return d?c.toUpperCase():c}).replace(ne,"Moz$1")}function wa(a){return!re.test(a)}function xa(a){var b=a.nodeType;return b===be||!b||b===fe}function ya(a){for(var b in ie[a.ng339])return!0;return!1}function za(a){for(var b=0,c=a.length;b<c;b++)Ha(a[b])}function Aa(a,b){var c,e,f,g,h=b.createDocumentFragment(),i=[];if(wa(a))i.push(b.createTextNode(a));else{for(c=c||h.appendChild(b.createElement("div")),e=(se.exec(a)||["",""])[1].toLowerCase(),f=ue[e]||ue._default,c.innerHTML=f[1]+a.replace(te,"<$1></$2>")+f[2],g=f[0];g--;)c=c.lastChild;i=Q(i,c.childNodes),c=h.firstChild,c.textContent=""}return h.textContent="",h.innerHTML="",d(i,function(a){h.appendChild(a)}),h}function Ba(b,c){c=c||a.document;var d;return(d=qe.exec(b))?[c.createElement(d[1])]:(d=Aa(b,c))?d.childNodes:[]}function Ca(a,b){var c=a.parentNode;c&&c.replaceChild(b,a),b.appendChild(a)}function Da(a){if(a instanceof Da)return a;var b;if(v(a)&&(a=Vd(a),b=!0),!(this instanceof Da)){if(b&&"<"!=a.charAt(0))throw pe("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Da(a)}b?Na(this,Ba(a)):Na(this,a)}function Ea(a){return a.cloneNode(!0)}function Fa(a,b){if(b||Ha(a),a.querySelectorAll)for(var c=a.querySelectorAll("*"),d=0,e=c.length;d<e;d++)Ha(c[d])}function Ga(a,b,c,e){if(s(e))throw pe("offargs","jqLite#off() does not support the `selector` argument");var f=Ia(a),g=f&&f.events,h=f&&f.handle;if(h)if(b){var i=function(b){var d=g[b];s(c)&&M(d||[],c),s(c)&&d&&d.length>0||(le(a,b,h),delete g[b])};d(b.split(" "),function(a){i(a),oe[a]&&i(oe[a])})}else for(b in g)"$destroy"!==b&&le(a,b,h),delete g[b]}function Ha(a,b){var c=a.ng339,d=c&&ie[c];if(d){if(b)return void delete d.data[b];d.handle&&(d.events.$destroy&&d.handle({},"$destroy"),Ga(a)),delete ie[c],a.ng339=void 0}}function Ia(a,b){var c=a.ng339,d=c&&ie[c];return b&&!d&&(a.ng339=c=ua(),d=ie[c]={events:{},data:{},handle:void 0}),d}function Ja(a,b,c){if(xa(a)){var d=s(c),e=!d&&b&&!t(b),f=!b,g=Ia(a,!e),h=g&&g.data;if(d)h[b]=c;else{if(f)return h;if(e)return h&&h[b];j(h,b)}}}function Ka(a,b){return!!a.getAttribute&&(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+b+" ")>-1}function La(a,b){b&&a.setAttribute&&d(b.split(" "),function(b){a.setAttribute("class",Vd((" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Vd(b)+" "," ")))})}function Ma(a,b){if(b&&a.setAttribute){var c=(" "+(a.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");d(b.split(" "),function(a){a=Vd(a),c.indexOf(" "+a+" ")===-1&&(c+=a+" ")}),a.setAttribute("class",Vd(c))}}function Na(a,b){if(b)if(b.nodeType)a[a.length++]=b;else{var c=b.length;if("number"==typeof c&&b.window!==b){if(c)for(var d=0;d<c;d++)a[a.length++]=b[d]}else a[a.length++]=b}}function Oa(a,b){return Pa(a,"$"+(b||"ngController")+"Controller")}function Pa(a,b,c){a.nodeType==fe&&(a=a.documentElement);for(var d=Td(b)?b:[b];a;){for(var e=0,f=d.length;e<f;e++)if(s(c=Id.data(a,d[e])))return c;a=a.parentNode||a.nodeType===ge&&a.host}}function Qa(a){for(Fa(a,!0);a.firstChild;)a.removeChild(a.firstChild)}function Ra(a,b){b||Fa(a);var c=a.parentNode;c&&c.removeChild(a)}function Sa(b,c){c=c||a,"complete"===c.document.readyState?c.setTimeout(b):Id(c).on("load",b)}function Ta(a,b){var c=xe[b.toLowerCase()];return c&&ye[L(a)]&&c}function Ua(a){return ze[a]}function Va(a,b){var c=function(c,d){c.isDefaultPrevented=function(){return c.defaultPrevented};var e=b[d||c.type],f=e?e.length:0;if(f){if(r(c.immediatePropagationStopped)){var g=c.stopImmediatePropagation;c.stopImmediatePropagation=function(){c.immediatePropagationStopped=!0,c.stopPropagation&&c.stopPropagation(),g&&g.call(c)}}c.isImmediatePropagationStopped=function(){return c.immediatePropagationStopped===!0};var h=e.specialHandlerWrapper||Wa;f>1&&(e=O(e));for(var i=0;i<f;i++)c.isImmediatePropagationStopped()||h(a,c,e[i])}};return c.elem=a,c}function Wa(a,b,c){c.call(a,b)}function Xa(a,b,c){var d=b.relatedTarget;d&&(d===a||ve.call(a,d))||c.call(a,b)}function Ya(){this.$get=function(){return j(Da,{hasClass:function(a,b){return a.attr&&(a=a[0]),Ka(a,b)},addClass:function(a,b){return a.attr&&(a=a[0]),Ma(a,b)},removeClass:function(a,b){return a.attr&&(a=a[0]),La(a,b)}})}}function Za(a,b){var c=a&&a.$$hashKey;if(c)return"function"==typeof c&&(c=a.$$hashKey()),c;var d=typeof a;return c="function"==d||"object"==d&&null!==a?a.$$hashKey=d+":"+(b||g)():d+":"+a}function $a(a,b){if(b){var c=0;this.nextUid=function(){return++c}}d(a,this.put,this)}function _a(a){var b=Function.prototype.toString.call(a).replace(Fe,""),c=b.match(Be)||b.match(Ce);return c}function ab(a){var b=_a(a);return b?"function("+(b[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function bb(a,b,c){var e,f,g;if("function"==typeof a){if(!(e=a.$inject)){if(e=[],a.length){if(b)throw v(c)&&c||(c=a.name||ab(a)),Ge("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",c);f=_a(a),d(f[1].split(De),function(a){a.replace(Ee,function(a,b,c){e.push(c)})})}a.$inject=e}}else Td(a)?(g=a.length-1,la(a[g],"fn"),e=a.slice(0,g)):la(a,"fn",!0);return e}function cb(a,b){function c(a){return function(b,c){return t(b)?void d(b,f(a)):a(b,c)}}function e(a,b){if(ma(a,"service"),(y(b)||Td(b))&&(b=x.instantiate(b)),!b.$get)throw Ge("pget","Provider '{0}' must define $get factory method.",a);return w[a+q]=b}function g(a,b){return function(){var c=B.invoke(b,this);if(r(c))throw Ge("undef","Provider '{0}' must return a value from $get factory method.",a);return c}}function h(a,b,c){return e(a,{$get:c!==!1?g(a,b):b})}function i(a,b){return h(a,["$injector",function(a){return a.instantiate(b)}])}function j(a,b){return h(a,p(b),!1)}function k(a,b){ma(a,"constant"),w[a]=b,z[a]=b}function l(a,b){var c=x.get(a+q),d=c.$get;c.$get=function(){var a=B.invoke(d,c);return B.invoke(b,null,{$delegate:a})}}function m(a){ka(r(a)||Td(a),"modulesToLoad","not an array");var b,c=[];return d(a,function(a){function d(a){var b,c;for(b=0,c=a.length;b<c;b++){var d=a[b],e=x.get(d[0]);e[d[1]].apply(e,d[2])}}if(!u.get(a)){u.put(a,!0);try{v(a)?(b=Kd(a),c=c.concat(m(b.requires)).concat(b._runBlocks),d(b._invokeQueue),d(b._configBlocks)):y(a)?c.push(x.invoke(a)):Td(a)?c.push(x.invoke(a)):la(a,"module")}catch(b){throw Td(a)&&(a=a[a.length-1]),b.message&&b.stack&&b.stack.indexOf(b.message)==-1&&(b=b.message+"\n"+b.stack),Ge("modulerr","Failed to instantiate module {0} due to:\n{1}",a,b.stack||b.message||b)}}}),c}function n(a,c){function d(b,d){if(a.hasOwnProperty(b)){if(a[b]===o)throw Ge("cdep","Circular dependency found: {0}",b+" <- "+s.join(" <- "));return a[b]}try{return s.unshift(b),a[b]=o,a[b]=c(b,d)}catch(c){throw a[b]===o&&delete a[b],c}finally{s.shift()}}function e(a,c,e){for(var f=[],g=cb.$$annotate(a,b,e),h=0,i=g.length;h<i;h++){var j=g[h];if("string"!=typeof j)throw Ge("itkn","Incorrect injection token! Expected service name as string, got {0}",j);f.push(c&&c.hasOwnProperty(j)?c[j]:d(j,e))}return f}function f(a){return!(Hd<=11)&&("function"==typeof a&&/^(?:class\s|constructor\()/.test(Function.prototype.toString.call(a)))}function g(a,b,c,d){"string"==typeof c&&(d=c,c=null);var g=e(a,c,d);return Td(a)&&(a=a[a.length-1]),f(a)?(g.unshift(null),new(Function.prototype.bind.apply(a,g))):a.apply(b,g)}function h(a,b,c){var d=Td(a)?a[a.length-1]:a,f=e(a,b,c);return f.unshift(null),new(Function.prototype.bind.apply(d,f))}return{invoke:g,instantiate:h,get:d,annotate:cb.$$annotate,has:function(b){return w.hasOwnProperty(b+q)||a.hasOwnProperty(b)}}}b=b===!0;var o={},q="Provider",s=[],u=new $a([],!0),w={$provide:{provider:c(e),factory:c(h),service:c(i),value:c(j),constant:c(k),decorator:l}},x=w.$injector=n(w,function(a,b){throw Rd.isString(b)&&s.push(b),Ge("unpr","Unknown provider: {0}",s.join(" <- "))}),z={},A=n(z,function(a,b){var c=x.get(a+q,b);return B.invoke(c.$get,c,void 0,a)}),B=A;w["$injector"+q]={$get:p(A)};var C=m(a);return B=A.get("$injector"),B.strictDi=b,d(C,function(a){a&&B.invoke(a)}),B}function db(){var a=!0;this.disableAutoScrolling=function(){a=!1},this.$get=["$window","$location","$rootScope",function(b,c,d){function e(a){var b=null;return Array.prototype.some.call(a,function(a){if("a"===L(a))return b=a,!0}),b}function f(){var a=h.yOffset;if(y(a))a=a();else if(J(a)){var c=a[0],d=b.getComputedStyle(c);a="fixed"!==d.position?0:c.getBoundingClientRect().bottom}else w(a)||(a=0);return a}function g(a){if(a){a.scrollIntoView();var c=f();if(c){var d=a.getBoundingClientRect().top;b.scrollBy(0,d-c)}}else b.scrollTo(0,0)}function h(a){a=v(a)?a:c.hash();var b;a?(b=i.getElementById(a))?g(b):(b=e(i.getElementsByName(a)))?g(b):"top"===a&&g(null):g(null)}var i=b.document;return a&&d.$watch(function(){return c.hash()},function(a,b){a===b&&""===a||Sa(function(){d.$evalAsync(h)})}),h}]}function eb(a,b){return a||b?a?b?(Td(a)&&(a=a.join(" ")),Td(b)&&(b=b.join(" ")),a+" "+b):a:b:""}function fb(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.nodeType===Ie)return c}}function gb(a){v(a)&&(a=a.split(" "));var b=pa();return d(a,function(a){a.length&&(b[a]=!0)}),b}function hb(a){return t(a)?a:{}}function ib(a,b,c,e){function f(a){try{a.apply(null,R(arguments,1))}finally{if(s--,0===s)for(;t.length;)try{t.pop()()}catch(a){c.error(a)}}}function g(a){var b=a.indexOf("#");return b===-1?"":a.substr(b)}function h(){y=null,i(),j()}function i(){u=z(),u=r(u)?null:u,P(u,C)&&(u=C),C=u}function j(){w===k.url()&&v===u||(w=k.url(),v=u,d(A,function(a){a(k.url(),u)}))}var k=this,l=a.location,m=a.history,o=a.setTimeout,p=a.clearTimeout,q={};k.isMock=!1;var s=0,t=[];k.$$completeOutstandingRequest=f,k.$$incOutstandingRequestCount=function(){s++},k.notifyWhenNoOutstandingRequests=function(a){0===s?a():t.push(a)};var u,v,w=l.href,x=b.find("base"),y=null,z=e.history?function(){try{return m.state}catch(a){}}:n;i(),v=u,k.url=function(b,c,d){if(r(d)&&(d=null),l!==a.location&&(l=a.location),m!==a.history&&(m=a.history),b){var f=v===d;if(w===b&&(!e.history||f))return k;var h=w&&Pb(w)===Pb(b);return w=b,v=d,!e.history||h&&f?(h&&!y||(y=b),c?l.replace(b):h?l.hash=g(b):l.href=b,l.href!==b&&(y=b)):(m[c?"replaceState":"pushState"](d,"",b),i(),v=u),k}return y||l.href.replace(/%27/g,"'")},k.state=function(){return u};var A=[],B=!1,C=null;k.onUrlChange=function(b){return B||(e.history&&Id(a).on("popstate",h),Id(a).on("hashchange",h),B=!0),A.push(b),b},k.$$applicationDestroyed=function(){Id(a).off("hashchange popstate",h)},k.$$checkUrlChange=j,k.baseHref=function(){var a=x.attr("href");return a?a.replace(/^(https?\:)?\/\/[^\/]*/,""):""},k.defer=function(a,b){var c;return s++,c=o(function(){delete q[c],f(a)},b||0),q[c]=!0,c},k.defer.cancel=function(a){return!!q[a]&&(delete q[a],p(a),f(n),!0)}}function jb(){this.$get=["$window","$log","$sniffer","$document",function(a,b,c,d){return new ib(a,d,b,c)}]}function kb(){this.$get=function(){function a(a,d){function e(a){a!=m&&(n?n==a&&(n=a.n):n=a,f(a.n,a.p),f(a,m),m=a,m.n=null)}function f(a,b){a!=b&&(a&&(a.p=b),b&&(b.n=a))}if(a in c)throw b("$cacheFactory")("iid","CacheId '{0}' is already taken!",a);var g=0,h=j({},d,{id:a}),i=pa(),k=d&&d.capacity||Number.MAX_VALUE,l=pa(),m=null,n=null;return c[a]={put:function(a,b){if(!r(b)){if(k<Number.MAX_VALUE){var c=l[a]||(l[a]={key:a});e(c)}return a in i||g++,i[a]=b,g>k&&this.remove(n.key),b}},get:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;e(b)}return i[a]},remove:function(a){if(k<Number.MAX_VALUE){var b=l[a];if(!b)return;b==m&&(m=b.p),b==n&&(n=b.n),f(b.n,b.p),delete l[a]}a in i&&(delete i[a],g--)},removeAll:function(){i=pa(),g=0,l=pa(),m=n=null},destroy:function(){i=null,h=null,l=null,delete c[a]},info:function(){return j({},h,{size:g})}}}var c={};return a.info=function(){var a={};return d(c,function(b,c){a[c]=b.info()}),a},a.get=function(a){return c[a]},a}}function lb(){this.$get=["$cacheFactory",function(a){return a("templates")}]}function mb(){}function nb(b,c){function e(a,b,c){var e=/^\s*([@&<]|=(\*?))(\??)\s*(\w*)\s*$/,f=pa();return d(a,function(a,d){if(a in z)return void(f[d]=z[a]);var g=a.match(e);if(!g)throw Qe("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",b,d,a,c?"controller bindings definition":"isolate scope definition");
f[d]={mode:g[1][0],collection:"*"===g[2],optional:"?"===g[3],attrName:g[4]||d},g[4]&&(z[a]=f[d])}),f}function g(a,b){var c={isolateScope:null,bindToController:null};if(t(a.scope)&&(a.bindToController===!0?(c.bindToController=e(a.scope,b,!0),c.isolateScope={}):c.isolateScope=e(a.scope,b,!1)),t(a.bindToController)&&(c.bindToController=e(a.bindToController,b,!0)),t(c.bindToController)){var d=a.controller,f=a.controllerAs;if(!d)throw Qe("noctrl","Cannot bind to controller without directive '{0}'s controller.",b);if(!sb(d,f))throw Qe("noident","Cannot bind to controller without identifier for directive '{0}'.",b)}return c}function h(a){var b=a.charAt(0);if(!b||b!==Dd(b))throw Qe("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",a);if(a!==a.trim())throw Qe("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",a)}var i={},k="Directive",l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,q=/(([\w\-]+)(?:\:([^;]+))?;?)/,u=K("ngSrc,ngSrcset,src,srcset"),w=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,x=/^(on[a-z]+|formaction)$/,z=pa();this.directive=function a(c,e){return ma(c,"directive"),v(c)?(h(c),ka(e,"directiveFactory"),i.hasOwnProperty(c)||(i[c]=[],b.factory(c+k,["$injector","$exceptionHandler",function(a,b){var e=[];return d(i[c],function(d,f){try{var g=a.invoke(d);y(g)?g={compile:p(g)}:!g.compile&&g.link&&(g.compile=p(g.link)),g.priority=g.priority||0,g.index=f,g.name=g.name||c,g.require=g.require||g.controller&&g.name,g.restrict=g.restrict||"EA",g.$$moduleName=d.$$moduleName,e.push(g)}catch(a){b(a)}}),e}])),i[c].push(e)):d(c,f(a)),this},this.component=function(a,b){function c(a){function c(b){return y(b)||Td(b)?function(c,d){return a.invoke(b,this,{$element:c,$attrs:d})}:b}var f=b.template||b.templateUrl?b.template:"",g={controller:e,controllerAs:sb(b.controller)||b.controllerAs||"$ctrl",template:c(f),templateUrl:c(b.templateUrl),transclude:b.transclude,scope:{},bindToController:b.bindings||{},restrict:"E",require:b.require};return d(b,function(a,b){"$"===b.charAt(0)&&(g[b]=a)}),g}var e=b.controller||function(){};return d(b,function(a,b){"$"===b.charAt(0)&&(c[b]=a,y(e)&&(e[b]=a))}),c.$inject=["$injector"],this.directive(a,c)},this.aHrefSanitizationWhitelist=function(a){return s(a)?(c.aHrefSanitizationWhitelist(a),this):c.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(c.imgSrcSanitizationWhitelist(a),this):c.imgSrcSanitizationWhitelist()};var A=!0;this.debugInfoEnabled=function(a){return s(a)?(A=a,this):A};var C=10;this.onChangesTtl=function(a){return arguments.length?(C=a,this):C},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(b,c,e,f,h,p,s,z,D,E){function G(){try{if(!--ta)throw qa=void 0,Qe("infchng","{0} $onChanges() iterations reached. Aborting!\n",C);s.$apply(function(){for(var a=0,b=qa.length;a<b;++a)qa[a]();qa=void 0})}finally{ta++}}function H(a,b){if(b){var c,d,e,f=Object.keys(b);for(c=0,d=f.length;c<d;c++)e=f[c],this[e]=b[e]}else this.$attr={};this.$$element=a}function I(a,b,c){sa.innerHTML="<span "+b+">";var d=sa.firstChild.attributes,e=d[0];d.removeNamedItem(e.name),e.value=c,a.attributes.setNamedItem(e)}function J(a,b){try{a.addClass(b)}catch(a){}}function K(b,c,d,e,f){b instanceof Id||(b=Id(b));for(var g=/\S+/,h=0,i=b.length;h<i;h++){var j=b[h];j.nodeType===de&&j.nodeValue.match(g)&&Ca(j,b[h]=a.document.createElement("span"))}var k=O(b,c,b,d,e,f);K.$$addScopeClass(b);var l=null;return function(a,c,d){ka(a,"scope"),f&&f.needsNewScope&&(a=a.$parent.$new()),d=d||{};var e=d.parentBoundTranscludeFn,g=d.transcludeControllers,h=d.futureParentElement;e&&e.$$boundTransclude&&(e=e.$$boundTransclude),l||(l=N(h));var i;if(i="html"!==l?Id(ga(l,Id("<div>").append(b).html())):c?we.clone.call(b):b,g)for(var j in g)i.data("$"+j+"Controller",g[j].instance);return K.$$addScopeInfo(i,a),c&&c(i,a),k&&k(a,i,i,e),i}}function N(a){var b=a&&a[0];return b&&"foreignobject"!==L(b)&&Od.call(b).match(/SVG/)?"svg":"html"}function O(a,b,c,d,e,f){function g(a,c,d,e){var f,g,h,i,j,k,l,m,p;if(n){var q=c.length;for(p=new Array(q),j=0;j<o.length;j+=3)l=o[j],p[l]=c[l]}else p=c;for(j=0,k=o.length;j<k;)h=p[o[j++]],f=o[j++],g=o[j++],f?(f.scope?(i=a.$new(),K.$$addScopeInfo(Id(h),i)):i=a,m=f.transcludeOnThisElement?Q(a,f.transclude,e):!f.templateOnThisElement&&e?e:!e&&b?Q(a,b):null,f(g,i,h,d,m)):g&&g(a,h.childNodes,void 0,e)}for(var h,i,j,k,l,m,n,o=[],p=0;p<a.length;p++)h=new H,i=S(a[p],[],h,0===p?d:void 0,e),j=i.length?W(i,a[p],h,b,c,null,[],[],f):null,j&&j.scope&&K.$$addScopeClass(h.$$element),l=j&&j.terminal||!(k=a[p].childNodes)||!k.length?null:O(k,j?(j.transcludeOnThisElement||!j.templateOnThisElement)&&j.transclude:b),(j||l)&&(o.push(p,j,l),m=!0,n=n||j),f=null;return m?g:null}function Q(a,b,c){function d(d,e,f,g,h){return d||(d=a.$new(!1,h),d.$$transcluded=!0),b(d,e,{parentBoundTranscludeFn:c,transcludeControllers:f,futureParentElement:g})}var e=d.$$slots=pa();for(var f in b.$$slots)b.$$slots[f]?e[f]=Q(a,b.$$slots[f],c):e[f]=null;return d}function S(a,b,c,d,e){var f,g,h=a.nodeType,i=c.$attr;switch(h){case be:_(b,pb(L(a)),"E",d,e);for(var j,k,m,n,o,p,r=a.attributes,s=0,u=r&&r.length;s<u;s++){var w=!1,x=!1;j=r[s],k=j.name,o=Vd(j.value),n=pb(k),(p=ya.test(n))&&(k=k.replace(Se,"").substr(8).replace(/_(.)/g,function(a,b){return b.toUpperCase()}));var y=n.match(za);y&&aa(y[1])&&(w=k,x=k.substr(0,k.length-5)+"end",k=k.substr(0,k.length-6)),m=pb(k.toLowerCase()),i[m]=k,!p&&c.hasOwnProperty(m)||(c[m]=o,Ta(a,m)&&(c[m]=!0)),ja(a,b,o,m,p),_(b,m,"A",d,e,w,x)}if(g=a.className,t(g)&&(g=g.animVal),v(g)&&""!==g)for(;f=q.exec(g);)m=pb(f[2]),_(b,m,"C",d,e)&&(c[m]=Vd(f[3])),g=g.substr(f.index+f[0].length);break;case de:if(11===Hd)for(;a.parentNode&&a.nextSibling&&a.nextSibling.nodeType===de;)a.nodeValue=a.nodeValue+a.nextSibling.nodeValue,a.parentNode.removeChild(a.nextSibling);fa(b,a.nodeValue);break;case ee:try{f=l.exec(a.nodeValue),f&&(m=pb(f[1]),_(b,m,"M",d,e)&&(c[m]=Vd(f[2])))}catch(a){}}return b.sort(da),b}function T(a,b,c){var d=[],e=0;if(b&&a.hasAttribute&&a.hasAttribute(b)){do{if(!a)throw Qe("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",b,c);a.nodeType==be&&(a.hasAttribute(b)&&e++,a.hasAttribute(c)&&e--),d.push(a),a=a.nextSibling}while(e>0)}else d.push(a);return Id(d)}function U(a,b,c){return function(d,e,f,g,h){return e=T(e[0],b,c),a(d,e,f,g,h)}}function V(a,b,c,d,e,f){var g;return a?K(b,c,d,e,f):function(){return g||(g=K(b,c,d,e,f),b=c=f=null),g.apply(this,arguments)}}function W(a,b,c,f,g,h,i,k,l){function m(a,b,c,d){a&&(c&&(a=U(a,c,d)),a.require=o.require,a.directiveName=p,(z===o||o.$$isolateScope)&&(a=ma(a,{isolateScope:!0})),i.push(a)),b&&(c&&(b=U(b,c,d)),b.require=o.require,b.directiveName=p,(z===o||o.$$isolateScope)&&(b=ma(b,{isolateScope:!0})),k.push(b))}function n(a,e,f,g,h){function l(a,b,c,d){var e;if(B(a)||(d=c,c=b,b=a,a=void 0),F&&(e=s),c||(c=F?v.parent():v),!d)return h(a,b,e,c,M);var f=h.$$slots[d];if(f)return f(a,b,e,c,M);if(r(f))throw Qe("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',d,Z(v))}var m,n,o,p,q,s,u,v,C,D;b===f?(C=c,v=c.$$element):(v=Id(f),C=new H(v,c)),q=e,z?p=e.$new(!0):w&&(q=e.$parent),h&&(u=l,u.$$boundTransclude=h,u.isSlotFilled=function(a){return!!h.$$slots[a]}),x&&(s=Y(v,C,u,x,p,e,z)),z&&(K.$$addScopeInfo(v,p,!0,!(A&&(A===z||A===z.$$originalDirective))),K.$$addScopeClass(v,!0),p.$$isolateBindings=z.$$isolateBindings,D=oa(e,C,p,p.$$isolateBindings,z),D.removeWatches&&p.$on("$destroy",D.removeWatches));for(var E in s){var G=x[E],I=s[E],J=G.$$bindings.bindToController;I.identifier&&J?I.bindingInfo=oa(q,C,I.instance,J,G):I.bindingInfo={};var L=I();L!==I.instance&&(I.instance=L,v.data("$"+G.name+"Controller",L),I.bindingInfo.removeWatches&&I.bindingInfo.removeWatches(),I.bindingInfo=oa(q,C,I.instance,J,G))}for(d(x,function(a,b){var c=a.require;a.bindToController&&!Td(c)&&t(c)&&j(s[b].instance,X(b,c,v,s))}),d(s,function(a){var b=a.instance;y(b.$onChanges)&&b.$onChanges(a.bindingInfo.initialChanges),y(b.$onInit)&&b.$onInit(),y(b.$onDestroy)&&q.$on("$destroy",function(){b.$onDestroy()})}),m=0,n=i.length;m<n;m++)o=i[m],na(o,o.isolateScope?p:e,v,C,o.require&&X(o.directiveName,o.require,v,s),u);var M=e;for(z&&(z.template||null===z.templateUrl)&&(M=p),a&&a(M,f.childNodes,void 0,h),m=k.length-1;m>=0;m--)o=k[m],na(o,o.isolateScope?p:e,v,C,o.require&&X(o.directiveName,o.require,v,s),u);d(s,function(a){var b=a.instance;y(b.$postLink)&&b.$postLink()})}l=l||{};for(var o,p,q,s,u,v=-Number.MAX_VALUE,w=l.newScopeDirective,x=l.controllerDirectives,z=l.newIsolateScopeDirective,A=l.templateDirective,C=l.nonTlbTranscludeDirective,D=!1,E=!1,F=l.hasElementTranscludeDirective,G=c.$$element=Id(b),I=h,J=f,M=!1,N=!1,O=0,P=a.length;O<P;O++){o=a[O];var Q=o.$$start,W=o.$$end;if(Q&&(G=T(b,Q,W)),q=void 0,v>o.priority)break;if((u=o.scope)&&(o.templateUrl||(t(u)?(ea("new/isolated scope",z||w,o,G),z=o):ea("new/isolated scope",z,o,G)),w=w||o),p=o.name,!M&&(o.replace&&(o.templateUrl||o.template)||o.transclude&&!o.$$tlb)){for(var _,aa=O+1;_=a[aa++];)if(_.transclude&&!_.$$tlb||_.replace&&(_.templateUrl||_.template)){N=!0;break}M=!0}if(!o.templateUrl&&o.controller&&(u=o.controller,x=x||pa(),ea("'"+p+"' controller",x[p],o,G),x[p]=o),u=o.transclude)if(D=!0,o.$$tlb||(ea("transclusion",C,o,G),C=o),"element"==u)F=!0,v=o.priority,q=G,G=c.$$element=Id(K.$$createComment(p,c[p])),b=G[0],la(g,R(q),b),q[0].$$parentNode=q[0].parentNode,J=V(N,q,f,v,I&&I.name,{nonTlbTranscludeDirective:C});else{var da=pa();if(q=Id(Ea(b)).contents(),t(u)){q=[];var fa=pa(),ha=pa();d(u,function(a,b){var c="?"===a.charAt(0);a=c?a.substring(1):a,fa[a]=b,da[b]=null,ha[b]=c}),d(G.contents(),function(a){var b=fa[pb(L(a))];b?(ha[b]=!0,da[b]=da[b]||[],da[b].push(a)):q.push(a)}),d(ha,function(a,b){if(!a)throw Qe("reqslot","Required transclusion slot `{0}` was not filled.",b)});for(var ia in da)da[ia]&&(da[ia]=V(N,da[ia],f))}G.empty(),J=V(N,q,f,void 0,void 0,{needsNewScope:o.$$isolateScope||o.$$newScope}),J.$$slots=da}if(o.template)if(E=!0,ea("template",A,o,G),A=o,u=y(o.template)?o.template(G,c):o.template,u=xa(u),o.replace){if(I=o,q=wa(u)?[]:rb(ga(o.templateNamespace,Vd(u))),b=q[0],1!=q.length||b.nodeType!==be)throw Qe("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p,"");la(g,G,b);var ja={$attr:{}},ka=S(b,[],ja),qa=a.splice(O+1,a.length-(O+1));(z||w)&&$(ka,z,w),a=a.concat(ka).concat(qa),ba(c,ja),P=a.length}else G.html(u);if(o.templateUrl)E=!0,ea("template",A,o,G),A=o,o.replace&&(I=o),n=ca(a.splice(O,a.length-O),G,c,g,D&&J,i,k,{controllerDirectives:x,newScopeDirective:w!==o&&w,newIsolateScopeDirective:z,templateDirective:A,nonTlbTranscludeDirective:C}),P=a.length;else if(o.compile)try{s=o.compile(G,c,J),y(s)?m(null,s,Q,W):s&&m(s.pre,s.post,Q,W)}catch(a){e(a,Z(G))}o.terminal&&(n.terminal=!0,v=Math.max(v,o.priority))}return n.scope=w&&w.scope===!0,n.transcludeOnThisElement=D,n.templateOnThisElement=E,n.transclude=J,l.hasElementTranscludeDirective=F,n}function X(a,b,c,e){var f;if(v(b)){var g=b.match(w),h=b.substring(g[0].length),i=g[1]||g[3],j="?"===g[2];if("^^"===i?c=c.parent():(f=e&&e[h],f=f&&f.instance),!f){var k="$"+h+"Controller";f=i?c.inheritedData(k):c.data(k)}if(!f&&!j)throw Qe("ctreq","Controller '{0}', required by directive '{1}', can't be found!",h,a)}else if(Td(b)){f=[];for(var l=0,m=b.length;l<m;l++)f[l]=X(a,b[l],c,e)}else t(b)&&(f={},d(b,function(b,d){f[d]=X(a,b,c,e)}));return f||null}function Y(a,b,c,d,e,f,g){var h=pa();for(var i in d){var j=d[i],k={$scope:j===g||j.$$isolateScope?e:f,$element:a,$attrs:b,$transclude:c},l=j.controller;"@"==l&&(l=b[j.name]);var m=p(l,k,!0,j.controllerAs);h[j.name]=m,a.data("$"+j.name+"Controller",m.instance)}return h}function $(a,b,c){for(var d=0,e=a.length;d<e;d++)a[d]=m(a[d],{$$isolateScope:b,$$newScope:c})}function _(a,c,d,f,h,j,l){if(c===h)return null;var n=null;if(i.hasOwnProperty(c))for(var o,p=b.get(c+k),q=0,s=p.length;q<s;q++)try{if(o=p[q],(r(f)||f>o.priority)&&o.restrict.indexOf(d)!=-1){if(j&&(o=m(o,{$$start:j,$$end:l})),!o.$$bindings){var u=o.$$bindings=g(o,o.name);t(u.isolateScope)&&(o.$$isolateBindings=u.isolateScope)}a.push(o),n=o}}catch(a){e(a)}return n}function aa(a){if(i.hasOwnProperty(a))for(var c,d=b.get(a+k),e=0,f=d.length;e<f;e++)if(c=d[e],c.multiElement)return!0;return!1}function ba(a,b){var c=b.$attr,e=a.$attr,f=a.$$element;d(a,function(d,e){"$"!=e.charAt(0)&&(b[e]&&b[e]!==d&&(d+=("style"===e?";":" ")+b[e]),a.$set(e,d,!0,c[e]))}),d(b,function(b,d){"class"==d?(J(f,b),a.class=(a.class?a.class+" ":"")+b):"style"==d?(f.attr("style",f.attr("style")+";"+b),a.style=(a.style?a.style+";":"")+b):"$"==d.charAt(0)||a.hasOwnProperty(d)||(a[d]=b,e[d]=c[d])})}function ca(a,b,c,e,g,h,i,j){var k,l,n=[],o=b[0],p=a.shift(),q=m(p,{templateUrl:null,transclude:null,replace:null,$$originalDirective:p}),r=y(p.templateUrl)?p.templateUrl(b,c):p.templateUrl,s=p.templateNamespace;return b.empty(),f(r).then(function(f){var m,u,v,w;if(f=xa(f),p.replace){if(v=wa(f)?[]:rb(ga(s,Vd(f))),m=v[0],1!=v.length||m.nodeType!==be)throw Qe("tplrt","Template for directive '{0}' must have exactly one root element. {1}",p.name,r);u={$attr:{}},la(e,b,m);var x=S(m,[],u);t(p.scope)&&$(x,!0),a=x.concat(a),ba(c,u)}else m=o,b.html(f);for(a.unshift(q),k=W(a,m,c,g,b,p,h,i,j),d(e,function(a,c){a==m&&(e[c]=b[0])}),l=O(b[0].childNodes,g);n.length;){var y=n.shift(),z=n.shift(),A=n.shift(),B=n.shift(),C=b[0];if(!y.$$destroyed){if(z!==o){var D=z.className;j.hasElementTranscludeDirective&&p.replace||(C=Ea(m)),la(A,Id(z),C),J(Id(C),D)}w=k.transcludeOnThisElement?Q(y,k.transclude,B):B,k(l,y,C,e,w)}}n=null}),function(a,b,c,d,e){var f=e;b.$$destroyed||(n?n.push(b,c,d,f):(k.transcludeOnThisElement&&(f=Q(b,k.transclude,e)),k(l,b,c,d,f)))}}function da(a,b){var c=b.priority-a.priority;return 0!==c?c:a.name!==b.name?a.name<b.name?-1:1:a.index-b.index}function ea(a,b,c,d){function e(a){return a?" (module: "+a+")":""}if(b)throw Qe("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",b.name,e(b.$$moduleName),c.name,e(c.$$moduleName),a,Z(d))}function fa(a,b){var d=c(b,!0);d&&a.push({priority:0,compile:function(a){var b=a.parent(),c=!!b.length;return c&&K.$$addBindingClass(b),function(a,b){var e=b.parent();c||K.$$addBindingClass(e),K.$$addBindingInfo(e,d.expressions),a.$watch(d,function(a){b[0].nodeValue=a})}}})}function ga(b,c){switch(b=Dd(b||"html")){case"svg":case"math":var d=a.document.createElement("div");return d.innerHTML="<"+b+">"+c+"</"+b+">",d.childNodes[0].childNodes;default:return c}}function ha(a,b){if("srcdoc"==b)return z.HTML;var c=L(a);return"xlinkHref"==b||"form"==c&&"action"==b||"img"!=c&&("src"==b||"ngSrc"==b)?z.RESOURCE_URL:void 0}function ja(a,b,d,e,f){var g=ha(a,e);f=u[e]||f;var h=c(d,!0,g,f);if(h){if("multiple"===e&&"select"===L(a))throw Qe("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",Z(a));b.push({priority:100,compile:function(){return{pre:function(a,b,i){var j=i.$$observers||(i.$$observers=pa());if(x.test(e))throw Qe("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");var k=i[e];k!==d&&(h=k&&c(k,!0,g,f),d=k),h&&(i[e]=h(a),(j[e]||(j[e]=[])).$$inter=!0,(i.$$observers&&i.$$observers[e].$$scope||a).$watch(h,function(a,b){"class"===e&&a!=b?i.$updateClass(a,b):i.$set(e,a)}))}}}})}}function la(b,c,d){var e,f,g=c[0],h=c.length,i=g.parentNode;if(b)for(e=0,f=b.length;e<f;e++)if(b[e]==g){b[e++]=d;for(var j=e,k=j+h-1,l=b.length;j<l;j++,k++)k<l?b[j]=b[k]:delete b[j];b.length-=h-1,b.context===g&&(b.context=d);break}i&&i.replaceChild(d,g);var m=a.document.createDocumentFragment();for(e=0;e<h;e++)m.appendChild(c[e]);for(Id.hasData(g)&&(Id.data(d,Id.data(g)),Id(g).off("$destroy")),Id.cleanData(m.querySelectorAll("*")),e=1;e<h;e++)delete c[e];c[0]=d,c.length=1}function ma(a,b){return j(function(){return a.apply(null,arguments)},a,b)}function na(a,b,c,d,f,g){try{a(b,c,d,f,g)}catch(a){e(a,Z(c))}}function oa(a,b,e,f,g){function i(b,c,d){y(e.$onChanges)&&c!==d&&(qa||(a.$$postDigest(G),qa=[]),k||(k={},qa.push(j)),k[b]&&(d=k[b].previousValue),k[b]=new ob(d,c))}function j(){e.$onChanges(k),k=void 0}var k,l=[],m={};return d(f,function(d,f){var j,k,o,p,q,r=d.attrName,s=d.optional,t=d.mode;switch(t){case"@":s||Cd.call(b,r)||(e[f]=b[r]=void 0),b.$observe(r,function(a){if(v(a)||F(a)){var b=e[f];i(f,a,b),e[f]=a}}),b.$$observers[r].$$scope=a,j=b[r],v(j)?e[f]=c(j)(a):F(j)&&(e[f]=j),m[f]=new ob(Re,e[f]);break;case"=":if(!Cd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),p=k.literal?P:function(a,b){return a===b||a!==a&&b!==b},o=k.assign||function(){throw j=e[f]=k(a),Qe("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",b[r],r,g.name)},j=e[f]=k(a);var u=function(b){return p(b,e[f])||(p(b,j)?o(a,b=e[f]):e[f]=b),j=b};u.$stateful=!0,q=d.collection?a.$watchCollection(b[r],u):a.$watch(h(b[r],u),null,k.literal),l.push(q);break;case"<":if(!Cd.call(b,r)){if(s)break;b[r]=void 0}if(s&&!b[r])break;k=h(b[r]),e[f]=k(a),m[f]=new ob(Re,e[f]),q=a.$watch(k,function(a,b){a===b&&(b=e[f]),i(f,a,b),e[f]=a},k.literal),l.push(q);break;case"&":if(k=b.hasOwnProperty(r)?h(b[r]):n,k===n&&s)break;e[f]=function(b){return k(a,b)}}}),{initialChanges:m,removeWatches:l.length&&function(){for(var a=0,b=l.length;a<b;++a)l[a]()}}}var qa,ra=/^\w/,sa=a.document.createElement("div"),ta=C;H.prototype={$normalize:pb,$addClass:function(a){a&&a.length>0&&D.addClass(this.$$element,a)},$removeClass:function(a){a&&a.length>0&&D.removeClass(this.$$element,a)},$updateClass:function(a,b){var c=qb(a,b);c&&c.length&&D.addClass(this.$$element,c);var d=qb(b,a);d&&d.length&&D.removeClass(this.$$element,d)},$set:function(a,b,c,f){var g,h=this.$$element[0],i=Ta(h,a),j=Ua(a),k=a;if(i?(this.$$element.prop(a,b),f=i):j&&(this[j]=b,k=j),this[a]=b,f?this.$attr[a]=f:(f=this.$attr[a],f||(this.$attr[a]=f=ia(a,"-"))),g=L(this.$$element),"a"===g&&("href"===a||"xlinkHref"===a)||"img"===g&&"src"===a)this[a]=b=E(b,"src"===a);else if("img"===g&&"srcset"===a){for(var l="",m=Vd(b),n=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,o=/\s/.test(m)?n:/(,)/,p=m.split(o),q=Math.floor(p.length/2),s=0;s<q;s++){var t=2*s;l+=E(Vd(p[t]),!0),l+=" "+Vd(p[t+1])}var u=Vd(p[2*s]).split(/\s/);l+=E(Vd(u[0]),!0),2===u.length&&(l+=" "+Vd(u[1])),this[a]=b=l}c!==!1&&(null===b||r(b)?this.$$element.removeAttr(f):ra.test(f)?this.$$element.attr(f,b):I(this.$$element[0],f,b));var v=this.$$observers;v&&d(v[k],function(a){try{a(b)}catch(a){e(a)}})},$observe:function(a,b){var c=this,d=c.$$observers||(c.$$observers=pa()),e=d[a]||(d[a]=[]);return e.push(b),s.$evalAsync(function(){e.$$inter||!c.hasOwnProperty(a)||r(c[a])||b(c[a])}),function(){M(e,b)}}};var ua=c.startSymbol(),va=c.endSymbol(),xa="{{"==ua&&"}}"==va?o:function(a){return a.replace(/\{\{/g,ua).replace(/}}/g,va)},ya=/^ngAttr[A-Z]/,za=/^(.+)Start$/;return K.$$addBindingInfo=A?function(a,b){var c=a.data("$binding")||[];Td(b)?c=c.concat(b):c.push(b),a.data("$binding",c)}:n,K.$$addBindingClass=A?function(a){J(a,"ng-binding")}:n,K.$$addScopeInfo=A?function(a,b,c,d){var e=c?d?"$isolateScopeNoTemplate":"$isolateScope":"$scope";a.data(e,b)}:n,K.$$addScopeClass=A?function(a,b){J(a,b?"ng-isolate-scope":"ng-scope")}:n,K.$$createComment=function(b,c){var d="";return A&&(d=" "+(b||"")+": "+(c||"")+" "),a.document.createComment(d)},K}]}function ob(a,b){this.previousValue=a,this.currentValue=b}function pb(a){return va(a.replace(Se,""))}function qb(a,b){var c="",d=a.split(/\s+/),e=b.split(/\s+/);a:for(var f=0;f<d.length;f++){for(var g=d[f],h=0;h<e.length;h++)if(g==e[h])continue a;c+=(c.length>0?" ":"")+g}return c}function rb(a){a=Id(a);var b=a.length;if(b<=1)return a;for(;b--;){var c=a[b];c.nodeType===ee&&Md.call(a,b,1)}return a}function sb(a,b){if(b&&v(b))return b;if(v(a)){var c=Ue.exec(a);if(c)return c[3]}}function tb(){var a={},c=!1;this.has=function(b){return a.hasOwnProperty(b)},this.register=function(b,c){ma(b,"controller"),t(b)?j(a,b):a[b]=c},this.allowGlobals=function(){c=!0},this.$get=["$injector","$window",function(d,e){function f(a,c,d,e){if(!a||!t(a.$scope))throw b("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",e,c);a.$scope[c]=d}return function(b,g,h,i){var k,l,m,n;if(h=h===!0,i&&v(i)&&(n=i),v(b)){if(l=b.match(Ue),!l)throw Te("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",b);m=l[1],n=n||l[3],b=a.hasOwnProperty(m)?a[m]:na(g.$scope,m,!0)||(c?na(e,m,!0):void 0),la(b,m,!0)}if(h){var o=(Td(b)?b[b.length-1]:b).prototype;k=Object.create(o||null),n&&f(g,n,k,m||b.name);var p;return p=j(function(){var a=d.invoke(b,k,g,m);return a!==k&&(t(a)||y(a))&&(k=a,n&&f(g,n,k,m||b.name)),k},{instance:k,identifier:n})}return k=d.instantiate(b,g,m),n&&f(g,n,k,m||b.name),k}}]}function ub(){this.$get=["$window",function(a){return Id(a.document)}]}function vb(){this.$get=["$log",function(a){return function(b,c){a.error.apply(a,arguments)}}]}function wb(a){return t(a)?x(a)?a.toISOString():U(a):a}function xb(){this.$get=function(){return function(a){if(!a)return"";var b=[];return e(a,function(a,c){null===a||r(a)||(Td(a)?d(a,function(a){b.push(ca(c)+"="+ca(wb(a)))}):b.push(ca(c)+"="+ca(wb(a))))}),b.join("&")}}}function yb(){this.$get=function(){return function(a){function b(a,f,g){null===a||r(a)||(Td(a)?d(a,function(a,c){b(a,f+"["+(t(a)?c:"")+"]")}):t(a)&&!x(a)?e(a,function(a,c){b(a,f+(g?"":"[")+c+(g?"":"]"))}):c.push(ca(f)+"="+ca(wb(a))))}if(!a)return"";var c=[];return b(a,"",!0),c.join("&")}}}function zb(a,b){if(v(a)){var c=a.replace($e,"").trim();if(c){var d=b("Content-Type");(d&&0===d.indexOf(We)||Ab(c))&&(a=V(c))}}return a}function Ab(a){var b=a.match(Ye);return b&&Ze[b[0]].test(a)}function Bb(a){function b(a,b){a&&(e[a]=e[a]?e[a]+", "+b:b)}var c,e=pa();return v(a)?d(a.split("\n"),function(a){c=a.indexOf(":"),b(Dd(Vd(a.substr(0,c))),Vd(a.substr(c+1)))}):t(a)&&d(a,function(a,c){b(Dd(c),Vd(a))}),e}function Cb(a){var b;return function(c){if(b||(b=Bb(a)),c){var d=b[Dd(c)];return void 0===d&&(d=null),d}return b}}function Db(a,b,c,e){return y(e)?e(a,b,c):(d(e,function(d){a=d(a,b,c)}),a)}function Eb(a){return 200<=a&&a<300}function Fb(){var a=this.defaults={transformResponse:[zb],transformRequest:[function(a){return!t(a)||C(a)||E(a)||D(a)?a:U(a)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:O(Xe),put:O(Xe),patch:O(Xe)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer"},c=!1;this.useApplyAsync=function(a){return s(a)?(c=!!a,this):c};var e=!0;this.useLegacyPromiseExtensions=function(a){return s(a)?(e=!!a,this):e};var f=this.interceptors=[];this.$get=["$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector",function(g,h,i,k,l,m){function n(c){function f(a){var b=j({},a);return b.data=Db(a.data,a.headers,a.status,i.transformResponse),Eb(a.status)?b:l.reject(b)}function g(a,b){var c,e={};return d(a,function(a,d){y(a)?(c=a(b),null!=c&&(e[d]=c)):e[d]=a}),e}function h(b){var c,d,e,f=a.headers,h=j({},b.headers);f=j({},f.common,f[Dd(b.method)]);a:for(c in f){d=Dd(c);for(e in h)if(Dd(e)===d)continue a;h[c]=f[c]}return g(h,O(b))}if(!t(c))throw b("$http")("badreq","Http request configuration must be an object.  Received: {0}",c);if(!v(c.url))throw b("$http")("badreq","Http request configuration url must be a string.  Received: {0}",c.url);var i=j({method:"get",transformRequest:a.transformRequest,transformResponse:a.transformResponse,paramSerializer:a.paramSerializer},c);i.headers=h(c),i.method=Ed(i.method),i.paramSerializer=v(i.paramSerializer)?m.get(i.paramSerializer):i.paramSerializer;var k=function(b){var c=b.headers,e=Db(b.data,Cb(c),void 0,b.transformRequest);return r(e)&&d(c,function(a,b){"content-type"===Dd(b)&&delete c[b]}),r(b.withCredentials)&&!r(a.withCredentials)&&(b.withCredentials=a.withCredentials),q(b,e).then(f,f)},n=[k,void 0],o=l.when(i);for(d(x,function(a){(a.request||a.requestError)&&n.unshift(a.request,a.requestError),(a.response||a.responseError)&&n.push(a.response,a.responseError)});n.length;){var p=n.shift(),s=n.shift();o=o.then(p,s)}return e?(o.success=function(a){return la(a,"fn"),o.then(function(b){a(b.data,b.status,b.headers,i)}),o},o.error=function(a){return la(a,"fn"),o.then(null,function(b){a(b.data,b.status,b.headers,i)}),o}):(o.success=af("success"),o.error=af("error")),o}function o(a){d(arguments,function(a){n[a]=function(b,c){return n(j({},c||{},{method:a,url:b}))}})}function p(a){d(arguments,function(a){n[a]=function(b,c,d){return n(j({},d||{},{method:a,url:b,data:c}))}})}function q(b,e){function f(a){if(a){var b={};return d(a,function(a,d){b[d]=function(b){function d(){a(b)}c?k.$applyAsync(d):k.$$phase?d():k.$apply(d)}}),b}}function i(a,b,d,e){function f(){j(b,a,d,e)}p&&(Eb(a)?p.put(z,[a,b,Bb(d),e]):p.remove(z)),c?k.$applyAsync(f):(f(),k.$$phase||k.$apply())}function j(a,c,d,e){c=c>=-1?c:0,(Eb(c)?v.resolve:v.reject)({data:a,status:c,headers:Cb(d),config:b,statusText:e})}function m(a){j(a.data,a.status,O(a.headers()),a.statusText)}function o(){var a=n.pendingRequests.indexOf(b);a!==-1&&n.pendingRequests.splice(a,1)}var p,q,v=l.defer(),x=v.promise,y=b.headers,z=u(b.url,b.paramSerializer(b.params));if(n.pendingRequests.push(b),x.then(o,o),!b.cache&&!a.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(p=t(b.cache)?b.cache:t(a.cache)?a.cache:w),p&&(q=p.get(z),s(q)?G(q)?q.then(m,m):Td(q)?j(q[1],q[0],O(q[2]),q[3]):j(q,200,{},"OK"):p.put(z,x)),r(q)){var A=Gc(b.url)?h()[b.xsrfCookieName||a.xsrfCookieName]:void 0;A&&(y[b.xsrfHeaderName||a.xsrfHeaderName]=A),g(b.method,z,e,i,y,b.timeout,b.withCredentials,b.responseType,f(b.eventHandlers),f(b.uploadEventHandlers))}return x}function u(a,b){return b.length>0&&(a+=(a.indexOf("?")==-1?"?":"&")+b),a}var w=i("$http");a.paramSerializer=v(a.paramSerializer)?m.get(a.paramSerializer):a.paramSerializer;var x=[];return d(f,function(a){x.unshift(v(a)?m.get(a):m.invoke(a))}),n.pendingRequests=[],o("get","delete","head","jsonp"),p("post","put","patch"),n.defaults=a,n}]}function Gb(){this.$get=function(){return function(){return new a.XMLHttpRequest}}}function Hb(){this.$get=["$browser","$window","$document","$xhrFactory",function(a,b,c,d){return Ib(a,d,a.defer,b.angular.callbacks,c[0])}]}function Ib(a,b,c,e,f){function g(a,b,c){var d=f.createElement("script"),g=null;return d.type="text/javascript",d.src=a,d.async=!0,g=function(a){le(d,"load",g),le(d,"error",g),f.body.removeChild(d),d=null;var h=-1,i="unknown";a&&("load"!==a.type||e[b].called||(a={type:"error"}),i=a.type,h="error"===a.type?404:200),c&&c(h,i)},ke(d,"load",g),ke(d,"error",g),f.body.appendChild(d),g}return function(f,h,i,j,k,l,m,o,p,q){function t(){w&&w(),x&&x.abort()}function u(b,d,e,f,g){s(z)&&c.cancel(z),w=x=null,b(d,e,f,g),a.$$completeOutstandingRequest(n)}if(a.$$incOutstandingRequestCount(),h=h||a.url(),"jsonp"==Dd(f)){var v="_"+(e.counter++).toString(36);e[v]=function(a){e[v].data=a,e[v].called=!0};var w=g(h.replace("JSON_CALLBACK","angular.callbacks."+v),v,function(a,b){u(j,a,e[v].data,"",b),e[v]=n})}else{var x=b(f,h);x.open(f,h,!0),d(k,function(a,b){s(a)&&x.setRequestHeader(b,a)}),x.onload=function(){var a=x.statusText||"",b="response"in x?x.response:x.responseText,c=1223===x.status?204:x.status;0===c&&(c=b?200:"file"==Fc(h).protocol?404:0),u(j,c,b,x.getAllResponseHeaders(),a)};var y=function(){u(j,-1,null,null,"")};if(x.onerror=y,x.onabort=y,d(p,function(a,b){x.addEventListener(b,a)}),d(q,function(a,b){x.upload.addEventListener(b,a)}),m&&(x.withCredentials=!0),o)try{x.responseType=o}catch(a){if("json"!==o)throw a}x.send(r(i)?null:i)}if(l>0)var z=c(t,l);else G(l)&&l.then(t)}}function Jb(){var a="{{",b="}}";this.startSymbol=function(b){return b?(a=b,this):a},this.endSymbol=function(a){return a?(b=a,this):b},this.$get=["$parse","$exceptionHandler","$sce",function(c,d,e){function f(a){return"\\\\\\"+a}function g(c){return c.replace(n,a).replace(o,b)}function h(a){if(null==a)return"";switch(typeof a){case"string":break;case"number":a=""+a;break;default:a=U(a)}return a}function i(a,b,c,d){var e;return e=a.$watch(function(a){return e(),d(a)},b,c)}function k(f,k,n,o){function q(a){try{return a=G(a),o&&!s(a)?a:h(a)}catch(a){d(bf.interr(f,a))}}if(!f.length||f.indexOf(a)===-1){var t;if(!k){var u=g(f);t=p(u),t.exp=f,t.expressions=[],t.$$watchDelegate=i}return t}o=!!o;for(var v,w,x,z=0,A=[],B=[],C=f.length,D=[],E=[];z<C;){if((v=f.indexOf(a,z))==-1||(w=f.indexOf(b,v+l))==-1){z!==C&&D.push(g(f.substring(z)));break}z!==v&&D.push(g(f.substring(z,v))),x=f.substring(v+l,w),A.push(x),B.push(c(x,q)),z=w+m,E.push(D.length),D.push("")}if(n&&D.length>1&&bf.throwNoconcat(f),!k||A.length){var F=function(a){for(var b=0,c=A.length;b<c;b++){if(o&&r(a[b]))return;D[E[b]]=a[b]}return D.join("")},G=function(a){return n?e.getTrusted(n,a):e.valueOf(a)};return j(function(a){var b=0,c=A.length,e=new Array(c);try{for(;b<c;b++)e[b]=B[b](a);return F(e)}catch(a){d(bf.interr(f,a))}},{exp:f,expressions:A,$$watchDelegate:function(a,b){var c;return a.$watchGroup(B,function(d,e){var f=F(d);y(b)&&b.call(this,f,d!==e?c:f,a),c=f})}})}}var l=a.length,m=b.length,n=new RegExp(a.replace(/./g,f),"g"),o=new RegExp(b.replace(/./g,f),"g");return k.startSymbol=function(){return a},k.endSymbol=function(){return b},k}]}function Kb(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(a,b,c,d,e){function f(f,h,i,j){function k(){l?f.apply(null,m):f(p)}var l=arguments.length>4,m=l?R(arguments,4):[],n=b.setInterval,o=b.clearInterval,p=0,q=s(j)&&!j,r=(q?d:c).defer(),t=r.promise;return i=s(i)?i:0,t.$$intervalId=n(function(){q?e.defer(k):a.$evalAsync(k),r.notify(p++),i>0&&p>=i&&(r.resolve(p),o(t.$$intervalId),delete g[t.$$intervalId]),q||a.$apply()},h),g[t.$$intervalId]=r,t}var g={};return f.cancel=function(a){return!!(a&&a.$$intervalId in g)&&(g[a.$$intervalId].reject("canceled"),b.clearInterval(a.$$intervalId),delete g[a.$$intervalId],!0)},f}]}function Lb(a){for(var b=a.split("/"),c=b.length;c--;)b[c]=ba(b[c]);return b.join("/")}function Mb(a,b){var c=Fc(a);b.$$protocol=c.protocol,b.$$host=c.hostname,b.$$port=l(c.port)||df[c.protocol]||null}function Nb(a,b){var c="/"!==a.charAt(0);c&&(a="/"+a);var d=Fc(a);b.$$path=decodeURIComponent(c&&"/"===d.pathname.charAt(0)?d.pathname.substring(1):d.pathname),b.$$search=_(d.search),b.$$hash=decodeURIComponent(d.hash),b.$$path&&"/"!=b.$$path.charAt(0)&&(b.$$path="/"+b.$$path)}function Ob(a,b){if(0===b.indexOf(a))return b.substr(a.length)}function Pb(a){var b=a.indexOf("#");return b==-1?a:a.substr(0,b)}function Qb(a){return a.replace(/(#.+)|#$/,"$1")}function Rb(a){return a.substr(0,Pb(a).lastIndexOf("/")+1)}function Sb(a){return a.substring(0,a.indexOf("/",a.indexOf("//")+2))}function Tb(a,b,c){this.$$html5=!0,c=c||"",Mb(a,this),this.$$parse=function(a){var c=Ob(b,a);if(!v(c))throw ef("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',a,b);Nb(c,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var a=aa(this.$$search),c=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Lb(this.$$path)+(a?"?"+a:"")+c,this.$$absUrl=b+this.$$url.substr(1)},this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g,h;return s(f=Ob(a,d))?(g=f,h=s(f=Ob(c,f))?b+(Ob("/",f)||f):a+g):s(f=Ob(b,d))?h=b+f:b==d+"/"&&(h=b),h&&this.$$parse(h),!!h}}function Ub(a,b,c){Mb(a,this),this.$$parse=function(d){function e(a,b,c){var d,e=/^\/[A-Z]:(\/.*)/;return 0===b.indexOf(c)&&(b=b.replace(c,"")),e.exec(b)?a:(d=e.exec(a),d?d[1]:a)}var f,g=Ob(a,d)||Ob(b,d);r(g)||"#"!==g.charAt(0)?this.$$html5?f=g:(f="",r(g)&&(a=d,this.replace())):(f=Ob(c,g),r(f)&&(f=g)),Nb(f,this),this.$$path=e(this.$$path,f,a),this.$$compose()},this.$$compose=function(){var b=aa(this.$$search),d=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Lb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+(this.$$url?c+this.$$url:"")},this.$$parseLinkUrl=function(b,c){
return Pb(a)==Pb(b)&&(this.$$parse(b),!0)}}function Vb(a,b,c){this.$$html5=!0,Ub.apply(this,arguments),this.$$parseLinkUrl=function(d,e){if(e&&"#"===e[0])return this.hash(e.slice(1)),!0;var f,g;return a==Pb(d)?f=d:(g=Ob(b,d))?f=a+c+g:b===d+"/"&&(f=b),f&&this.$$parse(f),!!f},this.$$compose=function(){var b=aa(this.$$search),d=this.$$hash?"#"+ba(this.$$hash):"";this.$$url=Lb(this.$$path)+(b?"?"+b:"")+d,this.$$absUrl=a+c+this.$$url}}function Wb(a){return function(){return this[a]}}function Xb(a,b){return function(c){return r(c)?this[a]:(this[a]=b(c),this.$$compose(),this)}}function Yb(){var a="",b={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(b){return s(b)?(a=b,this):a},this.html5Mode=function(a){return F(a)?(b.enabled=a,this):t(a)?(F(a.enabled)&&(b.enabled=a.enabled),F(a.requireBase)&&(b.requireBase=a.requireBase),F(a.rewriteLinks)&&(b.rewriteLinks=a.rewriteLinks),this):b},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(c,d,e,f,g){function h(a,b,c){var e=j.url(),f=j.$$state;try{d.url(a,b,c),j.$$state=d.state()}catch(a){throw j.url(e),j.$$state=f,a}}function i(a,b){c.$broadcast("$locationChangeSuccess",j.absUrl(),a,j.$$state,b)}var j,k,l,m=d.baseHref(),n=d.url();if(b.enabled){if(!m&&b.requireBase)throw ef("nobase","$location in HTML5 mode requires a <base> tag to be present!");l=Sb(n)+(m||"/"),k=e.history?Tb:Vb}else l=Pb(n),k=Ub;var o=Rb(l);j=new k(l,o,"#"+a),j.$$parseLinkUrl(n,n),j.$$state=d.state();var p=/^\s*(javascript|mailto):/i;f.on("click",function(a){if(b.rewriteLinks&&!a.ctrlKey&&!a.metaKey&&!a.shiftKey&&2!=a.which&&2!=a.button){for(var e=Id(a.target);"a"!==L(e[0]);)if(e[0]===f[0]||!(e=e.parent())[0])return;var h=e.prop("href"),i=e.attr("href")||e.attr("xlink:href");t(h)&&"[object SVGAnimatedString]"===h.toString()&&(h=Fc(h.animVal).href),p.test(h)||!h||e.attr("target")||a.isDefaultPrevented()||j.$$parseLinkUrl(h,i)&&(a.preventDefault(),j.absUrl()!=d.url()&&(c.$apply(),g.angular["ff-684208-preventDefault"]=!0))}}),Qb(j.absUrl())!=Qb(n)&&d.url(j.absUrl(),!0);var q=!0;return d.onUrlChange(function(a,b){return r(Ob(o,a))?void(g.location.href=a):(c.$evalAsync(function(){var d,e=j.absUrl(),f=j.$$state;a=Qb(a),j.$$parse(a),j.$$state=b,d=c.$broadcast("$locationChangeStart",a,e,b,f).defaultPrevented,j.absUrl()===a&&(d?(j.$$parse(e),j.$$state=f,h(e,!1,f)):(q=!1,i(e,f)))}),void(c.$$phase||c.$digest()))}),c.$watch(function(){var a=Qb(d.url()),b=Qb(j.absUrl()),f=d.state(),g=j.$$replace,k=a!==b||j.$$html5&&e.history&&f!==j.$$state;(q||k)&&(q=!1,c.$evalAsync(function(){var b=j.absUrl(),d=c.$broadcast("$locationChangeStart",b,a,j.$$state,f).defaultPrevented;j.absUrl()===b&&(d?(j.$$parse(a),j.$$state=f):(k&&h(b,g,f===j.$$state?null:j.$$state),i(a,f)))})),j.$$replace=!1}),j}]}function Zb(){var a=!0,b=this;this.debugEnabled=function(b){return s(b)?(a=b,this):a},this.$get=["$window",function(c){function e(a){return a instanceof Error&&(a.stack?a=a.message&&a.stack.indexOf(a.message)===-1?"Error: "+a.message+"\n"+a.stack:a.stack:a.sourceURL&&(a=a.message+"\n"+a.sourceURL+":"+a.line)),a}function f(a){var b=c.console||{},f=b[a]||b.log||n,g=!1;try{g=!!f.apply}catch(a){}return g?function(){var a=[];return d(arguments,function(b){a.push(e(b))}),f.apply(b,a)}:function(a,b){f(a,null==b?"":b)}}return{log:f("log"),info:f("info"),warn:f("warn"),error:f("error"),debug:function(){var c=f("debug");return function(){a&&c.apply(b,arguments)}}()}}]}function $b(a,b){if("__defineGetter__"===a||"__defineSetter__"===a||"__lookupGetter__"===a||"__lookupSetter__"===a||"__proto__"===a)throw gf("isecfld","Attempting to access a disallowed field in Angular expressions! Expression: {0}",b);return a}function _b(a){return a+""}function ac(a,b){if(a){if(a.constructor===a)throw gf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a.window===a)throw gf("isecwindow","Referencing the Window in Angular expressions is disallowed! Expression: {0}",b);if(a.children&&(a.nodeName||a.prop&&a.attr&&a.find))throw gf("isecdom","Referencing DOM nodes in Angular expressions is disallowed! Expression: {0}",b);if(a===Object)throw gf("isecobj","Referencing Object in Angular expressions is disallowed! Expression: {0}",b)}return a}function bc(a,b){if(a){if(a.constructor===a)throw gf("isecfn","Referencing Function in Angular expressions is disallowed! Expression: {0}",b);if(a===hf||a===jf||a===kf)throw gf("isecff","Referencing call, apply or bind in Angular expressions is disallowed! Expression: {0}",b)}}function cc(a,b){if(a&&(a===(0).constructor||a===(!1).constructor||a==="".constructor||a==={}.constructor||a===[].constructor||a===Function.constructor))throw gf("isecaf","Assigning to a constructor is disallowed! Expression: {0}",b)}function dc(a,b){return"undefined"!=typeof a?a:b}function ec(a,b){return"undefined"==typeof a?b:"undefined"==typeof b?a:a+b}function fc(a,b){var c=a(b);return!c.$stateful}function gc(a,b){var c,e;switch(a.type){case of.Program:c=!0,d(a.body,function(a){gc(a.expression,b),c=c&&a.expression.constant}),a.constant=c;break;case of.Literal:a.constant=!0,a.toWatch=[];break;case of.UnaryExpression:gc(a.argument,b),a.constant=a.argument.constant,a.toWatch=a.argument.toWatch;break;case of.BinaryExpression:gc(a.left,b),gc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.left.toWatch.concat(a.right.toWatch);break;case of.LogicalExpression:gc(a.left,b),gc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=a.constant?[]:[a];break;case of.ConditionalExpression:gc(a.test,b),gc(a.alternate,b),gc(a.consequent,b),a.constant=a.test.constant&&a.alternate.constant&&a.consequent.constant,a.toWatch=a.constant?[]:[a];break;case of.Identifier:a.constant=!1,a.toWatch=[a];break;case of.MemberExpression:gc(a.object,b),a.computed&&gc(a.property,b),a.constant=a.object.constant&&(!a.computed||a.property.constant),a.toWatch=[a];break;case of.CallExpression:c=!!a.filter&&fc(b,a.callee.name),e=[],d(a.arguments,function(a){gc(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=a.filter&&fc(b,a.callee.name)?e:[a];break;case of.AssignmentExpression:gc(a.left,b),gc(a.right,b),a.constant=a.left.constant&&a.right.constant,a.toWatch=[a];break;case of.ArrayExpression:c=!0,e=[],d(a.elements,function(a){gc(a,b),c=c&&a.constant,a.constant||e.push.apply(e,a.toWatch)}),a.constant=c,a.toWatch=e;break;case of.ObjectExpression:c=!0,e=[],d(a.properties,function(a){gc(a.value,b),c=c&&a.value.constant,a.value.constant||e.push.apply(e,a.value.toWatch)}),a.constant=c,a.toWatch=e;break;case of.ThisExpression:a.constant=!1,a.toWatch=[];break;case of.LocalsExpression:a.constant=!1,a.toWatch=[]}}function hc(a){if(1==a.length){var b=a[0].expression,c=b.toWatch;return 1!==c.length?c:c[0]!==b?c:void 0}}function ic(a){return a.type===of.Identifier||a.type===of.MemberExpression}function jc(a){if(1===a.body.length&&ic(a.body[0].expression))return{type:of.AssignmentExpression,left:a.body[0].expression,right:{type:of.NGValueParameter},operator:"="}}function kc(a){return 0===a.body.length||1===a.body.length&&(a.body[0].expression.type===of.Literal||a.body[0].expression.type===of.ArrayExpression||a.body[0].expression.type===of.ObjectExpression)}function lc(a){return a.constant}function mc(a,b){this.astBuilder=a,this.$filter=b}function nc(a,b){this.astBuilder=a,this.$filter=b}function oc(a){return"constructor"==a}function pc(a){return y(a.valueOf)?a.valueOf():qf.call(a)}function qc(){var a,b,c=pa(),e=pa(),f={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(a,b){f[a]=b},this.setIdentifierFns=function(c,d){return a=c,b=d,this},this.$get=["$filter",function(g){function h(a,b,d){var f,h,j;switch(d=d||u,typeof a){case"string":a=a.trim(),j=a;var q=d?e:c;if(f=q[j],!f){":"===a.charAt(0)&&":"===a.charAt(1)&&(h=!0,a=a.substring(2));var s=d?t:r,v=new nf(s),w=new pf(v,g,s);f=w.parse(a),f.constant?f.$$watchDelegate=o:h?f.$$watchDelegate=f.literal?m:l:f.inputs&&(f.$$watchDelegate=k),d&&(f=i(f)),q[j]=f}return p(f,b);case"function":return p(a,b);default:return p(n,b)}}function i(a){function b(b,c,d,e){var f=u;u=!0;try{return a(b,c,d,e)}finally{u=f}}if(!a)return a;b.$$watchDelegate=a.$$watchDelegate,b.assign=i(a.assign),b.constant=a.constant,b.literal=a.literal;for(var c=0;a.inputs&&c<a.inputs.length;++c)a.inputs[c]=i(a.inputs[c]);return b.inputs=a.inputs,b}function j(a,b){return null==a||null==b?a===b:("object"!=typeof a||(a=pc(a),"object"!=typeof a))&&(a===b||a!==a&&b!==b)}function k(a,b,c,d,e){var f,g=d.inputs;if(1===g.length){var h=j;return g=g[0],a.$watch(function(a){var b=g(a);return j(b,h)||(f=d(a,void 0,void 0,[b]),h=b&&pc(b)),f},b,c,e)}for(var i=[],k=[],l=0,m=g.length;l<m;l++)i[l]=j,k[l]=null;return a.$watch(function(a){for(var b=!1,c=0,e=g.length;c<e;c++){var h=g[c](a);(b||(b=!j(h,i[c])))&&(k[c]=h,i[c]=h&&pc(h))}return b&&(f=d(a,void 0,void 0,k)),f},b,c,e)}function l(a,b,c,d){var e,f;return e=a.$watch(function(a){return d(a)},function(a,c,d){f=a,y(b)&&b.apply(this,arguments),s(a)&&d.$$postDigest(function(){s(f)&&e()})},c)}function m(a,b,c,e){function f(a){var b=!0;return d(a,function(a){s(a)||(b=!1)}),b}var g,h;return g=a.$watch(function(a){return e(a)},function(a,c,d){h=a,y(b)&&b.call(this,a,c,d),f(a)&&d.$$postDigest(function(){f(h)&&g()})},c)}function o(a,b,c,d){var e;return e=a.$watch(function(a){return e(),d(a)},b,c)}function p(a,b){if(!b)return a;var c=a.$$watchDelegate,d=!1,e=c!==m&&c!==l,f=e?function(c,e,f,g){var h=d&&g?g[0]:a(c,e,f,g);return b(h,c,e)}:function(c,d,e,f){var g=a(c,d,e,f),h=b(g,c,d);return s(g)?h:g};return a.$$watchDelegate&&a.$$watchDelegate!==k?f.$$watchDelegate=a.$$watchDelegate:b.$stateful||(f.$$watchDelegate=k,d=!a.inputs,f.inputs=a.inputs?a.inputs:[a]),f}var q=Xd().noUnsafeEval,r={csp:q,expensiveChecks:!1,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},t={csp:q,expensiveChecks:!0,literals:N(f),isIdentifierStart:y(a)&&a,isIdentifierContinue:y(b)&&b},u=!1;return h.$$runningExpensiveChecks=function(){return u},h}]}function rc(){this.$get=["$rootScope","$exceptionHandler",function(a,b){return tc(function(b){a.$evalAsync(b)},b)}]}function sc(){this.$get=["$browser","$exceptionHandler",function(a,b){return tc(function(b){a.defer(b)},b)}]}function tc(a,c){function e(){this.$$state={status:0}}function f(a,b){return function(c){b.call(a,c)}}function g(a){var b,d,e;e=a.pending,a.processScheduled=!1,a.pending=void 0;for(var f=0,g=e.length;f<g;++f){d=e[f][0],b=e[f][a.status];try{y(b)?d.resolve(b(a.value)):1===a.status?d.resolve(a.value):d.reject(a.value)}catch(a){d.reject(a),c(a)}}}function h(b){!b.processScheduled&&b.pending&&(b.processScheduled=!0,a(function(){g(b)}))}function i(){this.promise=new e}function k(a){var b=new i,c=0,e=Td(a)?[]:{};return d(a,function(a,d){c++,q(a).then(function(a){e.hasOwnProperty(d)||(e[d]=a,--c||b.resolve(e))},function(a){e.hasOwnProperty(d)||b.reject(a)})}),0===c&&b.resolve(e),b.promise}var l=b("$q",TypeError),m=function(){var a=new i;return a.resolve=f(a,a.resolve),a.reject=f(a,a.reject),a.notify=f(a,a.notify),a};j(e.prototype,{then:function(a,b,c){if(r(a)&&r(b)&&r(c))return this;var d=new i;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([d,a,b,c]),this.$$state.status>0&&h(this.$$state),d.promise},catch:function(a){return this.then(null,a)},finally:function(a,b){return this.then(function(b){return p(b,!0,a)},function(b){return p(b,!1,a)},b)}}),j(i.prototype,{resolve:function(a){this.promise.$$state.status||(a===this.promise?this.$$reject(l("qcycle","Expected promise to be resolved with value other than itself '{0}'",a)):this.$$resolve(a))},$$resolve:function(a){function b(a){i||(i=!0,g.$$resolve(a))}function d(a){i||(i=!0,g.$$reject(a))}var e,g=this,i=!1;try{(t(a)||y(a))&&(e=a&&a.then),y(e)?(this.promise.$$state.status=-1,e.call(a,b,d,f(this,this.notify))):(this.promise.$$state.value=a,this.promise.$$state.status=1,h(this.promise.$$state))}catch(a){d(a),c(a)}},reject:function(a){this.promise.$$state.status||this.$$reject(a)},$$reject:function(a){this.promise.$$state.value=a,this.promise.$$state.status=2,h(this.promise.$$state)},notify:function(b){var d=this.promise.$$state.pending;this.promise.$$state.status<=0&&d&&d.length&&a(function(){for(var a,e,f=0,g=d.length;f<g;f++){e=d[f][0],a=d[f][3];try{e.notify(y(a)?a(b):b)}catch(a){c(a)}}})}});var n=function(a){var b=new i;return b.reject(a),b.promise},o=function(a,b){var c=new i;return b?c.resolve(a):c.reject(a),c.promise},p=function(a,b,c){var d=null;try{y(c)&&(d=c())}catch(a){return o(a,!1)}return G(d)?d.then(function(){return o(a,b)},function(a){return o(a,!1)}):o(a,b)},q=function(a,b,c,d){var e=new i;return e.resolve(a),e.promise.then(b,c,d)},s=q,u=function(a){function b(a){d.resolve(a)}function c(a){d.reject(a)}if(!y(a))throw l("norslvr","Expected resolverFn, got '{0}'",a);var d=new i;return a(b,c),d.promise};return u.prototype=e.prototype,u.defer=m,u.reject=n,u.when=q,u.resolve=s,u.all=k,u}function uc(){this.$get=["$window","$timeout",function(a,b){var c=a.requestAnimationFrame||a.webkitRequestAnimationFrame,d=a.cancelAnimationFrame||a.webkitCancelAnimationFrame||a.webkitCancelRequestAnimationFrame,e=!!c,f=e?function(a){var b=c(a);return function(){d(b)}}:function(a){var c=b(a,16.66,!1);return function(){b.cancel(c)}};return f.supported=e,f}]}function vc(){function a(a){function b(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=g(),this.$$ChildScope=null}return b.prototype=a,b}var e=10,f=b("$rootScope"),h=null,i=null;this.digestTtl=function(a){return arguments.length&&(e=a),e},this.$get=["$exceptionHandler","$parse","$browser",function(b,j,k){function l(a){a.currentScope.$$destroyed=!0}function m(a){9===Hd&&(a.$$childHead&&m(a.$$childHead),a.$$nextSibling&&m(a.$$nextSibling)),a.$parent=a.$$nextSibling=a.$$prevSibling=a.$$childHead=a.$$childTail=a.$root=a.$$watchers=null}function o(){this.$id=g(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(a){if(z.$$phase)throw f("inprog","{0} already in progress",z.$$phase);z.$$phase=a}function q(){z.$$phase=null}function s(a,b){do a.$$watchersCount+=b;while(a=a.$parent)}function u(a,b,c){do a.$$listenerCount[c]-=b,0===a.$$listenerCount[c]&&delete a.$$listenerCount[c];while(a=a.$parent)}function v(){}function w(){for(;C.length;)try{C.shift()()}catch(a){b(a)}i=null}function x(){null===i&&(i=k.defer(function(){z.$apply(w)}))}o.prototype={constructor:o,$new:function(b,c){var d;return c=c||this,b?(d=new o,d.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=a(this)),d=new this.$$ChildScope),d.$parent=c,d.$$prevSibling=c.$$childTail,c.$$childHead?(c.$$childTail.$$nextSibling=d,c.$$childTail=d):c.$$childHead=c.$$childTail=d,(b||c!=this)&&d.$on("$destroy",l),d},$watch:function(a,b,c,d){var e=j(a);if(e.$$watchDelegate)return e.$$watchDelegate(this,b,c,e,a);var f=this,g=f.$$watchers,i={fn:b,last:v,get:e,exp:d||a,eq:!!c};return h=null,y(b)||(i.fn=n),g||(g=f.$$watchers=[]),g.unshift(i),s(this,1),function(){M(g,i)>=0&&s(f,-1),h=null}},$watchGroup:function(a,b){function c(){i=!1,j?(j=!1,b(f,f,h)):b(f,e,h)}var e=new Array(a.length),f=new Array(a.length),g=[],h=this,i=!1,j=!0;if(!a.length){var k=!0;return h.$evalAsync(function(){k&&b(f,f,h)}),function(){k=!1}}return 1===a.length?this.$watch(a[0],function(a,c,d){f[0]=a,e[0]=c,b(f,a===c?f:e,d)}):(d(a,function(a,b){var d=h.$watch(a,function(a,d){f[b]=a,e[b]=d,i||(i=!0,h.$evalAsync(c))});g.push(d)}),function(){for(;g.length;)g.shift()()})},$watchCollection:function(a,b){function d(a){f=a;var b,d,e,h,i;if(!r(f)){if(t(f))if(c(f)){g!==n&&(g=n,q=g.length=0,l++),b=f.length,q!==b&&(l++,g.length=q=b);for(var j=0;j<b;j++)i=g[j],h=f[j],e=i!==i&&h!==h,e||i===h||(l++,g[j]=h)}else{g!==o&&(g=o={},q=0,l++),b=0;for(d in f)Cd.call(f,d)&&(b++,h=f[d],i=g[d],d in g?(e=i!==i&&h!==h,e||i===h||(l++,g[d]=h)):(q++,g[d]=h,l++));if(q>b){l++;for(d in g)Cd.call(f,d)||(q--,delete g[d])}}else g!==f&&(g=f,l++);return l}}function e(){if(p?(p=!1,b(f,f,i)):b(f,h,i),k)if(t(f))if(c(f)){h=new Array(f.length);for(var a=0;a<f.length;a++)h[a]=f[a]}else{h={};for(var d in f)Cd.call(f,d)&&(h[d]=f[d])}else h=f}d.$stateful=!0;var f,g,h,i=this,k=b.length>1,l=0,m=j(a,d),n=[],o={},p=!0,q=0;return this.$watch(m,e)},$digest:function(){var a,c,d,g,j,l,m,n,o,r,s,t,u=e,x=this,C=[];p("$digest"),k.$$checkUrlChange(),this===z&&null!==i&&(k.defer.cancel(i),w()),h=null;do{for(n=!1,r=x;A.length;){try{t=A.shift(),t.scope.$eval(t.expression,t.locals)}catch(a){b(a)}h=null}a:do{if(l=r.$$watchers)for(m=l.length;m--;)try{if(a=l[m])if(j=a.get,(c=j(r))===(d=a.last)||(a.eq?P(c,d):"number"==typeof c&&"number"==typeof d&&isNaN(c)&&isNaN(d))){if(a===h){n=!1;break a}}else n=!0,h=a,a.last=a.eq?N(c,null):c,g=a.fn,g(c,d===v?c:d,r),u<5&&(s=4-u,C[s]||(C[s]=[]),C[s].push({msg:y(a.exp)?"fn: "+(a.exp.name||a.exp.toString()):a.exp,newVal:c,oldVal:d}))}catch(a){b(a)}if(!(o=r.$$watchersCount&&r.$$childHead||r!==x&&r.$$nextSibling))for(;r!==x&&!(o=r.$$nextSibling);)r=r.$parent}while(r=o);if((n||A.length)&&!u--)throw q(),f("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",e,C)}while(n||A.length);for(q();B.length;)try{B.shift()()}catch(a){b(a)}},$destroy:function(){if(!this.$$destroyed){var a=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===z&&k.$$applicationDestroyed(),s(this,-this.$$watchersCount);for(var b in this.$$listenerCount)u(this,this.$$listenerCount[b],b);a&&a.$$childHead==this&&(a.$$childHead=this.$$nextSibling),a&&a.$$childTail==this&&(a.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=n,this.$on=this.$watch=this.$watchGroup=function(){return n},this.$$listeners={},this.$$nextSibling=null,m(this)}},$eval:function(a,b){return j(a)(this,b)},$evalAsync:function(a,b){z.$$phase||A.length||k.defer(function(){A.length&&z.$digest()}),A.push({scope:this,expression:j(a),locals:b})},$$postDigest:function(a){B.push(a)},$apply:function(a){try{p("$apply");try{return this.$eval(a)}finally{q()}}catch(a){b(a)}finally{try{z.$digest()}catch(a){throw b(a),a}}},$applyAsync:function(a){function b(){c.$eval(a)}var c=this;a&&C.push(b),a=j(a),x()},$on:function(a,b){var c=this.$$listeners[a];c||(this.$$listeners[a]=c=[]),c.push(b);var d=this;do d.$$listenerCount[a]||(d.$$listenerCount[a]=0),d.$$listenerCount[a]++;while(d=d.$parent);var e=this;return function(){var d=c.indexOf(b);d!==-1&&(c[d]=null,u(e,1,a))}},$emit:function(a,c){var d,e,f,g=[],h=this,i=!1,j={name:a,targetScope:h,stopPropagation:function(){i=!0},preventDefault:function(){j.defaultPrevented=!0},defaultPrevented:!1},k=Q([j],arguments,1);do{for(d=h.$$listeners[a]||g,j.currentScope=h,e=0,f=d.length;e<f;e++)if(d[e])try{d[e].apply(null,k)}catch(a){b(a)}else d.splice(e,1),e--,f--;if(i)return j.currentScope=null,j;h=h.$parent}while(h);return j.currentScope=null,j},$broadcast:function(a,c){var d=this,e=d,f=d,g={name:a,targetScope:d,preventDefault:function(){g.defaultPrevented=!0},defaultPrevented:!1};if(!d.$$listenerCount[a])return g;for(var h,i,j,k=Q([g],arguments,1);e=f;){for(g.currentScope=e,h=e.$$listeners[a]||[],i=0,j=h.length;i<j;i++)if(h[i])try{h[i].apply(null,k)}catch(a){b(a)}else h.splice(i,1),i--,j--;if(!(f=e.$$listenerCount[a]&&e.$$childHead||e!==d&&e.$$nextSibling))for(;e!==d&&!(f=e.$$nextSibling);)e=e.$parent}return g.currentScope=null,g}};var z=new o,A=z.$$asyncQueue=[],B=z.$$postDigestQueue=[],C=z.$$applyAsyncQueue=[];return z}]}function wc(){var a=/^\s*(https?|ftp|mailto|tel|file):/,b=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(b){return s(b)?(a=b,this):a},this.imgSrcSanitizationWhitelist=function(a){return s(a)?(b=a,this):b},this.$get=function(){return function(c,d){var e,f=d?b:a;return e=Fc(c).href,""===e||e.match(f)?c:"unsafe:"+e}}}function xc(a){if("self"===a)return a;if(v(a)){if(a.indexOf("***")>-1)throw rf("iwcard","Illegal sequence *** in string matcher.  String: {0}",a);return a=Wd(a).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+a+"$")}if(z(a))return new RegExp("^"+a.source+"$");throw rf("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function yc(a){var b=[];return s(a)&&d(a,function(a){b.push(xc(a))}),b}function zc(){this.SCE_CONTEXTS=sf;var a=["self"],b=[];this.resourceUrlWhitelist=function(b){return arguments.length&&(a=yc(b)),a},this.resourceUrlBlacklist=function(a){return arguments.length&&(b=yc(a)),b},this.$get=["$injector",function(c){function d(a,b){return"self"===a?Gc(b):!!a.exec(b.href)}function e(c){var e,f,g=Fc(c.toString()),h=!1;for(e=0,f=a.length;e<f;e++)if(d(a[e],g)){h=!0;break}if(h)for(e=0,f=b.length;e<f;e++)if(d(b[e],g)){h=!1;break}return h}function f(a){var b=function(a){this.$$unwrapTrustedValue=function(){return a}};return a&&(b.prototype=new a),b.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},b.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},b}function g(a,b){var c=l.hasOwnProperty(a)?l[a]:null;if(!c)throw rf("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",a,b);if(null===b||r(b)||""===b)return b;if("string"!=typeof b)throw rf("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",a);return new c(b)}function h(a){return a instanceof k?a.$$unwrapTrustedValue():a}function i(a,b){if(null===b||r(b)||""===b)return b;var c=l.hasOwnProperty(a)?l[a]:null;if(c&&b instanceof c)return b.$$unwrapTrustedValue();if(a===sf.RESOURCE_URL){if(e(b))return b;throw rf("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",b.toString())}if(a===sf.HTML)return j(b);throw rf("unsafe","Attempting to use an unsafe value in a safe context.")}var j=function(a){throw rf("unsafe","Attempting to use an unsafe value in a safe context.")};c.has("$sanitize")&&(j=c.get("$sanitize"));var k=f(),l={};return l[sf.HTML]=f(k),l[sf.CSS]=f(k),l[sf.URL]=f(k),l[sf.JS]=f(k),l[sf.RESOURCE_URL]=f(l[sf.URL]),{trustAs:g,getTrusted:i,valueOf:h}}]}function Ac(){var a=!0;this.enabled=function(b){return arguments.length&&(a=!!b),a},this.$get=["$parse","$sceDelegate",function(b,c){if(a&&Hd<8)throw rf("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var e=O(sf);e.isEnabled=function(){return a},e.trustAs=c.trustAs,e.getTrusted=c.getTrusted,e.valueOf=c.valueOf,a||(e.trustAs=e.getTrusted=function(a,b){return b},e.valueOf=o),e.parseAs=function(a,c){var d=b(c);return d.literal&&d.constant?d:b(c,function(b){return e.getTrusted(a,b)})};var f=e.parseAs,g=e.getTrusted,h=e.trustAs;return d(sf,function(a,b){var c=Dd(b);e[va("parse_as_"+c)]=function(b){return f(a,b)},e[va("get_trusted_"+c)]=function(b){return g(a,b)},e[va("trust_as_"+c)]=function(b){return h(a,b)}}),e}]}function Bc(){this.$get=["$window","$document",function(a,b){var c,d,e={},f=a.chrome&&a.chrome.app&&a.chrome.app.runtime,g=!f&&a.history&&a.history.pushState,h=l((/android (\d+)/.exec(Dd((a.navigator||{}).userAgent))||[])[1]),i=/Boxee/i.test((a.navigator||{}).userAgent),j=b[0]||{},k=/^(Moz|webkit|ms)(?=[A-Z])/,m=j.body&&j.body.style,n=!1,o=!1;if(m){for(var p in m)if(d=k.exec(p)){c=d[0],c=c.substr(0,1).toUpperCase()+c.substr(1);break}c||(c="WebkitOpacity"in m&&"webkit"),n=!!("transition"in m||c+"Transition"in m),o=!!("animation"in m||c+"Animation"in m),!h||n&&o||(n=v(m.webkitTransition),o=v(m.webkitAnimation))}return{history:!(!g||h<4||i),hasEvent:function(a){if("input"===a&&Hd<=11)return!1;if(r(e[a])){var b=j.createElement("div");e[a]="on"+a in b}return e[a]},csp:Xd(),vendorPrefix:c,transitions:n,animations:o,android:h}}]}function Cc(){var a;this.httpOptions=function(b){return b?(a=b,this):a},this.$get=["$templateCache","$http","$q","$sce",function(b,c,d,e){function f(g,h){function i(a){if(!h)throw tf("tpload","Failed to load template: {0} (HTTP status: {1} {2})",g,a.status,a.statusText);return d.reject(a)}f.totalPendingRequests++,v(g)&&b.get(g)||(g=e.getTrustedResourceUrl(g));var k=c.defaults&&c.defaults.transformResponse;return Td(k)?k=k.filter(function(a){return a!==zb}):k===zb&&(k=null),c.get(g,j({cache:b,transformResponse:k},a)).finally(function(){f.totalPendingRequests--}).then(function(a){return b.put(g,a.data),a.data},i)}return f.totalPendingRequests=0,f}]}function Dc(){this.$get=["$rootScope","$browser","$location",function(a,b,c){var e={};return e.findBindings=function(a,b,c){var e=a.getElementsByClassName("ng-binding"),f=[];return d(e,function(a){var e=Rd.element(a).data("$binding");e&&d(e,function(d){if(c){var e=new RegExp("(^|\\s)"+Wd(b)+"(\\s|\\||$)");e.test(d)&&f.push(a)}else d.indexOf(b)!=-1&&f.push(a)})}),f},e.findModels=function(a,b,c){for(var d=["ng-","data-ng-","ng\\:"],e=0;e<d.length;++e){var f=c?"=":"*=",g="["+d[e]+"model"+f+'"'+b+'"]',h=a.querySelectorAll(g);if(h.length)return h}},e.getLocation=function(){return c.url()},e.setLocation=function(b){b!==c.url()&&(c.url(b),a.$digest())},e.whenStable=function(a){b.notifyWhenNoOutstandingRequests(a)},e}]}function Ec(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(a,b,c,d,e){function f(f,h,i){y(f)||(i=h,h=f,f=n);var j,k=R(arguments,3),l=s(i)&&!i,m=(l?d:c).defer(),o=m.promise;return j=b.defer(function(){try{m.resolve(f.apply(null,k))}catch(a){m.reject(a),e(a)}finally{delete g[o.$$timeoutId]}l||a.$apply()},h),o.$$timeoutId=j,g[j]=m,o}var g={};return f.cancel=function(a){return!!(a&&a.$$timeoutId in g)&&(g[a.$$timeoutId].reject("canceled"),delete g[a.$$timeoutId],b.defer.cancel(a.$$timeoutId))},f}]}function Fc(a){var b=a;return Hd&&(uf.setAttribute("href",b),b=uf.href),uf.setAttribute("href",b),{href:uf.href,protocol:uf.protocol?uf.protocol.replace(/:$/,""):"",host:uf.host,search:uf.search?uf.search.replace(/^\?/,""):"",hash:uf.hash?uf.hash.replace(/^#/,""):"",hostname:uf.hostname,port:uf.port,pathname:"/"===uf.pathname.charAt(0)?uf.pathname:"/"+uf.pathname}}function Gc(a){var b=v(a)?Fc(a):a;return b.protocol===vf.protocol&&b.host===vf.host}function Hc(){this.$get=p(a)}function Ic(a){function b(a){try{return decodeURIComponent(a)}catch(b){return a}}var c=a[0]||{},d={},e="";return function(){var a,f,g,h,i,j=c.cookie||"";if(j!==e)for(e=j,a=e.split("; "),d={},g=0;g<a.length;g++)f=a[g],h=f.indexOf("="),h>0&&(i=b(f.substring(0,h)),r(d[i])&&(d[i]=b(f.substring(h+1))));return d}}function Jc(){this.$get=Ic}function Kc(a){function b(e,f){if(t(e)){var g={};return d(e,function(a,c){g[c]=b(c,a)}),g}return a.factory(e+c,f)}var c="Filter";this.register=b,this.$get=["$injector",function(a){return function(b){return a.get(b+c)}}],b("currency",Pc),b("date",cd),b("filter",Lc),b("json",dd),b("limitTo",ed),b("lowercase",Cf),b("number",Qc),b("orderBy",fd),b("uppercase",Df)}function Lc(){return function(a,d,e){if(!c(a)){if(null==a)return a;throw b("filter")("notarray","Expected array but received: {0}",a)}var f,g,h=Oc(d);switch(h){case"function":f=d;break;case"boolean":case"null":case"number":case"string":g=!0;case"object":f=Mc(d,e,g);break;default:return a}return Array.prototype.filter.call(a,f)}}function Mc(a,b,c){var d,e=t(a)&&"$"in a;return b===!0?b=P:y(b)||(b=function(a,b){return!r(a)&&(null===a||null===b?a===b:!(t(b)||t(a)&&!q(a))&&(a=Dd(""+a),b=Dd(""+b),a.indexOf(b)!==-1))}),d=function(d){return e&&!t(d)?Nc(d,a.$,b,!1):Nc(d,a,b,c)}}function Nc(a,b,c,d,e){var f=Oc(a),g=Oc(b);if("string"===g&&"!"===b.charAt(0))return!Nc(a,b.substring(1),c,d);if(Td(a))return a.some(function(a){return Nc(a,b,c,d)});switch(f){case"object":var h;if(d){for(h in a)if("$"!==h.charAt(0)&&Nc(a[h],b,c,!0))return!0;return!e&&Nc(a,b,c,!1)}if("object"===g){for(h in b){var i=b[h];if(!y(i)&&!r(i)){var j="$"===h,k=j?a:a[h];if(!Nc(k,i,c,j,j))return!1}}return!0}return c(a,b);case"function":return!1;default:return c(a,b)}}function Oc(a){return null===a?"null":typeof a}function Pc(a){var b=a.NUMBER_FORMATS;return function(a,c,d){return r(c)&&(c=b.CURRENCY_SYM),r(d)&&(d=b.PATTERNS[1].maxFrac),null==a?a:Tc(a,b.PATTERNS[1],b.GROUP_SEP,b.DECIMAL_SEP,d).replace(/\u00A4/g,c)}}function Qc(a){var b=a.NUMBER_FORMATS;return function(a,c){return null==a?a:Tc(a,b.PATTERNS[0],b.GROUP_SEP,b.DECIMAL_SEP,c)}}function Rc(a){var b,c,d,e,f,g=0;for((c=a.indexOf(xf))>-1&&(a=a.replace(xf,"")),(d=a.search(/e/i))>0?(c<0&&(c=d),c+=+a.slice(d+1),a=a.substring(0,d)):c<0&&(c=a.length),d=0;a.charAt(d)==yf;d++);if(d==(f=a.length))b=[0],c=1;else{for(f--;a.charAt(f)==yf;)f--;for(c-=d,b=[],e=0;d<=f;d++,e++)b[e]=+a.charAt(d)}return c>wf&&(b=b.splice(0,wf-1),g=c-1,c=1),{d:b,e:g,i:c}}function Sc(a,b,c,d){var e=a.d,f=e.length-a.i;b=r(b)?Math.min(Math.max(c,f),d):+b;var g=b+a.i,h=e[g];if(g>0){e.splice(Math.max(a.i,g));for(var i=g;i<e.length;i++)e[i]=0}else{f=Math.max(0,f),a.i=1,e.length=Math.max(1,g=b+1),e[0]=0;for(var j=1;j<g;j++)e[j]=0}if(h>=5)if(g-1<0){for(var k=0;k>g;k--)e.unshift(0),a.i++;e.unshift(1),a.i++}else e[g-1]++;for(;f<Math.max(0,b);f++)e.push(0);var l=e.reduceRight(function(a,b,c,d){return b+=a,d[c]=b%10,Math.floor(b/10)},0);l&&(e.unshift(l),a.i++)}function Tc(a,b,c,d,e){if(!v(a)&&!w(a)||isNaN(a))return"";var f,g=!isFinite(a),h=!1,i=Math.abs(a)+"",j="";if(g)j="";else{f=Rc(i),Sc(f,e,b.minFrac,b.maxFrac);var k=f.d,l=f.i,m=f.e,n=[];for(h=k.reduce(function(a,b){return a&&!b},!0);l<0;)k.unshift(0),l++;l>0?n=k.splice(l):(n=k,k=[0]);var o=[];for(k.length>=b.lgSize&&o.unshift(k.splice(-b.lgSize).join(""));k.length>b.gSize;)o.unshift(k.splice(-b.gSize).join(""));k.length&&o.unshift(k.join("")),j=o.join(c),n.length&&(j+=d+n.join("")),m&&(j+="e+"+m)}return a<0&&!h?b.negPre+j+b.negSuf:b.posPre+j+b.posSuf}function Uc(a,b,c,d){var e="";for((a<0||d&&a<=0)&&(d?a=-a+1:(a=-a,e="-")),a=""+a;a.length<b;)a=yf+a;return c&&(a=a.substr(a.length-b)),e+a}function Vc(a,b,c,d,e){return c=c||0,function(f){var g=f["get"+a]();return(c>0||g>-c)&&(g+=c),0===g&&c==-12&&(g=12),Uc(g,b,d,e)}}function Wc(a,b,c){return function(d,e){var f=d["get"+a](),g=(c?"STANDALONE":"")+(b?"SHORT":""),h=Ed(g+a);return e[h][f]}}function Xc(a,b,c){var d=-1*c,e=d>=0?"+":"";return e+=Uc(Math[d>0?"floor":"ceil"](d/60),2)+Uc(Math.abs(d%60),2)}function Yc(a){var b=new Date(a,0,1).getDay();return new Date(a,0,(b<=4?5:12)-b)}function Zc(a){return new Date(a.getFullYear(),a.getMonth(),a.getDate()+(4-a.getDay()))}function $c(a){return function(b){var c=Yc(b.getFullYear()),d=Zc(b),e=+d-+c,f=1+Math.round(e/6048e5);return Uc(f,a)}}function _c(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}function ad(a,b){return a.getFullYear()<=0?b.ERAS[0]:b.ERAS[1]}function bd(a,b){return a.getFullYear()<=0?b.ERANAMES[0]:b.ERANAMES[1]}function cd(a){function b(a){var b;if(b=a.match(c)){var d=new Date(0),e=0,f=0,g=b[8]?d.setUTCFullYear:d.setFullYear,h=b[8]?d.setUTCHours:d.setHours;b[9]&&(e=l(b[9]+b[10]),f=l(b[9]+b[11])),g.call(d,l(b[1]),l(b[2])-1,l(b[3]));var i=l(b[4]||0)-e,j=l(b[5]||0)-f,k=l(b[6]||0),m=Math.round(1e3*parseFloat("0."+(b[7]||0)));return h.call(d,i,j,k,m),d}return a}var c=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(c,e,f){var g,h,i="",j=[];if(e=e||"mediumDate",e=a.DATETIME_FORMATS[e]||e,v(c)&&(c=Bf.test(c)?l(c):b(c)),w(c)&&(c=new Date(c)),!x(c)||!isFinite(c.getTime()))return c;for(;e;)h=Af.exec(e),h?(j=Q(j,h,1),e=j.pop()):(j.push(e),e=null);var k=c.getTimezoneOffset();return f&&(k=W(f,k),c=Y(c,f,!0)),d(j,function(b){g=zf[b],i+=g?g(c,a.DATETIME_FORMATS,k):"''"===b?"'":b.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),i}}function dd(){
return function(a,b){return r(b)&&(b=2),U(a,b)}}function ed(){return function(a,b,c){return b=Math.abs(Number(b))===1/0?Number(b):l(b),isNaN(b)?a:(w(a)&&(a=a.toString()),Td(a)||v(a)?(c=!c||isNaN(c)?0:l(c),c=c<0?Math.max(0,a.length+c):c,b>=0?a.slice(c,c+b):0===c?a.slice(b,a.length):a.slice(Math.max(0,c+b),c)):a)}}function fd(a){function d(b,c){return c=c?-1:1,b.map(function(b){var d=1,e=o;if(y(b))e=b;else if(v(b)&&("+"!=b.charAt(0)&&"-"!=b.charAt(0)||(d="-"==b.charAt(0)?-1:1,b=b.substring(1)),""!==b&&(e=a(b),e.constant))){var f=e();e=function(a){return a[f]}}return{get:e,descending:d*c}})}function e(a){switch(typeof a){case"number":case"boolean":case"string":return!0;default:return!1}}function f(a,b){return"function"==typeof a.valueOf&&(a=a.valueOf(),e(a))?a:q(a)&&(a=a.toString(),e(a))?a:b}function g(a,b){var c=typeof a;return null===a?(c="string",a="null"):"string"===c?a=a.toLowerCase():"object"===c&&(a=f(a,b)),{value:a,type:c}}function h(a,b){var c=0;return a.type===b.type?a.value!==b.value&&(c=a.value<b.value?-1:1):c=a.type<b.type?-1:1,c}return function(a,e,f){function i(a,b){return{value:a,predicateValues:k.map(function(c){return g(c.get(a),b)})}}function j(a,b){for(var c=0,d=0,e=k.length;d<e&&!(c=h(a.predicateValues[d],b.predicateValues[d])*k[d].descending);++d);return c}if(null==a)return a;if(!c(a))throw b("orderBy")("notarray","Expected array but received: {0}",a);Td(e)||(e=[e]),0===e.length&&(e=["+"]);var k=d(e,f);k.push({get:function(){return{}},descending:f?-1:1});var l=Array.prototype.map.call(a,i);return l.sort(j),a=l.map(function(a){return a.value})}}function gd(a){return y(a)&&(a={link:a}),a.restrict=a.restrict||"AC",p(a)}function hd(a,b){a.$name=b}function id(a,b,c,e,f){var g=this,h=[];g.$error={},g.$$success={},g.$pending=void 0,g.$name=f(b.name||b.ngForm||"")(c),g.$dirty=!1,g.$pristine=!0,g.$valid=!0,g.$invalid=!1,g.$submitted=!1,g.$$parentForm=Gf,g.$rollbackViewValue=function(){d(h,function(a){a.$rollbackViewValue()})},g.$commitViewValue=function(){d(h,function(a){a.$commitViewValue()})},g.$addControl=function(a){ma(a.$name,"input"),h.push(a),a.$name&&(g[a.$name]=a),a.$$parentForm=g},g.$$renameControl=function(a,b){var c=a.$name;g[c]===a&&delete g[c],g[b]=a,a.$name=b},g.$removeControl=function(a){a.$name&&g[a.$name]===a&&delete g[a.$name],d(g.$pending,function(b,c){g.$setValidity(c,null,a)}),d(g.$error,function(b,c){g.$setValidity(c,null,a)}),d(g.$$success,function(b,c){g.$setValidity(c,null,a)}),M(h,a),a.$$parentForm=Gf},xd({ctrl:this,$element:a,set:function(a,b,c){var d=a[b];if(d){var e=d.indexOf(c);e===-1&&d.push(c)}else a[b]=[c]},unset:function(a,b,c){var d=a[b];d&&(M(d,c),0===d.length&&delete a[b])},$animate:e}),g.$setDirty=function(){e.removeClass(a,qg),e.addClass(a,rg),g.$dirty=!0,g.$pristine=!1,g.$$parentForm.$setDirty()},g.$setPristine=function(){e.setClass(a,qg,rg+" "+Hf),g.$dirty=!1,g.$pristine=!0,g.$submitted=!1,d(h,function(a){a.$setPristine()})},g.$setUntouched=function(){d(h,function(a){a.$setUntouched()})},g.$setSubmitted=function(){e.addClass(a,Hf),g.$submitted=!0,g.$$parentForm.$setSubmitted()}}function jd(a){a.$formatters.push(function(b){return a.$isEmpty(b)?b:b.toString()})}function kd(a,b,c,d,e,f){ld(a,b,c,d,e,f),jd(d)}function ld(a,b,c,d,e,f){var g=Dd(b[0].type);if(!e.android){var h=!1;b.on("compositionstart",function(){h=!0}),b.on("compositionend",function(){h=!1,j()})}var i,j=function(a){if(i&&(f.defer.cancel(i),i=null),!h){var e=b.val(),j=a&&a.type;"password"===g||c.ngTrim&&"false"===c.ngTrim||(e=Vd(e)),(d.$viewValue!==e||""===e&&d.$$hasNativeValidators)&&d.$setViewValue(e,j)}};if(e.hasEvent("input"))b.on("input",j);else{var k=function(a,b,c){i||(i=f.defer(function(){i=null,b&&b.value===c||j(a)}))};b.on("keydown",function(a){var b=a.keyCode;91===b||15<b&&b<19||37<=b&&b<=40||k(a,this,this.value)}),e.hasEvent("paste")&&b.on("paste cut",k)}b.on("change",j),Vf[g]&&d.$$hasNativeValidators&&g===c.type&&b.on(Uf,function(a){if(!i){var b=this[Bd],c=b.badInput,d=b.typeMismatch;i=f.defer(function(){i=null,b.badInput===c&&b.typeMismatch===d||j(a)})}}),d.$render=function(){var a=d.$isEmpty(d.$viewValue)?"":d.$viewValue;b.val()!==a&&b.val(a)}}function md(a,b){if(x(a))return a;if(v(a)){Rf.lastIndex=0;var c=Rf.exec(a);if(c){var d=+c[1],e=+c[2],f=0,g=0,h=0,i=0,j=Yc(d),k=7*(e-1);return b&&(f=b.getHours(),g=b.getMinutes(),h=b.getSeconds(),i=b.getMilliseconds()),new Date(d,0,j.getDate()+k,f,g,h,i)}}return NaN}function nd(a,b){return function(c,e){var f,g;if(x(c))return c;if(v(c)){if('"'==c.charAt(0)&&'"'==c.charAt(c.length-1)&&(c=c.substring(1,c.length-1)),Lf.test(c))return new Date(c);if(a.lastIndex=0,f=a.exec(c))return f.shift(),g=e?{yyyy:e.getFullYear(),MM:e.getMonth()+1,dd:e.getDate(),HH:e.getHours(),mm:e.getMinutes(),ss:e.getSeconds(),sss:e.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},d(f,function(a,c){c<b.length&&(g[b[c]]=+a)}),new Date(g.yyyy,g.MM-1,g.dd,g.HH,g.mm,g.ss||0,1e3*g.sss||0)}return NaN}}function od(a,b,c,d){return function(e,f,g,h,i,j,k){function l(a){return a&&!(a.getTime&&a.getTime()!==a.getTime())}function m(a){return s(a)&&!x(a)?c(a)||void 0:a}pd(e,f,g,h),ld(e,f,g,h,i,j);var n,o=h&&h.$options&&h.$options.timezone;if(h.$$parserName=a,h.$parsers.push(function(a){if(h.$isEmpty(a))return null;if(b.test(a)){var d=c(a,n);return o&&(d=Y(d,o)),d}}),h.$formatters.push(function(a){if(a&&!x(a))throw xg("datefmt","Expected `{0}` to be a date",a);return l(a)?(n=a,n&&o&&(n=Y(n,o,!0)),k("date")(a,d,o)):(n=null,"")}),s(g.min)||g.ngMin){var p;h.$validators.min=function(a){return!l(a)||r(p)||c(a)>=p},g.$observe("min",function(a){p=m(a),h.$validate()})}if(s(g.max)||g.ngMax){var q;h.$validators.max=function(a){return!l(a)||r(q)||c(a)<=q},g.$observe("max",function(a){q=m(a),h.$validate()})}}}function pd(a,b,c,d){var e=b[0],f=d.$$hasNativeValidators=t(e.validity);f&&d.$parsers.push(function(a){var c=b.prop(Bd)||{};return c.badInput||c.typeMismatch?void 0:a})}function qd(a,b,c,d,e,f){if(pd(a,b,c,d),ld(a,b,c,d,e,f),d.$$parserName="number",d.$parsers.push(function(a){return d.$isEmpty(a)?null:Of.test(a)?parseFloat(a):void 0}),d.$formatters.push(function(a){if(!d.$isEmpty(a)){if(!w(a))throw xg("numfmt","Expected `{0}` to be a number",a);a=a.toString()}return a}),s(c.min)||c.ngMin){var g;d.$validators.min=function(a){return d.$isEmpty(a)||r(g)||a>=g},c.$observe("min",function(a){s(a)&&!w(a)&&(a=parseFloat(a,10)),g=w(a)&&!isNaN(a)?a:void 0,d.$validate()})}if(s(c.max)||c.ngMax){var h;d.$validators.max=function(a){return d.$isEmpty(a)||r(h)||a<=h},c.$observe("max",function(a){s(a)&&!w(a)&&(a=parseFloat(a,10)),h=w(a)&&!isNaN(a)?a:void 0,d.$validate()})}}function rd(a,b,c,d,e,f){ld(a,b,c,d,e,f),jd(d),d.$$parserName="url",d.$validators.url=function(a,b){var c=a||b;return d.$isEmpty(c)||Mf.test(c)}}function sd(a,b,c,d,e,f){ld(a,b,c,d,e,f),jd(d),d.$$parserName="email",d.$validators.email=function(a,b){var c=a||b;return d.$isEmpty(c)||Nf.test(c)}}function td(a,b,c,d){r(c.name)&&b.attr("name",g());var e=function(a){b[0].checked&&d.$setViewValue(c.value,a&&a.type)};b.on("click",e),d.$render=function(){var a=c.value;b[0].checked=a==d.$viewValue},c.$observe("value",d.$render)}function ud(a,b,c,d,e){var f;if(s(d)){if(f=a(d),!f.constant)throw xg("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",c,d);return f(b)}return e}function vd(a,b,c,d,e,f,g,h){var i=ud(h,a,"ngTrueValue",c.ngTrueValue,!0),j=ud(h,a,"ngFalseValue",c.ngFalseValue,!1),k=function(a){d.$setViewValue(b[0].checked,a&&a.type)};b.on("click",k),d.$render=function(){b[0].checked=d.$viewValue},d.$isEmpty=function(a){return a===!1},d.$formatters.push(function(a){return P(a,i)}),d.$parsers.push(function(a){return a?i:j})}function wd(a,b){return a="ngClass"+a,["$animate",function(c){function e(a,b){var c=[];a:for(var d=0;d<a.length;d++){for(var e=a[d],f=0;f<b.length;f++)if(e==b[f])continue a;c.push(e)}return c}function f(a){var b=[];return Td(a)?(d(a,function(a){b=b.concat(f(a))}),b):v(a)?a.split(" "):t(a)?(d(a,function(a,c){a&&(b=b.concat(c.split(" ")))}),b):a}return{restrict:"AC",link:function(g,h,i){function j(a){var b=l(a,1);i.$addClass(b)}function k(a){var b=l(a,-1);i.$removeClass(b)}function l(a,b){var c=h.data("$classCounts")||pa(),e=[];return d(a,function(a){(b>0||c[a])&&(c[a]=(c[a]||0)+b,c[a]===+(b>0)&&e.push(a))}),h.data("$classCounts",c),e.join(" ")}function m(a,b){var d=e(b,a),f=e(a,b);d=l(d,1),f=l(f,-1),d&&d.length&&c.addClass(h,d),f&&f.length&&c.removeClass(h,f)}function n(a){if(b===!0||g.$index%2===b){var c=f(a||[]);if(o){if(!P(a,o)){var d=f(o);m(d,c)}}else j(c)}o=Td(a)?a.map(function(a){return O(a)}):O(a)}var o;g.$watch(i[a],n,!0),i.$observe("class",function(b){n(g.$eval(i[a]))}),"ngClass"!==a&&g.$watch("$index",function(c,d){var e=1&c;if(e!==(1&d)){var h=f(g.$eval(i[a]));e===b?j(h):k(h)}})}}}]}function xd(a){function b(a,b,h){r(b)?c("$pending",a,h):d("$pending",a,h),F(b)?b?(k(g.$error,a,h),j(g.$$success,a,h)):(j(g.$error,a,h),k(g.$$success,a,h)):(k(g.$error,a,h),k(g.$$success,a,h)),g.$pending?(e(ug,!0),g.$valid=g.$invalid=void 0,f("",null)):(e(ug,!1),g.$valid=yd(g.$error),g.$invalid=!g.$valid,f("",g.$valid));var i;i=g.$pending&&g.$pending[a]?void 0:!g.$error[a]&&(!!g.$$success[a]||null),f(a,i),g.$$parentForm.$setValidity(a,i,g)}function c(a,b,c){g[a]||(g[a]={}),j(g[a],b,c)}function d(a,b,c){g[a]&&k(g[a],b,c),yd(g[a])&&(g[a]=void 0)}function e(a,b){b&&!i[a]?(l.addClass(h,a),i[a]=!0):!b&&i[a]&&(l.removeClass(h,a),i[a]=!1)}function f(a,b){a=a?"-"+ia(a,"-"):"",e(og+a,b===!0),e(pg+a,b===!1)}var g=a.ctrl,h=a.$element,i={},j=a.set,k=a.unset,l=a.$animate;i[pg]=!(i[og]=h.hasClass(og)),g.$setValidity=b}function yd(a){if(a)for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}function zd(a){a[0].hasAttribute("selected")&&(a[0].selected=!0)}var Ad=/^\/(.+)\/([a-z]*)$/,Bd="validity",Cd=Object.prototype.hasOwnProperty,Dd=function(a){return v(a)?a.toLowerCase():a},Ed=function(a){return v(a)?a.toUpperCase():a},Fd=function(a){return v(a)?a.replace(/[A-Z]/g,function(a){return String.fromCharCode(32|a.charCodeAt(0))}):a},Gd=function(a){return v(a)?a.replace(/[a-z]/g,function(a){return String.fromCharCode(a.charCodeAt(0)&-33)}):a};"i"!=="I".toLowerCase()&&(Dd=Fd,Ed=Gd);var Hd,Id,Jd,Kd,Ld=[].slice,Md=[].splice,Nd=[].push,Od=Object.prototype.toString,Pd=Object.getPrototypeOf,Qd=b("ng"),Rd=a.angular||(a.angular={}),Sd=0;Hd=a.document.documentMode,n.$inject=[],o.$inject=[];var Td=Array.isArray,Ud=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array\]$/,Vd=function(a){return v(a)?a.trim():a},Wd=function(a){return a.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Xd=function(){function b(){try{return new Function(""),!1}catch(a){return!0}}if(!s(Xd.rules)){var c=a.document.querySelector("[ng-csp]")||a.document.querySelector("[data-ng-csp]");if(c){var d=c.getAttribute("ng-csp")||c.getAttribute("data-ng-csp");Xd.rules={noUnsafeEval:!d||d.indexOf("no-unsafe-eval")!==-1,noInlineStyle:!d||d.indexOf("no-inline-style")!==-1}}else Xd.rules={noUnsafeEval:b(),noInlineStyle:!1}}return Xd.rules},Yd=function(){if(s(Yd.name_))return Yd.name_;var b,c,d,e,f=$d.length;for(c=0;c<f;++c)if(d=$d[c],b=a.document.querySelector("["+d.replace(":","\\:")+"jq]")){e=b.getAttribute(d+"jq");break}return Yd.name_=e},Zd=/:/g,$d=["ng-","data-ng-","ng:","x-ng-"],_d=/[A-Z]/g,ae=!1,be=1,ce=2,de=3,ee=8,fe=9,ge=11,he={full:"1.5.5",major:1,minor:5,dot:5,codeName:"material-conspiration"};Da.expando="ng339";var ie=Da.cache={},je=1,ke=function(a,b,c){a.addEventListener(b,c,!1)},le=function(a,b,c){a.removeEventListener(b,c,!1)};Da._data=function(a){return this.cache[a[this.expando]]||{}};var me=/([\:\-\_]+(.))/g,ne=/^moz([A-Z])/,oe={mouseleave:"mouseout",mouseenter:"mouseover"},pe=b("jqLite"),qe=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,re=/<|&#?\w+;/,se=/<([\w:-]+)/,te=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,ue={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ue.optgroup=ue.option,ue.tbody=ue.tfoot=ue.colgroup=ue.caption=ue.thead,ue.th=ue.td;var ve=a.Node.prototype.contains||function(a){return!!(16&this.compareDocumentPosition(a))},we=Da.prototype={ready:function(b){function c(){d||(d=!0,b())}var d=!1;"complete"===a.document.readyState?a.setTimeout(c):(this.on("DOMContentLoaded",c),Da(a).on("load",c))},toString:function(){var a=[];return d(this,function(b){a.push(""+b)}),"["+a.join(", ")+"]"},eq:function(a){return Id(a>=0?this[a]:this[this.length+a])},length:0,push:Nd,sort:[].sort,splice:[].splice},xe={};d("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(a){xe[Dd(a)]=a});var ye={};d("input,select,option,textarea,button,form,details".split(","),function(a){ye[a]=!0});var ze={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};d({data:Ja,removeData:Ha,hasData:ya,cleanData:za},function(a,b){Da[b]=a}),d({data:Ja,inheritedData:Pa,scope:function(a){return Id.data(a,"$scope")||Pa(a.parentNode||a,["$isolateScope","$scope"])},isolateScope:function(a){return Id.data(a,"$isolateScope")||Id.data(a,"$isolateScopeNoTemplate")},controller:Oa,injector:function(a){return Pa(a,"$injector")},removeAttr:function(a,b){a.removeAttribute(b)},hasClass:Ka,css:function(a,b,c){return b=va(b),s(c)?void(a.style[b]=c):a.style[b]},attr:function(a,b,c){var d=a.nodeType;if(d!==de&&d!==ce&&d!==ee){var e=Dd(b);if(xe[e]){if(!s(c))return a[b]||(a.attributes.getNamedItem(b)||n).specified?e:void 0;c?(a[b]=!0,a.setAttribute(b,e)):(a[b]=!1,a.removeAttribute(e))}else if(s(c))a.setAttribute(b,c);else if(a.getAttribute){var f=a.getAttribute(b,2);return null===f?void 0:f}}},prop:function(a,b,c){return s(c)?void(a[b]=c):a[b]},text:function(){function a(a,b){if(r(b)){var c=a.nodeType;return c===be||c===de?a.textContent:""}a.textContent=b}return a.$dv="",a}(),val:function(a,b){if(r(b)){if(a.multiple&&"select"===L(a)){var c=[];return d(a.options,function(a){a.selected&&c.push(a.value||a.text)}),0===c.length?null:c}return a.value}a.value=b},html:function(a,b){return r(b)?a.innerHTML:(Fa(a,!0),void(a.innerHTML=b))},empty:Qa},function(a,b){Da.prototype[b]=function(b,c){var d,e,f=this.length;if(a!==Qa&&r(2==a.length&&a!==Ka&&a!==Oa?b:c)){if(t(b)){for(d=0;d<f;d++)if(a===Ja)a(this[d],b);else for(e in b)a(this[d],e,b[e]);return this}for(var g=a.$dv,h=r(g)?Math.min(f,1):f,i=0;i<h;i++){var j=a(this[i],b,c);g=g?g+j:j}return g}for(d=0;d<f;d++)a(this[d],b,c);return this}}),d({removeData:Ha,on:function(a,b,c,d){if(s(d))throw pe("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(xa(a)){var e=Ia(a,!0),f=e.events,g=e.handle;g||(g=e.handle=Va(a,f));for(var h=b.indexOf(" ")>=0?b.split(" "):[b],i=h.length,j=function(b,d,e){var h=f[b];h||(h=f[b]=[],h.specialHandlerWrapper=d,"$destroy"===b||e||ke(a,b,g)),h.push(c)};i--;)b=h[i],oe[b]?(j(oe[b],Xa),j(b,void 0,!0)):j(b)}},off:Ga,one:function(a,b,c){a=Id(a),a.on(b,function d(){a.off(b,c),a.off(b,d)}),a.on(b,c)},replaceWith:function(a,b){var c,e=a.parentNode;Fa(a),d(new Da(b),function(b){c?e.insertBefore(b,c.nextSibling):e.replaceChild(b,a),c=b})},children:function(a){var b=[];return d(a.childNodes,function(a){a.nodeType===be&&b.push(a)}),b},contents:function(a){return a.contentDocument||a.childNodes||[]},append:function(a,b){var c=a.nodeType;if(c===be||c===ge){b=new Da(b);for(var d=0,e=b.length;d<e;d++){var f=b[d];a.appendChild(f)}}},prepend:function(a,b){if(a.nodeType===be){var c=a.firstChild;d(new Da(b),function(b){a.insertBefore(b,c)})}},wrap:function(a,b){Ca(a,Id(b).eq(0).clone()[0])},remove:Ra,detach:function(a){Ra(a,!0)},after:function(a,b){var c=a,d=a.parentNode;b=new Da(b);for(var e=0,f=b.length;e<f;e++){var g=b[e];d.insertBefore(g,c.nextSibling),c=g}},addClass:Ma,removeClass:La,toggleClass:function(a,b,c){b&&d(b.split(" "),function(b){var d=c;r(d)&&(d=!Ka(a,b)),(d?Ma:La)(a,b)})},parent:function(a){var b=a.parentNode;return b&&b.nodeType!==ge?b:null},next:function(a){return a.nextElementSibling},find:function(a,b){return a.getElementsByTagName?a.getElementsByTagName(b):[]},clone:Ea,triggerHandler:function(a,b,c){var e,f,g,h=b.type||b,i=Ia(a),k=i&&i.events,l=k&&k[h];l&&(e={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return this.defaultPrevented===!0},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return this.immediatePropagationStopped===!0},stopPropagation:n,type:h,target:a},b.type&&(e=j(e,b)),f=O(l),g=c?[e].concat(c):[e],d(f,function(b){e.isImmediatePropagationStopped()||b.apply(a,g)}))}},function(a,b){Da.prototype[b]=function(b,c,d){for(var e,f=0,g=this.length;f<g;f++)r(e)?(e=a(this[f],b,c,d),s(e)&&(e=Id(e))):Na(e,a(this[f],b,c,d));return s(e)?e:this},Da.prototype.bind=Da.prototype.on,Da.prototype.unbind=Da.prototype.off}),$a.prototype={put:function(a,b){this[Za(a,this.nextUid)]=b},get:function(a){return this[Za(a,this.nextUid)]},remove:function(a){var b=this[a=Za(a,this.nextUid)];return delete this[a],b}};var Ae=[function(){this.$get=[function(){return $a}]}],Be=/^([^\(]+?)=>/,Ce=/^[^\(]*\(\s*([^\)]*)\)/m,De=/,/,Ee=/^\s*(_?)(\S+?)\1\s*$/,Fe=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ge=b("$injector");cb.$$annotate=bb;var He=b("$animate"),Ie=1,Je="ng-animate",Ke=function(){this.$get=n},Le=function(){var a=new $a,b=[];this.$get=["$$AnimateRunner","$rootScope",function(c,e){function f(a,b,c){var e=!1;return b&&(b=v(b)?b.split(" "):Td(b)?b:[],d(b,function(b){b&&(e=!0,a[b]=c)})),e}function g(){d(b,function(b){var c=a.get(b);if(c){var e=gb(b.attr("class")),f="",g="";d(c,function(a,b){var c=!!e[b];a!==c&&(a?f+=(f.length?" ":"")+b:g+=(g.length?" ":"")+b)}),d(b,function(a){f&&Ma(a,f),g&&La(a,g)}),a.remove(b)}}),b.length=0}function h(c,d,h){var i=a.get(c)||{},j=f(i,d,!0),k=f(i,h,!1);(j||k)&&(a.put(c,i),b.push(c),1===b.length&&e.$$postDigest(g))}return{enabled:n,on:n,off:n,pin:n,push:function(a,b,d,e){e&&e(),d=d||{},d.from&&a.css(d.from),d.to&&a.css(d.to),(d.addClass||d.removeClass)&&h(a,d.addClass,d.removeClass);var f=new c;return f.complete(),f}}}]},Me=["$provide",function(a){var b=this;this.$$registeredAnimations=Object.create(null),this.register=function(c,d){if(c&&"."!==c.charAt(0))throw He("notcsel","Expecting class selector starting with '.' got '{0}'.",c);var e=c+"-animation";b.$$registeredAnimations[c.substr(1)]=e,a.factory(e,d)},this.classNameFilter=function(a){if(1===arguments.length&&(this.$$classNameFilter=a instanceof RegExp?a:null,this.$$classNameFilter)){var b=new RegExp("(\\s+|\\/)"+Je+"(\\s+|\\/)");if(b.test(this.$$classNameFilter.toString()))throw He("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',Je)}return this.$$classNameFilter},this.$get=["$$animateQueue",function(a){function b(a,b,c){if(c){var d=fb(c);!d||d.parentNode||d.previousElementSibling||(c=null)}c?c.after(a):b.prepend(a)}return{on:a.on,off:a.off,pin:a.pin,enabled:a.enabled,cancel:function(a){a.end&&a.end()},enter:function(c,d,e,f){return d=d&&Id(d),e=e&&Id(e),d=d||e.parent(),b(c,d,e),a.push(c,"enter",hb(f))},move:function(c,d,e,f){return d=d&&Id(d),e=e&&Id(e),d=d||e.parent(),b(c,d,e),a.push(c,"move",hb(f))},leave:function(b,c){return a.push(b,"leave",hb(c),function(){b.remove()})},addClass:function(b,c,d){return d=hb(d),d.addClass=eb(d.addclass,c),a.push(b,"addClass",d)},removeClass:function(b,c,d){return d=hb(d),d.removeClass=eb(d.removeClass,c),a.push(b,"removeClass",d)},setClass:function(b,c,d,e){return e=hb(e),e.addClass=eb(e.addClass,c),e.removeClass=eb(e.removeClass,d),a.push(b,"setClass",e)},animate:function(b,c,d,e,f){return f=hb(f),f.from=f.from?j(f.from,c):c,f.to=f.to?j(f.to,d):d,e=e||"ng-inline-animate",f.tempClasses=eb(f.tempClasses,e),a.push(b,"animate",f)}}}]}],Ne=function(){this.$get=["$$rAF",function(a){function b(b){c.push(b),c.length>1||a(function(){for(var a=0;a<c.length;a++)c[a]();c=[]})}var c=[];return function(){var a=!1;return b(function(){a=!0}),function(c){a?c():b(c)}}}]},Oe=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$document","$timeout",function(a,b,c,e,f){function g(a){this.setHost(a);var b=c(),d=function(a){f(a,0,!1)};this._doneCallbacks=[],this._tick=function(a){var c=e[0];c&&c.hidden?d(a):b(a)},this._state=0}var h=0,i=1,j=2;return g.chain=function(a,b){function c(){return d===a.length?void b(!0):void a[d](function(a){return a===!1?void b(!1):(d++,void c())})}var d=0;c()},g.all=function(a,b){function c(c){f=f&&c,++e===a.length&&b(f)}var e=0,f=!0;d(a,function(a){a.done(c)})},g.prototype={setHost:function(a){this.host=a||{}},done:function(a){this._state===j?a():this._doneCallbacks.push(a)},progress:n,getPromise:function(){if(!this.promise){var b=this;this.promise=a(function(a,c){b.done(function(b){b===!1?c():a()})})}return this.promise},then:function(a,b){return this.getPromise().then(a,b)},catch:function(a){return this.getPromise().catch(a)},finally:function(a){return this.getPromise().finally(a)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(a){var b=this;b._state===h&&(b._state=i,b._tick(function(){b._resolve(a)}))},_resolve:function(a){this._state!==j&&(d(this._doneCallbacks,function(b){b(a)}),this._doneCallbacks.length=0,this._state=j)}},g}]},Pe=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(a,b,c){return function(b,d){function e(){return a(function(){f(),h||i.complete(),h=!0}),i}function f(){g.addClass&&(b.addClass(g.addClass),g.addClass=null),g.removeClass&&(b.removeClass(g.removeClass),g.removeClass=null),g.to&&(b.css(g.to),g.to=null)}var g=d||{};g.$$prepared||(g=N(g)),g.cleanupStyles&&(g.from=g.to=null),g.from&&(b.css(g.from),g.from=null);var h,i=new c;return{start:e,end:e}}}]},Qe=b("$compile"),Re=new mb;nb.$inject=["$provide","$$sanitizeUriProvider"],ob.prototype.isFirstChange=function(){return this.previousValue===Re};var Se=/^((?:x|data)[\:\-_])/i,Te=b("$controller"),Ue=/^(\S+)(\s+as\s+([\w$]+))?$/,Ve=function(){this.$get=["$document",function(a){return function(b){return b?!b.nodeType&&b instanceof Id&&(b=b[0]):b=a[0].body,b.offsetWidth+1}}]},We="application/json",Xe={"Content-Type":We+";charset=utf-8"},Ye=/^\[|^\{(?!\{)/,Ze={"[":/]$/,"{":/}$/},$e=/^\)\]\}',?\n/,_e=b("$http"),af=function(a){return function(){throw _e("legacy","The method `{0}` on the promise returned from `$http` has been disabled.",a)}},bf=Rd.$interpolateMinErr=b("$interpolate");bf.throwNoconcat=function(a){throw bf("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",a)},bf.interr=function(a,b){return bf("interr","Can't interpolate: {0}\n{1}",a,b.toString())};var cf=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,df={http:80,https:443,ftp:21},ef=b("$location"),ff={$$html5:!1,$$replace:!1,absUrl:Wb("$$absUrl"),url:function(a){if(r(a))return this.$$url;var b=cf.exec(a);return(b[1]||""===a)&&this.path(decodeURIComponent(b[1])),(b[2]||b[1]||""===a)&&this.search(b[3]||""),this.hash(b[5]||""),this},protocol:Wb("$$protocol"),host:Wb("$$host"),port:Wb("$$port"),path:Xb("$$path",function(a){return a=null!==a?a.toString():"","/"==a.charAt(0)?a:"/"+a}),search:function(a,b){switch(arguments.length){case 0:return this.$$search;case 1:if(v(a)||w(a))a=a.toString(),this.$$search=_(a);else{if(!t(a))throw ef("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");a=N(a,{}),d(a,function(b,c){null==b&&delete a[c]}),this.$$search=a}break;default:r(b)||null===b?delete this.$$search[a]:this.$$search[a]=b}return this.$$compose(),this},hash:Xb("$$hash",function(a){return null!==a?a.toString():""}),replace:function(){return this.$$replace=!0,this}};d([Vb,Ub,Tb],function(a){a.prototype=Object.create(ff),a.prototype.state=function(b){if(!arguments.length)return this.$$state;if(a!==Tb||!this.$$html5)throw ef("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=r(b)?null:b,this}});var gf=b("$parse"),hf=Function.prototype.call,jf=Function.prototype.apply,kf=Function.prototype.bind,lf=pa();d("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(a){lf[a]=!0});var mf={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},nf=function(a){this.options=a};nf.prototype={constructor:nf,lex:function(a){for(this.text=a,this.index=0,this.tokens=[];this.index<this.text.length;){var b=this.text.charAt(this.index);if('"'===b||"'"===b)this.readString(b);else if(this.isNumber(b)||"."===b&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(b,"(){}[].,;:?"))this.tokens.push({index:this.index,text:b}),this.index++;else if(this.isWhitespace(b))this.index++;else{var c=b+this.peek(),d=c+this.peek(2),e=lf[b],f=lf[c],g=lf[d];if(e||f||g){var h=g?d:f?c:b;this.tokens.push({index:this.index,text:h,operator:!0}),this.index+=h.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(a,b){return b.indexOf(a)!==-1},peek:function(a){var b=a||1;return this.index+b<this.text.length&&this.text.charAt(this.index+b)},isNumber:function(a){return"0"<=a&&a<="9"&&"string"==typeof a},isWhitespace:function(a){return" "===a||"\r"===a||"\t"===a||"\n"===a||"\v"===a||""===a},isIdentifierStart:function(a){return this.options.isIdentifierStart?this.options.isIdentifierStart(a,this.codePointAt(a)):this.isValidIdentifierStart(a)},isValidIdentifierStart:function(a){return"a"<=a&&a<="z"||"A"<=a&&a<="Z"||"_"===a||"$"===a},isIdentifierContinue:function(a){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(a,this.codePointAt(a)):this.isValidIdentifierContinue(a)},isValidIdentifierContinue:function(a,b){return this.isValidIdentifierStart(a,b)||this.isNumber(a)},codePointAt:function(a){return 1===a.length?a.charCodeAt(0):(a.charCodeAt(0)<<10)+a.charCodeAt(1)-56613888},peekMultichar:function(){var a=this.text.charAt(this.index),b=this.peek();if(!b)return a;var c=a.charCodeAt(0),d=b.charCodeAt(0);return c>=55296&&c<=56319&&d>=56320&&d<=57343?a+b:a},isExpOperator:function(a){return"-"===a||"+"===a||this.isNumber(a)},throwError:function(a,b,c){c=c||this.index;var d=s(b)?"s "+b+"-"+this.index+" ["+this.text.substring(b,c)+"]":" "+c;throw gf("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",a,d,this.text)},readNumber:function(){for(var a="",b=this.index;this.index<this.text.length;){var c=Dd(this.text.charAt(this.index));if("."==c||this.isNumber(c))a+=c;else{var d=this.peek();if("e"==c&&this.isExpOperator(d))a+=c;else if(this.isExpOperator(c)&&d&&this.isNumber(d)&&"e"==a.charAt(a.length-1))a+=c;else{if(!this.isExpOperator(c)||d&&this.isNumber(d)||"e"!=a.charAt(a.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:b,text:a,constant:!0,value:Number(a)})},readIdent:function(){var a=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var b=this.peekMultichar();if(!this.isIdentifierContinue(b))break;this.index+=b.length}this.tokens.push({index:a,text:this.text.slice(a,this.index),identifier:!0})},readString:function(a){var b=this.index;this.index++;for(var c="",d=a,e=!1;this.index<this.text.length;){var f=this.text.charAt(this.index);if(d+=f,e){if("u"===f){var g=this.text.substring(this.index+1,this.index+5);g.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+g+"]"),this.index+=4,c+=String.fromCharCode(parseInt(g,16))}else{var h=mf[f];c+=h||f}e=!1}else if("\\"===f)e=!0;else{if(f===a)return this.index++,void this.tokens.push({index:b,text:d,constant:!0,value:c});c+=f}this.index++}this.throwError("Unterminated quote",b)}};var of=function(a,b){this.lexer=a,this.options=b};of.Program="Program",of.ExpressionStatement="ExpressionStatement",of.AssignmentExpression="AssignmentExpression",of.ConditionalExpression="ConditionalExpression",of.LogicalExpression="LogicalExpression",of.BinaryExpression="BinaryExpression",of.UnaryExpression="UnaryExpression",of.CallExpression="CallExpression",of.MemberExpression="MemberExpression",of.Identifier="Identifier",of.Literal="Literal",of.ArrayExpression="ArrayExpression",of.Property="Property",of.ObjectExpression="ObjectExpression",of.ThisExpression="ThisExpression",of.LocalsExpression="LocalsExpression",of.NGValueParameter="NGValueParameter",of.prototype={ast:function(a){this.text=a,this.tokens=this.lexer.lex(a);var b=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),b},program:function(){for(var a=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&a.push(this.expressionStatement()),!this.expect(";"))return{type:of.Program,body:a}},expressionStatement:function(){return{type:of.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var a,b=this.expression();a=this.expect("|");)b=this.filter(b);return b},expression:function(){return this.assignment()},assignment:function(){var a=this.ternary();return this.expect("=")&&(a={type:of.AssignmentExpression,left:a,right:this.assignment(),operator:"="}),a},ternary:function(){var a,b,c=this.logicalOR();return this.expect("?")&&(a=this.expression(),this.consume(":"))?(b=this.expression(),{type:of.ConditionalExpression,test:c,alternate:a,consequent:b}):c},logicalOR:function(){for(var a=this.logicalAND();this.expect("||");)a={type:of.LogicalExpression,operator:"||",left:a,right:this.logicalAND()};return a},logicalAND:function(){for(var a=this.equality();this.expect("&&");)a={type:of.LogicalExpression,operator:"&&",left:a,right:this.equality()};return a},equality:function(){for(var a,b=this.relational();a=this.expect("==","!=","===","!==");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.relational()};return b},relational:function(){for(var a,b=this.additive();a=this.expect("<",">","<=",">=");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.additive()};return b},additive:function(){for(var a,b=this.multiplicative();a=this.expect("+","-");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.multiplicative()};return b},multiplicative:function(){for(var a,b=this.unary();a=this.expect("*","/","%");)b={type:of.BinaryExpression,operator:a.text,left:b,right:this.unary()};return b},unary:function(){var a;return(a=this.expect("+","-","!"))?{type:of.UnaryExpression,operator:a.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var a;this.expect("(")?(a=this.filterChain(),this.consume(")")):this.expect("[")?a=this.arrayDeclaration():this.expect("{")?a=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?a=N(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?a={type:of.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?a=this.identifier():this.peek().constant?a=this.constant():this.throwError("not a primary expression",this.peek());for(var b;b=this.expect("(","[",".");)"("===b.text?(a={type:of.CallExpression,callee:a,arguments:this.parseArguments()},this.consume(")")):"["===b.text?(a={type:of.MemberExpression,object:a,property:this.expression(),computed:!0},this.consume("]")):"."===b.text?a={type:of.MemberExpression,object:a,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return a},filter:function(a){for(var b=[a],c={type:of.CallExpression,callee:this.identifier(),arguments:b,filter:!0};this.expect(":");)b.push(this.expression());return c},parseArguments:function(){var a=[];if(")"!==this.peekToken().text)do a.push(this.expression());while(this.expect(","));
return a},identifier:function(){var a=this.consume();return a.identifier||this.throwError("is not a valid identifier",a),{type:of.Identifier,name:a.text}},constant:function(){return{type:of.Literal,value:this.consume().value}},arrayDeclaration:function(){var a=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;a.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:of.ArrayExpression,elements:a}},object:function(){var a,b=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;a={type:of.Property,kind:"init"},this.peek().constant?a.key=this.constant():this.peek().identifier?a.key=this.identifier():this.throwError("invalid key",this.peek()),this.consume(":"),a.value=this.expression(),b.push(a)}while(this.expect(","));return this.consume("}"),{type:of.ObjectExpression,properties:b}},throwError:function(a,b){throw gf("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",b.text,a,b.index+1,this.text,this.text.substring(b.index))},consume:function(a){if(0===this.tokens.length)throw gf("ueoe","Unexpected end of expression: {0}",this.text);var b=this.expect(a);return b||this.throwError("is unexpected, expecting ["+a+"]",this.peek()),b},peekToken:function(){if(0===this.tokens.length)throw gf("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(a,b,c,d){return this.peekAhead(0,a,b,c,d)},peekAhead:function(a,b,c,d,e){if(this.tokens.length>a){var f=this.tokens[a],g=f.text;if(g===b||g===c||g===d||g===e||!b&&!c&&!d&&!e)return f}return!1},expect:function(a,b,c,d){var e=this.peek(a,b,c,d);return!!e&&(this.tokens.shift(),e)},selfReferential:{this:{type:of.ThisExpression},$locals:{type:of.LocalsExpression}}},mc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.state={nextId:0,filters:{},expensiveChecks:b,fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},gc(e,c.$filter);var f,g="";if(this.stage="assign",f=jc(e)){this.state.computing="assign";var h=this.nextId();this.recurse(f,h),this.return_(h),g="fn.assign="+this.generateFunction("assign","s,v,l")}var i=hc(e.body);c.stage="inputs",d(i,function(a,b){var d="fn"+b;c.state[d]={vars:[],body:[],own:{}},c.state.computing=d;var e=c.nextId();c.recurse(a,e),c.return_(e),c.state.inputs.push(d),a.watchId=b}),this.state.computing="fn",this.stage="main",this.recurse(e);var j='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+g+this.watchFns()+"return fn;",k=new Function("$filter","ensureSafeMemberName","ensureSafeObject","ensureSafeFunction","getStringValue","ensureSafeAssignContext","ifDefined","plus","text",j)(this.$filter,$b,ac,bc,_b,cc,dc,ec,a);return this.state=this.stage=void 0,k.literal=kc(e),k.constant=lc(e),k},USE:"use",STRICT:"strict",watchFns:function(){var a=[],b=this.state.inputs,c=this;return d(b,function(b){a.push("var "+b+"="+c.generateFunction(b,"s"))}),b.length&&a.push("fn.inputs=["+b.join(",")+"];"),a.join("")},generateFunction:function(a,b){return"function("+b+"){"+this.varsPrefix(a)+this.body(a)+"};"},filterPrefix:function(){var a=[],b=this;return d(this.state.filters,function(c,d){a.push(c+"=$filter("+b.escape(d)+")")}),a.length?"var "+a.join(",")+";":""},varsPrefix:function(a){return this.state[a].vars.length?"var "+this.state[a].vars.join(",")+";":""},body:function(a){return this.state[a].body.join("")},recurse:function(a,b,c,e,f,g){var h,i,j,k,l=this;if(e=e||n,!g&&s(a.watchId))return b=b||this.nextId(),void this.if_("i",this.lazyAssign(b,this.computedMember("i",a.watchId)),this.lazyRecurse(a,b,c,e,f,!0));switch(a.type){case of.Program:d(a.body,function(b,c){l.recurse(b.expression,void 0,void 0,function(a){i=a}),c!==a.body.length-1?l.current().body.push(i,";"):l.return_(i)});break;case of.Literal:k=this.escape(a.value),this.assign(b,k),e(k);break;case of.UnaryExpression:this.recurse(a.argument,void 0,void 0,function(a){i=a}),k=a.operator+"("+this.ifDefined(i,0)+")",this.assign(b,k),e(k);break;case of.BinaryExpression:this.recurse(a.left,void 0,void 0,function(a){h=a}),this.recurse(a.right,void 0,void 0,function(a){i=a}),k="+"===a.operator?this.plus(h,i):"-"===a.operator?this.ifDefined(h,0)+a.operator+this.ifDefined(i,0):"("+h+")"+a.operator+"("+i+")",this.assign(b,k),e(k);break;case of.LogicalExpression:b=b||this.nextId(),l.recurse(a.left,b),l.if_("&&"===a.operator?b:l.not(b),l.lazyRecurse(a.right,b)),e(b);break;case of.ConditionalExpression:b=b||this.nextId(),l.recurse(a.test,b),l.if_(b,l.lazyRecurse(a.alternate,b),l.lazyRecurse(a.consequent,b)),e(b);break;case of.Identifier:b=b||this.nextId(),c&&(c.context="inputs"===l.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",a.name)+"?l:s"),c.computed=!1,c.name=a.name),$b(a.name),l.if_("inputs"===l.stage||l.not(l.getHasOwnProperty("l",a.name)),function(){l.if_("inputs"===l.stage||"s",function(){f&&1!==f&&l.if_(l.not(l.nonComputedMember("s",a.name)),l.lazyAssign(l.nonComputedMember("s",a.name),"{}")),l.assign(b,l.nonComputedMember("s",a.name))})},b&&l.lazyAssign(b,l.nonComputedMember("l",a.name))),(l.state.expensiveChecks||oc(a.name))&&l.addEnsureSafeObject(b),e(b);break;case of.MemberExpression:h=c&&(c.context=this.nextId())||this.nextId(),b=b||this.nextId(),l.recurse(a.object,h,void 0,function(){l.if_(l.notNull(h),function(){f&&1!==f&&l.addEnsureSafeAssignContext(h),a.computed?(i=l.nextId(),l.recurse(a.property,i),l.getStringValue(i),l.addEnsureSafeMemberName(i),f&&1!==f&&l.if_(l.not(l.computedMember(h,i)),l.lazyAssign(l.computedMember(h,i),"{}")),k=l.ensureSafeObject(l.computedMember(h,i)),l.assign(b,k),c&&(c.computed=!0,c.name=i)):($b(a.property.name),f&&1!==f&&l.if_(l.not(l.nonComputedMember(h,a.property.name)),l.lazyAssign(l.nonComputedMember(h,a.property.name),"{}")),k=l.nonComputedMember(h,a.property.name),(l.state.expensiveChecks||oc(a.property.name))&&(k=l.ensureSafeObject(k)),l.assign(b,k),c&&(c.computed=!1,c.name=a.property.name))},function(){l.assign(b,"undefined")}),e(b)},!!f);break;case of.CallExpression:b=b||this.nextId(),a.filter?(i=l.filter(a.callee.name),j=[],d(a.arguments,function(a){var b=l.nextId();l.recurse(a,b),j.push(b)}),k=i+"("+j.join(",")+")",l.assign(b,k),e(b)):(i=l.nextId(),h={},j=[],l.recurse(a.callee,i,h,function(){l.if_(l.notNull(i),function(){l.addEnsureSafeFunction(i),d(a.arguments,function(a){l.recurse(a,l.nextId(),void 0,function(a){j.push(l.ensureSafeObject(a))})}),h.name?(l.state.expensiveChecks||l.addEnsureSafeObject(h.context),k=l.member(h.context,h.name,h.computed)+"("+j.join(",")+")"):k=i+"("+j.join(",")+")",k=l.ensureSafeObject(k),l.assign(b,k)},function(){l.assign(b,"undefined")}),e(b)}));break;case of.AssignmentExpression:if(i=this.nextId(),h={},!ic(a.left))throw gf("lval","Trying to assign a value to a non l-value");this.recurse(a.left,void 0,h,function(){l.if_(l.notNull(h.context),function(){l.recurse(a.right,i),l.addEnsureSafeObject(l.member(h.context,h.name,h.computed)),l.addEnsureSafeAssignContext(h.context),k=l.member(h.context,h.name,h.computed)+a.operator+i,l.assign(b,k),e(b||k)})},1);break;case of.ArrayExpression:j=[],d(a.elements,function(a){l.recurse(a,l.nextId(),void 0,function(a){j.push(a)})}),k="["+j.join(",")+"]",this.assign(b,k),e(k);break;case of.ObjectExpression:j=[],d(a.properties,function(a){l.recurse(a.value,l.nextId(),void 0,function(b){j.push(l.escape(a.key.type===of.Identifier?a.key.name:""+a.key.value)+":"+b)})}),k="{"+j.join(",")+"}",this.assign(b,k),e(k);break;case of.ThisExpression:this.assign(b,"s"),e("s");break;case of.LocalsExpression:this.assign(b,"l"),e("l");break;case of.NGValueParameter:this.assign(b,"v"),e("v")}},getHasOwnProperty:function(a,b){var c=a+"."+b,d=this.current().own;return d.hasOwnProperty(c)||(d[c]=this.nextId(!1,a+"&&("+this.escape(b)+" in "+a+")")),d[c]},assign:function(a,b){if(a)return this.current().body.push(a,"=",b,";"),a},filter:function(a){return this.state.filters.hasOwnProperty(a)||(this.state.filters[a]=this.nextId(!0)),this.state.filters[a]},ifDefined:function(a,b){return"ifDefined("+a+","+this.escape(b)+")"},plus:function(a,b){return"plus("+a+","+b+")"},return_:function(a){this.current().body.push("return ",a,";")},if_:function(a,b,c){if(a===!0)b();else{var d=this.current().body;d.push("if(",a,"){"),b(),d.push("}"),c&&(d.push("else{"),c(),d.push("}"))}},not:function(a){return"!("+a+")"},notNull:function(a){return a+"!=null"},nonComputedMember:function(a,b){var c=/[$_a-zA-Z][$_a-zA-Z0-9]*/,d=/[^$_a-zA-Z0-9]/g;return c.test(b)?a+"."+b:a+'["'+b.replace(d,this.stringEscapeFn)+'"]'},computedMember:function(a,b){return a+"["+b+"]"},member:function(a,b,c){return c?this.computedMember(a,b):this.nonComputedMember(a,b)},addEnsureSafeObject:function(a){this.current().body.push(this.ensureSafeObject(a),";")},addEnsureSafeMemberName:function(a){this.current().body.push(this.ensureSafeMemberName(a),";")},addEnsureSafeFunction:function(a){this.current().body.push(this.ensureSafeFunction(a),";")},addEnsureSafeAssignContext:function(a){this.current().body.push(this.ensureSafeAssignContext(a),";")},ensureSafeObject:function(a){return"ensureSafeObject("+a+",text)"},ensureSafeMemberName:function(a){return"ensureSafeMemberName("+a+",text)"},ensureSafeFunction:function(a){return"ensureSafeFunction("+a+",text)"},getStringValue:function(a){this.assign(a,"getStringValue("+a+")")},ensureSafeAssignContext:function(a){return"ensureSafeAssignContext("+a+",text)"},lazyRecurse:function(a,b,c,d,e,f){var g=this;return function(){g.recurse(a,b,c,d,e,f)}},lazyAssign:function(a,b){var c=this;return function(){c.assign(a,b)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)},escape:function(a){if(v(a))return"'"+a.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(w(a))return a.toString();if(a===!0)return"true";if(a===!1)return"false";if(null===a)return"null";if("undefined"==typeof a)return"undefined";throw gf("esc","IMPOSSIBLE")},nextId:function(a,b){var c="v"+this.state.nextId++;return a||this.current().vars.push(c+(b?"="+b:"")),c},current:function(){return this.state[this.state.computing]}},nc.prototype={compile:function(a,b){var c=this,e=this.astBuilder.ast(a);this.expression=a,this.expensiveChecks=b,gc(e,c.$filter);var f,g;(f=jc(e))&&(g=this.recurse(f));var h,i=hc(e.body);i&&(h=[],d(i,function(a,b){var d=c.recurse(a);a.input=d,h.push(d),a.watchId=b}));var j=[];d(e.body,function(a){j.push(c.recurse(a.expression))});var k=0===e.body.length?n:1===e.body.length?j[0]:function(a,b){var c;return d(j,function(d){c=d(a,b)}),c};return g&&(k.assign=function(a,b,c){return g(a,c,b)}),h&&(k.inputs=h),k.literal=kc(e),k.constant=lc(e),k},recurse:function(a,b,c){var e,f,g,h=this;if(a.input)return this.inputs(a.input,a.watchId);switch(a.type){case of.Literal:return this.value(a.value,b);case of.UnaryExpression:return f=this.recurse(a.argument),this["unary"+a.operator](f,b);case of.BinaryExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case of.LogicalExpression:return e=this.recurse(a.left),f=this.recurse(a.right),this["binary"+a.operator](e,f,b);case of.ConditionalExpression:return this["ternary?:"](this.recurse(a.test),this.recurse(a.alternate),this.recurse(a.consequent),b);case of.Identifier:return $b(a.name,h.expression),h.identifier(a.name,h.expensiveChecks||oc(a.name),b,c,h.expression);case of.MemberExpression:return e=this.recurse(a.object,!1,!!c),a.computed||($b(a.property.name,h.expression),f=a.property.name),a.computed&&(f=this.recurse(a.property)),a.computed?this.computedMember(e,f,b,c,h.expression):this.nonComputedMember(e,f,h.expensiveChecks,b,c,h.expression);case of.CallExpression:return g=[],d(a.arguments,function(a){g.push(h.recurse(a))}),a.filter&&(f=this.$filter(a.callee.name)),a.filter||(f=this.recurse(a.callee,!0)),a.filter?function(a,c,d,e){for(var h=[],i=0;i<g.length;++i)h.push(g[i](a,c,d,e));var j=f.apply(void 0,h,e);return b?{context:void 0,name:void 0,value:j}:j}:function(a,c,d,e){var i,j=f(a,c,d,e);if(null!=j.value){ac(j.context,h.expression),bc(j.value,h.expression);for(var k=[],l=0;l<g.length;++l)k.push(ac(g[l](a,c,d,e),h.expression));i=ac(j.value.apply(j.context,k),h.expression)}return b?{value:i}:i};case of.AssignmentExpression:return e=this.recurse(a.left,!0,1),f=this.recurse(a.right),function(a,c,d,g){var i=e(a,c,d,g),j=f(a,c,d,g);return ac(i.value,h.expression),cc(i.context),i.context[i.name]=j,b?{value:j}:j};case of.ArrayExpression:return g=[],d(a.elements,function(a){g.push(h.recurse(a))}),function(a,c,d,e){for(var f=[],h=0;h<g.length;++h)f.push(g[h](a,c,d,e));return b?{value:f}:f};case of.ObjectExpression:return g=[],d(a.properties,function(a){g.push({key:a.key.type===of.Identifier?a.key.name:""+a.key.value,value:h.recurse(a.value)})}),function(a,c,d,e){for(var f={},h=0;h<g.length;++h)f[g[h].key]=g[h].value(a,c,d,e);return b?{value:f}:f};case of.ThisExpression:return function(a){return b?{value:a}:a};case of.LocalsExpression:return function(a,c){return b?{value:c}:c};case of.NGValueParameter:return function(a,c,d){return b?{value:d}:d}}},"unary+":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?+g:0,b?{value:g}:g}},"unary-":function(a,b){return function(c,d,e,f){var g=a(c,d,e,f);return g=s(g)?-g:0,b?{value:g}:g}},"unary!":function(a,b){return function(c,d,e,f){var g=!a(c,d,e,f);return b?{value:g}:g}},"binary+":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=ec(h,i);return c?{value:j}:j}},"binary-":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g),i=b(d,e,f,g),j=(s(h)?h:0)-(s(i)?i:0);return c?{value:j}:j}},"binary*":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)*b(d,e,f,g);return c?{value:h}:h}},"binary/":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)/b(d,e,f,g);return c?{value:h}:h}},"binary%":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)%b(d,e,f,g);return c?{value:h}:h}},"binary===":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)===b(d,e,f,g);return c?{value:h}:h}},"binary!==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!==b(d,e,f,g);return c?{value:h}:h}},"binary==":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)==b(d,e,f,g);return c?{value:h}:h}},"binary!=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)!=b(d,e,f,g);return c?{value:h}:h}},"binary<":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<b(d,e,f,g);return c?{value:h}:h}},"binary>":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>b(d,e,f,g);return c?{value:h}:h}},"binary<=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)<=b(d,e,f,g);return c?{value:h}:h}},"binary>=":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)>=b(d,e,f,g);return c?{value:h}:h}},"binary&&":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)&&b(d,e,f,g);return c?{value:h}:h}},"binary||":function(a,b,c){return function(d,e,f,g){var h=a(d,e,f,g)||b(d,e,f,g);return c?{value:h}:h}},"ternary?:":function(a,b,c,d){return function(e,f,g,h){var i=a(e,f,g,h)?b(e,f,g,h):c(e,f,g,h);return d?{value:i}:i}},value:function(a,b){return function(){return b?{context:void 0,name:void 0,value:a}:a}},identifier:function(a,b,c,d,e){return function(f,g,h,i){var j=g&&a in g?g:f;d&&1!==d&&j&&!j[a]&&(j[a]={});var k=j?j[a]:void 0;return b&&ac(k,e),c?{context:j,name:a,value:k}:k}},computedMember:function(a,b,c,d,e){return function(f,g,h,i){var j,k,l=a(f,g,h,i);return null!=l&&(j=b(f,g,h,i),j=_b(j),$b(j,e),d&&1!==d&&(cc(l),l&&!l[j]&&(l[j]={})),k=l[j],ac(k,e)),c?{context:l,name:j,value:k}:k}},nonComputedMember:function(a,b,c,d,e,f){return function(g,h,i,j){var k=a(g,h,i,j);e&&1!==e&&(cc(k),k&&!k[b]&&(k[b]={}));var l=null!=k?k[b]:void 0;return(c||oc(b))&&ac(l,f),d?{context:k,name:b,value:l}:l}},inputs:function(a,b){return function(c,d,e,f){return f?f[b]:a(c,d,e)}}};var pf=function(a,b,c){this.lexer=a,this.$filter=b,this.options=c,this.ast=new of(a,c),this.astCompiler=c.csp?new nc(this.ast,b):new mc(this.ast,b)};pf.prototype={constructor:pf,parse:function(a){return this.astCompiler.compile(a,this.options.expensiveChecks)}};var qf=Object.prototype.valueOf,rf=b("$sce"),sf={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},tf=b("$compile"),uf=a.document.createElement("a"),vf=Fc(a.location.href);Ic.$inject=["$document"],Kc.$inject=["$provide"];var wf=22,xf=".",yf="0";Pc.$inject=["$locale"],Qc.$inject=["$locale"];var zf={yyyy:Vc("FullYear",4,0,!1,!0),yy:Vc("FullYear",2,0,!0,!0),y:Vc("FullYear",1,0,!1,!0),MMMM:Wc("Month"),MMM:Wc("Month",!0),MM:Vc("Month",2,1),M:Vc("Month",1,1),LLLL:Wc("Month",!1,!0),dd:Vc("Date",2),d:Vc("Date",1),HH:Vc("Hours",2),H:Vc("Hours",1),hh:Vc("Hours",2,-12),h:Vc("Hours",1,-12),mm:Vc("Minutes",2),m:Vc("Minutes",1),ss:Vc("Seconds",2),s:Vc("Seconds",1),sss:Vc("Milliseconds",3),EEEE:Wc("Day"),EEE:Wc("Day",!0),a:_c,Z:Xc,ww:$c(2),w:$c(1),G:ad,GG:ad,GGG:ad,GGGG:bd},Af=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))(.*)/,Bf=/^\-?\d+$/;cd.$inject=["$locale"];var Cf=p(Dd),Df=p(Ed);fd.$inject=["$parse"];var Ef=p({restrict:"E",compile:function(a,b){if(!b.href&&!b.xlinkHref)return function(a,b){if("a"===b[0].nodeName.toLowerCase()){var c="[object SVGAnimatedString]"===Od.call(b.prop("href"))?"xlink:href":"href";b.on("click",function(a){b.attr(c)||a.preventDefault()})}}}}),Ff={};d(xe,function(a,b){function c(a,c,e){a.$watch(e[d],function(a){e.$set(b,!!a)})}if("multiple"!=a){var d=pb("ng-"+b),e=c;"checked"===a&&(e=function(a,b,e){e.ngModel!==e[d]&&c(a,b,e)}),Ff[d]=function(){return{restrict:"A",priority:100,link:e}}}}),d(ze,function(a,b){Ff[b]=function(){return{priority:100,link:function(a,c,d){if("ngPattern"===b&&"/"==d.ngPattern.charAt(0)){var e=d.ngPattern.match(Ad);if(e)return void d.$set("ngPattern",new RegExp(e[1],e[2]))}a.$watch(d[b],function(a){d.$set(b,a)})}}}}),d(["src","srcset","href"],function(a){var b=pb("ng-"+a);Ff[b]=function(){return{priority:99,link:function(c,d,e){var f=a,g=a;"href"===a&&"[object SVGAnimatedString]"===Od.call(d.prop("href"))&&(g="xlinkHref",e.$attr[g]="xlink:href",f=null),e.$observe(b,function(b){return b?(e.$set(g,b),void(Hd&&f&&d.prop(f,e[g]))):void("href"===a&&e.$set(g,null))})}}}});var Gf={$addControl:n,$$renameControl:hd,$removeControl:n,$setValidity:n,$setDirty:n,$setPristine:n,$setSubmitted:n},Hf="ng-submitted";id.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var If=function(a){return["$timeout","$parse",function(b,c){function d(a){return""===a?c('this[""]').assign:c(a).assign||n}var e={name:"form",restrict:a?"EAC":"E",require:["form","^^?form"],controller:id,compile:function(c,e){c.addClass(qg).addClass(og);var f=e.name?"name":!(!a||!e.ngForm)&&"ngForm";return{pre:function(a,c,e,g){var h=g[0];if(!("action"in e)){var i=function(b){a.$apply(function(){h.$commitViewValue(),h.$setSubmitted()}),b.preventDefault()};ke(c[0],"submit",i),c.on("$destroy",function(){b(function(){le(c[0],"submit",i)},0,!1)})}var k=g[1]||h.$$parentForm;k.$addControl(h);var l=f?d(h.$name):n;f&&(l(a,h),e.$observe(f,function(b){h.$name!==b&&(l(a,void 0),h.$$parentForm.$$renameControl(h,b),(l=d(h.$name))(a,h))})),c.on("$destroy",function(){h.$$parentForm.$removeControl(h),l(a,void 0),j(h,Gf)})}}}};return e}]},Jf=If(),Kf=If(!0),Lf=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,Mf=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+\])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,Nf=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,Of=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,Pf=/^(\d{4,})-(\d{2})-(\d{2})$/,Qf=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Rf=/^(\d{4,})-W(\d\d)$/,Sf=/^(\d{4,})-(\d\d)$/,Tf=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,Uf="keydown wheel mousedown",Vf=pa();d("date,datetime-local,month,time,week".split(","),function(a){Vf[a]=!0});var Wf={text:kd,date:od("date",Pf,nd(Pf,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":od("datetimelocal",Qf,nd(Qf,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:od("time",Tf,nd(Tf,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:od("week",Rf,md,"yyyy-Www"),month:od("month",Sf,nd(Sf,["yyyy","MM"]),"yyyy-MM"),number:qd,url:rd,email:sd,radio:td,checkbox:vd,hidden:n,button:n,submit:n,reset:n,file:n},Xf=["$browser","$sniffer","$filter","$parse",function(a,b,c,d){return{restrict:"E",require:["?ngModel"],link:{pre:function(e,f,g,h){h[0]&&(Wf[Dd(g.type)]||Wf.text)(e,f,g,h[0],b,a,c,d)}}}}],Yf=/^(true|false|\d+)$/,Zf=function(){return{restrict:"A",priority:100,compile:function(a,b){return Yf.test(b.ngValue)?function(a,b,c){c.$set("value",a.$eval(c.ngValue))}:function(a,b,c){a.$watch(c.ngValue,function(a){c.$set("value",a)})}}}},$f=["$compile",function(a){return{restrict:"AC",compile:function(b){return a.$$addBindingClass(b),function(b,c,d){a.$$addBindingInfo(c,d.ngBind),c=c[0],b.$watch(d.ngBind,function(a){c.textContent=r(a)?"":a})}}}}],_f=["$interpolate","$compile",function(a,b){return{compile:function(c){return b.$$addBindingClass(c),function(c,d,e){var f=a(d.attr(e.$attr.ngBindTemplate));b.$$addBindingInfo(d,f.expressions),d=d[0],e.$observe("ngBindTemplate",function(a){d.textContent=r(a)?"":a})}}}}],ag=["$sce","$parse","$compile",function(a,b,c){return{restrict:"A",compile:function(d,e){var f=b(e.ngBindHtml),g=b(e.ngBindHtml,function(a){return(a||"").toString()});return c.$$addBindingClass(d),function(b,d,e){c.$$addBindingInfo(d,e.ngBindHtml),b.$watch(g,function(){d.html(a.getTrustedHtml(f(b))||"")})}}}}],bg=p({restrict:"A",require:"ngModel",link:function(a,b,c,d){d.$viewChangeListeners.push(function(){a.$eval(c.ngChange)})}}),cg=wd("",!0),dg=wd("Odd",0),eg=wd("Even",1),fg=gd({compile:function(a,b){b.$set("ngCloak",void 0),a.removeClass("ng-cloak")}}),gg=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],hg={},ig={blur:!0,focus:!0};d("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(a){var b=pb("ng-"+a);hg[b]=["$parse","$rootScope",function(c,d){return{restrict:"A",compile:function(e,f){var g=c(f[b],null,!0);return function(b,c){c.on(a,function(c){var e=function(){g(b,{$event:c})};ig[a]&&d.$$phase?b.$evalAsync(e):b.$apply(e)})}}}}]});var jg=["$animate","$compile",function(a,b){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(c,d,e,f,g){var h,i,j;c.$watch(e.ngIf,function(c){c?i||g(function(c,f){i=f,c[c.length++]=b.$$createComment("end ngIf",e.ngIf),h={clone:c},a.enter(c,d.parent(),d)}):(j&&(j.remove(),j=null),i&&(i.$destroy(),i=null),h&&(j=oa(h.clone),a.leave(j).then(function(){j=null}),h=null))})}}}],kg=["$templateRequest","$anchorScroll","$animate",function(a,b,c){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:Rd.noop,compile:function(d,e){var f=e.ngInclude||e.src,g=e.onload||"",h=e.autoscroll;return function(d,e,i,j,k){var l,m,n,o=0,p=function(){m&&(m.remove(),m=null),l&&(l.$destroy(),l=null),n&&(c.leave(n).then(function(){m=null}),m=n,n=null)};d.$watch(f,function(f){var i=function(){!s(h)||h&&!d.$eval(h)||b()},m=++o;f?(a(f,!0).then(function(a){if(!d.$$destroyed&&m===o){var b=d.$new();j.template=a;var h=k(b,function(a){p(),c.enter(a,null,e).then(i)});l=b,n=h,l.$emit("$includeContentLoaded",f),d.$eval(g)}},function(){d.$$destroyed||m===o&&(p(),d.$emit("$includeContentError",f))}),d.$emit("$includeContentRequested",f)):(p(),j.template=null)})}}}}],lg=["$compile",function(b){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(c,d,e,f){return Od.call(d[0]).match(/SVG/)?(d.empty(),void b(Aa(f.template,a.document).childNodes)(c,function(a){d.append(a)},{futureParentElement:d})):(d.html(f.template),void b(d.contents())(c))}}}],mg=gd({priority:450,compile:function(){return{pre:function(a,b,c){a.$eval(c.ngInit)}}}}),ng=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(a,b,c,e){var f=b.attr(c.$attr.ngList)||", ",g="false"!==c.ngTrim,h=g?Vd(f):f,i=function(a){if(!r(a)){var b=[];return a&&d(a.split(h),function(a){a&&b.push(g?Vd(a):a)}),b}};e.$parsers.push(i),e.$formatters.push(function(a){if(Td(a))return a.join(f)}),e.$isEmpty=function(a){return!a||!a.length}}}},og="ng-valid",pg="ng-invalid",qg="ng-pristine",rg="ng-dirty",sg="ng-untouched",tg="ng-touched",ug="ng-pending",vg="ng-empty",wg="ng-not-empty",xg=b("ngModel"),yg=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(a,b,c,e,f,g,h,i,j,k){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=k(c.name||"",!1)(a),this.$$parentForm=Gf;var l,m=f(c.ngModel),o=m.assign,p=m,q=o,t=null,u=this;this.$$setOptions=function(a){if(u.$options=a,a&&a.getterSetter){var b=f(c.ngModel+"()"),d=f(c.ngModel+"($$$p)");p=function(a){var c=m(a);return y(c)&&(c=b(a)),c},q=function(a,b){y(m(a))?d(a,{$$$p:b}):o(a,b)}}else if(!m.assign)throw xg("nonassign","Expression '{0}' is non-assignable. Element: {1}",c.ngModel,Z(e))},this.$render=n,this.$isEmpty=function(a){return r(a)||""===a||null===a||a!==a},this.$$updateEmptyClasses=function(a){u.$isEmpty(a)?(g.removeClass(e,wg),g.addClass(e,vg)):(g.removeClass(e,vg),g.addClass(e,wg))};var v=0;xd({ctrl:this,$element:e,set:function(a,b){a[b]=!0},unset:function(a,b){delete a[b]},$animate:g}),this.$setPristine=function(){u.$dirty=!1,u.$pristine=!0,g.removeClass(e,rg),g.addClass(e,qg)},this.$setDirty=function(){u.$dirty=!0,u.$pristine=!1,g.removeClass(e,qg),g.addClass(e,rg),u.$$parentForm.$setDirty()},this.$setUntouched=function(){u.$touched=!1,u.$untouched=!0,g.setClass(e,sg,tg)},this.$setTouched=function(){u.$touched=!0,u.$untouched=!1,g.setClass(e,tg,sg)},this.$rollbackViewValue=function(){h.cancel(t),u.$viewValue=u.$$lastCommittedViewValue,u.$render()},this.$validate=function(){if(!w(u.$modelValue)||!isNaN(u.$modelValue)){var a=u.$$lastCommittedViewValue,b=u.$$rawModelValue,c=u.$valid,d=u.$modelValue,e=u.$options&&u.$options.allowInvalid;u.$$runValidators(b,a,function(a){e||c===a||(u.$modelValue=a?b:void 0,u.$modelValue!==d&&u.$$writeModelToScope())})}},this.$$runValidators=function(a,b,c){function e(){var a=u.$$parserName||"parse";return r(l)?(h(a,null),!0):(l||(d(u.$validators,function(a,b){h(b,null)}),d(u.$asyncValidators,function(a,b){h(b,null)})),h(a,l),l)}function f(){var c=!0;return d(u.$validators,function(d,e){var f=d(a,b);c=c&&f,h(e,f)}),!!c||(d(u.$asyncValidators,function(a,b){h(b,null)}),!1)}function g(){var c=[],e=!0;d(u.$asyncValidators,function(d,f){var g=d(a,b);if(!G(g))throw xg("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",g);h(f,void 0),c.push(g.then(function(){h(f,!0)},function(){e=!1,h(f,!1)}))}),c.length?j.all(c).then(function(){i(e)},n):i(!0)}function h(a,b){k===v&&u.$setValidity(a,b)}function i(a){k===v&&c(a)}v++;var k=v;return e()&&f()?void g():void i(!1)},this.$commitViewValue=function(){var a=u.$viewValue;h.cancel(t),(u.$$lastCommittedViewValue!==a||""===a&&u.$$hasNativeValidators)&&(u.$$updateEmptyClasses(a),u.$$lastCommittedViewValue=a,u.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){function b(){u.$modelValue!==f&&u.$$writeModelToScope()}var c=u.$$lastCommittedViewValue,d=c;if(l=!r(d)||void 0)for(var e=0;e<u.$parsers.length;e++)if(d=u.$parsers[e](d),r(d)){l=!1;break}w(u.$modelValue)&&isNaN(u.$modelValue)&&(u.$modelValue=p(a));var f=u.$modelValue,g=u.$options&&u.$options.allowInvalid;u.$$rawModelValue=d,g&&(u.$modelValue=d,b()),u.$$runValidators(d,u.$$lastCommittedViewValue,function(a){g||(u.$modelValue=a?d:void 0,b())})},this.$$writeModelToScope=function(){q(a,u.$modelValue),d(u.$viewChangeListeners,function(a){try{a()}catch(a){b(a)}})},this.$setViewValue=function(a,b){u.$viewValue=a,u.$options&&!u.$options.updateOnDefault||u.$$debounceViewValueCommit(b)},this.$$debounceViewValueCommit=function(b){var c,d=0,e=u.$options;e&&s(e.debounce)&&(c=e.debounce,w(c)?d=c:w(c[b])?d=c[b]:w(c.default)&&(d=c.default)),h.cancel(t),d?t=h(function(){u.$commitViewValue()},d):i.$$phase?u.$commitViewValue():a.$apply(function(){u.$commitViewValue()})},a.$watch(function(){var b=p(a);if(b!==u.$modelValue&&(u.$modelValue===u.$modelValue||b===b)){u.$modelValue=u.$$rawModelValue=b,l=void 0;for(var c=u.$formatters,d=c.length,e=b;d--;)e=c[d](e);u.$viewValue!==e&&(u.$$updateEmptyClasses(e),u.$viewValue=u.$$lastCommittedViewValue=e,u.$render(),u.$$runValidators(b,e,n))}return b})}],zg=["$rootScope",function(a){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:yg,priority:1,compile:function(b){return b.addClass(qg).addClass(sg).addClass(og),{pre:function(a,b,c,d){var e=d[0],f=d[1]||e.$$parentForm;e.$$setOptions(d[2]&&d[2].$options),f.$addControl(e),c.$observe("name",function(a){e.$name!==a&&e.$$parentForm.$$renameControl(e,a)}),a.$on("$destroy",function(){e.$$parentForm.$removeControl(e)})},post:function(b,c,d,e){var f=e[0];f.$options&&f.$options.updateOn&&c.on(f.$options.updateOn,function(a){f.$$debounceViewValueCommit(a&&a.type)}),c.on("blur",function(){f.$touched||(a.$$phase?b.$evalAsync(f.$setTouched):b.$apply(f.$setTouched))})}}}}}],Ag=/(\s+|^)default(\s+|$)/,Bg=function(){return{restrict:"A",controller:["$scope","$attrs",function(a,b){var c=this;this.$options=N(a.$eval(b.ngModelOptions)),s(this.$options.updateOn)?(this.$options.updateOnDefault=!1,this.$options.updateOn=Vd(this.$options.updateOn.replace(Ag,function(){return c.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Cg=gd({terminal:!0,priority:1e3}),Dg=b("ngOptions"),Eg=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Fg=["$compile","$document","$parse",function(b,e,f){function g(a,b,d){function e(a,b,c,d,e){this.selectValue=a,this.viewValue=b,this.label=c,this.group=d,this.disabled=e}function g(a){var b;if(!j&&c(a))b=a;else{b=[];for(var d in a)a.hasOwnProperty(d)&&"$"!==d.charAt(0)&&b.push(d)}return b}var h=a.match(Eg);if(!h)throw Dg("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",a,Z(b));var i=h[5]||h[7],j=h[6],k=/ as /.test(h[0])&&h[1],l=h[9],m=f(h[2]?h[1]:i),n=k&&f(k),o=n||m,p=l&&f(l),q=l?function(a,b){return p(d,b)}:function(a){return Za(a)},r=function(a,b){return q(a,x(a,b))},s=f(h[2]||h[1]),t=f(h[3]||""),u=f(h[4]||""),v=f(h[8]),w={},x=j?function(a,b){return w[j]=b,w[i]=a,w}:function(a){return w[i]=a,w};return{trackBy:l,getTrackByValue:r,getWatchables:f(v,function(a){var b=[];a=a||[];for(var c=g(a),e=c.length,f=0;f<e;f++){var i=a===c?f:c[f],j=a[i],k=x(j,i),l=q(j,k);if(b.push(l),h[2]||h[1]){var m=s(d,k);b.push(m)}if(h[4]){var n=u(d,k);b.push(n)}}return b}),getOptions:function(){for(var a=[],b={},c=v(d)||[],f=g(c),h=f.length,i=0;i<h;i++){var j=c===f?i:f[i],k=c[j],m=x(k,j),n=o(d,m),p=q(n,m),w=s(d,m),y=t(d,m),z=u(d,m),A=new e(p,n,w,y,z);a.push(A),b[p]=A}return{items:a,selectValueMap:b,getOptionFromViewValue:function(a){return b[r(a)]},getViewValueFromOption:function(a){return l?Rd.copy(a.viewValue):a.viewValue}}}}}function h(a,c,f,h){function k(a,b){var c=i.cloneNode(!1);b.appendChild(c),l(a,c)}function l(a,b){a.element=b,b.disabled=a.disabled,a.label!==b.label&&(b.label=a.label,b.textContent=a.label),a.value!==b.value&&(b.value=a.selectValue)}function m(){var a=x&&o.readValue();if(x)for(var b=x.items.length-1;b>=0;b--){var d=x.items[b];Ra(d.group?d.element.parentNode:d.element);
}x=y.getOptions();var e={};if(v&&c.prepend(n),x.items.forEach(function(a){var b;s(a.group)?(b=e[a.group],b||(b=j.cloneNode(!1),z.appendChild(b),b.label=a.group,e[a.group]=b),k(a,b)):k(a,z)}),c[0].appendChild(z),p.$render(),!p.$isEmpty(a)){var f=o.readValue(),g=y.trackBy||q;(g?P(a,f):a===f)||(p.$setViewValue(f),p.$render())}}for(var n,o=h[0],p=h[1],q=f.multiple,r=0,t=c.children(),u=t.length;r<u;r++)if(""===t[r].value){n=t.eq(r);break}var v=!!n,w=Id(i.cloneNode(!1));w.val("?");var x,y=g(f.ngOptions,c,a),z=e[0].createDocumentFragment(),A=function(){v||c.prepend(n),c.val(""),n.prop("selected",!0),n.attr("selected",!0)},B=function(){v||n.remove()},C=function(){c.prepend(w),c.val("?"),w.prop("selected",!0),w.attr("selected",!0)},D=function(){w.remove()};q?(p.$isEmpty=function(a){return!a||0===a.length},o.writeValue=function(a){x.items.forEach(function(a){a.element.selected=!1}),a&&a.forEach(function(a){var b=x.getOptionFromViewValue(a);b&&(b.element.selected=!0)})},o.readValue=function(){var a=c.val()||[],b=[];return d(a,function(a){var c=x.selectValueMap[a];c&&!c.disabled&&b.push(x.getViewValueFromOption(c))}),b},y.trackBy&&a.$watchCollection(function(){if(Td(p.$viewValue))return p.$viewValue.map(function(a){return y.getTrackByValue(a)})},function(){p.$render()})):(o.writeValue=function(a){var b=x.getOptionFromViewValue(a);b?(c[0].value!==b.selectValue&&(D(),B(),c[0].value=b.selectValue,b.element.selected=!0),b.element.setAttribute("selected","selected")):null===a||v?(D(),A()):(B(),C())},o.readValue=function(){var a=x.selectValueMap[c.val()];return a&&!a.disabled?(B(),D(),x.getViewValueFromOption(a)):null},y.trackBy&&a.$watch(function(){return y.getTrackByValue(p.$viewValue)},function(){p.$render()})),v?(n.remove(),b(n)(a),n.removeClass("ng-scope")):n=Id(i.cloneNode(!1)),c.empty(),m(),a.$watchCollection(y.getWatchables,m)}var i=a.document.createElement("option"),j=a.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(a,b,c,d){d[0].registerOption=n},post:h}}}],Gg=["$locale","$interpolate","$log",function(a,b,c){var e=/{}/g,f=/^when(Minus)?(.+)$/;return{link:function(g,h,i){function j(a){h.text(a||"")}var k,l=i.count,m=i.$attr.when&&h.attr(i.$attr.when),o=i.offset||0,p=g.$eval(m)||{},q={},s=b.startSymbol(),t=b.endSymbol(),u=s+l+"-"+o+t,v=Rd.noop;d(i,function(a,b){var c=f.exec(b);if(c){var d=(c[1]?"-":"")+Dd(c[2]);p[d]=h.attr(i.$attr[b])}}),d(p,function(a,c){q[c]=b(a.replace(e,u))}),g.$watch(l,function(b){var d=parseFloat(b),e=isNaN(d);if(e||d in p||(d=a.pluralCat(d-o)),d!==k&&!(e&&w(k)&&isNaN(k))){v();var f=q[d];r(f)?(null!=b&&c.debug("ngPluralize: no rule defined for '"+d+"' in "+m),v=n,j()):v=g.$watch(f,j),k=d}})}}}],Hg=["$parse","$animate","$compile",function(a,e,f){var g="$$NG_REMOVED",h=b("ngRepeat"),i=function(a,b,c,d,e,f,g){a[c]=d,e&&(a[e]=f),a.$index=b,a.$first=0===b,a.$last=b===g-1,a.$middle=!(a.$first||a.$last),a.$odd=!(a.$even=0===(1&b))},j=function(a){return a.clone[0]},k=function(a){return a.clone[a.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(b,l){var m=l.ngRepeat,n=f.$$createComment("end ngRepeat",m),o=m.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!o)throw h("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",m);var p=o[1],q=o[2],r=o[3],s=o[4];if(o=p.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/),!o)throw h("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",p);var t=o[3]||o[1],u=o[2];if(r&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(r)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(r)))throw h("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",r);var v,w,x,y,z={$id:Za};return s?v=a(s):(x=function(a,b){return Za(b)},y=function(a){return a}),function(a,b,f,l,o){v&&(w=function(b,c,d){return u&&(z[u]=b),z[t]=c,z.$index=d,v(a,z)});var p=pa();a.$watchCollection(q,function(f){var l,q,s,v,z,A,B,C,D,E,F,G,H=b[0],I=pa();if(r&&(a[r]=f),c(f))D=f,C=w||x;else{C=w||y,D=[];for(var J in f)Cd.call(f,J)&&"$"!==J.charAt(0)&&D.push(J)}for(v=D.length,F=new Array(v),l=0;l<v;l++)if(z=f===D?l:D[l],A=f[z],B=C(z,A,l),p[B])E=p[B],delete p[B],I[B]=E,F[l]=E;else{if(I[B])throw d(F,function(a){a&&a.scope&&(p[a.id]=a)}),h("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",m,B,A);F[l]={id:B,scope:void 0,clone:void 0},I[B]=!0}for(var K in p){if(E=p[K],G=oa(E.clone),e.leave(G),G[0].parentNode)for(l=0,q=G.length;l<q;l++)G[l][g]=!0;E.scope.$destroy()}for(l=0;l<v;l++)if(z=f===D?l:D[l],A=f[z],E=F[l],E.scope){s=H;do s=s.nextSibling;while(s&&s[g]);j(E)!=s&&e.move(oa(E.clone),null,H),H=k(E),i(E.scope,l,t,A,u,z,v)}else o(function(a,b){E.scope=b;var c=n.cloneNode(!1);a[a.length++]=c,e.enter(a,null,H),H=c,E.clone=a,I[E.id]=E,i(E.scope,l,t,A,u,z,v)});p=I})}}}}],Ig="ng-hide",Jg="ng-hide-animate",Kg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngShow,function(b){a[b?"removeClass":"addClass"](c,Ig,{tempClasses:Jg})})}}}],Lg=["$animate",function(a){return{restrict:"A",multiElement:!0,link:function(b,c,d){b.$watch(d.ngHide,function(b){a[b?"addClass":"removeClass"](c,Ig,{tempClasses:Jg})})}}}],Mg=gd(function(a,b,c){a.$watch(c.ngStyle,function(a,c){c&&a!==c&&d(c,function(a,c){b.css(c,"")}),a&&b.css(a)},!0)}),Ng=["$animate","$compile",function(a,b){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(c,e,f,g){var h=f.ngSwitch||f.on,i=[],j=[],k=[],l=[],m=function(a,b){return function(){a.splice(b,1)}};c.$watch(h,function(c){var e,f;for(e=0,f=k.length;e<f;++e)a.cancel(k[e]);for(k.length=0,e=0,f=l.length;e<f;++e){var h=oa(j[e].clone);l[e].$destroy();var n=k[e]=a.leave(h);n.then(m(k,e))}j.length=0,l.length=0,(i=g.cases["!"+c]||g.cases["?"])&&d(i,function(c){c.transclude(function(d,e){l.push(e);var f=c.element;d[d.length++]=b.$$createComment("end ngSwitchWhen");var g={clone:d};j.push(g),a.enter(d,f.parent(),f)})})})}}}],Og=gd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["!"+c.ngSwitchWhen]=d.cases["!"+c.ngSwitchWhen]||[],d.cases["!"+c.ngSwitchWhen].push({transclude:e,element:b})}}),Pg=gd({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(a,b,c,d,e){d.cases["?"]=d.cases["?"]||[],d.cases["?"].push({transclude:e,element:b})}}),Qg=b("ngTransclude"),Rg=gd({restrict:"EAC",link:function(a,b,c,d,e){function f(a){a.length&&(b.empty(),b.append(a))}if(c.ngTransclude===c.$attr.ngTransclude&&(c.ngTransclude=""),!e)throw Qg("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",Z(b));var g=c.ngTransclude||c.ngTranscludeSlot;e(f,null,g)}}),Sg=["$templateCache",function(a){return{restrict:"E",terminal:!0,compile:function(b,c){if("text/ng-template"==c.type){var d=c.id,e=b[0].text;a.put(d,e)}}}}],Tg={$setViewValue:n,$render:n},Ug=["$element","$scope",function(b,c){var d=this,e=new $a;d.ngModelCtrl=Tg,d.unknownOption=Id(a.document.createElement("option")),d.renderUnknownOption=function(a){var c="? "+Za(a)+" ?";d.unknownOption.val(c),b.prepend(d.unknownOption),b.val(c)},c.$on("$destroy",function(){d.renderUnknownOption=n}),d.removeUnknownOption=function(){d.unknownOption.parent()&&d.unknownOption.remove()},d.readValue=function(){return d.removeUnknownOption(),b.val()},d.writeValue=function(a){d.hasOption(a)?(d.removeUnknownOption(),b.val(a),""===a&&d.emptyOption.prop("selected",!0)):null==a&&d.emptyOption?(d.removeUnknownOption(),b.val("")):d.renderUnknownOption(a)},d.addOption=function(a,b){if(b[0].nodeType!==ee){ma(a,'"option value"'),""===a&&(d.emptyOption=b);var c=e.get(a)||0;e.put(a,c+1),d.ngModelCtrl.$render(),zd(b)}},d.removeOption=function(a){var b=e.get(a);b&&(1===b?(e.remove(a),""===a&&(d.emptyOption=void 0)):e.put(a,b-1))},d.hasOption=function(a){return!!e.get(a)},d.registerOption=function(a,b,c,e,f){if(e){var g;c.$observe("value",function(a){s(g)&&d.removeOption(g),g=a,d.addOption(a,b)})}else f?a.$watch(f,function(a,e){c.$set("value",a),e!==a&&d.removeOption(e),d.addOption(a,b)}):d.addOption(c.value,b);b.on("$destroy",function(){d.removeOption(c.value),d.ngModelCtrl.$render()})}}],Vg=function(){function a(a,b,c,e){var f=e[1];if(f){var g=e[0];if(g.ngModelCtrl=f,b.on("change",function(){a.$apply(function(){f.$setViewValue(g.readValue())})}),c.multiple){g.readValue=function(){var a=[];return d(b.find("option"),function(b){b.selected&&a.push(b.value)}),a},g.writeValue=function(a){var c=new $a(a);d(b.find("option"),function(a){a.selected=s(c.get(a.value))})};var h,i=NaN;a.$watch(function(){i!==f.$viewValue||P(h,f.$viewValue)||(h=O(f.$viewValue),f.$render()),i=f.$viewValue}),f.$isEmpty=function(a){return!a||0===a.length}}}}function b(a,b,c,d){var e=d[1];if(e){var f=d[0];e.$render=function(){f.writeValue(e.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:Ug,priority:1,link:{pre:a,post:b}}},Wg=["$interpolate",function(a){return{restrict:"E",priority:100,compile:function(b,c){if(s(c.value))var d=a(c.value,!0);else{var e=a(b.text(),!0);e||c.$set("value",b.text())}return function(a,b,c){var f="$selectController",g=b.parent(),h=g.data(f)||g.parent().data(f);h&&h.registerOption(a,b,c,d,e)}}}}],Xg=p({restrict:"E",terminal:!1}),Yg=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){d&&(c.required=!0,d.$validators.required=function(a,b){return!c.required||!d.$isEmpty(b)},c.$observe("required",function(){d.$validate()}))}}},Zg=function(){return{restrict:"A",require:"?ngModel",link:function(a,c,d,e){if(e){var f,g=d.ngPattern||d.pattern;d.$observe("pattern",function(a){if(v(a)&&a.length>0&&(a=new RegExp("^"+a+"$")),a&&!a.test)throw b("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",g,a,Z(c));f=a||void 0,e.$validate()}),e.$validators.pattern=function(a,b){return e.$isEmpty(b)||r(f)||f.test(b)}}}}},$g=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=-1;c.$observe("maxlength",function(a){var b=l(a);e=isNaN(b)?-1:b,d.$validate()}),d.$validators.maxlength=function(a,b){return e<0||d.$isEmpty(b)||b.length<=e}}}}},_g=function(){return{restrict:"A",require:"?ngModel",link:function(a,b,c,d){if(d){var e=0;c.$observe("minlength",function(a){e=l(a)||0,d.$validate()}),d.$validators.minlength=function(a,b){return d.$isEmpty(b)||b.length>=e}}}}};return a.angular.bootstrap?void(a.console&&console.log("WARNING: Tried to load angular more than once.")):(ja(),ta(Rd),Rd.module("ngLocale",[],["$provide",function(a){function b(a){a+="";var b=a.indexOf(".");return b==-1?0:a.length-b-1}function c(a,c){var d=c;void 0===d&&(d=Math.min(b(a),3));var e=Math.pow(10,d),f=(a*e|0)%e;return{v:d,f:f}}var d={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};a.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(a,b){var e=0|a,f=c(a,b);return 1==e&&0==f.v?d.ONE:d.OTHER}})}]),void Id(a.document).ready(function(){ea(a.document,fa)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(a,b,c){function d(a){for(var b in a)if(void 0!==f.style[b])return a[b]}var e=function(d,f,g){g=g||{};var h=a.defer(),i=e[g.animation?"animationEndEventName":"transitionEndEventName"],j=function(a){c.$apply(function(){d.unbind(i,j),h.resolve(d)})};return i&&d.bind(i,j),b(function(){angular.isString(f)?d.addClass(f):angular.isFunction(f)?f(d):angular.isObject(f)&&d.css(f),i||h.resolve(d)}),h.promise.cancel=function(){i&&d.unbind(i,j),h.reject("Transition cancelled")},h.promise},f=document.createElement("trans"),g={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},h={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return e.transitionEndEventName=d(g),e.animationEndEventName=d(h),e}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(a){return{link:function(b,c,d){function e(b){function d(){j===e&&(j=void 0)}var e=a(c,b);return j&&j.cancel(),j=e,e.then(d,d),e}function f(){k?(k=!1,g()):(c.removeClass("collapse").addClass("collapsing"),e({height:c[0].scrollHeight+"px"}).then(g))}function g(){c.removeClass("collapsing"),c.addClass("collapse in"),c.css({height:"auto"})}function h(){if(k)k=!1,i(),c.css({height:0});else{c.css({height:c[0].scrollHeight+"px"});c[0].offsetWidth;c.removeClass("collapse in").addClass("collapsing"),e({height:0}).then(i)}}function i(){c.removeClass("collapsing"),c.addClass("collapse")}var j,k=!0;b.$watch(d.collapse,function(a){a?h():f()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(a,b,c){this.groups=[],this.closeOthers=function(d){var e=angular.isDefined(b.closeOthers)?a.$eval(b.closeOthers):c.closeOthers;e&&angular.forEach(this.groups,function(a){a!==d&&(a.isOpen=!1)})},this.addGroup=function(a){var b=this;this.groups.push(a),a.$on("$destroy",function(c){b.removeGroup(a)})},this.removeGroup=function(a){var b=this.groups.indexOf(a);b!==-1&&this.groups.splice(b,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(a){this.heading=a}},link:function(a,b,c,d){d.addGroup(a),a.$watch("isOpen",function(b){b&&d.closeOthers(a)}),a.toggleOpen=function(){a.isDisabled||(a.isOpen=!a.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(a,b,c,d,e){d.setHeading(e(a,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(a,b,c,d){a.$watch(function(){return d[c.accordionTransclude]},function(a){a&&(b.html(""),b.append(a))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(a,b){a.closeable="close"in b,this.close=a.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(a){return{require:"alert",link:function(b,c,d,e){a(function(){e.close()},parseInt(d.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(a,b,c){b.addClass("ng-binding").data("$binding",c.bindHtmlUnsafe),a.$watch(c.bindHtmlUnsafe,function(a){b.html(a||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(a){this.activeClass=a.activeClass||"active",this.toggleEvent=a.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){var e=d[0],f=d[1];f.$render=function(){b.toggleClass(e.activeClass,angular.equals(f.$modelValue,a.$eval(c.btnRadio)))},b.bind(e.toggleEvent,function(){var d=b.hasClass(e.activeClass);d&&!angular.isDefined(c.uncheckable)||a.$apply(function(){f.$setViewValue(d?null:a.$eval(c.btnRadio)),f.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(a,b,c,d){function e(){return g(c.btnCheckboxTrue,!0)}function f(){return g(c.btnCheckboxFalse,!1)}function g(b,c){var d=a.$eval(b);return angular.isDefined(d)?d:c}var h=d[0],i=d[1];i.$render=function(){b.toggleClass(h.activeClass,angular.equals(i.$modelValue,e()))},b.bind(h.toggleEvent,function(){a.$apply(function(){i.$setViewValue(b.hasClass(h.activeClass)?f():e()),i.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(a,b,c,d){function e(){f();var b=+a.interval;!isNaN(b)&&b>0&&(h=c(g,b))}function f(){h&&(c.cancel(h),h=null)}function g(){var b=+a.interval;i&&!isNaN(b)&&b>0?a.next():a.pause()}var h,i,j=this,k=j.slides=a.slides=[],l=-1;j.currentSlide=null;var m=!1;j.select=a.select=function(c,f){function g(){if(!m){if(j.currentSlide&&angular.isString(f)&&!a.noTransition&&c.$element){c.$element.addClass(f);c.$element[0].offsetWidth;angular.forEach(k,function(a){angular.extend(a,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(c,{direction:f,active:!0,entering:!0}),angular.extend(j.currentSlide||{},{direction:f,leaving:!0}),a.$currentTransition=d(c.$element,{}),function(b,c){a.$currentTransition.then(function(){h(b,c)},function(){h(b,c)})}(c,j.currentSlide)}else h(c,j.currentSlide);j.currentSlide=c,l=i,e()}}function h(b,c){angular.extend(b,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(c||{},{direction:"",active:!1,leaving:!1,entering:!1}),a.$currentTransition=null}var i=k.indexOf(c);void 0===f&&(f=i>l?"next":"prev"),c&&c!==j.currentSlide&&(a.$currentTransition?(a.$currentTransition.cancel(),b(g)):g())},a.$on("$destroy",function(){m=!0}),j.indexOfSlide=function(a){return k.indexOf(a)},a.next=function(){var b=(l+1)%k.length;if(!a.$currentTransition)return j.select(k[b],"next")},a.prev=function(){var b=l-1<0?k.length-1:l-1;if(!a.$currentTransition)return j.select(k[b],"prev")},a.isActive=function(a){return j.currentSlide===a},a.$watch("interval",e),a.$on("$destroy",f),a.play=function(){i||(i=!0,e())},a.pause=function(){a.noPause||(i=!1,f())},j.addSlide=function(b,c){b.$element=c,k.push(b),1===k.length||b.active?(j.select(k[k.length-1]),1==k.length&&a.play()):b.active=!1},j.removeSlide=function(a){var b=k.indexOf(a);k.splice(b,1),k.length>0&&a.active?b>=k.length?j.select(k[b-1]):j.select(k[b]):l>b&&l--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(a,b,c,d){d.addSlide(a,b),a.$on("$destroy",function(){d.removeSlide(a)}),a.$watch("active",function(b){b&&d.select(a)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(a,b){function c(a){var c=[],d=a.split("");return angular.forEach(e,function(b,e){var f=a.indexOf(e);if(f>-1){a=a.split(""),d[f]="("+b.regex+")",a[f]="$";for(var g=f+1,h=f+e.length;g<h;g++)d[g]="",a[g]="$";a=a.join(""),c.push({index:f,apply:b.apply})}}),{regex:new RegExp("^"+d.join("")+"$"),map:b(c,"index")}}function d(a,b,c){return 1===b&&c>28?29===c&&(a%4===0&&a%100!==0||a%400===0):3!==b&&5!==b&&8!==b&&10!==b||c<31}this.parsers={};var e={yyyy:{regex:"\\d{4}",apply:function(a){this.year=+a}},yy:{regex:"\\d{2}",apply:function(a){this.year=+a+2e3}},y:{regex:"\\d{1,4}",apply:function(a){this.year=+a}},MMMM:{regex:a.DATETIME_FORMATS.MONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.MONTH.indexOf(b)}},MMM:{regex:a.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(b){this.month=a.DATETIME_FORMATS.SHORTMONTH.indexOf(b)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(a){this.month=a-1}},M:{regex:"[1-9]|1[0-2]",apply:function(a){this.month=a-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(a){this.date=+a}},EEEE:{regex:a.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:a.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(b,e){if(!angular.isString(b)||!e)return b;e=a.DATETIME_FORMATS[e]||e,this.parsers[e]||(this.parsers[e]=c(e));var f=this.parsers[e],g=f.regex,h=f.map,i=b.match(g);if(i&&i.length){for(var j,k={year:1900,month:0,date:1,hours:0},l=1,m=i.length;l<m;l++){var n=h[l-1];n.apply&&n.apply.call(k,i[l])}return d(k.year,k.month,k.date)&&(j=new Date(k.year,k.month,k.date,k.hours)),j}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(a,b){function c(a,c){return a.currentStyle?a.currentStyle[c]:b.getComputedStyle?b.getComputedStyle(a)[c]:a.style[c]}function d(a){return"static"===(c(a,"position")||"static")}var e=function(b){for(var c=a[0],e=b.offsetParent||c;e&&e!==c&&d(e);)e=e.offsetParent;return e||c};return{position:function(b){var c=this.offset(b),d={top:0,left:0},f=e(b[0]);f!=a[0]&&(d=this.offset(angular.element(f)),d.top+=f.clientTop-f.scrollTop,d.left+=f.clientLeft-f.scrollLeft);var g=b[0].getBoundingClientRect();return{width:g.width||b.prop("offsetWidth"),height:g.height||b.prop("offsetHeight"),top:c.top-d.top,left:c.left-d.left}},offset:function(c){var d=c[0].getBoundingClientRect();return{width:d.width||c.prop("offsetWidth"),height:d.height||c.prop("offsetHeight"),top:d.top+(b.pageYOffset||a[0].documentElement.scrollTop),left:d.left+(b.pageXOffset||a[0].documentElement.scrollLeft)}},positionElements:function(a,b,c,d){var e,f,g,h,i=c.split("-"),j=i[0],k=i[1]||"center";e=d?this.offset(a):this.position(a),f=b.prop("offsetWidth"),g=b.prop("offsetHeight");var l={center:function(){return e.left+e.width/2-f/2},left:function(){return e.left},right:function(){return e.left+e.width}},m={center:function(){return e.top+e.height/2-g/2},top:function(){return e.top},bottom:function(){return e.top+e.height}};switch(j){case"right":h={top:m[k](),left:l[j]()};break;case"left":h={top:m[k](),left:e.left-f};break;case"bottom":h={top:m[j](),left:l[k]()};break;default:h={top:e.top-g,left:l[k]()}}return h}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(a,b,c,d,e,f,g,h){var i=this,j={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(c,e){i[c]=angular.isDefined(b[c])?e<8?d(b[c])(a.$parent):a.$parent.$eval(b[c]):h[c]}),angular.forEach(["minDate","maxDate"],function(d){b[d]?a.$parent.$watch(c(b[d]),function(a){i[d]=a?new Date(a):null,i.refreshView()}):i[d]=h[d]?new Date(h[d]):null}),a.datepickerMode=a.datepickerMode||h.datepickerMode,a.uniqueId="datepicker-"+a.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(b.initDate)?a.$parent.$eval(b.initDate):new Date,a.isActive=function(b){return 0===i.compare(b.date,i.activeDate)&&(a.activeDateId=b.uid,!0)},this.init=function(a){j=a,j.$render=function(){i.render()}},this.render=function(){if(j.$modelValue){var a=new Date(j.$modelValue),b=!isNaN(a);b?this.activeDate=a:f.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),j.$setValidity("date",b)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var a=j.$modelValue?new Date(j.$modelValue):null;j.$setValidity("date-disabled",!a||this.element&&!this.isDisabled(a))}},this.createDateObject=function(a,b){var c=j.$modelValue?new Date(j.$modelValue):null;return{date:a,label:g(a,b),selected:c&&0===this.compare(a,c),disabled:this.isDisabled(a),current:0===this.compare(a,new Date)}},this.isDisabled=function(c){return this.minDate&&this.compare(c,this.minDate)<0||this.maxDate&&this.compare(c,this.maxDate)>0||b.dateDisabled&&a.dateDisabled({date:c,mode:a.datepickerMode})},this.split=function(a,b){for(var c=[];a.length>0;)c.push(a.splice(0,b));return c},a.select=function(b){if(a.datepickerMode===i.minMode){var c=j.$modelValue?new Date(j.$modelValue):new Date(0,0,0,0,0,0,0);c.setFullYear(b.getFullYear(),b.getMonth(),b.getDate()),j.$setViewValue(c),j.$render()}else i.activeDate=b,a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)-1]},a.move=function(a){var b=i.activeDate.getFullYear()+a*(i.step.years||0),c=i.activeDate.getMonth()+a*(i.step.months||0);i.activeDate.setFullYear(b,c,1),i.refreshView()},a.toggleMode=function(b){b=b||1,a.datepickerMode===i.maxMode&&1===b||a.datepickerMode===i.minMode&&b===-1||(a.datepickerMode=i.modes[i.modes.indexOf(a.datepickerMode)+b])},a.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var k=function(){e(function(){i.element[0].focus()},0,!1)};a.$on("datepicker.focus",k),a.keydown=function(b){var c=a.keys[b.which];if(c&&!b.shiftKey&&!b.altKey)if(b.preventDefault(),b.stopPropagation(),"enter"===c||"space"===c){if(i.isDisabled(i.activeDate))return;a.select(i.activeDate),k()}else!b.ctrlKey||"up"!==c&&"down"!==c?(i.handleKeyDown(c,b),i.refreshView()):(a.toggleMode("up"===c?1:-1),k())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}).directive("daypicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(b,c,d,e){function f(a,b){return 1!==b||a%4!==0||a%100===0&&a%400!==0?i[b]:29}function g(a,b){var c=new Array(b),d=new Date(a),e=0;for(d.setHours(12);e<b;)c[e++]=new Date(d),d.setDate(d.getDate()+1);return c}function h(a){var b=new Date(a);b.setDate(b.getDate()+4-(b.getDay()||7));var c=b.getTime();return b.setMonth(0),b.setDate(1),Math.floor(Math.round((c-b)/864e5)/7)+1}b.showWeeks=e.showWeeks,e.step={months:1},e.element=c;var i=[31,28,31,30,31,30,31,31,30,31,30,31];e._refreshView=function(){var c=e.activeDate.getFullYear(),d=e.activeDate.getMonth(),f=new Date(c,d,1),i=e.startingDay-f.getDay(),j=i>0?7-i:-i,k=new Date(f);j>0&&k.setDate(-j+1);for(var l=g(k,42),m=0;m<42;m++)l[m]=angular.extend(e.createDateObject(l[m],e.formatDay),{secondary:l[m].getMonth()!==d,uid:b.uniqueId+"-"+m});b.labels=new Array(7);for(var n=0;n<7;n++)b.labels[n]={abbr:a(l[n].date,e.formatDayHeader),full:a(l[n].date,"EEEE")};if(b.title=a(e.activeDate,e.formatDayTitle),b.rows=e.split(l,7),b.showWeeks){b.weekNumbers=[];for(var o=h(b.rows[0][0].date),p=b.rows.length;b.weekNumbers.push(o++)<p;);}},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth(),a.getDate())-new Date(b.getFullYear(),b.getMonth(),b.getDate())},e.handleKeyDown=function(a,b){var c=e.activeDate.getDate();if("left"===a)c-=1;else if("up"===a)c-=7;else if("right"===a)c+=1;else if("down"===a)c+=7;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getMonth()+("pageup"===a?-1:1);e.activeDate.setMonth(d,1),c=Math.min(f(e.activeDate.getFullYear(),e.activeDate.getMonth()),c)}else"home"===a?c=1:"end"===a&&(c=f(e.activeDate.getFullYear(),e.activeDate.getMonth()));e.activeDate.setDate(c)},e.refreshView()}}}]).directive("monthpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(b,c,d,e){e.step={years:1},e.element=c,e._refreshView=function(){for(var c=new Array(12),d=e.activeDate.getFullYear(),f=0;f<12;f++)c[f]=angular.extend(e.createDateObject(new Date(d,f,1),e.formatMonth),{uid:b.uniqueId+"-"+f});b.title=a(e.activeDate,e.formatMonthTitle),b.rows=e.split(c,3)},e.compare=function(a,b){return new Date(a.getFullYear(),a.getMonth())-new Date(b.getFullYear(),b.getMonth())},e.handleKeyDown=function(a,b){var c=e.activeDate.getMonth();if("left"===a)c-=1;else if("up"===a)c-=3;else if("right"===a)c+=1;else if("down"===a)c+=3;else if("pageup"===a||"pagedown"===a){var d=e.activeDate.getFullYear()+("pageup"===a?-1:1);e.activeDate.setFullYear(d)}else"home"===a?c=0:"end"===a&&(c=11);e.activeDate.setMonth(c)},e.refreshView()}}}]).directive("yearpicker",["dateFilter",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(a,b,c,d){function e(a){return parseInt((a-1)/f,10)*f+1}var f=d.yearRange;d.step={years:f},d.element=b,
d._refreshView=function(){for(var b=new Array(f),c=0,g=e(d.activeDate.getFullYear());c<f;c++)b[c]=angular.extend(d.createDateObject(new Date(g+c,0,1),d.formatYear),{uid:a.uniqueId+"-"+c});a.title=[b[0].label,b[f-1].label].join(" - "),a.rows=d.split(b,5)},d.compare=function(a,b){return a.getFullYear()-b.getFullYear()},d.handleKeyDown=function(a,b){var c=d.activeDate.getFullYear();"left"===a?c-=1:"up"===a?c-=5:"right"===a?c+=1:"down"===a?c+=5:"pageup"===a||"pagedown"===a?c+=("pageup"===a?-1:1)*d.step.years:"home"===a?c=e(d.activeDate.getFullYear()):"end"===a&&(c=e(d.activeDate.getFullYear())+f-1),d.activeDate.setFullYear(c)},d.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datepickerPopup",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var s=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},t=function(a,b){h.keydown(a)};i.bind("keydown",t),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",s)):c.unbind("click",s)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()};var u=a(q)(h);q.remove(),p?c.find("body").append(u):i.after(u),h.$on("$destroy",function(){u.remove(),i.unbind("keydown",t),c.unbind("click",s)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(a,b,c){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(a){var b=null;this.open=function(e){b||(a.bind("click",c),a.bind("keydown",d)),b&&b!==e&&(b.isOpen=!1),b=e},this.close=function(e){b===e&&(b=null,a.unbind("click",c),a.unbind("keydown",d))};var c=function(a){if(b){var c=b.getToggleElement();a&&c&&c[0].contains(a.target)||b.$apply(function(){b.isOpen=!1})}},d=function(a){27===a.which&&(b.focusToggleElement(),c())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(a,b,c,d,e,f){var g,h=this,i=a.$new(),j=d.openClass,k=angular.noop,l=b.onToggle?c(b.onToggle):angular.noop;this.init=function(d){h.$element=d,b.isOpen&&(g=c(b.isOpen),k=g.assign,a.$watch(g,function(a){i.isOpen=!!a}))},this.toggle=function(a){return i.isOpen=arguments.length?!!a:!i.isOpen},this.isOpen=function(){return i.isOpen},i.getToggleElement=function(){return h.toggleElement},i.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},i.$watch("isOpen",function(b,c){f[b?"addClass":"removeClass"](h.$element,j),b?(i.focusToggleElement(),e.open(i)):e.close(i),k(a,b),angular.isDefined(b)&&b!==c&&l(a,{open:!!b})}),a.$on("$locationChangeSuccess",function(){i.isOpen=!1}),a.$on("$destroy",function(){i.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(a,b,c,d){d.init(b)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(a,b,c,d){if(d){d.toggleElement=b;var e=function(e){e.preventDefault(),b.hasClass("disabled")||c.disabled||a.$apply(function(){d.toggle()})};b.bind("click",e),b.attr({"aria-haspopup":!0,"aria-expanded":!1}),a.$watch(d.isOpen,function(a){b.attr("aria-expanded",!!a)}),a.$on("$destroy",function(){b.unbind("click",e)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var a=[];return{add:function(b,c){a.push({key:b,value:c})},get:function(b){for(var c=0;c<a.length;c++)if(b==a[c].key)return a[c]},keys:function(){for(var b=[],c=0;c<a.length;c++)b.push(a[c].key);return b},top:function(){return a[a.length-1]},remove:function(b){for(var c=-1,d=0;d<a.length;d++)if(b==a[d].key){c=d;break}return a.splice(c,1)[0]},removeTop:function(){return a.splice(a.length-1,1)[0]},length:function(){return a.length}}}}}).directive("modalBackdrop",["$timeout",function(a){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(b,c,d){b.backdropClass=d.backdropClass||"",b.animate=!1,a(function(){b.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(a,b){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(a,b){return b.templateUrl||"template/modal/window.html"},link:function(c,d,e){d.addClass(e.windowClass||""),c.size=e.size,b(function(){c.animate=!0,d[0].querySelectorAll("[autofocus]").length||d[0].focus()}),c.close=function(b){var c=a.getTop();c&&c.value.backdrop&&"static"!=c.value.backdrop&&b.target===b.currentTarget&&(b.preventDefault(),b.stopPropagation(),a.dismiss(c.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(a,b,c,d,e){e(a.$parent,function(a){b.empty(),b.append(a)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(a,b,c,d,e,f){function g(){for(var a=-1,b=n.keys(),c=0;c<b.length;c++)n.get(b[c]).value.backdrop&&(a=c);return a}function h(a){var b=c.find("body").eq(0),d=n.get(a).value;n.remove(a),j(d.modalDomEl,d.modalScope,300,function(){d.modalScope.$destroy(),b.toggleClass(m,n.length()>0),i()})}function i(){if(k&&g()==-1){var a=l;j(k,l,150,function(){a.$destroy(),a=null}),k=void 0,l=void 0}}function j(c,d,e,f){function g(){g.done||(g.done=!0,c.remove(),f&&f())}d.animate=!1;var h=a.transitionEndEventName;if(h){var i=b(g,e);c.bind(h,function(){b.cancel(i),g(),d.$apply()})}else b(g)}var k,l,m="modal-open",n=f.createNew(),o={};return e.$watch(g,function(a){l&&(l.index=a)}),c.bind("keydown",function(a){var b;27===a.which&&(b=n.top(),b&&b.value.keyboard&&(a.preventDefault(),e.$apply(function(){o.dismiss(b.key,"escape key press")})))}),o.open=function(a,b){n.add(a,{deferred:b.deferred,modalScope:b.scope,backdrop:b.backdrop,keyboard:b.keyboard});var f=c.find("body").eq(0),h=g();if(h>=0&&!k){l=e.$new(!0),l.index=h;var i=angular.element("<div modal-backdrop></div>");i.attr("backdrop-class",b.backdropClass),k=d(i)(l),f.append(k)}var j=angular.element("<div modal-window></div>");j.attr({"template-url":b.windowTemplateUrl,"window-class":b.windowClass,size:b.size,index:n.length()-1,animate:"animate"}).html(b.content);var o=d(j)(b.scope);n.top().value.modalDomEl=o,f.append(o),f.addClass(m)},o.close=function(a,b){var c=n.get(a);c&&(c.value.deferred.resolve(b),h(a))},o.dismiss=function(a,b){var c=n.get(a);c&&(c.value.deferred.reject(b),h(a))},o.dismissAll=function(a){for(var b=this.getTop();b;)this.dismiss(b.key,a),b=this.getTop()},o.getTop=function(){return n.top()},o}]).provider("$modal",function(){var a={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(b,c,d,e,f,g,h){function i(a){return a.template?d.when(a.template):e.get(angular.isFunction(a.templateUrl)?a.templateUrl():a.templateUrl,{cache:f}).then(function(a){return a.data})}function j(a){var c=[];return angular.forEach(a,function(a){(angular.isFunction(a)||angular.isArray(a))&&c.push(d.when(b.invoke(a)))}),c}var k={};return k.open=function(b){var e=d.defer(),f=d.defer(),k={result:e.promise,opened:f.promise,close:function(a){h.close(k,a)},dismiss:function(a){h.dismiss(k,a)}};if(b=angular.extend({},a.options,b),b.resolve=b.resolve||{},!b.template&&!b.templateUrl)throw new Error("One of template or templateUrl options is required.");var l=d.all([i(b)].concat(j(b.resolve)));return l.then(function(a){var d=(b.scope||c).$new();d.$close=k.close,d.$dismiss=k.dismiss;var f,i={},j=1;b.controller&&(i.$scope=d,i.$modalInstance=k,angular.forEach(b.resolve,function(b,c){i[c]=a[j++]}),f=g(b.controller,i),b.controllerAs&&(d[b.controllerAs]=f)),h.open(k,{scope:d,deferred:e,content:a[0],backdrop:b.backdrop,keyboard:b.keyboard,backdropClass:b.backdropClass,windowClass:b.windowClass,windowTemplateUrl:b.windowTemplateUrl,size:b.size})},function(a){e.reject(a)}),l.then(function(){f.resolve(!0)},function(){f.reject(!1)}),k},k}]};return a}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(a,b,c){var d=this,e={$setViewValue:angular.noop},f=b.numPages?c(b.numPages).assign:angular.noop;this.init=function(f,g){e=f,this.config=g,e.$render=function(){d.render()},b.itemsPerPage?a.$parent.$watch(c(b.itemsPerPage),function(b){d.itemsPerPage=parseInt(b,10),a.totalPages=d.calculateTotalPages()}):this.itemsPerPage=g.itemsPerPage},this.calculateTotalPages=function(){var b=this.itemsPerPage<1?1:Math.ceil(a.totalItems/this.itemsPerPage);return Math.max(b||0,1)},this.render=function(){a.page=parseInt(e.$viewValue,10)||1},a.selectPage=function(b){a.page!==b&&b>0&&b<=a.totalPages&&(e.$setViewValue(b),e.$render())},a.getText=function(b){return a[b+"Text"]||d.config[b+"Text"]},a.noPrevious=function(){return 1===a.page},a.noNext=function(){return a.page===a.totalPages},a.$watch("totalItems",function(){a.totalPages=d.calculateTotalPages()}),a.$watch("totalPages",function(b){f(a.$parent,b),a.page>b?a.selectPage(b):e.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(a,b){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(c,d,e,f){function g(a,b,c){return{number:a,text:b,active:c}}function h(a,b){var c=[],d=1,e=b,f=angular.isDefined(k)&&k<b;f&&(l?(d=Math.max(a-Math.floor(k/2),1),e=d+k-1,e>b&&(e=b,d=e-k+1)):(d=(Math.ceil(a/k)-1)*k+1,e=Math.min(d+k-1,b)));for(var h=d;h<=e;h++){var i=g(h,h,h===a);c.push(i)}if(f&&!l){if(d>1){var j=g(d-1,"...",!1);c.unshift(j)}if(e<b){var m=g(e+1,"...",!1);c.push(m)}}return c}var i=f[0],j=f[1];if(j){var k=angular.isDefined(e.maxSize)?c.$parent.$eval(e.maxSize):b.maxSize,l=angular.isDefined(e.rotate)?c.$parent.$eval(e.rotate):b.rotate;c.boundaryLinks=angular.isDefined(e.boundaryLinks)?c.$parent.$eval(e.boundaryLinks):b.boundaryLinks,c.directionLinks=angular.isDefined(e.directionLinks)?c.$parent.$eval(e.directionLinks):b.directionLinks,i.init(j,b),e.maxSize&&c.$parent.$watch(a(e.maxSize),function(a){k=parseInt(a,10),i.render()});var m=i.render;i.render=function(){m(),c.page>0&&c.page<=c.totalPages&&(c.pages=h(c.page,c.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:" Previous",nextText:"Next ",align:!0}).directive("pager",["pagerConfig",function(a){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(b,c,d,e){var f=e[0],g=e[1];g&&(b.align=angular.isDefined(d.align)?b.$parent.$eval(d.align):a.align,f.init(g,a))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function a(a){var b=/[A-Z]/g,c="-";return a.replace(b,function(a,b){return(b?c:"")+a.toLowerCase()})}var b={placement:"top",animation:!0,popupDelay:0},c={mouseenter:"mouseleave",click:"click",focus:"blur"},d={};this.options=function(a){angular.extend(d,a)},this.setTriggers=function(a){angular.extend(c,a)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(e,f,g,h,i,j){return function(e,k,l){function m(a){var b=a||n.trigger||l,d=c[b]||b;return{show:b,hide:d}}var n=angular.extend({},b,d),o=a(e),p=j.startSymbol(),q=j.endSymbol(),r="<div "+o+'-popup title="'+p+"title"+q+'" content="'+p+"content"+q+'" placement="'+p+"placement"+q+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(a,b){var c=f(r);return function(a,b,d){function f(){D.isOpen?l():j()}function j(){C&&!a.$eval(d[k+"Enable"])||(s(),D.popupDelay?z||(z=g(o,D.popupDelay,!1),z.then(function(a){a()})):o()())}function l(){a.$apply(function(){p()})}function o(){return z=null,y&&(g.cancel(y),y=null),D.content?(q(),w.css({top:0,left:0,display:"block"}),D.$digest(),E(),D.isOpen=!0,D.$digest(),E):angular.noop}function p(){D.isOpen=!1,g.cancel(z),z=null,D.animation?y||(y=g(r,500)):r()}function q(){w&&r(),x=D.$new(),w=c(x,function(a){A?h.find("body").append(a):b.after(a)})}function r(){y=null,w&&(w.remove(),w=null),x&&(x.$destroy(),x=null)}function s(){t(),u()}function t(){var a=d[k+"Placement"];D.placement=angular.isDefined(a)?a:n.placement}function u(){var a=d[k+"PopupDelay"],b=parseInt(a,10);D.popupDelay=isNaN(b)?n.popupDelay:b}function v(){var a=d[k+"Trigger"];F(),B=m(a),B.show===B.hide?b.bind(B.show,f):(b.bind(B.show,j),b.bind(B.hide,l))}var w,x,y,z,A=!!angular.isDefined(n.appendToBody)&&n.appendToBody,B=m(void 0),C=angular.isDefined(d[k+"Enable"]),D=a.$new(!0),E=function(){var a=i.positionElements(b,w,D.placement,A);a.top+="px",a.left+="px",w.css(a)};D.isOpen=!1,d.$observe(e,function(a){D.content=a,!a&&D.isOpen&&p()}),d.$observe(k+"Title",function(a){D.title=a});var F=function(){b.unbind(B.show,j),b.unbind(B.hide,l)};v();var G=a.$eval(d[k+"Animation"]);D.animation=angular.isDefined(G)?!!G:n.animation;var H=a.$eval(d[k+"AppendToBody"]);A=angular.isDefined(H)?H:A,A&&a.$on("$locationChangeSuccess",function(){D.isOpen&&p()}),a.$on("$destroy",function(){g.cancel(y),g.cancel(z),F(),r(),D=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(a){return a("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(a){return a("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(a){return a("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(a,b,c){var d=this,e=angular.isDefined(b.animate)?a.$parent.$eval(b.animate):c.animate;this.bars=[],a.max=angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max,this.addBar=function(b,c){e||c.css({transition:"none"}),this.bars.push(b),b.$watch("value",function(c){b.percent=+(100*c/a.max).toFixed(2)}),b.$on("$destroy",function(){c=null,d.removeBar(b)})},this.removeBar=function(a){this.bars.splice(this.bars.indexOf(a),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(a,b,c,d){d.addBar(a,b)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(a,b,c,d){d.addBar(a,angular.element(b.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(a,b,c){var d={$setViewValue:angular.noop};this.init=function(e){d=e,d.$render=this.render,this.stateOn=angular.isDefined(b.stateOn)?a.$parent.$eval(b.stateOn):c.stateOn,this.stateOff=angular.isDefined(b.stateOff)?a.$parent.$eval(b.stateOff):c.stateOff;var f=angular.isDefined(b.ratingStates)?a.$parent.$eval(b.ratingStates):new Array(angular.isDefined(b.max)?a.$parent.$eval(b.max):c.max);a.range=this.buildTemplateObjects(f)},this.buildTemplateObjects=function(a){for(var b=0,c=a.length;b<c;b++)a[b]=angular.extend({index:b},{stateOn:this.stateOn,stateOff:this.stateOff},a[b]);return a},a.rate=function(b){!a.readonly&&b>=0&&b<=a.range.length&&(d.$setViewValue(b),d.$render())},a.enter=function(b){a.readonly||(a.value=b),a.onHover({value:b})},a.reset=function(){a.value=d.$viewValue,a.onLeave()},a.onKeydown=function(b){/(37|38|39|40)/.test(b.which)&&(b.preventDefault(),b.stopPropagation(),a.rate(a.value+(38===b.which||39===b.which?1:-1)))},this.render=function(){a.value=d.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(a){var b=this,c=b.tabs=a.tabs=[];b.select=function(a){angular.forEach(c,function(b){b.active&&b!==a&&(b.active=!1,b.onDeselect())}),a.active=!0,a.onSelect()},b.addTab=function(a){c.push(a),1===c.length?a.active=!0:a.active&&b.select(a)},b.removeTab=function(a){var e=c.indexOf(a);if(a.active&&c.length>1&&!d){var f=e==c.length-1?e-1:e+1;b.select(c[f])}c.splice(e,1)};var d;a.$on("$destroy",function(){d=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(a,b,c){a.vertical=!!angular.isDefined(c.vertical)&&a.$parent.$eval(c.vertical),a.justified=!!angular.isDefined(c.justified)&&a.$parent.$eval(c.justified)}}}).directive("tab",["$parse",function(a){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(b,c,d){return function(b,c,e,f){b.$watch("active",function(a){a&&f.select(b)}),b.disabled=!1,e.disabled&&b.$parent.$watch(a(e.disabled),function(a){b.disabled=!!a}),b.select=function(){b.disabled||(b.active=!0)},f.addTab(b),b.$on("$destroy",function(){f.removeTab(b)}),b.$transcludeFn=d}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(a,b,c,d){a.$watch("headingElement",function(a){a&&(b.html(""),b.append(a))})}}}]).directive("tabContentTransclude",function(){function a(a){return a.tagName&&(a.hasAttribute("tab-heading")||a.hasAttribute("data-tab-heading")||"tab-heading"===a.tagName.toLowerCase()||"data-tab-heading"===a.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(b,c,d){var e=b.$eval(d.tabContentTransclude);e.$transcludeFn(e.$parent,function(b){angular.forEach(b,function(b){a(b)?e.headingElement=b:c.append(b)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(a,b,c,d,e,f){function g(){var b=parseInt(a.hours,10),c=a.showMeridian?b>0&&b<13:b>=0&&b<24;if(c)return a.showMeridian&&(12===b&&(b=0),a.meridian===p[1]&&(b+=12)),b}function h(){var b=parseInt(a.minutes,10);return b>=0&&b<60?b:void 0}function i(a){return angular.isDefined(a)&&a.toString().length<2?"0"+a:a}function j(a){k(),o.$setViewValue(new Date(n)),l(a)}function k(){o.$setValidity("time",!0),a.invalidHours=!1,a.invalidMinutes=!1}function l(b){var c=n.getHours(),d=n.getMinutes();a.showMeridian&&(c=0===c||12===c?12:c%12),a.hours="h"===b?c:i(c),a.minutes="m"===b?d:i(d),a.meridian=n.getHours()<12?p[0]:p[1]}function m(a){var b=new Date(n.getTime()+6e4*a);n.setHours(b.getHours(),b.getMinutes()),j()}var n=new Date,o={$setViewValue:angular.noop},p=angular.isDefined(b.meridians)?a.$parent.$eval(b.meridians):f.meridians||e.DATETIME_FORMATS.AMPMS;this.init=function(c,d){o=c,o.$render=this.render;var e=d.eq(0),g=d.eq(1),h=angular.isDefined(b.mousewheel)?a.$parent.$eval(b.mousewheel):f.mousewheel;h&&this.setupMousewheelEvents(e,g),a.readonlyInput=angular.isDefined(b.readonlyInput)?a.$parent.$eval(b.readonlyInput):f.readonlyInput,this.setupInputEvents(e,g)};var q=f.hourStep;b.hourStep&&a.$parent.$watch(c(b.hourStep),function(a){q=parseInt(a,10)});var r=f.minuteStep;b.minuteStep&&a.$parent.$watch(c(b.minuteStep),function(a){r=parseInt(a,10)}),a.showMeridian=f.showMeridian,b.showMeridian&&a.$parent.$watch(c(b.showMeridian),function(b){if(a.showMeridian=!!b,o.$error.time){var c=g(),d=h();angular.isDefined(c)&&angular.isDefined(d)&&(n.setHours(c),j())}else l()}),this.setupMousewheelEvents=function(b,c){var d=function(a){a.originalEvent&&(a=a.originalEvent);var b=a.wheelDelta?a.wheelDelta:-a.deltaY;return a.detail||b>0};b.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementHours():a.decrementHours()),b.preventDefault()}),c.bind("mousewheel wheel",function(b){a.$apply(d(b)?a.incrementMinutes():a.decrementMinutes()),b.preventDefault()})},this.setupInputEvents=function(b,c){if(a.readonlyInput)return a.updateHours=angular.noop,void(a.updateMinutes=angular.noop);var d=function(b,c){o.$setViewValue(null),o.$setValidity("time",!1),angular.isDefined(b)&&(a.invalidHours=b),angular.isDefined(c)&&(a.invalidMinutes=c)};a.updateHours=function(){var a=g();angular.isDefined(a)?(n.setHours(a),j("h")):d(!0)},b.bind("blur",function(b){!a.invalidHours&&a.hours<10&&a.$apply(function(){a.hours=i(a.hours)})}),a.updateMinutes=function(){var a=h();angular.isDefined(a)?(n.setMinutes(a),j("m")):d(void 0,!0)},c.bind("blur",function(b){!a.invalidMinutes&&a.minutes<10&&a.$apply(function(){a.minutes=i(a.minutes)})})},this.render=function(){var a=o.$modelValue?new Date(o.$modelValue):null;isNaN(a)?(o.$setValidity("time",!1),d.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(a&&(n=a),k(),l())},a.incrementHours=function(){m(60*q)},a.decrementHours=function(){m(60*-q)},a.incrementMinutes=function(){m(r)},a.decrementMinutes=function(){m(-r)},a.toggleMeridian=function(){m(720*(n.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(a,b,c,d){var e=d[0],f=d[1];f&&e.init(f,b.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(a){var b=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(c){var d=c.match(b);if(!d)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+c+'".');return{itemName:d[3],source:a(d[4]),viewMapper:a(d[2]||d[1]),modelMapper:a(d[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(a,b,c,d,e,f,g){var h=[9,13,27,38,40];return{require:"ngModel",link:function(i,j,k,l){var m,n=i.$eval(k.typeaheadMinLength)||1,o=i.$eval(k.typeaheadWaitMs)||0,p=i.$eval(k.typeaheadEditable)!==!1,q=b(k.typeaheadLoading).assign||angular.noop,r=b(k.typeaheadOnSelect),s=k.typeaheadInputFormatter?b(k.typeaheadInputFormatter):void 0,t=!!k.typeaheadAppendToBody&&i.$eval(k.typeaheadAppendToBody),u=i.$eval(k.typeaheadFocusFirst)!==!1,v=b(k.ngModel).assign,w=g.parse(k.typeahead),x=i.$new();i.$on("$destroy",function(){x.$destroy()});var y="typeahead-"+x.$id+"-"+Math.floor(1e4*Math.random());j.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":y});var z=angular.element("<div typeahead-popup></div>");z.attr({id:y,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(k.typeaheadTemplateUrl)&&z.attr("template-url",k.typeaheadTemplateUrl);var A=function(){x.matches=[],x.activeIdx=-1,j.attr("aria-expanded",!1)},B=function(a){return y+"-option-"+a};x.$watch("activeIdx",function(a){a<0?j.removeAttr("aria-activedescendant"):j.attr("aria-activedescendant",B(a))});var C=function(a){var b={$viewValue:a};q(i,!0),c.when(w.source(i,b)).then(function(c){var d=a===l.$viewValue;if(d&&m)if(c.length>0){x.activeIdx=u?0:-1,x.matches.length=0;for(var e=0;e<c.length;e++)b[w.itemName]=c[e],x.matches.push({id:B(e),label:w.viewMapper(x,b),model:c[e]});x.query=a,x.position=t?f.offset(j):f.position(j),x.position.top=x.position.top+j.prop("offsetHeight"),j.attr("aria-expanded",!0)}else A();d&&q(i,!1)},function(){A(),q(i,!1)})};A(),x.query=void 0;var D,E=function(a){D=d(function(){C(a)},o)},F=function(){D&&d.cancel(D)};l.$parsers.unshift(function(a){return m=!0,a&&a.length>=n?o>0?(F(),E(a)):C(a):(q(i,!1),F(),A()),p?a:a?void l.$setValidity("editable",!1):(l.$setValidity("editable",!0),a)}),l.$formatters.push(function(a){var b,c,d={};return s?(d.$model=a,s(i,d)):(d[w.itemName]=a,b=w.viewMapper(i,d),d[w.itemName]=void 0,c=w.viewMapper(i,d),b!==c?b:a)}),x.select=function(a){var b,c,e={};e[w.itemName]=c=x.matches[a].model,b=w.modelMapper(i,e),v(i,b),l.$setValidity("editable",!0),r(i,{$item:c,$model:b,$label:w.viewMapper(i,e)}),A(),d(function(){j[0].focus()},0,!1)},j.bind("keydown",function(a){0!==x.matches.length&&h.indexOf(a.which)!==-1&&(x.activeIdx!=-1||13!==a.which&&9!==a.which)&&(a.preventDefault(),40===a.which?(x.activeIdx=(x.activeIdx+1)%x.matches.length,x.$digest()):38===a.which?(x.activeIdx=(x.activeIdx>0?x.activeIdx:x.matches.length)-1,x.$digest()):13===a.which||9===a.which?x.$apply(function(){x.select(x.activeIdx)}):27===a.which&&(a.stopPropagation(),A(),x.$digest()))}),j.bind("blur",function(a){m=!1});var G=function(a){j[0]!==a.target&&(A(),x.$digest())};e.bind("click",G),i.$on("$destroy",function(){e.unbind("click",G),t&&H.remove()});var H=a(z)(x);t?e.find("body").append(H):j.after(H)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(a,b,c){a.templateUrl=c.templateUrl,a.isOpen=function(){return a.matches.length>0},a.isActive=function(b){return a.active==b},a.selectActive=function(b){a.active=b},a.selectMatch=function(b){a.select({activeIdx:b})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(a,b,c,d){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(e,f,g){var h=d(g.templateUrl)(e.$parent)||"template/typeahead/typeahead-match.html";a.get(h,{cache:b}).success(function(a){f.replaceWith(c(a.trim())(e))})}}}]).filter("typeaheadHighlight",function(){function a(a){return a.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(b,c){return c?(""+b).replace(new RegExp(a(c),"gi"),"<strong>$&</strong>"):b}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n\t  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(a){a.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(a){a.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(a){a.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(a){a.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n");
}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n\t<li ng-transclude></li>\n\t<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n\t\t<span class="btn-group pull-left">\n\t\t\t<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n\t\t\t<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n\t\t</span>\n\t\t<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n\t</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(a){a.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(a){a.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(a){a.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(a){a.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(a){a.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(a){a.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(a){a.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(a){a.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(a){a.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(a){a.put("template/timepicker/timepicker.html",'<table>\n\t<tbody>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n\t\t\t\t<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td>:</td>\n\t\t\t<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n\t\t\t\t<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n\t\t\t</td>\n\t\t\t<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n\t\t</tr>\n\t\t<tr class="text-center">\n\t\t\t<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td>&nbsp;</td>\n\t\t\t<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n\t\t\t<td ng-show="showMeridian"></td>\n\t\t</tr>\n\t</tbody>\n</table>\n')}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(a){a.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]);var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);a.prototype=null===b?Object.create(b):(c.prototype=b.prototype,new c)},OriginalError=Error,jsonpatch;!function(a){function b(a,c){switch(typeof a){case"undefined":case"boolean":case"string":case"number":return a===c;case"object":if(null===a)return null===c;if(y(a)){if(!y(c)||a.length!==c.length)return!1;for(var d=0,e=a.length;d<e;d++)if(!b(a[d],c[d]))return!1;return!0}var f=r(c),g=f.length;if(r(a).length!==g)return!1;for(var d=0;d<g;d++)if(!b(a[d],c[d]))return!1;return!0;default:return!1}}function c(a){return a.indexOf("/")===-1&&a.indexOf("~")===-1?a:a.replace(/~/g,"~0").replace(/\//g,"~1")}function d(a){for(var b=0,c=v.length;b<c;b++)if(v[b].obj===a)return v[b]}function e(a,b){for(var c=0,d=a.observers.length;c<d;c++)if(a.observers[c].callback===b)return a.observers[c].observer}function f(a,b){for(var c=0,d=a.observers.length;c<d;c++)if(a.observers[c].observer===b)return void a.observers.splice(c,1)}function g(a,b){b.unobserve()}function h(a){return"object"==typeof a?JSON.parse(JSON.stringify(a)):a}function i(a,b){var c,g=[],i=d(a);if(i?c=e(i,b):(i=new w(a),v.push(i)),c)return c;if(c={},i.value=h(a),b){c.callback=b,c.next=null;var k=this.intervals||[100,1e3,1e4,6e4];if(void 0===k.push)throw new OriginalError("jsonpatch.intervals must be an array");var l=0,m=function(){j(c)},n=function(){clearTimeout(c.next),c.next=setTimeout(function(){m(),l=0,c.next=setTimeout(o,k[l++])},0)},o=function(){m(),l==k.length&&(l=k.length-1),c.next=setTimeout(o,k[l++])};"undefined"!=typeof window&&(window.addEventListener?(window.addEventListener("mousedown",n),window.addEventListener("mouseup",n),window.addEventListener("keydown",n)):(document.documentElement.attachEvent("onmousedown",n),document.documentElement.attachEvent("onmouseup",n),document.documentElement.attachEvent("onkeydown",n))),c.next=setTimeout(o,k[l++])}return c.patches=g,c.object=a,c.unobserve=function(){j(c),clearTimeout(c.next),f(i,c),"undefined"!=typeof window&&(window.removeEventListener?(window.removeEventListener("mousedown",n),window.removeEventListener("mouseup",n),window.removeEventListener("keydown",n)):(document.documentElement.detachEvent("onmousedown",n),document.documentElement.detachEvent("onmouseup",n),document.documentElement.detachEvent("onkeydown",n)))},i.observers.push(new x(b,c)),c}function j(a){for(var b,c=0,d=v.length;c<d;c++)if(v[c].obj===a.object){b=v[c];break}k(b.value,a.object,a.patches,""),a.patches.length&&m(b.value,a.patches);var e=a.patches;return e.length>0&&(a.patches=[],a.callback&&a.callback(e)),e}function k(a,b,d,e){for(var f=r(b),g=r(a),i=!1,j=!1,l=g.length-1;l>=0;l--){var m=g[l],n=a[m];if(b.hasOwnProperty(m)){var o=b[m];"object"==typeof n&&null!=n&&"object"==typeof o&&null!=o?k(n,o,d,e+"/"+c(m)):n!=o&&(i=!0,d.push({op:"replace",path:e+"/"+c(m),value:h(o)}))}else d.push({op:"remove",path:e+"/"+c(m)}),j=!0}if(j||f.length!=g.length)for(var l=0;l<f.length;l++){var m=f[l];a.hasOwnProperty(m)||d.push({op:"add",path:e+"/"+c(m),value:h(b[m])})}}function l(a){for(var b,c=0,d=a.length;c<d;){b=a.charCodeAt(c);{if(!(b>=48&&b<=57))return!1;c++}}return!0}function m(a,b,c){for(var d,e,f=!1,g=0,h=b.length;g<h;){d=b[g],g++;for(var i=d.path||"",j=i.split("/"),k=a,m=1,n=j.length,o=void 0;;){if(e=j[m],c&&void 0===o&&(void 0===k[e]?o=j.slice(0,m).join("/"):m==n-1&&(o=d.path),void 0!==o&&this.validator(d,g-1,a,o)),m++,void 0===e&&m>=n){f=u[d.op].call(d,k,e,a);break}if(y(k)){if("-"===e)e=k.length;else{if(c&&!l(e))throw new z("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",g-1,d.path,d);e=parseInt(e,10)}if(m>=n){if(c&&"add"===d.op&&e>k.length)throw new z("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",g-1,d.path,d);f=t[d.op].call(d,k,e,a);break}}else if(e&&e.indexOf("~")!=-1&&(e=e.replace(/~1/g,"/").replace(/~0/g,"~")),m>=n){f=s[d.op].call(d,k,e,a);break}k=k[e]}}return f}function n(a,b){var c=[];return k(a,b,c,""),c}function o(a){if(void 0===a)return!0;if("array"==typeof a||"object"==typeof a)for(var b in a)if(o(a[b]))return!0;return!1}function p(b,c,d,e){if("object"!=typeof b||null===b||y(b))throw new z("Operation is not an object","OPERATION_NOT_AN_OBJECT",c,b,d);if(!s[b.op])throw new z("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",c,b,d);if("string"!=typeof b.path)throw new z("Operation `path` property is not a string","OPERATION_PATH_INVALID",c,b,d);if(("move"===b.op||"copy"===b.op)&&"string"!=typeof b.from)throw new z("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",c,b,d);if(("add"===b.op||"replace"===b.op||"test"===b.op)&&void 0===b.value)throw new z("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",c,b,d);if(("add"===b.op||"replace"===b.op||"test"===b.op)&&o(b.value))throw new z("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",c,b,d);if(d)if("add"==b.op){var f=b.path.split("/").length,g=e.split("/").length;if(f!==g+1&&f!==g)throw new z("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",c,b,d)}else if("replace"===b.op||"remove"===b.op||"_get"===b.op){if(b.path!==e)throw new z("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",c,b,d)}else if("move"===b.op||"copy"===b.op){var h={op:"_get",path:b.from,value:void 0},i=a.validate([h],d);if(i&&"OPERATION_PATH_UNRESOLVABLE"===i.name)throw new z("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",c,b,d)}}function q(a,b){try{if(!y(a))throw new z("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(b)b=JSON.parse(JSON.stringify(b)),m.call(this,b,a,!0);else for(var c=0;c<a.length;c++)this.validator(a[c],c)}catch(a){if(a instanceof z)return a;throw a}}var r=function(a){if(y(a)){for(var b=new Array(a.length),c=0;c<b.length;c++)b[c]=""+c;return b}if(Object.keys)return Object.keys(a);var b=[];for(var d in a)a.hasOwnProperty(d)&&b.push(d);return b},s={add:function(a,b){return a[b]=this.value,!0},remove:function(a,b){return delete a[b],!0},replace:function(a,b){return a[b]=this.value,!0},move:function(a,b,c){var d={op:"_get",path:this.from};return m(c,[d]),m(c,[{op:"remove",path:this.from}]),m(c,[{op:"add",path:this.path,value:d.value}]),!0},copy:function(a,b,c){var d={op:"_get",path:this.from};return m(c,[d]),m(c,[{op:"add",path:this.path,value:d.value}]),!0},test:function(a,c){return b(a[c],this.value)},_get:function(a,b){this.value=a[b]}},t={add:function(a,b){return a.splice(b,0,this.value),!0},remove:function(a,b){return a.splice(b,1),!0},replace:function(a,b){return a[b]=this.value,!0},move:s.move,copy:s.copy,test:s.test,_get:s._get},u={add:function(a){u.remove.call(this,a);for(var b in this.value)this.value.hasOwnProperty(b)&&(a[b]=this.value[b]);return!0},remove:function(a){for(var b in a)a.hasOwnProperty(b)&&s.remove.call(this,a,b);return!0},replace:function(a){return m(a,[{op:"remove",path:this.path}]),m(a,[{op:"add",path:this.path,value:this.value}]),!0},move:s.move,copy:s.copy,test:function(a){return JSON.stringify(a)===JSON.stringify(this.value)},_get:function(a){this.value=a}},v=[],w=function(){function a(a){this.observers=[],this.obj=a}return a}(),x=function(){function a(a,b){this.callback=a,this.observer=b}return a}();a.unobserve=g,a.observe=i,a.generate=j;var y;y=Array.isArray?Array.isArray:function(a){return a.push&&"number"==typeof a.length},a.apply=m,a.compare=n;var z=function(a){function b(b,c,d,e,f){a.call(this,b),this.message=b,this.name=c,this.index=d,this.operation=e,this.tree=f}return __extends(b,a),b}(OriginalError);a.JsonPatchError=z,a.Error=z,a.validator=p,a.validate=q}(jsonpatch||(jsonpatch={})),"undefined"!=typeof exports&&(exports.apply=jsonpatch.apply,exports.observe=jsonpatch.observe,exports.unobserve=jsonpatch.unobserve,exports.generate=jsonpatch.generate,exports.compare=jsonpatch.compare,exports.validate=jsonpatch.validate,exports.validator=jsonpatch.validator,exports.JsonPatchError=jsonpatch.JsonPatchError,exports.Error=jsonpatch.Error),function(a){function b(){var a,b;for(a=0;a<this.length;a++)b=this[a],c(b)||(d(b),i(b))}function c(a){var b=a.value,c=a.$$currentValue;return!b&&!c||b===c}function d(a){a.$$currentValue=a.value}function e(b){var c=a.jQuery||a.angular.element,d=c.prototype,e=d.val;d.val=function(a){var c=e.apply(this,arguments);return arguments.length>0&&h(this,function(c){b(c,a)}),c}}function f(a,b){function c(a){var c=a.target;b(c)}k.addEventListener(a,c,!0)}function g(a){for(;a;){if("FORM"===a.nodeName)return j(a);a=a.parentNode}return j()}function h(a,b){if(a.forEach)return a.forEach(b);var c;for(c=0;c<a.length;c++)b(a[c])}function i(b){var c=a.document,d=c.createEvent("HTMLEvents");d.initEvent("change",!0,!0),b.dispatchEvent(d)}var j=a.jQuery||a.angular.element,k=a.document.documentElement,l=j(k);f("change",d),e(d),j.prototype.checkAndTriggerAutoFillEvent=b,f("blur",function(b){a.setTimeout(function(){g(b).find("input").checkAndTriggerAutoFillEvent()},20)}),a.document.addEventListener("DOMContentLoaded",function(){a.setTimeout(function(){l.find("input").checkAndTriggerAutoFillEvent()},200)},!1)}(window),function(a,b){"use strict";function c(a){return null!=a&&""!==a&&"hasOwnProperty"!==a&&g.test("."+a)}function d(a,d){if(!c(d))throw f("badmember",'Dotted member path "@{0}" is invalid.',d);for(var e=d.split("."),g=0,h=e.length;g<h&&b.isDefined(a);g++){var i=e[g];a=null!==a?a[i]:void 0}return a}function e(a,c){c=c||{},b.forEach(c,function(a,b){delete c[b]});for(var d in a)!a.hasOwnProperty(d)||"$"===d.charAt(0)&&"$"===d.charAt(1)||(c[d]=a[d]);return c}var f=b.$$minErr("$resource"),g=/^(\.[a-zA-Z_$@][0-9a-zA-Z_$@]*)+$/;b.module("ngResource",["ng"]).provider("$resource",function(){var a=/^https?:\/\/[^\/]*/,c=this;this.defaults={stripTrailingSlashes:!0,cancellable:!1,actions:{get:{method:"GET"},save:{method:"POST"},query:{method:"GET",isArray:!0},remove:{method:"DELETE"},delete:{method:"DELETE"}}},this.$get=["$http","$log","$q","$timeout",function(g,h,i,j){function k(a){return l(a,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function l(a,b){return encodeURIComponent(a).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,b?"%20":"+")}function m(a,b){this.template=a,this.defaults=q({},c.defaults,b),this.urlParams={}}function n(a,k,l,t){function u(a,b){var c={};return b=q({},k,b),p(b,function(b,e){s(b)&&(b=b(a)),c[e]=b&&b.charAt&&"@"==b.charAt(0)?d(a,b.substr(1)):b}),c}function v(a){return a.resource}function w(a){e(a||{},this)}var x=new m(a,t);return l=q({},c.defaults.actions,l),w.prototype.toJSON=function(){var a=q({},this);return delete a.$promise,delete a.$resolved,a},p(l,function(a,d){var k=/^(POST|PUT|PATCH)$/i.test(a.method),l=a.timeout,m=b.isDefined(a.cancellable)?a.cancellable:t&&b.isDefined(t.cancellable)?t.cancellable:c.defaults.cancellable;l&&!b.isNumber(l)&&(h.debug("ngResource:\n  Only numeric values are allowed as `timeout`.\n  Promises are not supported in $resource, because the same value would be used for multiple requests. If you are looking for a way to cancel requests, you should use the `cancellable` option."),delete a.timeout,l=null),w[d]=function(c,h,n,t){var y,z,A,B={};switch(arguments.length){case 4:A=t,z=n;case 3:case 2:if(!s(h)){B=c,y=h,z=n;break}if(s(c)){z=c,A=h;break}z=h,A=n;case 1:s(c)?z=c:k?y=c:B=c;break;case 0:break;default:throw f("badargs","Expected up to 4 arguments [params, data, success, error], got {0} arguments",arguments.length)}var C,D,E=this instanceof w,F=E?y:a.isArray?[]:new w(y),G={},H=a.interceptor&&a.interceptor.response||v,I=a.interceptor&&a.interceptor.responseError||void 0;p(a,function(a,b){switch(b){default:G[b]=r(a);break;case"params":case"isArray":case"interceptor":case"cancellable":}}),!E&&m&&(C=i.defer(),G.timeout=C.promise,l&&(D=j(C.resolve,l))),k&&(G.data=y),x.setUrlParams(G,q({},u(y,a.params||{}),B),a.url);var J=g(G).then(function(c){var g=c.data;if(g){if(b.isArray(g)!==!!a.isArray)throw f("badcfg","Error in resource configuration for action `{0}`. Expected response to contain an {1} but got an {2} (Request: {3} {4})",d,a.isArray?"array":"object",b.isArray(g)?"array":"object",G.method,G.url);if(a.isArray)F.length=0,p(g,function(a){"object"==typeof a?F.push(new w(a)):F.push(a)});else{var h=F.$promise;e(g,F),F.$promise=h}}return c.resource=F,c},function(a){return(A||o)(a),i.reject(a)});return J.finally(function(){F.$resolved=!0,!E&&m&&(F.$cancelRequest=b.noop,j.cancel(D),C=D=G.timeout=null)}),J=J.then(function(a){var b=H(a);return(z||o)(b,a.headers),b},I),E?J:(F.$promise=J,F.$resolved=!1,m&&(F.$cancelRequest=C.resolve),F)},w.prototype["$"+d]=function(a,b,c){s(a)&&(c=b,b=a,a={});var e=w[d].call(this,a,this,b,c);return e.$promise||e}}),w.bind=function(b){return n(a,q({},k,b),l)},w}var o=b.noop,p=b.forEach,q=b.extend,r=b.copy,s=b.isFunction;return m.prototype={setUrlParams:function(c,d,e){var g,h,i=this,j=e||i.template,m="",n=i.urlParams={};p(j.split(/\W/),function(a){if("hasOwnProperty"===a)throw f("badname","hasOwnProperty is not a valid parameter name.");!new RegExp("^\\d+$").test(a)&&a&&new RegExp("(^|[^\\\\]):"+a+"(\\W|$)").test(j)&&(n[a]={isQueryParamValue:new RegExp("\\?.*=:"+a+"(?:\\W|$)").test(j)})}),j=j.replace(/\\:/g,":"),j=j.replace(a,function(a){return m=a,""}),d=d||{},p(i.urlParams,function(a,c){g=d.hasOwnProperty(c)?d[c]:i.defaults[c],b.isDefined(g)&&null!==g?(h=a.isQueryParamValue?l(g,!0):k(g),j=j.replace(new RegExp(":"+c+"(\\W|$)","g"),function(a,b){return h+b})):j=j.replace(new RegExp("(/?):"+c+"(\\W|$)","g"),function(a,b,c){return"/"==c.charAt(0)?c:b+c})}),i.defaults.stripTrailingSlashes&&(j=j.replace(/\/+$/,"")||"/"),j=j.replace(/\/\.(?=\w+($|\?))/,"."),c.url=m+j.replace(/\/\\\./,"/."),p(d,function(a,b){i.urlParams[b]||(c.params=c.params||{},c.params[b]=a)})}},n}]})}(window,window.angular),function(a,b){"use strict";function c(){function c(a,b){var c,d={},e=a.split(",");for(c=0;c<e.length;c++)d[b?i(e[c]):e[c]]=!0;return d}function d(b,c){null===b||void 0===b?b="":"string"!=typeof b&&(b=""+b),s.innerHTML=b;var d=5;do{if(0===d)throw m("uinput","Failed to sanitize html because the input is unstable");d--,a.document.documentMode&&q(s),b=s.innerHTML,s.innerHTML=b}while(b!==s.innerHTML);for(var e=s.firstChild;e;){switch(e.nodeType){case 1:c.start(e.nodeName.toLowerCase(),n(e.attributes));break;case 3:c.chars(e.textContent)}var f;if(!(f=e.firstChild)&&(1==e.nodeType&&c.end(e.nodeName.toLowerCase()),f=e.nextSibling,!f))for(;null==f&&(e=e.parentNode,e!==s);)f=e.nextSibling,1==e.nodeType&&c.end(e.nodeName.toLowerCase());e=f}for(;e=s.firstChild;)s.removeChild(e)}function n(a){for(var b={},c=0,d=a.length;c<d;c++){var e=a[c];b[e.name]=e.value}return b}function o(a){return a.replace(/&/g,"&amp;").replace(t,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(u,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function p(a,b){var c=!1,d=e(a,a.push);return{start:function(a,e){a=i(a),!c&&C[a]&&(c=a),c||D[a]!==!0||(d("<"),d(a),g(e,function(c,e){var f=i(e),g="img"===a&&"src"===f||"background"===f;H[f]!==!0||E[f]===!0&&!b(c,g)||(d(" "),d(e),d('="'),d(o(c)),d('"'))}),d(">"))},end:function(a){a=i(a),c||D[a]!==!0||v[a]===!0||(d("</"),d(a),d(">")),a==c&&(c=!1)},chars:function(a){c||d(o(a))}}}function q(b){if(b.nodeType===a.Node.ELEMENT_NODE)for(var c=b.attributes,d=0,e=c.length;d<e;d++){var f=c[d],g=f.name.toLowerCase();"xmlns:ns1"!==g&&0!==g.lastIndexOf("ns1:",0)||(b.removeAttributeNode(f),d--,e--)}var h=b.firstChild;h&&q(h),h=b.nextSibling,h&&q(h)}var r=!1;this.$get=["$$sanitizeUri",function(a){return r&&f(D,B),function(b){var c=[];return k(b,l(c,function(b,c){return!/^unsafe:/.test(a(b,c))})),c.join("")}}],this.enableSvg=function(a){return h(a)?(r=a,this):r},e=b.bind,f=b.extend,g=b.forEach,h=b.isDefined,i=b.lowercase,j=b.noop,k=d,l=p;var s,t=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=/([^\#-~ |!])/g,v=c("area,br,col,hr,img,wbr"),w=c("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),x=c("rp,rt"),y=f({},x,w),z=f({},w,c("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),A=f({},x,c("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),B=c("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),C=c("script,style"),D=f({},v,z,A,y),E=c("background,cite,href,longdesc,src,xlink:href"),F=c("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),G=c("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),H=f({},E,G,F);
!function(a){var b;if(!a.document||!a.document.implementation)throw m("noinert","Can't create an inert html document");b=a.document.implementation.createHTMLDocument("inert");var c=b.documentElement||b.getDocumentElement(),d=c.getElementsByTagName("body");if(1===d.length)s=d[0];else{var e=b.createElement("html");s=b.createElement("body"),e.appendChild(s),b.appendChild(e)}}(a)}function d(a){var b=[],c=l(b,j);return c.chars(a),b.join("")}var e,f,g,h,i,j,k,l,m=b.$$minErr("$sanitize");b.module("ngSanitize",[]).provider("$sanitize",c),b.module("ngSanitize").filter("linky",["$sanitize",function(a){var c=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,e=/^mailto:/i,f=b.$$minErr("linky"),g=b.isDefined,h=b.isFunction,i=b.isObject,j=b.isString;return function(b,k,l){function m(a){a&&t.push(d(a))}function n(a,b){var c,d=r(a);t.push("<a ");for(c in d)t.push(c+'="'+d[c]+'" ');!g(k)||"target"in d||t.push('target="',k,'" '),t.push('href="',a.replace(/"/g,"&quot;"),'">'),m(b),t.push("</a>")}if(null==b||""===b)return b;if(!j(b))throw f("notstring","Expected string but received: {0}",b);for(var o,p,q,r=h(l)?l:i(l)?function(){return l}:function(){return{}},s=b,t=[];o=s.match(c);)p=o[0],o[2]||o[4]||(p=(o[3]?"http://":"mailto:")+p),q=o.index,m(s.substr(0,q)),n(p,o[0].replace(e,"")),s=s.substring(q+o[0].length);return m(s),a(t.join(""))}}])}(window,window.angular),function(a,b){"use strict";function c(a,b){if(h(a)){b=b||[];for(var c=0,d=a.length;c<d;c++)b[c]=a[c]}else if(i(a)){b=b||{};for(var e in a)"$"===e.charAt(0)&&"$"===e.charAt(1)||(b[e]=a[e])}return b||a}function d(){function a(a,c){return b.extend(Object.create(a),c)}function d(a,b){var c=b.caseInsensitiveMatch,d={originalPath:a,regexp:a},e=d.keys=[];return a=a.replace(/([().])/g,"\\$1").replace(/(\/)?:(\w+)(\*\?|[\?\*])?/g,function(a,b,c,d){var f="?"===d||"*?"===d?"?":null,g="*"===d||"*?"===d?"*":null;return e.push({name:c,optional:!!f}),b=b||"",""+(f?"":b)+"(?:"+(f?b:"")+(g&&"(.+?)"||"([^/]+)")+(f||"")+")"+(f||"")}).replace(/([\/$\*])/g,"\\$1"),d.regexp=new RegExp("^"+a+"$",c?"i":""),d}h=b.isArray,i=b.isObject;var e={};this.when=function(a,f){var g=c(f);if(b.isUndefined(g.reloadOnSearch)&&(g.reloadOnSearch=!0),b.isUndefined(g.caseInsensitiveMatch)&&(g.caseInsensitiveMatch=this.caseInsensitiveMatch),e[a]=b.extend(g,a&&d(a,g)),a){var h="/"==a[a.length-1]?a.substr(0,a.length-1):a+"/";e[h]=b.extend({redirectTo:a},d(h,g))}return this},this.caseInsensitiveMatch=!1,this.otherwise=function(a){return"string"==typeof a&&(a={redirectTo:a}),this.when(null,a),this},this.$get=["$rootScope","$location","$routeParams","$q","$injector","$templateRequest","$sce",function(c,d,f,g,h,i,j){function l(a,b){var c=b.keys,d={};if(!b.regexp)return null;var e=b.regexp.exec(a);if(!e)return null;for(var f=1,g=e.length;f<g;++f){var h=c[f-1],i=e[f];h&&i&&(d[h.name]=i)}return d}function m(a){var d=v.current;s=q(),t=s&&d&&s.$$route===d.$$route&&b.equals(s.pathParams,d.pathParams)&&!s.reloadOnSearch&&!u,t||!d&&!s||c.$broadcast("$routeChangeStart",s,d).defaultPrevented&&a&&a.preventDefault()}function n(){var a=v.current,e=s;t?(a.params=e.params,b.copy(a.params,f),c.$broadcast("$routeUpdate",a)):(e||a)&&(u=!1,v.current=e,e&&e.redirectTo&&(b.isString(e.redirectTo)?d.path(r(e.redirectTo,e.params)).search(e.params).replace():d.url(e.redirectTo(e.pathParams,d.path(),d.search())).replace()),g.when(e).then(o).then(function(d){e==v.current&&(e&&(e.locals=d,b.copy(e.params,f)),c.$broadcast("$routeChangeSuccess",e,a))},function(b){e==v.current&&c.$broadcast("$routeChangeError",e,a,b)}))}function o(a){if(a){var c=b.extend({},a.resolve);b.forEach(c,function(a,d){c[d]=b.isString(a)?h.get(a):h.invoke(a,null,null,d)});var d=p(a);return b.isDefined(d)&&(c.$template=d),g.all(c)}}function p(a){var c,d;return b.isDefined(c=a.template)?b.isFunction(c)&&(c=c(a.params)):b.isDefined(d=a.templateUrl)&&(b.isFunction(d)&&(d=d(a.params)),b.isDefined(d)&&(a.loadedTemplateUrl=j.valueOf(d),c=i(d))),c}function q(){var c,f;return b.forEach(e,function(e,g){!f&&(c=l(d.path(),e))&&(f=a(e,{params:b.extend({},d.search(),c),pathParams:c}),f.$$route=e)}),f||e[null]&&a(e[null],{params:{},pathParams:{}})}function r(a,c){var d=[];return b.forEach((a||"").split(":"),function(a,b){if(0===b)d.push(a);else{var e=a.match(/(\w+)(?:[?*])?(.*)/),f=e[1];d.push(c[f]),d.push(e[2]||""),delete c[f]}}),d.join("")}var s,t,u=!1,v={routes:e,reload:function(){u=!0;var a={defaultPrevented:!1,preventDefault:function(){this.defaultPrevented=!0,u=!1}};c.$evalAsync(function(){m(a),a.defaultPrevented||n()})},updateParams:function(a){if(!this.current||!this.current.$$route)throw k("norout","Tried updating route when with no current route");a=b.extend({},this.current.params,a),d.path(r(this.current.$$route.originalPath,a)),d.search(a)}};return c.$on("$locationChangeStart",m),c.$on("$locationChangeSuccess",n),v}]}function e(){this.$get=function(){return{}}}function f(a,c,d){return{restrict:"ECA",terminal:!0,priority:400,transclude:"element",link:function(e,f,g,h,i){function j(){n&&(d.cancel(n),n=null),l&&(l.$destroy(),l=null),m&&(n=d.leave(m),n.then(function(){n=null}),m=null)}function k(){var g=a.current&&a.current.locals,h=g&&g.$template;if(b.isDefined(h)){var k=e.$new(),n=a.current,q=i(k,function(a){d.enter(a,null,m||f).then(function(){!b.isDefined(o)||o&&!e.$eval(o)||c()}),j()});m=q,l=n.scope=k,l.$emit("$viewContentLoaded"),l.$eval(p)}else j()}var l,m,n,o=g.autoscroll,p=g.onload||"";e.$on("$routeChangeSuccess",k),k()}}}function g(a,b,c){return{restrict:"ECA",priority:-400,link:function(d,e){var f=c.current,g=f.locals;e.html(g.$template);var h=a(e.contents());if(f.controller){g.$scope=d;var i=b(f.controller,g);f.controllerAs&&(d[f.controllerAs]=i),e.data("$ngControllerController",i),e.children().data("$ngControllerController",i)}d[f.resolveAs||"$resolve"]=g,h(d)}}}var h,i,j=b.module("ngRoute",["ng"]).provider("$route",d),k=b.$$minErr("ngRoute");j.provider("$routeParams",e),j.directive("ngView",f),j.directive("ngView",g),f.$inject=["$route","$anchorScroll","$animate"],g.$inject=["$compile","$controller","$route"]}(window,window.angular),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(a){var b=a.storageKey(),c=a.storage();c?c.get(b)?a.uses(c.get(b)):angular.isString(a.preferredLanguage())?a.uses(a.preferredLanguage()):c.set(b,a.uses()):angular.isString(a.preferredLanguage())&&a.uses(a.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n={},o=a,p=[],q=".",r=function(a,b){if(!a&&!b)return n;if(a&&!b){if(angular.isString(a))return n[a];angular.extend(n,s(a))}else angular.isObject(n[a])||(n[a]={}),angular.extend(n[a],s(b));return this},s=function(a,b,c,d){var e,f,g;b||(b=[]),c||(c={});for(e in a)a.hasOwnProperty(e)&&(g=a[e],angular.isObject(g)?s(g,b.concat(e),c,e):(f=b.length?""+b.join(q)+q+e:e,b.length&&e===d&&(keyWithShortPath=""+b.join(q),c[keyWithShortPath]="@:"+f),c[f]=g));return c};this.translations=r,this.addInterpolation=function(a){return p.push(a),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(a){return i=a,this},this.preferredLanguage=function(a){return a?(b=a,this):b},this.translationNotFoundIndicator=function(a){return this.translationNotFoundIndicatorLeft(a),this.translationNotFoundIndicatorRight(a),this},this.translationNotFoundIndicatorLeft=function(a){return a?(l=a,this):l},this.translationNotFoundIndicatorRight=function(a){return a?(m=a,this):m},this.fallbackLanguage=function(a){return a?(("string"==typeof a||angular.isArray(a))&&(c=a),this):c},this.uses=function(a){if(a){if(!n[a]&&!j)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+a+"'");return d=a,this}return d};var t=function(a){return a?void(o=a):g?g+o:o};this.storageKey=t,this.useUrlLoader=function(a){return this.useLoader("$translateUrlLoader",{url:a})},this.useStaticFilesLoader=function(a){return this.useLoader("$translateStaticFilesLoader",a)},this.useLoader=function(a,b){return j=a,k=b||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(a){return f=a,this},this.storagePrefix=function(a){return a?(g=a,this):a},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(a){return h=a,this},this.$get=["$log","$injector","$rootScope","$q",function(a,g,o,q){var s,u=g.get(i||"$translateDefaultInterpolation"),v=!1,w={},x=function(a){if(!a)throw"No language key specified for loading.";var b=q.defer();return o.$broadcast("$translateLoadingStart"),v=!0,g.get(j)(angular.extend(k,{key:a})).then(function(c){o.$broadcast("$translateLoadingSuccess");var d={};angular.isArray(c)?angular.forEach(c,function(a){angular.extend(d,a)}):angular.extend(d,c),v=!1,b.resolve({key:a,table:d}),o.$broadcast("$translateLoadingEnd")},function(a){o.$broadcast("$translateLoadingError"),b.reject(a),o.$broadcast("$translateLoadingEnd")}),b.promise};if(f&&(s=g.get(f),!s.get||!s.set))throw new Error("Couldn't use storage '"+f+"', missing get() or set() method!");p.length>0&&angular.forEach(p,function(a){var c=g.get(a);c.setLocale(b||d),w[c.getInterpolationIdentifier()]=c});var y=function(a){if(a&&c){if(angular.isArray(c)){for(var b=c.length,e=0;e<b;e++)if(d===n[c[e]])return!1;return!0}return a!==c}return!1},z=function(a,b,e){var f=d?n[d]:n,i=e?w[e]:u;if(f&&f.hasOwnProperty(a))return angular.isString(f[a])&&"@:"===f[a].substr(0,2)?z(f[a].substr(2),b,e):i.interpolate(f[a],b);h&&!v&&g.get(h)(a,d);var j;if(d&&c&&y(d)){"string"==typeof c?(j=[],j.push(c)):j=c;for(var k=j.length,o=0;o<k;o++)if(d!==n[j[o]]){var p=n[j[o]][a];if(p){var q;return i.setLocale(j[o]),q=i.interpolate(p,b),i.setLocale(d),q}}}return l&&(a=[l,a].join(" ")),m&&(a=[a,m].join(" ")),a};if(z.preferredLanguage=function(){return b},z.fallbackLanguage=function(){return c},z.proposedLanguage=function(){return e},z.storage=function(){return s},z.uses=function(a){function b(a){d=a,o.$broadcast("$translateChangeSuccess"),f&&s.set(z.storageKey(),d),u.setLocale(d),angular.forEach(w,function(a,b){w[b].setLocale(d)}),c.resolve(a),o.$broadcast("$translateChangeEnd")}if(!a)return d;var c=q.defer();return o.$broadcast("$translateChangeStart"),!n[a]&&j?(e=a,x(a).then(function(a){e=void 0,r(a.key,a.table),b(a.key)},function(a){e=void 0,o.$broadcast("$translateChangeError"),c.reject(a),o.$broadcast("$translateChangeEnd")})):b(a),c.promise},z.storageKey=function(){return t()},z.refresh=function(a){function b(){f.resolve(),o.$broadcast("$translateRefreshEnd")}function e(){f.reject(),o.$broadcast("$translateRefreshEnd")}if(!j)throw new Error("Couldn't refresh translation table, no loader registered!");var f=q.defer();if(a)if(n.hasOwnProperty(a)){o.$broadcast("$translateRefreshStart");var g=x(a);a===d?g.then(function(c){n[a]=c.table,z.uses(d),b()},function(){o.$broadcast("$translateChangeError"),e()}):g.then(function(c){n[a]=c.table,b()},e)}else f.reject();else{o.$broadcast("$translateRefreshStart");var h=[];if(c)if("string"==typeof c)h.push(x(c));else for(var i=c.length,k=0;k<i;k++)h.push(x(c[k]));d&&h.push(x(d)),h.length>0?q.all(h).then(function(a){for(var c in n)n.hasOwnProperty(c)&&delete n[c];for(var e=0,f=a.length;e<f;e++)r(a[e].key,a[e].table);d&&z.uses(d),b()},function(a){a===d&&o.$broadcast("$translateChangeError"),e()}):b()}return f.promise},j&&(angular.equals(n,{})&&z.uses(z.uses()),c))if("string"!=typeof c||n[c])for(var A=c.length,B=0;B<A;B++)n[c[B]]||x(c[B]);else x(c);return z}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(a){var b,c={},d="default";return c.setLocale=function(a){b=a},c.getInterpolationIdentifier=function(){return d},c.interpolate=function(b,c){return a(b)(c)},c}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$filter","$interpolate","$parse",function(a,b,c){var d=a("translate");return{restrict:"AE",scope:!0,link:function(a,e,f){f.translateInterpolation&&(a.interpolation=f.translateInterpolation),f.$observe("translate",function(c){angular.equals(c,"")||void 0===c?a.translationId=b(e.text().replace(/^\s+|\s+$/g,""))(a.$parent):a.translationId=c}),f.$observe("translateValues",function(b){b&&a.$parent.$watch(function(){a.interpolateParams=c(b)(a.$parent)})}),a.$on("$translateChangeSuccess",function(){e.html(d(a.translationId,a.interpolateParams,a.interpolation))}),a.$watch("[translationId, interpolateParams]",function(b){a.translationId&&e.html(d(a.translationId,a.interpolateParams,a.interpolation))},!0)}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(a,b){return function(c,d,e){return angular.isObject(d)||(d=a(d)()),b(c,d,e)}}]),angular.module("pascalprecht.translate").constant("TRANSLATE_MF_INTERPOLATION_CACHE","$translateMessageFormatInterpolation").factory("$translateMessageFormatInterpolation",["$cacheFactory","TRANSLATE_MF_INTERPOLATION_CACHE",function(a,b){var c={};return $cache=a.get(b),$mf=new MessageFormat,$identifier="messageformat",$cache||($cache=a(b)),$cache.put("en",$mf),c.setLocale=function(a){$mf=$cache.get(a),$mf||($mf=new MessageFormat(a),$cache.put(a,$mf))},c.getInterpolationIdentifier=function(){return $identifier},c.interpolate=function(a,b){b=b||{};var c=$cache.get(a+angular.toJson(b));return c||(c=$mf.compile(a)(b),$cache.put(a+angular.toJson(b),c)),c},c}]),angular.module("pascalprecht.translate").factory("$translateMissingTranslationHandlerLog",["$log",function(a){return function(b){a.warn("Translation for "+b+" doesn't exist")}}]),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.autofill=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(b,c,d){!function(b,e){"function"==typeof a&&a.amd?a([],e):"object"==typeof d?c.exports=e():b.returnExports=e()}(this,function(){function a(e,f){if("function"!=typeof f)throw new Error("Bad callback given: "+f);if(!e)throw new Error("No options given");var h=e.onResponse;if(e="string"==typeof e?{uri:e}:JSON.parse(JSON.stringify(e)),e.onResponse=h,e.verbose&&(a.log=d()),e.url&&(e.uri=e.url,delete e.url),!e.uri&&""!==e.uri)throw new Error("options.uri is a required argument");if("string"!=typeof e.uri)throw new Error("options.uri must be a string");for(var i=["proxy","_redirectsFollowed","maxRedirects","followRedirect"],j=0;j<i.length;j++)if(e[i[j]])throw new Error("options."+i[j]+" is not supported");if(e.callback=f,e.method=e.method||"GET",e.headers=e.headers||{},e.body=e.body||null,e.timeout=e.timeout||a.DEFAULT_TIMEOUT,e.headers.host)throw new Error("Options.headers.host is not supported");e.json&&(e.headers.accept=e.headers.accept||"application/json","GET"!==e.method&&(e.headers["content-type"]="application/json"),"boolean"!=typeof e.json?e.body=JSON.stringify(e.json):"string"!=typeof e.body&&(e.body=JSON.stringify(e.body)));var k=function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]));return b.join("&")};if(e.qs){var l="string"==typeof e.qs?e.qs:k(e.qs);e.uri.indexOf("?")!==-1?e.uri=e.uri+"&"+l:e.uri=e.uri+"?"+l}var m=function(a){var b={};b.boundry="-------------------------------"+Math.floor(1e9*Math.random());var c=[];for(var d in a)a.hasOwnProperty(d)&&c.push("--"+b.boundry+'\nContent-Disposition: form-data; name="'+d+'"\n\n'+a[d]+"\n");return c.push("--"+b.boundry+"--"),b.body=c.join(""),b.length=b.body.length,b.type="multipart/form-data; boundary="+b.boundry,b};if(e.form){if("string"==typeof e.form)throw"form name unsupported";if("POST"===e.method){var n=(e.encoding||"application/x-www-form-urlencoded").toLowerCase();switch(e.headers["content-type"]=n,n){case"application/x-www-form-urlencoded":e.body=k(e.form).replace(/%20/g,"+");break;case"multipart/form-data":var o=m(e.form);e.body=o.body,e.headers["content-type"]=o.type;break;default:throw new Error("unsupported encoding:"+n)}}}return e.onResponse=e.onResponse||c,e.onResponse===!0&&(e.onResponse=f,e.callback=c),!e.headers.authorization&&e.auth&&(e.headers.authorization="Basic "+g(e.auth.username+":"+e.auth.password)),b(e)}function b(b){function c(){l=!0;var c=new Error("ETIMEDOUT");return c.code="ETIMEDOUT",c.duration=b.timeout,a.log.error("Timeout",{id:k._id,milliseconds:b.timeout}),b.callback(c,k)}function d(c){if(l)return a.log.debug("Ignoring timed out state change",{state:k.readyState,id:k.id});if(a.log.debug("State change",{state:k.readyState,id:k.id,timed_out:l}),k.readyState===h.OPENED){a.log.debug("Request started",{id:k.id});for(var d in b.headers)k.setRequestHeader(d,b.headers[d])}else k.readyState===h.HEADERS_RECEIVED?e():k.readyState===h.LOADING?(e(),g()):k.readyState===h.DONE&&(e(),g(),i())}function e(){if(!p.response){if(p.response=!0,a.log.debug("Got response",{id:k.id,status:k.status}),clearTimeout(k.timeoutTimer),k.statusCode=k.status,m&&0==k.statusCode){var c=new Error("CORS request rejected: "+b.uri);return c.cors="rejected",p.loading=!0,p.end=!0,b.callback(c,k)}b.onResponse(null,k)}}function g(){p.loading||(p.loading=!0,a.log.debug("Response body loading",{id:k.id}))}function i(){if(!p.end){if(p.end=!0,a.log.debug("Request done",{id:k.id}),k.body=k.responseText,b.json)try{k.body=JSON.parse(k.responseText)}catch(a){return b.callback(a,k)}b.callback(null,k,k.body)}}var k=new h,l=!1,m=f(b.uri),n="withCredentials"in k;if(j+=1,k.seq_id=j,k.id=j+": "+b.method+" "+b.uri,k._id=k.id,m&&!n){var o=new Error("Browser does not support cross-origin request: "+b.uri);return o.cors="unsupported",b.callback(o,k)}k.timeoutTimer=setTimeout(c,b.timeout);var p={response:!1,loading:!1,end:!1};return k.onreadystatechange=d,k.open(b.method,b.uri,!0),m&&(k.withCredentials=!!b.withCredentials),k.send(b.body),k}function c(){}function d(){var a,b,d={},f=["trace","debug","info","warn","error"];for(b=0;b<f.length;b++)a=f[b],d[a]=c,"undefined"!=typeof console&&console&&console[a]&&(d[a]=e(console,a));return d}function e(a,b){function c(c,d){return"object"==typeof d&&(c+=" "+JSON.stringify(d)),a[b].call(a,c)}return c}function f(a){var b,c=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/;try{b=location.href}catch(a){b=document.createElement("a"),b.href="",b=b.href}var d=c.exec(b.toLowerCase())||[],e=c.exec(a.toLowerCase()),f=!(!e||e[1]==d[1]&&e[2]==d[2]&&(e[3]||("http:"===e[1]?80:443))==(d[3]||("http:"===d[1]?80:443)));return f}function g(a){var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);switch(m=n.join(""),a.length%3){case 1:m=m.slice(0,-2)+"==";break;case 2:m=m.slice(0,-1)+"="}return m}var h=XMLHttpRequest;if(!h)throw new Error("missing XMLHttpRequest");a.log={trace:c,debug:c,info:c,warn:c,error:c};var i=18e4,j=0;a.withCredentials=!1,a.DEFAULT_TIMEOUT=i,a.defaults=function(b,c){var d=function(a){var c=function(c,d){c="string"==typeof c?{uri:c}:JSON.parse(JSON.stringify(c));for(var e in b)void 0===c[e]&&(c[e]=b[e]);return a(c,d)};return c},e=d(a);return e.get=d(a.get),e.post=d(a.post),e.put=d(a.put),e.head=d(a.head),e};var k=["get","put","post","head"];return k.forEach(function(b){var c=b.toUpperCase(),d=b.toLowerCase();a[d]=function(b){"string"==typeof b?b={method:c,uri:b}:(b=JSON.parse(JSON.stringify(b)),b.method=c);var d=[b].concat(Array.prototype.slice.apply(arguments,[1]));return a.apply(this,d)}}),a.couch=function(b,d){function e(a,b,c){if(a)return d(a,b,c);if((b.statusCode<200||b.statusCode>299)&&c.error){a=new Error("CouchDB error: "+(c.error.reason||c.error.error));for(var e in c)a[e]=c[e];return d(a,b,c)}return d(a,b,c)}"string"==typeof b&&(b={uri:b}),b.json=!0,b.body&&(b.json=b.body),delete b.body,d=d||c;var f=a(b,e);return f},a})},{}],2:[function(a,b,c){var d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(a){"use strict";function b(a){var b=a.charCodeAt(0);return b===g||b===l?62:b===h||b===m?63:b<i?-1:b<i+10?b-i+26+26:b<k+26?b-k:b<j+26?b-j+26:void 0}function c(a){function c(a){j[l++]=a}var d,e,g,h,i,j;if(a.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var k=a.length;i="="===a.charAt(k-2)?2:"="===a.charAt(k-1)?1:0,j=new f(3*a.length/4-i),g=i>0?a.length-4:a.length;var l=0;for(d=0,e=0;d<g;d+=4,e+=3)h=b(a.charAt(d))<<18|b(a.charAt(d+1))<<12|b(a.charAt(d+2))<<6|b(a.charAt(d+3)),c((16711680&h)>>16),c((65280&h)>>8),c(255&h);return 2===i?(h=b(a.charAt(d))<<2|b(a.charAt(d+1))>>4,c(255&h)):1===i&&(h=b(a.charAt(d))<<10|b(a.charAt(d+1))<<4|b(a.charAt(d+2))>>2,c(h>>8&255),c(255&h)),j}function e(a){function b(a){return d.charAt(a)}function c(a){return b(a>>18&63)+b(a>>12&63)+b(a>>6&63)+b(63&a)}var e,f,g,h=a.length%3,i="";for(e=0,g=a.length-h;e<g;e+=3)f=(a[e]<<16)+(a[e+1]<<8)+a[e+2],i+=c(f);switch(h){case 1:f=a[a.length-1],i+=b(f>>2),i+=b(f<<4&63),i+="==";break;case 2:f=(a[a.length-2]<<8)+a[a.length-1],i+=b(f>>10),i+=b(f>>4&63),i+=b(f<<2&63),i+="="}return i}var f="undefined"!=typeof Uint8Array?Uint8Array:Array,g="+".charCodeAt(0),h="/".charCodeAt(0),i="0".charCodeAt(0),j="a".charCodeAt(0),k="A".charCodeAt(0),l="-".charCodeAt(0),m="_".charCodeAt(0);a.toByteArray=c,a.fromByteArray=e}("undefined"==typeof c?this.base64js={}:c)},{}],3:[function(a,b,c){(function(b){"use strict";function d(){function a(){}try{var b=new Uint8Array(1);return b.foo=function(){return 42},b.constructor=a,42===b.foo()&&b.constructor===a&&"function"==typeof b.subarray&&0===b.subarray(1,1).byteLength}catch(a){return!1}}function e(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function f(a){return this instanceof f?(f.TYPED_ARRAY_SUPPORT||(this.length=0,this.parent=void 0),"number"==typeof a?g(this,a):"string"==typeof a?h(this,a,arguments.length>1?arguments[1]:"utf8"):i(this,a)):arguments.length>1?new f(a,arguments[1]):new f(a)}function g(a,b){if(a=p(a,b<0?0:0|q(b)),!f.TYPED_ARRAY_SUPPORT)for(var c=0;c<b;c++)a[c]=0;return a}function h(a,b,c){"string"==typeof c&&""!==c||(c="utf8");var d=0|s(b,c);return a=p(a,d),a.write(b,c),a}function i(a,b){if(f.isBuffer(b))return j(a,b);if(Y(b))return k(a,b);if(null==b)throw new TypeError("must start with number, buffer, array or string");if("undefined"!=typeof ArrayBuffer){if(b.buffer instanceof ArrayBuffer)return l(a,b);if(b instanceof ArrayBuffer)return m(a,b)}return b.length?n(a,b):o(a,b)}function j(a,b){var c=0|q(b.length);return a=p(a,c),b.copy(a,0,0,c),a}function k(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function l(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function m(a,b){return f.TYPED_ARRAY_SUPPORT?(b.byteLength,a=f._augment(new Uint8Array(b))):a=l(a,new Uint8Array(b)),a}function n(a,b){var c=0|q(b.length);a=p(a,c);for(var d=0;d<c;d+=1)a[d]=255&b[d];return a}function o(a,b){var c,d=0;"Buffer"===b.type&&Y(b.data)&&(c=b.data,d=0|q(c.length)),a=p(a,d);for(var e=0;e<d;e+=1)a[e]=255&c[e];return a}function p(a,b){f.TYPED_ARRAY_SUPPORT?(a=f._augment(new Uint8Array(b)),a.__proto__=f.prototype):(a.length=b,a._isBuffer=!0);var c=0!==b&&b<=f.poolSize>>>1;return c&&(a.parent=Z),a}function q(a){if(a>=e())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+e().toString(16)+" bytes");return 0|a}function r(a,b){if(!(this instanceof r))return new r(a,b);var c=new f(a,b);return delete c.parent,c}function s(a,b){"string"!=typeof a&&(a=""+a);var c=a.length;if(0===c)return 0;for(var d=!1;;)switch(b){case"ascii":case"binary":case"raw":case"raws":return c;case"utf8":case"utf-8":return R(a).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*c;case"hex":return c>>>1;case"base64":return U(a).length;default:if(d)return R(a).length;b=(""+b).toLowerCase(),d=!0}}function t(a,b,c){var d=!1;if(b=0|b,c=void 0===c||c===1/0?this.length:0|c,a||(a="utf8"),b<0&&(b=0),c>this.length&&(c=this.length),c<=b)return"";for(;;)switch(a){case"hex":return F(this,b,c);case"utf8":case"utf-8":return B(this,b,c);case"ascii":return D(this,b,c);case"binary":return E(this,b,c);case"base64":return A(this,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,b,c);default:if(d)throw new TypeError("Unknown encoding: "+a);a=(a+"").toLowerCase(),d=!0}}function u(a,b,c,d){c=Number(c)||0;var e=a.length-c;d?(d=Number(d),d>e&&(d=e)):d=e;var f=b.length;if(f%2!==0)throw new Error("Invalid hex string");d>f/2&&(d=f/2);for(var g=0;g<d;g++){var h=parseInt(b.substr(2*g,2),16);if(isNaN(h))throw new Error("Invalid hex string");a[c+g]=h}return g}function v(a,b,c,d){return V(R(b,a.length-c),a,c,d)}function w(a,b,c,d){return V(S(b),a,c,d)}function x(a,b,c,d){return w(a,b,c,d)}function y(a,b,c,d){return V(U(b),a,c,d)}function z(a,b,c,d){return V(T(b,a.length-c),a,c,d)}function A(a,b,c){return 0===b&&c===a.length?W.fromByteArray(a):W.fromByteArray(a.slice(b,c))}function B(a,b,c){c=Math.min(a.length,c);for(var d=[],e=b;e<c;){var f=a[e],g=null,h=f>239?4:f>223?3:f>191?2:1;if(e+h<=c){var i,j,k,l;switch(h){case 1:f<128&&(g=f);break;case 2:i=a[e+1],128===(192&i)&&(l=(31&f)<<6|63&i,l>127&&(g=l));break;case 3:i=a[e+1],j=a[e+2],128===(192&i)&&128===(192&j)&&(l=(15&f)<<12|(63&i)<<6|63&j,l>2047&&(l<55296||l>57343)&&(g=l));break;case 4:i=a[e+1],j=a[e+2],k=a[e+3],128===(192&i)&&128===(192&j)&&128===(192&k)&&(l=(15&f)<<18|(63&i)<<12|(63&j)<<6|63&k,l>65535&&l<1114112&&(g=l))}}null===g?(g=65533,h=1):g>65535&&(g-=65536,d.push(g>>>10&1023|55296),g=56320|1023&g),d.push(g),e+=h}return C(d)}function C(a){var b=a.length;if(b<=$)return String.fromCharCode.apply(String,a);for(var c="",d=0;d<b;)c+=String.fromCharCode.apply(String,a.slice(d,d+=$));return c}function D(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(127&a[e]);return d}function E(a,b,c){var d="";c=Math.min(a.length,c);for(var e=b;e<c;e++)d+=String.fromCharCode(a[e]);return d}function F(a,b,c){var d=a.length;(!b||b<0)&&(b=0),(!c||c<0||c>d)&&(c=d);for(var e="",f=b;f<c;f++)e+=Q(a[f]);return e}function G(a,b,c){for(var d=a.slice(b,c),e="",f=0;f<d.length;f+=2)e+=String.fromCharCode(d[f]+256*d[f+1]);return e}function H(a,b,c){if(a%1!==0||a<0)throw new RangeError("offset is not uint");if(a+b>c)throw new RangeError("Trying to access beyond buffer length")}function I(a,b,c,d,e,g){if(!f.isBuffer(a))throw new TypeError("buffer must be a Buffer instance");if(b>e||b<g)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range")}function J(a,b,c,d){b<0&&(b=65535+b+1);for(var e=0,f=Math.min(a.length-c,2);e<f;e++)a[c+e]=(b&255<<8*(d?e:1-e))>>>8*(d?e:1-e)}function K(a,b,c,d){b<0&&(b=4294967295+b+1);for(var e=0,f=Math.min(a.length-c,4);e<f;e++)a[c+e]=b>>>8*(d?e:3-e)&255}function L(a,b,c,d,e,f){if(b>e||b<f)throw new RangeError("value is out of bounds");if(c+d>a.length)throw new RangeError("index out of range");if(c<0)throw new RangeError("index out of range")}function M(a,b,c,d,e){return e||L(a,b,c,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(a,b,c,d,23,4),c+4}function N(a,b,c,d,e){return e||L(a,b,c,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(a,b,c,d,52,8),c+8}function O(a){if(a=P(a).replace(aa,""),a.length<2)return"";for(;a.length%4!==0;)a+="=";return a}function P(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")}function Q(a){return a<16?"0"+a.toString(16):a.toString(16)}function R(a,b){b=b||1/0;for(var c,d=a.length,e=null,f=[],g=0;g<d;g++){if(c=a.charCodeAt(g),c>55295&&c<57344){if(!e){if(c>56319){(b-=3)>-1&&f.push(239,191,189);continue}if(g+1===d){(b-=3)>-1&&f.push(239,191,189);continue}e=c;continue}if(c<56320){(b-=3)>-1&&f.push(239,191,189),e=c;continue}c=(e-55296<<10|c-56320)+65536}else e&&(b-=3)>-1&&f.push(239,191,189);if(e=null,c<128){if((b-=1)<0)break;f.push(c)}else if(c<2048){if((b-=2)<0)break;f.push(c>>6|192,63&c|128)}else if(c<65536){if((b-=3)<0)break;f.push(c>>12|224,c>>6&63|128,63&c|128)}else{if(!(c<1114112))throw new Error("Invalid code point");if((b-=4)<0)break;f.push(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}}return f}function S(a){for(var b=[],c=0;c<a.length;c++)b.push(255&a.charCodeAt(c));return b}function T(a,b){for(var c,d,e,f=[],g=0;g<a.length&&!((b-=2)<0);g++)c=a.charCodeAt(g),d=c>>8,e=c%256,f.push(e),f.push(d);return f}function U(a){return W.toByteArray(O(a))}function V(a,b,c,d){for(var e=0;e<d&&!(e+c>=b.length||e>=a.length);e++)b[e+c]=a[e];return e}var W=a("base64-js"),X=a("ieee754"),Y=a("isarray");c.Buffer=f,c.SlowBuffer=r,c.INSPECT_MAX_BYTES=50,f.poolSize=8192;var Z={};f.TYPED_ARRAY_SUPPORT=void 0!==b.TYPED_ARRAY_SUPPORT?b.TYPED_ARRAY_SUPPORT:d(),f.TYPED_ARRAY_SUPPORT?(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array):(f.prototype.length=void 0,f.prototype.parent=void 0),f.isBuffer=function(a){return!(null==a||!a._isBuffer)},f.compare=function(a,b){if(!f.isBuffer(a)||!f.isBuffer(b))throw new TypeError("Arguments must be Buffers");if(a===b)return 0;for(var c=a.length,d=b.length,e=0,g=Math.min(c,d);e<g&&a[e]===b[e];)++e;return e!==g&&(c=a[e],d=b[e]),c<d?-1:d<c?1:0},f.isEncoding=function(a){switch(String(a).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(a,b){if(!Y(a))throw new TypeError("list argument must be an Array of Buffers.");if(0===a.length)return new f(0);var c;if(void 0===b)for(b=0,c=0;c<a.length;c++)b+=a[c].length;var d=new f(b),e=0;for(c=0;c<a.length;c++){var g=a[c];g.copy(d,e),e+=g.length}return d},f.byteLength=s,f.prototype.toString=function(){var a=0|this.length;return 0===a?"":0===arguments.length?B(this,0,a):t.apply(this,arguments)},f.prototype.equals=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a||0===f.compare(this,a)},f.prototype.inspect=function(){var a="",b=c.INSPECT_MAX_BYTES;return this.length>0&&(a=this.toString("hex",0,b).match(/.{2}/g).join(" "),this.length>b&&(a+=" ... ")),"<Buffer "+a+">"},f.prototype.compare=function(a){if(!f.isBuffer(a))throw new TypeError("Argument must be a Buffer");return this===a?0:f.compare(this,a)},f.prototype.indexOf=function(a,b){function c(a,b,c){for(var d=-1,e=0;c+e<a.length;e++)if(a[c+e]===b[d===-1?0:e-d]){if(d===-1&&(d=e),e-d+1===b.length)return c+d}else d=-1;return-1}if(b>2147483647?b=2147483647:b<-2147483648&&(b=-2147483648),b>>=0,0===this.length)return-1;if(b>=this.length)return-1;if(b<0&&(b=Math.max(this.length+b,0)),"string"==typeof a)return 0===a.length?-1:String.prototype.indexOf.call(this,a,b);if(f.isBuffer(a))return c(this,a,b);if("number"==typeof a)return f.TYPED_ARRAY_SUPPORT&&"function"===Uint8Array.prototype.indexOf?Uint8Array.prototype.indexOf.call(this,a,b):c(this,[a],b);throw new TypeError("val must be string, number or Buffer")},f.prototype.get=function(a){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(a)},f.prototype.set=function(a,b){return console.log(".set() is deprecated. Access using array indexes instead."),
this.writeUInt8(a,b)},f.prototype.write=function(a,b,c,d){if(void 0===b)d="utf8",c=this.length,b=0;else if(void 0===c&&"string"==typeof b)d=b,c=this.length,b=0;else if(isFinite(b))b=0|b,isFinite(c)?(c=0|c,void 0===d&&(d="utf8")):(d=c,c=void 0);else{var e=d;d=b,b=0|c,c=e}var f=this.length-b;if((void 0===c||c>f)&&(c=f),a.length>0&&(c<0||b<0)||b>this.length)throw new RangeError("attempt to write outside buffer bounds");d||(d="utf8");for(var g=!1;;)switch(d){case"hex":return u(this,a,b,c);case"utf8":case"utf-8":return v(this,a,b,c);case"ascii":return w(this,a,b,c);case"binary":return x(this,a,b,c);case"base64":return y(this,a,b,c);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return z(this,a,b,c);default:if(g)throw new TypeError("Unknown encoding: "+d);d=(""+d).toLowerCase(),g=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var $=4096;f.prototype.slice=function(a,b){var c=this.length;a=~~a,b=void 0===b?c:~~b,a<0?(a+=c,a<0&&(a=0)):a>c&&(a=c),b<0?(b+=c,b<0&&(b=0)):b>c&&(b=c),b<a&&(b=a);var d;if(f.TYPED_ARRAY_SUPPORT)d=f._augment(this.subarray(a,b));else{var e=b-a;d=new f(e,void 0);for(var g=0;g<e;g++)d[g]=this[g+a]}return d.length&&(d.parent=this.parent||this),d},f.prototype.readUIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return d},f.prototype.readUIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a+--b],e=1;b>0&&(e*=256);)d+=this[a+--b]*e;return d},f.prototype.readUInt8=function(a,b){return b||H(a,1,this.length),this[a]},f.prototype.readUInt16LE=function(a,b){return b||H(a,2,this.length),this[a]|this[a+1]<<8},f.prototype.readUInt16BE=function(a,b){return b||H(a,2,this.length),this[a]<<8|this[a+1]},f.prototype.readUInt32LE=function(a,b){return b||H(a,4,this.length),(this[a]|this[a+1]<<8|this[a+2]<<16)+16777216*this[a+3]},f.prototype.readUInt32BE=function(a,b){return b||H(a,4,this.length),16777216*this[a]+(this[a+1]<<16|this[a+2]<<8|this[a+3])},f.prototype.readIntLE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=this[a],e=1,f=0;++f<b&&(e*=256);)d+=this[a+f]*e;return e*=128,d>=e&&(d-=Math.pow(2,8*b)),d},f.prototype.readIntBE=function(a,b,c){a=0|a,b=0|b,c||H(a,b,this.length);for(var d=b,e=1,f=this[a+--d];d>0&&(e*=256);)f+=this[a+--d]*e;return e*=128,f>=e&&(f-=Math.pow(2,8*b)),f},f.prototype.readInt8=function(a,b){return b||H(a,1,this.length),128&this[a]?(255-this[a]+1)*-1:this[a]},f.prototype.readInt16LE=function(a,b){b||H(a,2,this.length);var c=this[a]|this[a+1]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt16BE=function(a,b){b||H(a,2,this.length);var c=this[a+1]|this[a]<<8;return 32768&c?4294901760|c:c},f.prototype.readInt32LE=function(a,b){return b||H(a,4,this.length),this[a]|this[a+1]<<8|this[a+2]<<16|this[a+3]<<24},f.prototype.readInt32BE=function(a,b){return b||H(a,4,this.length),this[a]<<24|this[a+1]<<16|this[a+2]<<8|this[a+3]},f.prototype.readFloatLE=function(a,b){return b||H(a,4,this.length),X.read(this,a,!0,23,4)},f.prototype.readFloatBE=function(a,b){return b||H(a,4,this.length),X.read(this,a,!1,23,4)},f.prototype.readDoubleLE=function(a,b){return b||H(a,8,this.length),X.read(this,a,!0,52,8)},f.prototype.readDoubleBE=function(a,b){return b||H(a,8,this.length),X.read(this,a,!1,52,8)},f.prototype.writeUIntLE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=1,f=0;for(this[b]=255&a;++f<c&&(e*=256);)this[b+f]=a/e&255;return b+c},f.prototype.writeUIntBE=function(a,b,c,d){a=+a,b=0|b,c=0|c,d||I(this,a,b,c,Math.pow(2,8*c),0);var e=c-1,f=1;for(this[b+e]=255&a;--e>=0&&(f*=256);)this[b+e]=a/f&255;return b+c},f.prototype.writeUInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,255,0),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),this[b]=255&a,b+1},f.prototype.writeUInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeUInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeUInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b+3]=a>>>24,this[b+2]=a>>>16,this[b+1]=a>>>8,this[b]=255&a):K(this,a,b,!0),b+4},f.prototype.writeUInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeIntLE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=0,g=1,h=a<0?1:0;for(this[b]=255&a;++f<c&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeIntBE=function(a,b,c,d){if(a=+a,b=0|b,!d){var e=Math.pow(2,8*c-1);I(this,a,b,c,e-1,-e)}var f=c-1,g=1,h=a<0?1:0;for(this[b+f]=255&a;--f>=0&&(g*=256);)this[b+f]=(a/g>>0)-h&255;return b+c},f.prototype.writeInt8=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,1,127,-128),f.TYPED_ARRAY_SUPPORT||(a=Math.floor(a)),a<0&&(a=255+a+1),this[b]=255&a,b+1},f.prototype.writeInt16LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8):J(this,a,b,!0),b+2},f.prototype.writeInt16BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>8,this[b+1]=255&a):J(this,a,b,!1),b+2},f.prototype.writeInt32LE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[b]=255&a,this[b+1]=a>>>8,this[b+2]=a>>>16,this[b+3]=a>>>24):K(this,a,b,!0),b+4},f.prototype.writeInt32BE=function(a,b,c){return a=+a,b=0|b,c||I(this,a,b,4,2147483647,-2147483648),a<0&&(a=4294967295+a+1),f.TYPED_ARRAY_SUPPORT?(this[b]=a>>>24,this[b+1]=a>>>16,this[b+2]=a>>>8,this[b+3]=255&a):K(this,a,b,!1),b+4},f.prototype.writeFloatLE=function(a,b,c){return M(this,a,b,!0,c)},f.prototype.writeFloatBE=function(a,b,c){return M(this,a,b,!1,c)},f.prototype.writeDoubleLE=function(a,b,c){return N(this,a,b,!0,c)},f.prototype.writeDoubleBE=function(a,b,c){return N(this,a,b,!1,c)},f.prototype.copy=function(a,b,c,d){if(c||(c=0),d||0===d||(d=this.length),b>=a.length&&(b=a.length),b||(b=0),d>0&&d<c&&(d=c),d===c)return 0;if(0===a.length||0===this.length)return 0;if(b<0)throw new RangeError("targetStart out of bounds");if(c<0||c>=this.length)throw new RangeError("sourceStart out of bounds");if(d<0)throw new RangeError("sourceEnd out of bounds");d>this.length&&(d=this.length),a.length-b<d-c&&(d=a.length-b+c);var e,g=d-c;if(this===a&&c<b&&b<d)for(e=g-1;e>=0;e--)a[e+b]=this[e+c];else if(g<1e3||!f.TYPED_ARRAY_SUPPORT)for(e=0;e<g;e++)a[e+b]=this[e+c];else a._set(this.subarray(c,c+g),b);return g},f.prototype.fill=function(a,b,c){if(a||(a=0),b||(b=0),c||(c=this.length),c<b)throw new RangeError("end < start");if(c!==b&&0!==this.length){if(b<0||b>=this.length)throw new RangeError("start out of bounds");if(c<0||c>this.length)throw new RangeError("end out of bounds");var d;if("number"==typeof a)for(d=b;d<c;d++)this[d]=a;else{var e=R(a.toString()),f=e.length;for(d=b;d<c;d++)this[d]=e[d%f]}return this}},f.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(f.TYPED_ARRAY_SUPPORT)return new f(this).buffer;for(var a=new Uint8Array(this.length),b=0,c=a.length;b<c;b+=1)a[b]=this[b];return a.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var _=f.prototype;f._augment=function(a){return a.constructor=f,a._isBuffer=!0,a._set=a.set,a.get=_.get,a.set=_.set,a.write=_.write,a.toString=_.toString,a.toLocaleString=_.toString,a.toJSON=_.toJSON,a.equals=_.equals,a.compare=_.compare,a.indexOf=_.indexOf,a.copy=_.copy,a.slice=_.slice,a.readUIntLE=_.readUIntLE,a.readUIntBE=_.readUIntBE,a.readUInt8=_.readUInt8,a.readUInt16LE=_.readUInt16LE,a.readUInt16BE=_.readUInt16BE,a.readUInt32LE=_.readUInt32LE,a.readUInt32BE=_.readUInt32BE,a.readIntLE=_.readIntLE,a.readIntBE=_.readIntBE,a.readInt8=_.readInt8,a.readInt16LE=_.readInt16LE,a.readInt16BE=_.readInt16BE,a.readInt32LE=_.readInt32LE,a.readInt32BE=_.readInt32BE,a.readFloatLE=_.readFloatLE,a.readFloatBE=_.readFloatBE,a.readDoubleLE=_.readDoubleLE,a.readDoubleBE=_.readDoubleBE,a.writeUInt8=_.writeUInt8,a.writeUIntLE=_.writeUIntLE,a.writeUIntBE=_.writeUIntBE,a.writeUInt16LE=_.writeUInt16LE,a.writeUInt16BE=_.writeUInt16BE,a.writeUInt32LE=_.writeUInt32LE,a.writeUInt32BE=_.writeUInt32BE,a.writeIntLE=_.writeIntLE,a.writeIntBE=_.writeIntBE,a.writeInt8=_.writeInt8,a.writeInt16LE=_.writeInt16LE,a.writeInt16BE=_.writeInt16BE,a.writeInt32LE=_.writeInt32LE,a.writeInt32BE=_.writeInt32BE,a.writeFloatLE=_.writeFloatLE,a.writeFloatBE=_.writeFloatBE,a.writeDoubleLE=_.writeDoubleLE,a.writeDoubleBE=_.writeDoubleBE,a.fill=_.fill,a.inspect=_.inspect,a.toArrayBuffer=_.toArrayBuffer,a};var aa=/[^+\/0-9A-Za-z-_]/g}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"base64-js":2,ieee754:5,isarray:4}],4:[function(a,b,c){var d={}.toString;b.exports=Array.isArray||function(a){return"[object Array]"==d.call(a)}},{}],5:[function(a,b,c){c.read=function(a,b,c,d,e){var f,g,h=8*e-d-1,i=(1<<h)-1,j=i>>1,k=-7,l=c?e-1:0,m=c?-1:1,n=a[b+l];for(l+=m,f=n&(1<<-k)-1,n>>=-k,k+=h;k>0;f=256*f+a[b+l],l+=m,k-=8);for(g=f&(1<<-k)-1,f>>=-k,k+=d;k>0;g=256*g+a[b+l],l+=m,k-=8);if(0===f)f=1-j;else{if(f===i)return g?NaN:(n?-1:1)*(1/0);g+=Math.pow(2,d),f-=j}return(n?-1:1)*g*Math.pow(2,f-d)},c.write=function(a,b,c,d,e,f){var g,h,i,j=8*f-e-1,k=(1<<j)-1,l=k>>1,m=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,n=d?0:f-1,o=d?1:-1,p=b<0||0===b&&1/b<0?1:0;for(b=Math.abs(b),isNaN(b)||b===1/0?(h=isNaN(b)?1:0,g=k):(g=Math.floor(Math.log(b)/Math.LN2),b*(i=Math.pow(2,-g))<1&&(g--,i*=2),b+=g+l>=1?m/i:m*Math.pow(2,1-l),b*i>=2&&(g++,i/=2),g+l>=k?(h=0,g=k):g+l>=1?(h=(b*i-1)*Math.pow(2,e),g+=l):(h=b*Math.pow(2,l-1)*Math.pow(2,e),g=0));e>=8;a[c+n]=255&h,n+=o,h/=256,e-=8);for(g=g<<e|h,j+=e;j>0;a[c+n]=255&g,n+=o,g/=256,j-=8);a[c+n-o]|=128*p}},{}],6:[function(a,b,c){function d(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}b.exports=d},{}],7:[function(a,b,c){function d(a){return function(b,c,d){for(var e=-1,f=Object(b),g=d(b),h=g.length;h--;){var i=g[a?h:++e];if(c(f[i],i,f)===!1)break}return b}}var e=d();b.exports=e},{}],8:[function(a,b,c){(function(a){function d(a){return a&&a.Object===Object?a:null}function e(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function f(){}function g(a,b){return i(a,b)&&delete a[b]}function h(a,b){if(ca){var c=a[b];return c===J?void 0:c}return Z.call(a,b)?a[b]:void 0}function i(a,b){return ca?void 0!==a[b]:Z.call(a,b)}function j(a,b,c){a[b]=ca&&void 0===c?J:c}function k(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function l(){this.__data__={hash:new f,map:ba?new ba:[],string:new f}}function m(a){var b=this.__data__;return C(a)?g("string"==typeof a?b.string:b.hash,a):ba?b.map.delete(a):w(b.map,a)}function n(a){var b=this.__data__;return C(a)?h("string"==typeof a?b.string:b.hash,a):ba?b.map.get(a):x(b.map,a)}function o(a){var b=this.__data__;return C(a)?i("string"==typeof a?b.string:b.hash,a):ba?b.map.has(a):y(b.map,a)}function p(a,b){var c=this.__data__;return C(a)?j("string"==typeof a?c.string:c.hash,a,b):ba?c.map.set(a,b):A(c.map,a,b),this}function q(a){var b=-1,c=a?a.length:0;for(this.clear();++b<c;){var d=a[b];this.set(d[0],d[1])}}function r(){this.__data__={array:[],map:null}}function s(a){var b=this.__data__,c=b.array;return c?w(c,a):b.map.delete(a)}function t(a){var b=this.__data__,c=b.array;return c?x(c,a):b.map.get(a)}function u(a){var b=this.__data__,c=b.array;return c?y(c,a):b.map.has(a)}function v(a,b){var c=this.__data__,d=c.array;d&&(d.length<I-1?A(d,a,b):(c.array=null,c.map=new k(d)));var e=c.map;return e&&e.set(a,b),this}function w(a,b){var c=z(a,b);if(c<0)return!1;var d=a.length-1;return c==d?a.pop():aa.call(a,c,1),!0}function x(a,b){var c=z(a,b);return c<0?void 0:a[c][1]}function y(a,b){return z(a,b)>-1}function z(a,b){for(var c=a.length;c--;)if(D(a[c][0],b))return c;return-1}function A(a,b,c){var d=z(a,b);d<0?a.push([b,c]):a[d][1]=c}function B(a,b){var c=a[b];return H(c)?c:void 0}function C(a){var b=typeof a;return"number"==b||"boolean"==b||"string"==b&&"__proto__"!=a||null==a}function D(a,b){return a===b||a!==a&&b!==b}function E(a){var b=F(a)?$.call(a):"";return b==K||b==L}function F(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function G(a){return!!a&&"object"==typeof a}function H(a){return null!=a&&(E(a)?_.test(Y.call(a)):G(a)&&(e(a)?_:N).test(a))}var I=200,J="__lodash_hash_undefined__",K="[object Function]",L="[object GeneratorFunction]",M=/[\\^$.*+?()[\]{}|]/g,N=/^\[object .+?Constructor\]$/,O={function:!0,object:!0},P=O[typeof c]&&c&&!c.nodeType?c:void 0,Q=O[typeof b]&&b&&!b.nodeType?b:void 0,R=d(P&&Q&&"object"==typeof a&&a),S=d(O[typeof self]&&self),T=d(O[typeof window]&&window),U=d(O[typeof this]&&this),V=R||T!==(U&&U.window)&&T||S||U||Function("return this")(),W=Array.prototype,X=Object.prototype,Y=Function.prototype.toString,Z=X.hasOwnProperty,$=X.toString,_=RegExp("^"+Y.call(Z).replace(M,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=W.splice,ba=B(V,"Map"),ca=B(Object,"create");f.prototype=ca?ca(null):X,k.prototype.clear=l,k.prototype.delete=m,k.prototype.get=n,k.prototype.has=o,k.prototype.set=p,q.prototype.clear=r,q.prototype.delete=s,q.prototype.get=t,q.prototype.has=u,q.prototype.set=v,b.exports=q}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(a,b,c){(function(c){function d(a,b){return a.set(b[0],b[1]),a}function e(a,b){return a.add(b),a}function f(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function g(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function h(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function i(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function j(a,b,c){var d=a[b];D(d,c)&&(!D(d,na[b])||pa.call(a,b))&&(void 0!==c||b in a)||(a[b]=c)}function k(a,b){return a&&u(b,L(b),a)}function l(a,b,c,d,e,f){var h;if(c&&(h=e?c(a,d,e,f):c(a)),void 0!==h)return h;if(!F(a))return a;var i=Da(a);if(i){if(h=z(a),!b)return t(a,h)}else{var n=y(a),o=n==R||n==S;if(n!=V&&n!=M&&(!o||e))return ma[n]?B(a,n,b):e?a:{};if(g(a))return e?a:{};if(h=A(o?{}:a),!b)return w(a,k(h,a))}f||(f=new I);var p=f.get(a);return p?p:(f.set(a,h),(i?J:m)(a,function(d,e){j(h,e,l(d,b,c,e,a,f))}),i?h:w(a,h))}function m(a,b){return a&&K(a,b,L)}function n(a){var b=a.constructor,c=new b(a.byteLength),d=new ta(c);return d.set(new ta(a)),c}function o(a){var b=a.constructor;return f(h(a),d,new b)}function p(a){var b=a.constructor,c=new b(a.source,ka.exec(a));return c.lastIndex=a.lastIndex,c}function q(a){var b=a.constructor;return f(i(a),e,new b)}function r(a){return sa?Object(Aa.call(a)):{}}function s(a,b){var c=a.buffer,d=a.constructor;return new d(b?n(c):c,a.byteOffset,a.length)}function t(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function u(a,b,c){return v(a,b,c)}function v(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):a[g];j(c,g,h)}return c}function w(a,b){return u(a,Ca(a),b)}function x(a,b){var c=null==a?void 0:a[b];return H(c)?c:void 0}function y(a){return qa.call(a)}function z(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&pa.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function A(a){var b=a.constructor;return Ba(E(b)?b.prototype:void 0)}function B(a,b,c){var d=a.constructor;switch(b){case _:return n(a);case O:case P:return new d(+a);case aa:case ba:case ca:case da:case ea:case fa:case ga:case ha:case ia:return s(a,c);case T:return o(a);case U:case Y:return new d(a);case W:return p(a);case X:return q(a);case Z:return r(a)}}function C(a){return l(a)}function D(a,b){return a===b||a!==a&&b!==b}function E(a){var b=F(a)?qa.call(a):"";return b==R||b==S}function F(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function G(a){return!!a&&"object"==typeof a}function H(a){return null!=a&&(E(a)?ra.test(oa.call(a)):G(a)&&(g(a)?ra:la).test(a))}var I=a("lodash._stack"),J=a("lodash._arrayeach"),K=a("lodash._basefor"),L=a("lodash.keys"),M="[object Arguments]",N="[object Array]",O="[object Boolean]",P="[object Date]",Q="[object Error]",R="[object Function]",S="[object GeneratorFunction]",T="[object Map]",U="[object Number]",V="[object Object]",W="[object RegExp]",X="[object Set]",Y="[object String]",Z="[object Symbol]",$="[object WeakMap]",_="[object ArrayBuffer]",aa="[object Float32Array]",ba="[object Float64Array]",ca="[object Int8Array]",da="[object Int16Array]",ea="[object Int32Array]",fa="[object Uint8Array]",ga="[object Uint8ClampedArray]",ha="[object Uint16Array]",ia="[object Uint32Array]",ja=/[\\^$.*+?()[\]{}|]/g,ka=/\w*$/,la=/^\[object .+?Constructor\]$/,ma={};ma[M]=ma[N]=ma[_]=ma[O]=ma[P]=ma[aa]=ma[ba]=ma[ca]=ma[da]=ma[ea]=ma[T]=ma[U]=ma[V]=ma[W]=ma[X]=ma[Y]=ma[Z]=ma[fa]=ma[ga]=ma[ha]=ma[ia]=!0,ma[Q]=ma[R]=ma[$]=!1;var na=c.Object.prototype,oa=c.Function.prototype.toString,pa=na.hasOwnProperty,qa=na.toString,ra=RegExp("^"+oa.call(pa).replace(ja,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sa=c.Symbol,ta=c.Uint8Array,ua=Object.getOwnPropertySymbols,va=x(c,"Map"),wa=x(c,"Set"),xa=va?oa.call(va):"",ya=wa?oa.call(wa):"",za=sa?sa.prototype:void 0,Aa=sa?za.valueOf:void 0,Ba=function(){function a(){}return function(b){if(F(b)){a.prototype=b;var c=new a;a.prototype=void 0}return c||{}}}(),Ca=ua||function(){return[]};(va&&y(new va)!=T||wa&&y(new wa)!=X)&&(y=function(a){var b=qa.call(a),c=b==V?a.constructor:null,d="function"==typeof c?oa.call(c):"";if(d){if(d==xa)return T;if(d==ya)return X}return b});var Da=Array.isArray;b.exports=C}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arrayeach":6,"lodash._basefor":7,"lodash._stack":8,"lodash.keys":11}],10:[function(a,b,c){(function(c){function d(a,b){return a.set(b[0],b[1]),a}function e(a,b){return a.add(b),a}function f(a,b,c,d){var e=-1,f=a.length;for(d&&f&&(c=a[++e]);++e<f;)c=b(c,a[e],e,a);return c}function g(a){var b=!1;if(null!=a&&"function"!=typeof a.toString)try{b=!!(a+"")}catch(a){}return b}function h(a){var b=-1,c=Array(a.size);return a.forEach(function(a,d){c[++b]=[d,a]}),c}function i(a){var b=-1,c=Array(a.size);return a.forEach(function(a){c[++b]=a}),c}function j(a,b,c){var d=a[b];D(d,c)&&(!D(d,na[b])||pa.call(a,b))&&(void 0!==c||b in a)||(a[b]=c)}function k(a,b){return a&&u(b,L(b),a)}function l(a,b,c,d,e,f){var h;if(c&&(h=e?c(a,d,e,f):c(a)),void 0!==h)return h;if(!F(a))return a;var i=Da(a);if(i){if(h=z(a),!b)return t(a,h)}else{var n=y(a),o=n==R||n==S;if(n!=V&&n!=M&&(!o||e))return ma[n]?B(a,n,b):e?a:{};if(g(a))return e?a:{};if(h=A(o?{}:a),!b)return w(a,k(h,a))}f||(f=new I);var p=f.get(a);return p?p:(f.set(a,h),(i?J:m)(a,function(d,e){j(h,e,l(d,b,c,e,a,f))}),i?h:w(a,h))}function m(a,b){return a&&K(a,b,L)}function n(a){var b=a.constructor,c=new b(a.byteLength),d=new ta(c);return d.set(new ta(a)),c}function o(a){var b=a.constructor;return f(h(a),d,new b)}function p(a){var b=a.constructor,c=new b(a.source,ka.exec(a));return c.lastIndex=a.lastIndex,c}function q(a){var b=a.constructor;return f(i(a),e,new b)}function r(a){return sa?Object(Aa.call(a)):{}}function s(a,b){var c=a.buffer,d=a.constructor;return new d(b?n(c):c,a.byteOffset,a.length)}function t(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}function u(a,b,c){return v(a,b,c)}function v(a,b,c,d){c||(c={});for(var e=-1,f=b.length;++e<f;){var g=b[e],h=d?d(c[g],a[g],g,c,a):a[g];j(c,g,h)}return c}function w(a,b){return u(a,Ca(a),b)}function x(a,b){var c=null==a?void 0:a[b];return H(c)?c:void 0}function y(a){return qa.call(a)}function z(a){var b=a.length,c=a.constructor(b);return b&&"string"==typeof a[0]&&pa.call(a,"index")&&(c.index=a.index,c.input=a.input),c}function A(a){var b=a.constructor;return Ba(E(b)?b.prototype:void 0)}function B(a,b,c){var d=a.constructor;switch(b){case _:return n(a);case O:case P:return new d(+a);case aa:case ba:case ca:case da:case ea:case fa:case ga:case ha:case ia:return s(a,c);case T:return o(a);case U:case Y:return new d(a);case W:return p(a);case X:return q(a);case Z:return r(a)}}function C(a){return l(a,!0)}function D(a,b){return a===b||a!==a&&b!==b}function E(a){var b=F(a)?qa.call(a):"";return b==R||b==S}function F(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function G(a){return!!a&&"object"==typeof a}function H(a){return null!=a&&(E(a)?ra.test(oa.call(a)):G(a)&&(g(a)?ra:la).test(a))}var I=a("lodash._stack"),J=a("lodash._arrayeach"),K=a("lodash._basefor"),L=a("lodash.keys"),M="[object Arguments]",N="[object Array]",O="[object Boolean]",P="[object Date]",Q="[object Error]",R="[object Function]",S="[object GeneratorFunction]",T="[object Map]",U="[object Number]",V="[object Object]",W="[object RegExp]",X="[object Set]",Y="[object String]",Z="[object Symbol]",$="[object WeakMap]",_="[object ArrayBuffer]",aa="[object Float32Array]",ba="[object Float64Array]",ca="[object Int8Array]",da="[object Int16Array]",ea="[object Int32Array]",fa="[object Uint8Array]",ga="[object Uint8ClampedArray]",ha="[object Uint16Array]",ia="[object Uint32Array]",ja=/[\\^$.*+?()[\]{}|]/g,ka=/\w*$/,la=/^\[object .+?Constructor\]$/,ma={};ma[M]=ma[N]=ma[_]=ma[O]=ma[P]=ma[aa]=ma[ba]=ma[ca]=ma[da]=ma[ea]=ma[T]=ma[U]=ma[V]=ma[W]=ma[X]=ma[Y]=ma[Z]=ma[fa]=ma[ga]=ma[ha]=ma[ia]=!0,ma[Q]=ma[R]=ma[$]=!1;var na=c.Object.prototype,oa=c.Function.prototype.toString,pa=na.hasOwnProperty,qa=na.toString,ra=RegExp("^"+oa.call(pa).replace(ja,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),sa=c.Symbol,ta=c.Uint8Array,ua=Object.getOwnPropertySymbols,va=x(c,"Map"),wa=x(c,"Set"),xa=va?oa.call(va):"",ya=wa?oa.call(wa):"",za=sa?sa.prototype:void 0,Aa=sa?za.valueOf:void 0,Ba=function(){function a(){}return function(b){if(F(b)){a.prototype=b;var c=new a;a.prototype=void 0}return c||{}}}(),Ca=ua||function(){return[]};(va&&y(new va)!=T||wa&&y(new wa)!=X)&&(y=function(a){var b=qa.call(a),c=b==V?a.constructor:null,d="function"==typeof c?oa.call(c):"";if(d){if(d==xa)return T;if(d==ya)return X}return b});var Da=Array.isArray;b.exports=C}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"lodash._arrayeach":6,"lodash._basefor":7,"lodash._stack":8,"lodash.keys":11}],11:[function(a,b,c){function d(a,b){for(var c=-1,d=Array(a);++c<a;)d[c]=b(c);return d}function e(a,b){return a="number"==typeof a||y.test(a)?+a:-1,b=null==b?t:b,a>-1&&a%1==0&&a<b}function f(a,b){return A.call(a,b)||"object"==typeof a&&b in a&&null===C(a)}function g(a){return E(Object(a))}function h(a){return function(b){return null==b?void 0:b[a]}}function i(a){var b=a?a.length:void 0;return o(b)&&(G(a)||r(a)||k(a))?d(b,String):null}function j(a){var b=a&&a.constructor,c="function"==typeof b&&b.prototype||z;return a===c}function k(a){return m(a)&&A.call(a,"callee")&&(!D.call(a,"callee")||B.call(a)==u)}function l(a){return null!=a&&o(F(a))&&!n(a)}function m(a){return q(a)&&l(a)}function n(a){var b=p(a)?B.call(a):"";return b==v||b==w}function o(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=t}function p(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function q(a){return!!a&&"object"==typeof a}function r(a){return"string"==typeof a||!G(a)&&q(a)&&B.call(a)==x}function s(a){var b=j(a);if(!b&&!l(a))return g(a);var c=i(a),d=!!c,h=c||[],k=h.length;for(var m in a)!f(a,m)||d&&("length"==m||e(m,k))||b&&"constructor"==m||h.push(m);return h}var t=9007199254740991,u="[object Arguments]",v="[object Function]",w="[object GeneratorFunction]",x="[object String]",y=/^(?:0|[1-9]\d*)$/,z=Object.prototype,A=z.hasOwnProperty,B=z.toString,C=Object.getPrototypeOf,D=z.propertyIsEnumerable,E=Object.keys,F=h("length"),G=Array.isArray;b.exports=s},{}],12:[function(a,b,c){(function(c){(function(){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja,Ka,La,Ma,Na,Oa,Pa,Qa,Ra,Sa,Ta,Ua,Va,Wa,Xa,Ya,Za,$a,_a,ab,bb,cb,db,eb,fb,gb,hb,ib,jb,kb,lb,mb,nb,ob,pb,qb,rb,sb,tb,ub,vb,wb=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},xb=function(a,b){return function(){return a.apply(b,arguments)}},yb={}.hasOwnProperty,zb=function(a,b){function c(){this.constructor=a}for(var d in b)yb.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};vb=a("./utils.js"),tb=a("./photoccino.js"),sb={clone:a("lodash.clone"),cloneDeep:a("lodash.clonedeep")},"undefined"!=typeof window&&null!==window?(ub=a("browser-request"),la={DateTimeFormat:function(){}}):(ub=a("request"),la=a("intl")),f=function(){function a(a,b){var c,d,e,f;this.config=null!=a?a:{},this.logger=this._initLogger(this.config.winstonLogger),c=null!=(e=this.config.endpoints.contentHost)?e:this.extractHostFromDeprecatedConfig(this.config),d=null!=this.config.endpoints.contentHost?"http":this.extractProtocolFromDeprecatedConfig(this.config),this.contentClient=new A(c,null!=(f=this.config)?f.concurrency:void 0,this.logger,b,d),this.web2PrintClient=qb.create({hostname:this.config.endpoints.web2PrintHost,logger:this.logger}),this.textHandler=new mb(this.web2PrintClient,this.logger),this.contentFactory=new B,this.layoutUrlRewrite=null}return a.Messages={noCandidateLayoutsFound:function(a){return new vb.Message("noCandidateLayoutsFound","No candidate layouts found for group spec: "+a.id,vb.LogLevel.INFO)},hasUnassignedImages:function(a){return new vb.Message("hasUnassignedImages","Unassigned images in ("+a+") group(s)",vb.LogLevel.INFO)},globalcontentNotProvided:function(a){return new vb.Message("globalcontentNotProvided","Could not perform "+a+" operation without globalcontent",vb.LogLevel.ERROR)}},a.prototype.extractProtocolFromDeprecatedConfig=function(a){var b,c,d;return null!=(c=null!=(d=a.endpoints)?d.styleService:void 0)&&(b=c.match(/http[s]?/g),null!=b)?b[0]:"http"},a.prototype.extractHostFromDeprecatedConfig=function(a){var b,c,d;return null!=(c=null!=(d=a.endpoints)?d.styleService:void 0)&&(b=/http[s]?:\/\/([^/]+)/,b.test(c))?b.exec(c)[1]:null},a.prototype.setGlobalContent=function(a){return this.globalContent=new S(a),this.textHandler.setGlobalContent(this.globalContent),this.contentFactory.setGlobalContent(this.globalContent)},a.prototype.adaptLayout=function(b,c,e,f,g,h,i){var j;if(null==f&&(f=null),null==g&&(g=[]),null==h&&(h={}),null==i&&(i=vb.ProjectTypeEnum.PHOTOBOOK_30),null==this.globalContent)throw new Error(a.Messages.globalcontentNotProvided("adaptLayout"));return vb.ArgumentValidation.assertIsArray(b,"images"),vb.ArgumentValidation.assertObjectIsSpecified(c,"layout"),vb.ArgumentValidation.assertObjectIsSpecified(c.content,"layout.content"),vb.ArgumentValidation.assertObjectIsSpecified(c.pageType,"layout.pageType"),vb.ArgumentValidation.assertObjectIsSpecified(e,"productSpec"),f=this._applyDefaultConstraints(f),j=d.create(this.contentClient,this.textHandler,b,c,e,f,g,h,i),j.start()},a.prototype.applyLayout=function(a,b,c,d,e,f){var g;return null==f&&(f=vb.ProjectTypeEnum.PHOTOBOOK_30),g=i.create(a,b,c,d,this.textHandler,e,f),g.start()},a.prototype.getStyle=function(a,b){return null==b&&(b=vb.ProjectTypeEnum.PHOTOBOOK_30),vb.ArgumentValidation.assertObjectIsSpecified(a,"productSpec"),R.create(this.contentClient,a,b).start()},a.prototype.getVerboseStyle=function(a){return vb.ArgumentValidation.assertObjectIsSpecified(a,"styleInfo"),this.contentClient.getStyle(a)},a.prototype.getLayouts=function(b,c,d,e,f){var g;if(null==e&&(e={}),null==this.globalContent)throw new Error(a.Messages.globalcontentNotProvided("getLayouts"));return vb.ArgumentValidation.assertArrayIsNotEmpty(b,"groupSpecs"),vb.ArgumentValidation.assertObjectIsSpecified(c,"productSpec"),vb.ArgumentValidation.assertObjectIsSpecified(d,"constraintSet"),d=this._applyDefaultConstraints(d),g=P.create(this.contentClient,this.textHandler,b,c,d,e,f),g.start()},a.prototype.convertProject=function(b,c,d,e){var f;if(null==this.globalContent)throw new Error(a.Messages.globalcontentNotProvided("convertProject"));return vb.ArgumentValidation.assertObjectIsSpecified(b,"existingProject"),vb.ArgumentValidation.assertObjectIsSpecified(c,"productSpec"),vb.ArgumentValidation.assertObjectIsSpecified(d,"conversionSpec"),vb.ArgumentValidation.assertObjectIsSpecified(e,"groupSpecs"),f=E.create(this.contentClient,this.textHandler,b,c,d,e),f.start()},a.prototype.convertPage=function(b,c,d,e){var f,g=this;if(null==this.globalContent)throw new Error(a.Messages.globalcontentNotProvided("convertPage"));return vb.ArgumentValidation.assertObjectIsSpecified(b,"existingPage"),vb.ArgumentValidation.assertObjectIsSpecified(c,"projectSummary"),vb.ArgumentValidation.assertObjectIsSpecified(d,"productSpec"),vb.ArgumentValidation.assertObjectIsSpecified(e,"groupSpec"),f=new vb.Promise,this.getStyle(d,c.type).then(function(a,h){var i,j;return null!=h?f.setError(h):(i=ta.identifyLayoutTypeFromId(b.layoutName,a),j={style:a,groupSpec:e,conversionSpec:{},projectSummary:c,productSpec:d,textHandler:g.textHandler,layoutRequestPool:Fa.create(g.contentClient),logger:g.logger},D.create(j).convertPage(b,i).then(function(a,b){return f.setResult(a,b)}))}),f},a.prototype.createConstraintSet=function(){return new y},a.prototype._initLogger=function(a){return new vb.Logger("adaptiveLayout",pb.getVersion(),a)},a.prototype._applyDefaultConstraints=function(a){return null==a&&(a=this.createConstraintSet()),null==a.imageCountConstraint&&a.addConstraint(new da(da.EQUAL_OR_GREATER_MATCH,da.FALLBACK_NO_ASSIGNMENT)),null==a.orientationConstraint&&a.addConstraint(new Ma(Ma.PARTIAL)),a},a.prototype.getTextRenderURL=function(b,c,d,e){if(null==c&&(c=1),null==d&&(d=72),null==e&&(e=""),null==this.globalContent)throw new Error(a.Messages.globalcontentNotProvided("getTextRenderURL"));return this.textHandler.applyFontNames(b),this.web2PrintClient.getURLForAsset(b,c,d,e)},a.prototype.createDustJacket=function(a,b){return this.contentFactory.createDustJacket(a,b)},a.prototype.createImageArea=function(a,b,c,d,e){return null==e&&(e={}),vb.ArgumentValidation.assertNumberIsPositive(parseInt(a),"id"),vb.ArgumentValidation.assertNumberIsPositive(parseInt(b),"seqNum"),vb.ArgumentValidation.assertNumberIsPositive(parseFloat(c),"width"),vb.ArgumentValidation.assertNumberIsPositive(parseFloat(d),"height"),aa.create(a.toString(),b.toString(),c.toString(),d.toString(),e)},a.prototype.createTextArea=function(a,b,c,d,e,f){return null==f&&(f={}),vb.ArgumentValidation.assertNumberIsPositive(parseInt(a),"id"),vb.ArgumentValidation.assertNumberIsPositive(parseInt(b),"seqNum"),vb.ArgumentValidation.assertNumberIsPositive(parseFloat(c),"width"),vb.ArgumentValidation.assertNumberIsPositive(parseFloat(d),"height"),vb.ArgumentValidation.assertObjectIsSpecified(e,"styleJson"),jb.create(a.toString(),b.toString(),c.toString(),d.toString(),e,this.textHandler,f)},a.prototype.joinLayouts=function(a,b){return vb.ArgumentValidation.assertObjectIsSpecified(a,"leftLayout"),vb.ArgumentValidation.assertObjectIsSpecified(b,"rightLayout"),ma.create(a,b).start()},a.prototype.splitSpreadWithLayout=function(a,b,c,d,e){return null==d&&(d={}),null==e&&(e=vb.ProjectTypeEnum.PHOTOBOOK_30),this._assertSplitArgs(a,b,c),cb.start({spreadLayout:a,styleJson:b,productSpec:c,contentClient:this.contentClient,textHandler:this.textHandler,options:d,projectTypeEnum:e})},a.prototype._assertSplitArgs=function(a,b,c){return vb.ArgumentValidation.assertObjectIsSpecified(a,"spreadLayout"),vb.ArgumentValidation.assertObjectIsSpecified(b,"styleJson"),
vb.ArgumentValidation.assertObjectIsSpecified(c,"productSpec")},a.prototype.splitSpreadToCustom=function(a){return vb.ArgumentValidation.assertObjectIsSpecified(a,"spreadLayout"),fb.create(a).start()},a.prototype.splitSpreadToLayouts=function(a,b,c){var d;return this._assertSplitArgs(a,b,c),d={spreadLayout:a,styleJson:b,productSpec:c,contentClient:this.contentClient,textHandler:this.textHandler},gb.create(d).start()},a.prototype.flipLayout=function(a){var b;return vb.ArgumentValidation.assertObjectIsSpecified(a,"layout"),b=new vb.Promise,b.setResult(M.create(a).startSync()),b},a.prototype.applyToOtherPages=function(a,b,c,d){return vb.ArgumentValidation.assertObjectIsSpecified(a,"project"),vb.ArgumentValidation.assertObjectIsSpecified(b,"sourcePageNumber"),vb.ArgumentValidation.assertObjectIsSpecified(c,"styleJson"),vb.ArgumentValidation.assertObjectIsSpecified(d,"options"),j.create(a,b,c,d,this.textHandler).start()},a.prototype.shuffleLayoutImages=function(a,b){return $a.create({layout:a,images:b}).startSync()},a.prototype.getGridCellImagePosition=function(a,b,c){return vb.ArgumentValidation.parseAndAssertNumber(a,"gridCellXOffset"),vb.ArgumentValidation.parseAndAssertNumber(b,"gridCellYOffset"),vb.ArgumentValidation.assertObjectIsSpecified(c,"gridCellTemplate"),vb.CalendarGridCellUtil.getGridCellImagePosition(a,b,c)},a.prototype.getSingleGridCellTemplate=function(a){return vb.ArgumentValidation.assertObjectIsSpecified(a,"styleContent"),vb.CalendarGridCellUtil.getSingleGridCellTemplate(a)},a.prototype.getSplitGridCellTemplate=function(a){return vb.ArgumentValidation.assertObjectIsSpecified(a,"styleContent"),vb.CalendarGridCellUtil.getSplitGridCellTemplate(a)},a.prototype.inflateGridCell=function(a,b,c,d,e,f){return vb.ArgumentValidation.assertObjectIsSpecified(a,"gridCellAssets"),vb.ArgumentValidation.assertObjectIsSpecified(b,"gridCellNumber"),vb.ArgumentValidation.assertObjectIsSpecified(c,"gridCellXOffset"),vb.ArgumentValidation.assertObjectIsSpecified(d,"gridCellYOffset"),vb.ArgumentValidation.assertObjectIsSpecified(e,"cellTemplate"),vb.ArgumentValidation.assertObjectIsSpecified(f,"styleJSON"),ha.startSync({gridCellAssets:a,gridCellNumber:b,gridCellXOffset:c,gridCellYOffset:d,cellTemplate:e,textHandler:this.textHandler,styleJSON:f})},a.prototype.deflateGridCell=function(a,b,c){return vb.ArgumentValidation.assertIsArray(a,"gridAssets"),vb.ArgumentValidation.assertNumberIsPositive(b,"gridCellStartIndex"),vb.ArgumentValidation.assertIsFunction(c,"removeAssetAtIndex"),J.startSync({gridAssets:a,gridCellStartIndex:b,removeAssetAtIndex:c})},a.prototype.addGridCellEventBackground=function(a,b,c,d){var e;return vb.ArgumentValidation.assertObjectIsSpecified(b,"gridCellTemplate"),e=this._validateCommonGridCellEventBackgroundOperationParams(a,c,d),e.gridCellTemplate=b,h.create(e).startSync()},a.prototype.removeGridCellEventBackground=function(a,b,c){var d;return d=this._validateCommonGridCellEventBackgroundOperationParams(a,b,c),Ua.create(d).startSync()},a.prototype._validateCommonGridCellEventBackgroundOperationParams=function(a,b,c){return vb.ArgumentValidation.assertIsBoolean(a,"isSplitCell"),vb.ArgumentValidation.assertArrayIsNotEmpty(b,"gridCellAssets"),vb.ArgumentValidation.assertStringIsNotEmpty(c,"eventTextId"),{isSplitCell:a,gridCellAssets:b,eventTextId:c}},a}(),n=function(){function a(a){this.config=null!=a?a:{},this._logger=this._initLogger(this.config.winstonLogger)}return a.Messages={imageHasErrors:function(a,b){return new vb.Message("imageHasErrors","The image at index ("+a+"), with id ("+b.id+") has errors",{causedBy:b.errors})}},a.prototype.groupImages=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;return j=[],b=function(){var c;c=[];for(m in b)i=b[m],i=new $(i),i.errors.length>0&&j.push(a.Messages.imageHasErrors(m,i)),c.push(i);return c}(),this._collectionUnspecified(b)?null:(o=[],null!=c.resolutionConstraint&&(q=this._applyResolutionConstraint(b,c.resolutionConstraint),b=q[0],e=q[1],o=o.concat(e)),vb.SortUtil.sortImagesByDate(b),null!=c.timeDeduplicationConstraint&&(r=c.timeDeduplicationConstraint.apply(b),b=r[0],e=r[1],o=o.concat(e)),d=x.create(b,c),b.length>d.targetImageCount&&(o=o.concat(b.slice(d.targetImageCount)),b=b.slice(0,d.targetImageCount)),h=this._groupImagesUsingBestInterval(b,d),f=new U(d.targetGroupCount),g=new X(d.maxGroupSize),h=g.limitByExpanding(h),h=f.reduceToTarget(h),h=g.limitByDistributing(h),h=f.increaseToTarget(h),k=function(){var a,b,c;for(c=[],a=0,b=h.length;a<b;a++)l=h[a],n=function(){var a,b,c;for(c=[],a=0,b=l.length;a<b;a++)i=l[a],c.push(i.original);return c}(),c.push(new ea(n));return c}(),p=j.concat(d.problems),new fa(k,function(){var a,b,c;for(c=[],a=0,b=o.length;a<b;a++)i=o[a],c.push(i.original);return c}(),p))},a.prototype._applyResolutionConstraint=function(a,b){var c;return c=[],a=a.filter(function(a){var d,e;return e=a.original.width,d=a.original.height,null!=e&&e<b.minWidth?(c.push(a),!1):!(null!=d&&d<b.minHeight)||(c.push(a),!1)}),[a,c]},a.prototype._groupImagesUsingBestInterval=function(a,b){var c,d,e,f,g,h,i;if(0===a.length)return[];h=ja.create(a),i=h.getIntervalToGroupCountMap(),c={interval:null,score:null},e=function(a,d){var e,f;if(e={distance:Math.abs(b.targetGroupCount-d),tooManyGroups:d>b.targetGroupCount},f=null===c.score||!e.tooManyGroups&&c.score.tooManyGroups||e.distance<c.score.distance)return c.interval=a,c.score=e},e($.ALL_SEPARATE_GROUPS,a.length),e($.GROUP_EVERYTHING,1);for(g in i)f=i[g],e(g,f);return d=c.interval,d===$.ALL_SEPARATE_GROUPS?vb.ArrayUtil.formGroups(a,function(){return!1}):d===$.BOTH_UNDATED?vb.ArrayUtil.formGroups(a,function(a,b){return $.bothUndated(a,b)}):d===$.ONE_UNDATED?vb.ArrayUtil.formGroups(a,function(a,b){return $.oneUndated(a,b)}):d===$.GROUP_EVERYTHING?[a]:vb.ArrayUtil.formGroups(a,function(a,b){return!!$.bothUndated(a,b)||!$.eitherUndated(a,b)&&Math.abs(a.captureTimeSeconds-b.captureTimeSeconds)<=d})},a.prototype.findBestCoverImage=function(a,b,c){var d,e,f,g,h,i,j,k,l;null==c&&(c={}),j=null!=b?b.resolutionConstraint:void 0,f=function(a){return null!=a.width&&null!=a.height&&(!(null!=c.filter&&!c.filter(a))&&(null==j||a.width>=j.minWidth&&a.height>=j.minHeight))},i=function(a){return a.width>a.height};for(h in a)if(e=a[h],f(e)&&i(e))return e;for(d={image:null},g=function(a){return a.width*a.height},k=0,l=a.length;k<l;k++)e=a[k],f(e)&&(null===d.image||g(e)>g(d.image))&&(d.image=e);return d.image},a.prototype._collectionUnspecified=function(a){return null===a||0===a.length},a.prototype._initLogger=function(a){return new vb.Logger("autogroup",pb.getVersion(),a)},a}(),y=function(){function a(){this._supportedTypes=[K,V,Y,da,Ka,Ma,Ya,kb,ob,sa,Ga,qa,eb],this.densityRangeConstraint=null,this.groupCountConstraint=null,this.groupSizeConstraint=null,this.imageCountConstraint=null,this.linearDensityConstraint=null,this.orientationConstraint=null,this.resolutionConstraint=null,this.textAreaCountConstraint=null,this.timeDeduplicationConstraint=null,this.layoutCategoryConstraint=null,this.layoutStylingConstraint=null,this.layoutAttributesMatchConstraint=null,this.spreadConstraint=null}return a.Messages={unknownConstraint:function(a){return new vb.Message("unknownConstraint","Unknown constraint type="+a)}},a.prototype.addConstraint=function(b){var c,d;if(vb.ArgumentValidation.assertObjectIsSpecified(b,"constraint"),d=b.constructor,wb.call(this._supportedTypes,d)>=0)return c=vb.StringUtil.toCamelCase(b.identifier),this[c]=b;throw a.Messages.unknownConstraint(b.identifier).toError()},a.prototype.addConstraintsFromJson=function(a){var b,c,d,e,f,g;g=[];for(c in a)f=a[c],e=vb.StringUtil.toPascalCase(c),d=this.findConstraintTypeByName(e),null!=d?(b=vb.StringUtil.toCamelCase(c),g.push(this[b]=d.fromJSONObject(f))):g.push(void 0);return g},a.prototype.getConstraint=function(a){return this[vb.StringUtil.toCamelCase(a)]},a.prototype.findConstraintTypeByName=function(a){var b,c,d,e;for(e=this._supportedTypes,c=0,d=e.length;c<d;c++)if(b=e[c],b.TYPE===a)return b;return null},a.prototype.toJSON=function(){var a,b,c,d,e,f;for(b="",f=this._supportedTypes,d=0,e=f.length;d<e;d++)c=f[d],a=vb.StringUtil.toCamelCase(c.TYPE),null!=this[a]&&(b+=""!==b?",":"{",b+=this._serializeConstraint(this[a]));return""!==b?b+="}":b="{}",b},a.prototype._serializeConstraint=function(a){return'"'+vb.StringUtil.toCamelCase(a.identifier)+'": '+JSON.stringify(a)},a.fromJSON=function(b){return vb.ArgumentValidation.assertStringIsNotEmpty(b,"json"),a.fromJSONObject(JSON.parse(b))},a.fromJSONObject=function(b){var c;return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),c=new a,c.addConstraintsFromJson(b),c},a}(),K=function(){function a(b,c,d){this.target=vb.ArgumentValidation.parseAndAssertNumber(b,"target"),this.lower=vb.ArgumentValidation.parseAndAssertNumber(c,"lower"),this.upper=vb.ArgumentValidation.parseAndAssertNumber(d,"upper"),this._verifyRange(this.lower,this.upper),vb.ArgumentValidation.assertNumberIsPositive(this.target,"target"),vb.ArgumentValidation.assertTargetInRangeInclusive(this.target,this.lower,this.upper),this.identifier=a.TYPE}return a.TYPE="DensityRangeConstraint",a.prototype._verifyRange=function(a,b){return vb.ArgumentValidation.assertNumberIsPositive(a,"lower"),vb.ArgumentValidation.assertNumberIsPositive(b,"upper"),vb.ArgumentValidation.assertRangeInclusive(a,b)},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.target,b.lower,b.upper)},a}(),V=function(){function a(b,c){if(this.min=vb.ArgumentValidation.parseAndAssertNumber(b,"min"),this.max=vb.ArgumentValidation.parseAndAssertNumber(c,"max"),vb.ArgumentValidation.assertNumberIsPositive(this.min,"min"),vb.ArgumentValidation.assertRangeInclusive(this.min,this.max),this.min<1)throw a.Messages.mustBeAtLeastOne("min").toError();this.identifier=a.TYPE}return a.TYPE="GroupCountConstraint",a.Messages={mustBeAtLeastOne:function(a){return new vb.Message("mustBeAtLeastOne",'Expected "'+a+'" to be greater than or equal to 1')}},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.min,b.max)},a}(),Y=function(){function a(b){this.max=b,vb.ArgumentValidation.assertNumberIsPositive(this.max,"max"),this.identifier=a.TYPE}return a.DEFAULT_MAX_SIZE=9,a.TYPE="GroupSizeConstraint",a.fromJSONObject=function(b){return new a(b.max)},a}(),da=function(){function a(b,c){if(this.match=b,this.fallback=c,a._validCounts.indexOf(this.match)===-1)throw a.Messages.unknownEnum("match",this.match).toError();if(a._validFallbacks.indexOf(this.fallback)===-1)throw a.Messages.unknownEnum("fallback",this.fallback).toError()}return a.TYPE="ImageCountConstraint",a.Messages={unknownEnum:function(a,b){return new vb.Message("unknownEnum","Unknown enum value for field '"+a+"': "+b)}},a.EXACT_MATCH="exact_match",a.EQUAL_OR_GREATER_MATCH="equal_or_greater_match",a.FALLBACK_NULL_LAYOUT="fallback_null_layout",a.FALLBACK_NO_ASSIGNMENT="fallback_no_assignment",a.FALLBACK_ANY_LAYOUT="fallback_any_layout",a._validCounts=[a.EXACT_MATCH,a.EQUAL_OR_GREATER_MATCH],a._validFallbacks=[a.FALLBACK_NULL_LAYOUT,a.FALLBACK_NO_ASSIGNMENT,a.FALLBACK_ANY_LAYOUT],a.prototype.getType=function(){return this.identifier},a.prototype.identifier=a.TYPE,a.fromJSONObject=function(b){return new a(b.match,b.fallback)},a}(),qa=function(){function a(b){var c,d;this.identifier=a.TYPE,this.pageSpecific={};for(c in b)d=b[c],this.pageSpecific[c]=this._identifyAttributesMatchRule(d)}return a.TYPE="LayoutAttributesMatchConstraint",a.SupportedKeys={accomsLowResImages:"boolean",isFlippable:"boolean",isFullBleed:"boolean",isSymmetric:"boolean",layoutType:"string",numLPics:"number",numPPics:"number",numPics:"number",numSPics:"number",numTextAreas:"number",previewHeight:"number",previewWidth:"number",state:"string",usedForAutofill:"boolean"},a.Messages={invalidMatchList:function(a,b){return new vb.Message("invalidMatchList","Given "+b+" type for "+a+"'s match list")},unknownAttributeKey:function(a){return new vb.Message("unknownAttributeKey","Can't match unknown key: "+a)}},a.prototype._identifyAttributesMatchRule=function(b){var c,d,e,f;e={},f=a.SupportedKeys;for(c in b){if(d=b[c],null==f[c])throw a.Messages.unknownAttributeKey(c).toError();if(!Array.isArray(d))throw a.Messages.invalidMatchList(c,typeof d).toError();e[c]=d}return e},a.prototype.matchesLayout=function(a){var b,c,d,e,f;if(e=Aa.toPageType(null!=a?a.type:void 0),d=this.pageSpecific[e],null==d)return!0;for(b in d)if(c=d[b],f=a.attributes[b],wb.call(c,f)<0)return!1;return!0},a.prototype.getType=function(){return a.TYPE},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b)},a}(),sa=function(){function a(b){this.category=b.category,vb.ArgumentValidation.assertStringIsNotEmpty(this.category),this.identifier=a.TYPE}return a.TYPE="LayoutCategoryConstraint",a.prototype.matchesLayout=function(a){return a.id.indexOf(this.category)!==-1},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b)},a}(),Ga=function(){function a(b,c){var d,e;this.rule=this._identifyStylingSet(b),this.pageSpecific={};for(d in c)e=c[d],this.pageSpecific[d]=this._identifyStylingSet(e);this.identifier=a.TYPE}return a.TYPE="LayoutStylingConstraint",a.ANY="any",a.Messages={invalidStylingSet:function(a){return new vb.Message("invalidStylingSet",'Need "any" or Array',{stylingSet:a})},unknownLayoutStyling:function(a){return new vb.Message("unknownLayoutStyling","Unknown layout styling",{layoutStyling:a})}},a.prototype.matchesLayout=function(b){var c,d;return d=Aa.toPageType(null!=b?b.type:void 0),(c=function(c){var e;return c===a.ANY||d===vb.PageTypeEnum.SPINEPAGE||(e=b.attributes.layoutType,wb.call(c,e)>=0)})(null!=this.pageSpecific[d]?this.pageSpecific[d]:this.rule)},a.prototype.getType=function(){return a.TYPE},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.rule,b.pageSpecific)},a.prototype._identifyStylingSet=function(b){var c,d,e,f;if(b===a.ANY)return a.ANY;if(!Array.isArray(b))throw a.Messages.invalidStylingSet(b).toError();for(d=[],e=0,f=b.length;e<f;e++)c=b[e],d.push(this._identifyOption(c));return d},a.prototype._identifyOption=function(b){if(!Ha.isValidType(b.toLowerCase()))throw a.Messages.unknownLayoutStyling(b).toError();return b},a}(),Ka=function(){function a(b){var c,d,e,f;for(this.densityPoints=b,vb.ArgumentValidation.assertArrayLengthAtLeast(this.densityPoints,1),f=this.densityPoints,d=0,e=f.length;d<e;d++)c=f[d],c[0]=vb.ArgumentValidation.parseAndAssertNumber(c[0],"imageCount"),c[1]=vb.ArgumentValidation.parseAndAssertNumber(c[1],"targetDensity"),vb.ArgumentValidation.assertNumberIsPositive(c[0],"imageCount"),vb.ArgumentValidation.assertNumberIsPositive(c[1],"targetDensity");this.densityPoints.sort(function(a,b){return vb.SortUtil.compare(a[0],b[0])}),this.identifier=a.TYPE}return a.TYPE="LinearDensityConstraint",a.Messages={unexpectedEnd:new vb.Message("unexpectedEnd","LinearDensityConstraint.getTargetDensity unexpectedly reached end of function")},a.prototype.getTargetDensity=function(b){var c,d,e,f,g,h,i,j;if(b<=this.densityPoints[0][0])return this.densityPoints[0][1];if(b>=vb.ArrayUtil.last(this.densityPoints)[0])return vb.ArrayUtil.last(this.densityPoints)[1];for(c=i=0,j=this.densityPoints.length-2;0<=j?i<=j:i>=j;c=0<=j?++i:--i)if(d=this.densityPoints[c][0],g=this.densityPoints[c+1][0],d<=b&&b<g)return e=this.densityPoints[c][1],h=this.densityPoints[c+1][1],f=(b-d)/(g-d),e+f*(h-e);throw a.Messages.unexpectedEnd.toError()},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.densityPoints)},a}(),Ma=function(){function a(b){this.fidelity=b,a._identifyFidelity(this.fidelity),this.identifier=a.TYPE}return a.STRICT="strict",a.PARTIAL="partial",a.RELAXED="relaxed",a.TYPE="OrientationConstraint",a.Messages={unspecifiedFidelity:new vb.Message("unspecifiedFidelity","Unspecified fidelity"),unknownFidelity:function(a){return new vb.Message("unknownFidelity","Unknown fidelity value="+a)}},a.prototype.getType=function(){return this.identifier},a.fromJSONObject=function(b){var c;return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),c=this._identifyFidelity(b.fidelity),new a(c)},a._identifyFidelity=function(b){if(null==b)throw a.Messages.unspecifiedFidelity.toError();switch(b.toLowerCase()){case a.STRICT:return a.STRICT;case a.PARTIAL:return a.PARTIAL;case a.RELAXED:return a.RELAXED;default:throw a.Messages.unknownFidelity(b).toError()}},a}(),Ya=function(){function a(b,c){this.minWidth=vb.ArgumentValidation.parseAndAssertNumber(b,"minWidth"),this.minHeight=vb.ArgumentValidation.parseAndAssertNumber(c,"minHeight"),this.identifier=a.TYPE}return a.TYPE="ResolutionConstraint",a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.minWidth,b.minHeight)},a}(),eb=function(){function a(b,c){this.min=vb.ArgumentValidation.parseAndAssertNumber(b,"min"),this.max=vb.ArgumentValidation.parseAndAssertNumber(c,"max"),vb.ArgumentValidation.assertNumberIsPositive(this.min,"min"),vb.ArgumentValidation.assertRangeInclusive(this.min,this.max),this.identifier=a.TYPE}return a.TYPE="SpreadConstraint",a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.min,b.max)},a}(),kb=function(){function a(b,c){var d,e;this.rule=this._identifyOption(b),this.pageSpecific={};for(d in c)e=c[d],this.pageSpecific[d]=this._identifyOption(e);this.identifier=a.TYPE}return a.NONE="none",a.MATCH="match",a.VARIABLE="variable",a.TYPE="TextAreaCountConstraint",a.Messages={unspecifiedConstraint:new vb.Message("unspecifiedConstraint","Unspecified constraint value"),unknownConstraint:function(a){return new vb.Message("unknownConstraint","Unknown constraint value",{constraint:a})}},a.prototype.getType=function(){return a.TYPE},a.fromJSONObject=function(b){var c;return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),c=b.rule||b.constraint,new a(c,b.pageSpecific)},a.prototype._identifyOption=function(b){if(null==b)throw a.Messages.unspecifiedConstraint.toError();switch(b.toLowerCase()){case a.NONE:case a.MATCH:case a.VARIABLE:return b;default:throw a.Messages.unknownConstraint(b).toError()}},a}(),ob=function(){function a(b,c){null==c&&(c=1),this.durationSeconds=vb.ArgumentValidation.parseAndAssertNumber(b,"durationSeconds"),this.maxCount=vb.ArgumentValidation.parseAndAssertNumber(c,"maxCount"),this.identifier=a.TYPE}return a.TYPE="TimeDeduplicationConstraint",a.prototype._getImageRuns=function(a){var b,c,d,e,f,g,h,i;for(f=[],g=null,h=0,i=a.length;h<i;h++)e=a[h],b=function(a){return f.push([a]),g=a.captureTimeSeconds},c=function(){return 0===f.length?f.push([e]):f[f.length-1].push(e)},e.hasDate()&&null!=g?(d=Math.abs(e.captureTimeSeconds-g),d<this.durationSeconds?c(e):b(e)):b(e);return f},a.prototype.apply=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;for(i=this._getImageRuns(a),f=[],b=[],k=0,m=i.length;k<m;k++){for(g=i[k],j=new Array(g.length),e=l=0,n=this.maxCount;0<=n?l<n:l>n;e=0<=n?++l:--l)h=Math.floor(g.length*e/this.maxCount),j[h]=!0;for(d in g)c=g[d],j[d]?f.push(c):b.push(c)}return[f,b]},a.fromJSONObject=function(b){return vb.ArgumentValidation.assertObjectIsSpecified(b,"jsonObject"),new a(b.durationSeconds,b.maxCount)},a}(),t=function(){function a(a,b){this.url=a,this.logger=null!=b?b:null,this.handleResponse=xb(this.handleResponse,this),this.promise=null}return a.REQUEST_TIMEOUT_MS=2e4,a.Messages={browserContentLatencyMetric:function(a,b,c){return new vb.Message("browserContentLatencyMetric","",vb.LogLevel.DEBUG,{url:a,duration:b,attempts:c})}},a.prototype.get=function(){var b,c;return this.promise=new vb.Promise,b=this._createRequest(),c={url:this.url,msRequestTimeout:a.REQUEST_TIMEOUT_MS,headers:{Accept:"application/json"}},this._startTime=Date.now(),b.get(c,this.handleResponse),this.promise},a.prototype._createRequest=function(){return new vb.RetriableHttpGetRequest},a.prototype.handleResponse=function(a,b,c){var d,e;return null!=a?(d=C.Messages.contentRetrievalError(this.url,a),null!=(e=this.logger)&&e.log(d),this.promise.setError(d)):(this.logContentLatency(c),this.parseResponse(b))},a.prototype.logContentLatency=function(b){var c,d,e;return c=Date.now()-this._startTime,d=a.Messages.browserContentLatencyMetric(this.url,c,b),null!=(e=this.logger)?e.log(d):void 0},a.prototype.parseResponse=function(a){var b,c;try{c=JSON.parse(a.responseText)}catch(a){return b=a,void this.promise.setError(C.Messages.contentParseError(this.url,b))}return this.promise.setResult(c)},a}(),w={guidanceTextConstants:["day-Sunday","day-Monday","day-Tuesday","day-Wednesday","day-Thursday","day-Friday","day-Saturday","month","year"],recalculateTextWrap:function(a,b){var c;return null==a.text?vb.Promise.createFinishedPromise(a):(c=a.guidanceText,wb.call(this.guidanceTextConstants,c)>=0?(null==a.text.textWraps&&(a.text.textWraps=nb.generateDefaultWraps()),vb.Promise.createFinishedPromise(a)):b(a))}},A=function(){function a(a,b,c,d,e){this.serviceURI=a,this.logger=c,this.contentCache=null!=d?d:void 0,this.protocol=null!=e?e:"http",this._requestStyle=xb(this._requestStyle,this),this._getCachedStyle=xb(this._getCachedStyle,this),this._getCachedStyleList=xb(this._getCachedStyleList,this),vb.ArgumentValidation.assertStringIsNotEmpty(this.serviceURI),this.requestOptions={maxAttempts:3,msRequestTimeout:1e4},this.requestScheduler=new vb.RequestScheduler(this._parseConcurrentRequests(b))}return a.BROWSER_DEFAULT_CONCURRENT_REQUESTS=2,a.NODE_DEFAULT_CONCURRENT_REQUESTS=1e4,a.Messages={defaultedConcurrentRequests:function(a,b){return new vb.Message("defaultedConcurrentRequests",'Unknown or invalid contentRequests value in config, defaulting to "'+a+'"',vb.LogLevel.INFO,{contentRequests:b})},unspecifiedComponentOnStyleRequest:function(a){return new vb.Message("unspecifiedComponentOnStyleRequest","Unspecified component on style request",vb.LogLevel.ERROR,{styleInfo:a})},styleMissingRequiredField:function(a,b){return new vb.Message("styleMissingRequiredField","Style missing required field: '"+b+"'",null,{url:a})},layoutMissingRequiredField:function(a,b){return new vb.Message("layoutMissingRequiredField","Layout missing required field: '"+b+"'",null,{url:a})}},a.StyleRequiredFields=["styleId","version","sizeId","assetLists"],a.LayoutRequiredFields=["type","width","height","assets"],a.prototype.getGlobalContent=function(){var a,b;return b=""+this.protocol+"://"+this.serviceURI+"/content/photobook/globalcontent/s2",a=this._createRequest(b),this._requestContent(a)},a.prototype.getStyleList=function(a){var b;return b=new vb.Promise,null!=this.contentCache?this._getCachedStyleList(a,b):this._requestStyleList(a,b),b},a.prototype._requestStyleList=function(a,b){var c,d,e=this;return d=""+this.protocol+"://"+this.serviceURI+"/content/"+a+"/stylelist",c=this._createRequest(d),this._requestContent(c).then(function(d,f){var g;return null!=f?void b.setError(f):(null!=e.contentCache&&(g=e._calculateHttpCacheExpiration(c.responseHeaders),e.contentCache.setStyleList(a,d,g)),b.setResult(d))})},a.prototype._getCachedStyleList=function(a,b){var c=this;return this.contentCache.getStyleList(a).then(function(d,e){return null!==d?void b.setResult(d):c._requestStyleList(a,b)})},a.prototype.getStyle=function(b){var c;return c=new vb.Promise,null==b.component?c.setError(a.Messages.unspecifiedComponentOnStyleRequest(b)):(null!=this.contentCache?this._getCachedStyle(c,b):this._requestStyle(c,b),c)},a.prototype._getCachedStyle=function(a,b){var c,d=this;return c=this._abbreviateComponent(b.component),this.contentCache.getStyle(b.id,b.version,b.size,c).then(function(c){return null!==c?void a.setResult(c):d._requestStyle(a,b)})},a.prototype._abbreviateComponent=function(a){if(null==a)return null;switch(a.toLowerCase()){case"gphotobook":return"pb";case"calendar":return"gc";default:return null}},a.prototype._constructStyleUrl=function(a){return""+this.protocol+"://"+this.serviceURI+"/content/"+a.component+"/style/"+a.id+"/"+a.size+"/v"+a.version},a.prototype._requestStyle=function(a,b){var c,d,e=this;return d=this._constructStyleUrl(b),c=this._createRequest(d),this._requestContent(c).then(function(d,f){var g,h;return null!=f?void a.setError(f):(null!=e.contentCache&&(h=e._calculateHttpCacheExpiration(c.responseHeaders),g=null!=h?h+3600:null,e._cacheLayouts(d,g),e._cacheStyle(b,d,h)),a.setResult(d))})},a.prototype._cacheLayouts=function(a,b){var c,d,e,f,g,h,i,j;for(i=a.assetLists.assetList,e=0,g=i.length;e<g;e++)if(c=i[e],"layout"===c.assetType&&null!=c.assetRef)for(j=c.assetRef,f=0,h=j.length;f<h;f++)d=j[f],null!=d.layout_JSON&&this.contentCache.setLayout(d.layout_JSON,d.assetId,d.version,b)},a.prototype._cacheStyle=function(a,b,c){var d;return d=this._abbreviateComponent(a.component),this.contentCache.setStyle(b,a.id,a.version,a.size,d,c)},a.prototype.getStyleForProductSpec=function(a,b){var c;return c={id:a.styleId,version:a.styleVersion,size:a.productSize,component:this._componentForProjectType(b)},this.getStyle(c)},a.prototype._componentForProjectType=function(a){return a===vb.ProjectTypeEnum.MATISSE_CALENDAR?"calendar":"gphotobook"},a.prototype.getLayout=function(a){var b;return b=new vb.Promise,null!=this.contentCache?this._getCachedLayout(b,a):this._requestLayout(b,a),b},a.prototype._getCachedLayout=function(a,b){var c=this;return this.contentCache.getLayout(b.id,b.version).then(function(d,e){return null!==d?void a.setResult(d):c._requestLayout(a,b)})},a.prototype._requestLayout=function(a,b){var c,d,e=this;return d=""+this.protocol+"://"+this.serviceURI+"/asset/fetch/"+b.id+"/layout.json/v"+b.version,c=this._createRequest(d),this._requestContent(c).then(function(d,f){var g;return null!=f?void a.setError(f):(null!=e.contentCache&&(g=e._calculateHttpCacheExpiration(c.responseHeaders),e.contentCache.setLayout(d,b.id,b.version,g)),a.setResult(d))})},a.prototype._requestContent=function(a){var b,c,d,e=this;return b=new vb.Promise,c=function(){return a.get(e.requestOptions)},d=function(a,c){var d;return null!=a&&null!=(d=e.logger)&&d.log(a),b.setResult(c,a)},this.requestScheduler.submitRequest(c,d),b},a.prototype._parseConcurrentRequests=function(b){var c,d;return null!=(null!=b?b.contentRequests:void 0)&&(c=parseInt(b.contentRequests)),isNaN(c)&&(c=this._isInBrowser()?a.BROWSER_DEFAULT_CONCURRENT_REQUESTS:a.NODE_DEFAULT_CONCURRENT_REQUESTS,null!=(d=this.logger)&&d.log(a.Messages.defaultedConcurrentRequests(c,null!=b?b.contentRequests:void 0))),c},a.prototype._createRequest=function(a){return this._isInBrowser()?new t(a,this.logger):new C(a,this.logger)},a.prototype._isInBrowser=function(){return"undefined"!=typeof window&&null!==window},a.prototype._parseMaxAgeHeader=function(a){var b,c;return null==a["cache-control"]?null:(b=/max-age[\D]+([\d]+)/i.exec(a["cache-control"]),null==b||2!==b.length?null:(c=parseInt(b[1]),isNaN(c)?void 0:c))},a.prototype._parseAgeHeader=function(a){var b;return null==a.age?null:(b=parseInt(a.age),isNaN(b)?void 0:b)},a.prototype._calculateHttpCacheExpiration=function(a){var b,c,d,e;return null==a?null:(e=this._parseMaxAgeHeader(a),b=this._parseAgeHeader(a),d=null,null!=e&&null!=b?(c=e-b,d=c<=0?e:c):null!=e&&(d=e),d)},a}(),B=function(){function a(){}return a.prototype.setGlobalContent=function(a){this.globalContent=a},a.prototype.createDustJacket=function(a,b){var c,d,e,g;if(null==this.globalContent)throw f.Messages.globalcontentNotProvided("createDustJacket").toError();return vb.ArgumentValidation.assertStringIsNotEmpty(a,"coverSpecId"),vb.ArgumentValidation.assertStringIsNotEmpty(b,"bindingType"),c=this.globalContent.getCoverBinding(a,b),null==c||null==c.dustJacketCompositeId?null:(e=c.dustJacketCompositeId,g=""+c.dustJacketCompositeVersion,d={id:e,compositionTemplateLayoutName:e,version:g,compositionTemplateLayoutVersion:g,coverSpecID:a,binding:b,thumbnailCompositionTemplateLayoutName:c.thumbnailCompositeId,thumbnailCompositionTemplateLayoutVersion:""+c.thumbnailCompositeVersion})},a}(),C=function(b){function d(a,b){this.url=a,this.logger=null!=b?b:null,this.handleConnectionSuccess=xb(this.handleConnectionSuccess,this),this.handleConnectionError=xb(this.handleConnectionError,this),this.attemptRequest=xb(this.attemptRequest,this),this._responseHandler=xb(this._responseHandler,this),this.promise=null,this.clientRequest=null,this._requestMethod=this.attemptRequest}return zb(d,b),d.prototype.HIGH_CONTENT_LATENCY_MS=2e3,d.Messages={invalidContentURL:function(a,b){return new vb.Message("invalidContentURL","Could not issue content request for url: "+a+"; encountered error: "+b.message)},contentConnectionError:function(a,b){return new vb.Message("contentConnectionError","Could not connect to content url "+a+"; encountered error: "+b.message)},contentRetrievalError:function(a,b){return new vb.Message("contentRetrievalError",""+b+" error retrieving content from url "+a)},contentStreamError:function(a,b){return new vb.Message("contentStreamError","Error streaming content from url "+a+"; encountered error: "+b.message)},contentParseError:function(a,b){return new vb.Message("contentParseError","Could not parse content retrieved from url "+a+"; encountered error: "+b.message)},contentUnzipError:function(a,b){return new vb.Message("contentParseError","Error attempting to unzip content retrieved from url "+a+"; encountered error: "+b.message)},contentLatencyMetric:function(a,b,c){return new vb.Message("contentLatencyMetric","",vb.LogLevel.DEBUG,{url:a,duration:b,status:c})}},d.prototype.get=function(a){return null==a&&(a={}),a.url=this.url,a.headers={Accept:"application/json","Accept-encoding":"gzip"},this.requestContext=this._parseOptions(a,this._responseHandler),this.promise=new vb.Promise,this.attemptRequest(this.requestContext),this.promise},d.prototype._responseHandler=function(a,b,c){null==a||this.promise.done||this.promise.setError(a)},d.prototype.attemptRequest=function(b){var c,e;e=a("url").parse(b.options.url),e.headers=b.options.headers,this._startTime=Date.now();try{this.clientRequest=a("http").request(e,this.handleConnectionSuccess)}catch(a){return c=a,void this.promise.setError(d.Messages.invalidContentURL(this.url,c))}return this.clientRequest.on("error",this.handleConnectionError),this.clientRequest.end()},d.prototype.handleConnectionError=function(a){if(!this.promise.done)return this.promise.setError(d.Messages.contentConnectionError(this.url,a))},d.prototype.handleConnectionSuccess=function(a){var b;return this.logContentLatency(a.statusCode),null!=a&&200===a.statusCode?this.parseResponse(a):(b=d.Messages.contentRetrievalError(this.url,null!=a?a.statusCode:void 0),this._onError(b,this.requestContext,a))},d.prototype.logContentLatency=function(a){var b,c,e,f;if(c=Date.now(),b=c-this._startTime,null!=(e=this.logger)&&e.log(d.Messages.contentLatencyMetric(this.url,b,a)),b>this.HIGH_CONTENT_LATENCY_MS)return null!=(f=this.logger)?f.warn("highContentLatency","",{url:this.url,duration:b,status:a}):void 0},d.prototype.parseResponse=function(a){var b;return this.responseHeaders=a.headers,b=a.headers["content-encoding"],"gzip"===b?this.parseGzip(a):this.parseJson(a)},d.prototype.parseGzip=function(b){var e,f=this;return e=[],b.on("data",function(a){return e.push(a)}),b.on("end",function(){var b,g;return b=c.concat(e),g=b.slice(0),a("zlib").unzip(g,function(a,b){return null!=a?f.promise.setError(d.Messages.contentUnzipError(f.url,a)):f._parseStringResponse(b.toString())})}),b.on("error",function(a){return f._handleRequestError(a)})},d.prototype.parseJson=function(a){var b,c=this;return b="",a.on("data",function(a){return b+=a.toString()}),a.on("end",function(){return c._parseStringResponse(b)}),a.on("error",function(a){return c._handleRequestError(a)})},d.prototype._parseStringResponse=function(a){var b,c;if(!this.promise.done){try{c=JSON.parse(a)}catch(a){return b=a,void this.promise.setError(d.Messages.contentParseError(this.url,b))}return this.promise.setResult(c);
}},d.prototype._handleRequestError=function(a){if(!this.promise.done)return this.promise.setError(d.Messages.contentStreamError(this.url,a))},d}(vb.private.RetriableHttpRequest),L={X_OFFSET_DEFAULT:0,Y_OFFSET_DEFAULT:0,VERSION_DEFAULT:"1",SOURCE_URL_DEFAULT:"",IS_FLIPPABLE_DEFAULT:"false",ROTATION_DEFAULT:0,create:function(a,b,c,d){var e,f,g,h,i,j,k;return null==d&&(d={}),j=(null!=d?d.xOffset:void 0)||this.X_OFFSET_DEFAULT,k=(null!=d?d.yOffset:void 0)||this.Y_OFFSET_DEFAULT,i=(null!=d?d.version:void 0)||this.VERSION_DEFAULT,h=(null!=d?d.sourceUrl:void 0)||this.SOURCE_URL_DEFAULT,f=null!=(null!=d?d.isFlippable:void 0)?"true"===d.isFlippable||d.isFlippable===!0:this.IS_FLIPPABLE_DEFAULT,g=d.rotation||this.ROTATION_DEFAULT,e={assetType:"graphic",container:L._createContainer(a,b,c,j,k,g),layer:"Layer 1",ownedByUser:"false",userAdded:null,scriptLabel:L._createScriptLabel(a,i),type:"Embellishment",imageRectangle:L._createImageRectangle(b,c,j,k,g),assetReference:L._createAssetReference(a,i,h,f),assetSource:null,imageAssignment:null}},_createContainer:function(a,b,c,d,e,f){var g;return g={xOffset:d,yOffset:e,width:b,height:c,rotation:f,verticalScale:"100",rotationLimit:"",type:"rectangle",id:a,nextId:null,borderStroke:"0",borderColor:"",borderColorRGB:null,objectStyle:"frame_none",frameOwnedByUser:null,displayAsObject:null,visible:"true",locked:"false",previousId:null,overflow:null,paraStyle:null}},_createScriptLabel:function(a,b){return"version="+a+"|contentType=Embellishment|id="+a},_createImageRectangle:function(a,b,c,d,e){var f;return f={xOffset:c,yOffset:d,width:a,height:b,rotation:e,verticalScale:"100",rotationLimit:""}},_createAssetReference:function(a,b,c,d){var e;return e={assetId:a,version:b.toString(),sourceUrl:c,assetType:"Embellishment",isFlippable:d.toString(),selectionType:null}}},S=function(){function a(a){this.content=a,vb.ArgumentValidation.assertObjectIsSpecified(this.content,"content"),this.fontByFontId=this._mapFonts(),this.colorByColorId=this._mapColors()}return a.prototype._mapFonts=function(){var a,b,c,d,e,f,g,h,i;for(c={},h=this.content.fontFamilies.fontFamily,d=0,f=h.length;d<f;d++)if(a=h[d],null!=a.font)for(i=a.font,e=0,g=i.length;e<g;e++)b=i[e],c[b.fontId]=b;return c},a.prototype._mapColors=function(){var a,b,c,d,e;for(b={},e=this.content.colors.color,c=0,d=e.length;c<d;c++)a=e[c],b[a.colorId]=a;return b},a.prototype.getFontDefinition=function(a){return this.fontByFontId[a]},a.prototype.getRGBColor=function(a){var b;return(null!=(b=this.colorByColorId[a])?b.rgb:void 0)||null},a.prototype.getLogoPage=function(a){var b,c,d,e,f,g,h;if((null!=(e=this.content)&&null!=(f=e.logoPages)&&null!=(g=f.logoPage)?g.length:void 0)>0)for(h=this.content.logoPages.logoPage,c=0,d=h.length;c<d;c++)if(b=h[c],b.sizeId===a)return b},a.prototype.getCoverBinding=function(a,b){var c,d,e,f,g;if(!this._isBookContent(this.content))return null;if(d=this.getCover(a),null==d)return null;for(g=d.bindings[0].binding,e=0,f=g.length;e<f;e++)if(c=g[e],c.id===b)return c;return null},a.prototype.getCover=function(a){var b,c,d,e,f,g,h,i,j;if(!this._isBookContent(this.content))return null;for(d=a.substring(0,a.indexOf("_")),i=this.content.baseBooks.baseBook,e=0,g=i.length;e<g;e++)if(b=i[e],b.sizeId===d)for(j=b.bookCovers[0].bookCover,f=0,h=j.length;f<h;f++)if(c=j[f],c.coverId===a)return c;return null},a.prototype.getCoverBySizeAndType=function(a,b){var c,d,e,f,g,h,i,j;if(!this._isBookContent(this.content))return null;for(i=this.content.baseBooks.baseBook,e=0,g=i.length;e<g;e++)if(c=i[e],c.sizeId===a)for(j=c.bookCovers[0].bookCover,f=0,h=j.length;f<h;f++)if(d=j[f],d.coverType===b)return d;return null},a.prototype.getStockCover=function(a){var b,c,d,e;if(!this._isBookContent(this.content))return null;for(e=this.content.stockCovers.stockCover,c=0,d=e.length;c<d;c++)if(b=e[c],b.stockCoverId===a)return b;return null},a.prototype._isBookContent=function(a){var b;return null!=(null!=(b=a.baseBooks)?b.baseBook:void 0)},a}(),aa={create:function(a,b,c,d,e){var f,g,h,i;return null==e&&(e={}),h=e.xOffset||0,i=e.yOffset||0,g=e.rotation||0,f={assetType:"image",container:aa._createContainer(a,b,c,d,h,i,g),seqNum:b,layer:"live",userAdded:"true",scriptLabel:aa._createScriptLabel(a,b),associatedText:null,imageRectangle:aa._createImageRectangle(c,d,h,i,g),imageAssignment:aa._createImageAssignment(e.image)}},_createContainer:function(a,b,c,d,e,f,g){var h;return h={xOffset:e,yOffset:f,width:c,height:d,id:a,rotation:g,verticalScale:"100",rotationLimit:"",type:"rectangle",nextId:null,borderStroke:"0",borderColor:"",borderColorRGB:null,objectStyle:"frame_none",frameOwnedByUser:null,displayAsObject:null,visible:"true",locked:"false",previousId:null,overflow:null,paraStyle:null}},_createScriptLabel:function(a,b){return"contentType=Image|id="+a+"|sequence="+b},_createImageRectangle:function(a,b,c,d,e){var f;return f={xOffset:c,yOffset:d,width:a,height:b,rotation:e,verticalScale:"100",rotationLimit:""}},_createImageAssignment:function(a){var b;return null==a?null:b={imageReference:a}}},Fa=function(){function a(a){this.contentClient=a,this._pendingGets={}}return a.create=function(b){return new a(b)},a.prototype.getLayout=function(a){var b,c;return b=""+a.id+" v"+a.version,null!=this._pendingGets[b]?this._pendingGets[b]:null!=a.content?vb.Promise.createFinishedPromise(a.content):(c={id:a.id,version:a.version},this._pendingGets[b]=this.contentClient.getLayout(c))},a.prototype.getPendingRequests=function(){var a,b;return function(){var c,d;c=this._pendingGets,d=[];for(a in c)b=c[a],d.push(b);return d}.call(this)},a}(),Za=function(){function a(){this.image=1,this.text=1}return a.SEQUENCE_EXP=/sequence=\d+/gi,a.prototype.nextImageNum=function(){return this.image++},a.prototype.nextTextNum=function(){return this.text++},a.prototype.applyNextNumToAsset=function(a){switch(a.assetType){case vb.LayoutAssetTypeEnum.TEXT:if(!mb.isPageNumber(a))return this._applySeqNum(a,this.nextTextNum());break;case vb.LayoutAssetTypeEnum.IMAGE:return this._applySeqNum(a,this.nextImageNum())}},a.prototype._applySeqNum=function(b,c){return b.seqNum=""+c,b.scriptLabel=b.scriptLabel.replace(a.SEQUENCE_EXP,"sequence="+c)},a}(),jb={X_OFFSET_DEFAULT:0,Y_OFFSET_DEFAULT:0,USER_ADDED_DEFAULT:"true",PARA_STYLE_DEFAULT:"small",ROTATION_DEFAULT:0,create:function(a,b,c,d,e,f,g){var h,i,j,k,l,m,n;return null==g&&(g={}),(j=g.style)||(j=jb._parseStyle(e)),l=jb.USER_ADDED_DEFAULT,g.userAdded!==!1&&"false"!==g.userAdded||(l="false"),m=(null!=g?g.xOffset:void 0)||jb.X_OFFSET_DEFAULT,n=(null!=g?g.yOffset:void 0)||jb.Y_OFFSET_DEFAULT,h=jb._identifyParaStyle(g.paraStyle,j),i=(null!=g?g.rotation:void 0)||jb.ROTATION_DEFAULT,k={assetType:"text",container:jb._createContainer(a,b,c,d,m,n,h,i),layer:"live",useWeb2Print:"true",userAdded:l,scriptLabel:jb._createScriptLabel(a,b),seqNum:b,hasTextOverflow:"false",paraStyle:h,horizJustification:jb._getFontDescriptorProperty("horizJustification",h,j),vertJustification:jb._getFontDescriptorProperty("vertJustification",h,j),associatedImage:null,guidanceText:"Enter text here",text:null},jb._applyText(f,k,j),k},_parseStyle:function(a){var b;return b=ib.parseStyleInfo(a),b.parseFontAssignments(a),b},_identifyParaStyle:function(a,b){return null!=a&&b.fontAssignments[a]?a:jb.PARA_STYLE_DEFAULT},_createContainer:function(a,b,c,d,e,f,g,h){var i;return i={xOffset:e,yOffset:f,width:c,height:d,rotation:h,verticalScale:null,rotationLimit:"",type:"rectangle",id:a,nextId:"",borderStroke:"0",borderColor:"",borderColorRGB:null,objectStyle:"frame_none",frameOwnedByUser:null,displayAsObject:null,visible:"true",locked:"false",previousId:"",overflow:"false",paraStyle:g}},_createScriptLabel:function(a,b){return"contentType=Text|id="+a+"|sequence="+b},_getFontDescriptorProperty:function(a,b,c){return c.fontAssignments[b][a]},_applyText:function(a,b,c){return a.applyDefaultText(b,c)}},mb=function(){function a(a,b){this.web2Print=a,this.logger=null!=b?b:null,vb.ArgumentValidation.assertObjectIsSpecified(this.web2Print,"web2Print")}return a.prototype.setGlobalContent=function(a){this.globalContent=a},a.prototype.applyDefaultText=function(b,c){if(null==this.globalContent)throw new Error(f.Messages.globalcontentNotProvided("applyDefaultText"));return vb.ArgumentValidation.assertObjectIsSpecified(b,"textAsset"),vb.ArgumentValidation.assertObjectIsSpecified(c,"style"),a.hasDefaultTextDefinition(b)?this.applyTextContent(b,b):this.applyEmptyContent(b,c)},a.prototype.applyEmptyContent=function(a,b){return this._applyUseWeb2Print(a),a.text={textWraps:nb.generateDefaultWraps(),TextFlow:lb.generateTextFlowForAsset(a,b,this.globalContent,"",this.logger)}},a.prototype.applyTextStyle=function(b,c){var d,e,f,g,h,i,j;for(i=a.getParagraphs(b),j=[],g=0,h=i.length;g<h;g++)e=i[g],null!=(null!=e?e.spans:void 0)?j.push(function(){var a,g;a=e.spans,g=[];for(d in a)f=a[d],g.push(e.spans[d]=lb.generateSpanForAsset(b,c,this.globalContent,f.text,this.logger));return g}.call(this)):j.push(void 0);return j},a.prototype._applyUseWeb2Print=function(b){return a.isPageNumber(b)?b.useWeb2Print=void 0:b.useWeb2Print="true"},a.prototype.replaceTextContent=function(a,b,c){var d;return d=JSON.parse(JSON.stringify(b)),this.applyDefaultText(a,c),this._copySourceTextStyleToContent(a,d),a.text=d.text,this._applyUseWeb2Print(a),this.applyTextWraps(a)},a.prototype._copySourceTextStyleToContent=function(b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w;if(null!=(k=null!=b&&null!=(r=b.text)?r.TextFlow:void 0)&&null!=(o=null!=c&&null!=(s=c.text)?s.TextFlow:void 0))for(f in k)g=k[f],"p"!==f&&"div"!==f&&(o[f]=g);if(d=null!=(t=a.getParagraphs(b))?t[0]:void 0,e=null!=d&&null!=(u=d.spans)?u[0]:void 0,null!=d&&null!=e){for(v=a.getParagraphs(c),w=[],p=0,q=v.length;p<q;p++){h=v[p];for(i in d)j=d[i],"spans"!==i&&(h[i]=j);w.push(function(){var a,b,c,d;for(c=h.spans,d=[],a=0,b=c.length;a<b;a++)l=c[a],d.push(function(){var a;a=[];for(m in e)n=e[m],"text"!==m&&a.push(l[m]=n);return a}());return d}())}return w}},a.prototype.applyTextContent=function(a,b){return a.paraStyle=b.paraStyle,a.horizJustification=b.horizJustification,a.vertJustification=b.vertJustification,a.text=b.text,this._applyUseWeb2Print(a),this.applyFontNames(a),this.applyTextWraps(a)},a.prototype.applyTextString=function(a,b,c){return a.text={textWraps:nb.generateDefaultWraps(),TextFlow:lb.generateTextFlowForAsset(a,c,this.globalContent,b,this.logger)},this._applyUseWeb2Print(a),this.applyFontNames(a),this.applyTextWraps(a)},a.prototype.applyFontNames=function(b){var c,d,e,f,g,h,i,j,k;for(i=a.getParagraphs(b),e=0,g=i.length;e<g;e++)for(c=i[e],j=c.spans,f=0,h=j.length;f<h;f++)d=j[f],null==d.fontName&&(d.fontName=null!=(k=this.globalContent.getFontDefinition(d.fontId))?k.fontName:void 0)},a.prototype.applyTextWraps=function(b){var c;return c=new vb.Promise,a.hasText(b)?this.web2Print.getTextWraps(b).then(function(a,d){var e,f,g;return null!=d?(b.text.textWraps=nb.generateDefaultWraps(),c.setError(d)):(e=nb.generateWrapsFromWeb2Print(null!=(f=a.wordWrap)?f:[],a.text),b.text.textWraps=e,b.hasTextOverflow=null!=(g=a.overflow)&&g,c.setResult(b))}):(null!=b.text&&(b.text.textWraps=nb.generateDefaultWraps()),c.setResult(b)),c},a.copyTextAreaContentToContentMap=function(b,c){var d;if(!a.isPageNumber(b)&&!this.isDateCellText(b))return d={seqNum:b.seqNum,paraStyle:b.paraStyle,horizJustification:b.horizJustification,vertJustification:b.vertJustification,text:b.text},null!=b.hasTextOverflow&&(d.hasTextOverflow=b.hasTextOverflow),null==c.textAreaContentMap&&(c.textAreaContentMap={}),c.textAreaContentMap[b.seqNum]=d},a.isPageNumber=function(a){return/page_num/i.test(a.paraStyle)},a.isDateCellText=function(a){return/date-/i.test(a.guidanceText)},a.findTextForAsset=function(b,c,d){var e,f,g;if(null==d&&(d=!1),a.isMatchWorthy(b,c))return f=b.seqNum,g=c[f],e=function(){return delete c[f],g},a.hasDefaultTextDefinition(b)&&a.hasUserTextDefinition(g)?d?e():b:a.hasTextDefinition(b)?b:a.hasUserText(g)?e():void 0},a.findAnyTextForAsset=function(b,c){var d,e,f;if(a.isMatchWorthy(b,c)){d=[];for(e in c)if(f=c[e],a.hasText(f)){if(f.paraStyle===b.paraStyle)return delete c[e],f;d.push({seqNum:e,textAreaContent:f})}return d.length>0?(delete c[d[0].seqNum],d[0].textAreaContent):void 0}},a.isMatchWorthy=function(b,c){return null!=b&&null!=c&&!a.isPageNumber(b)},a.getParagraphs=function(a){var b,c,d,e;return null==(null!=a&&null!=(c=a.text)?c.TextFlow:void 0)?[]:(b=null!=(d=a.text.TextFlow.p)?d:null!=(e=a.text.TextFlow.div)?e.p:void 0,b||[])},a.hasText=function(b){return a.hasNonEmptySpan(a.getParagraphs(b))},a.hasNonEmptySpan=function(a){var b,c,d,e,f,g,h,i;for(d=0,f=a.length;d<f;d++)for(b=a[d],h=b.spans,e=0,g=h.length;e<g;e++)if(c=h[e],(null!=(i=c.text)?i.length:void 0)>0)return!0;return!1},a.hasTextDefinition=function(b){return a.hasUserTextDefinition(b)||a.hasDefaultTextDefinition(b)},a.hasUserTextDefinition=function(a){var b,c;return null!=(null!=a&&null!=(b=a.text)&&null!=(c=b.TextFlow)?c.p:void 0)},a.hasDefaultTextDefinition=function(a){var b,c,d;return null!=(null!=a&&null!=(b=a.text)&&null!=(c=b.TextFlow)&&null!=(d=c.div)?d.p:void 0)},a.hasUserText=function(b){return a.hasUserTextDefinition(b)&&a.hasNonEmptySpan(b.text.TextFlow.p)},a.hasDefaultText=function(b){return a.hasDefaultTextDefinition(b)&&a.hasNonEmptySpan(b.text.TextFlow.div.p)},a.ensureEmptyContent=function(b){var c,d,e,f;if(a.hasTextDefinition(b)&&(e=void 0,a.hasUserTextDefinition(b)?e=b.text.TextFlow:a.hasDefaultTextDefinition(b)&&(e=b.text.TextFlow.div),Array.isArray(null!=e&&null!=(f=e.p[0])?f.spans:void 0)&&e.p[0].spans.length>0))return c=e.p[0],d=c.spans[0],d.text="",c.spans=[d],e.p=[c],b.text.textWraps=nb.generateDefaultWraps()},a}(),qb=function(){function a(a){this.hostname=a.hostname,this.logger=a.logger,this.requestPool={maxSockets:this.MAX_SOCKETS}}return a.prototype.MAX_SOCKETS=50,a.prototype.SLOW_REQUEST_MS=2e3,a.VALIGN={MIDDLE:"middle",CENTER:"center"},a.Messages={connectionError:function(a,b){return new vb.Message("web2PrintConnectionError","error connecting to Web2Print service",vb.LogLevel.WARN,{url:a,causedBy:b})},serviceError:function(a,b){return new vb.Message("web2PrintServiceError","Web2Print returned service error",vb.LogLevel.WARN,{url:a,causedBy:b})}},a.create=function(b){return new a(b)},a.prototype.getTextWraps=function(b){var c,d,e,f,g,h=this;return g=new vb.Promise,f=new rb(b),d={method:"HEAD",url:this._getURLForW2PAsset(f,"pdf"),pool:this.requestPool},e=Date.now(),c=function(b,c,i){var j,k,l;return j=Date.now()-e,null!=(k=h.logger)&&k.info("getTextWrapsMetric","",{duration:j}),j>h.SLOW_REQUEST_MS&&null!=(l=h.logger)&&l.warn("slowWeb2PrintRequest","",{duration:j,url:d.url}),null!=b?void g.setError(a.Messages.connectionError(d.url,b)):200===c.statusCode?g.setResult(h._createWrapsResult(c,f)):g.setError(a.Messages.serviceError(d.url,i))},ub(d,c),g},a.prototype._createWrapsResult=function(a,b){var c,d,e,f,g,h;return c=this._extractHeaders(a),f=null!=(g=c["word-wrap"])?g:"[]",d=null!=(h=c.overflow)?h:"false",e={wordWrap:JSON.parse(f),overflow:JSON.parse(d),text:b.text}},a.prototype._extractHeaders=function(a){return null!=a.headers?a.headers:vb.XHRUtil.parseResponseHeaders(a)},a.prototype.getMetadataURLForAsset=function(a,b,c){var d,e;return null==b&&(b=""),null==c&&(c="pdf"),null==(null!=a&&null!=(e=a.text)?e.TextFlow:void 0)?null:(d=new rb(a,1,72,b),this._getURLForW2PAsset(d,c))},a.prototype.getURLForAsset=function(a,b,c,d){var e,f;return null==b&&(b=1),null==c&&(c=72),null==d&&(d="pdf"),null==(null!=a&&null!=(f=a.text)?f.TextFlow:void 0)?null:(e=new rb(a,b,c,""),this._getURLForW2PAsset(e,d))},a.prototype._getURLForW2PAsset=function(a,b){var c;return null==b&&(b="pdf"),c="https://"+this.hostname+"/web2print/personalize/textbox",c+a.toURIComponents()+("."+b)},a}(),rb=function(){function a(b,c,d,e){var f,g,h,i,j;null==c&&(c=1),this.resolution=null!=d?d:72,null==e&&(e=""),h=b.text.TextFlow,g=mb.getParagraphs(b),f=this._firstAvailableSpan(g),this.restrictSize=0,this.stroke=0,this.tracking=0,this.angle="0.00",this.width=b.container.width*c,this.height=b.container.height*c,this.horizontalAlignment=g[0].textAlign,this.verticalAlignment=this._massageVAlign(h.verticalAlign),this.text=e.length>0?e:this._joinLines(g),null!=f?(this.fontName=f.fontName,this.fontSize=parseFloat(f.fontSize),this.fontColor=null!=(i=null!=(j=f.color)?j.substr(1):void 0)?i:"000000",this.leading=parseFloat(f.lineHeight)):(this.fontName=a.DEFAULTS.FONT_NAME,this.fontSize=a.DEFAULTS.FONT_SIZE,this.fontColor=a.DEFAULTS.COLOR,this.leading=a.DEFAULTS.LEADING)}return a.VALIGN={MIDDLE:"middle",CENTER:"center"},a.DEFAULTS={COLOR:"000000",FONT_NAME:"NeutrafaceTextTT-Book",FONT_SIZE:12,LEADING:14.4},a.prototype._firstAvailableSpan=function(a){var b,c,d,e;for(c=0,d=a.length;c<d;c++)if(b=a[c],(null!=(e=b.spans)?e.length:void 0)>0)return b.spans[0];return null},a.prototype._massageVAlign=function(b){return b===a.VALIGN.MIDDLE?a.VALIGN.CENTER:b},a.prototype._joinLines=function(a){var b,c,d,e,f;for(b=[],d=0,e=a.length;d<e;d++)c=a[d],null!=c.spans[0]&&b.push(null!=(f=c.spans[0])?f.text:void 0);return b.join("\n")},a.prototype.toURIComponents=function(){var a,b;return a=encodeURIComponent(this.fontName),b=this._superEncodeText(this.text),"/restrictSize/"+this.restrictSize+"/width/"+this.width+"/height/"+this.height+("/resolution/"+this.resolution+"/fontName/"+a+"/fontSize/"+this.fontSize)+("/fontColor/"+this.fontColor+"/stroke/"+this.stroke+"/tracking/"+this.tracking)+("/verticalAlignment/"+this.verticalAlignment)+("/horizontalAlignment/"+this.horizontalAlignment)+("/angle/"+this.angle+"/text/"+b+"/leading/"+this.leading)},a.prototype._superEncodeText=function(a){var b;return b=JSON.stringify(a),encodeURIComponent(encodeURIComponent(b))},a}(),q={HINGED:"hinged",LAYFLAT:"layflat",LOOSELEAF:"looseleaf"},G={HARD:"hard",SOFT:"soft",STOCK:"stock"},I={PAGE:{xmlName:"defaultBackgrounds",surface:"page"},GRID:{xmlName:"defaultBackgrounds",surface:"grid"},DATECELL:{xmlName:"defaultBackgrounds",surface:"datecell"},IDEAGRID:{xmlName:"defaultBackgrounds",surface:"ideagrid"},IDEAPAGE:{xmlName:"defaultBackgrounds",surface:"ideapage"},IDEATITLE:{xmlName:"defaultBackgrounds",surface:"ideatitle"},SPREAD:{xmlName:"seamlessBackgrounds",surface:"spread"},FRONT_COVER:{xmlName:"defaultFrontCoverBackgrounds",surface:"frontCover"},BACK_COVER:{xmlName:"defaultBackCoverBackgrounds",surface:"backCover"},SPINE:{xmlName:"defaultSpineBackgrounds",surface:"spine"},TITLE:{xmlName:"defaultTitleBackgrounds",surface:"title"},IDEA_SPREAD:{xmlName:"seamlessBackgrounds",surface:"ideaspread"},IDEA_FRONT_COVER:{xmlName:"defaultFrontCoverBackgrounds",surface:"ideafrontcover"},IDEA_BACK_COVER:{xmlName:"defaultBackCoverBackgrounds",surface:"ideabackcover"},IDEA_SPINE:{xmlName:"defaultSpineBackgrounds",surface:"ideaspine"},indexedName:"xmlName",getValue:function(a){return vb.Enum.getValue(a,this)},fromSurfaceType:function(a){switch(a){case I.PAGE.surface:return I.PAGE;case I.TITLE.surface:return I.TITLE;case I.GRID.surface:return I.GRID;case I.DATECELL.surface:return I.DATECELL;case I.IDEAGRID.surface:return I.IDEAGRID;case I.IDEAPAGE.surface:return I.IDEAPAGE;case I.IDEATITLE.surface:return I.IDEATITLE;case I.SPREAD.surface:return I.SPREAD;case I.FRONT_COVER.surface:return I.FRONT_COVER;case I.BACK_COVER.surface:return I.BACK_COVER;case I.SPINE.surface:return I.SPINE;case I.IDEA_SPREAD.surface:return I.IDEA_SPREAD;case I.IDEA_FRONT_COVER.surface:return I.IDEA_FRONT_COVER;case I.IDEA_BACK_COVER.surface:return I.IDEA_BACK_COVER;case I.IDEA_SPINE.surface:return I.IDEA_SPINE}},fromPageType:function(a){switch(a){case vb.PageTypeEnum.FRONTPAGE:return I.FRONT_COVER;case vb.PageTypeEnum.BACKPAGE:return I.BACK_COVER;case vb.PageTypeEnum.SPINEPAGE:return I.SPINE;case vb.PageTypeEnum.TITLEPAGE:return I.TITLE;case vb.PageTypeEnum.INNERPAGE:return I.PAGE;case vb.PageTypeEnum.CALENDAR_TITLEPAGE:case vb.PageTypeEnum.CALENDAR_PAGE:case vb.PageTypeEnum.CALENDAR_GRIDPAGE:return I.PAGE}}},ga={BEST:1,GOOD:2,OTHER:3},ra={SPREAD_PAGE:"Spread",ONE_PAGE:"OnePage",isValid:function(a){var b,c;for(b in ra)if(c=ra[b],c===a)return!0;return!1}},Aa={indexedName:"xmlName",SURFACES:{PAGE:"page",SPREAD:"spread",TITLE:"title",FRONT_COVER:"frontCover",BACK_COVER:"backCover",SPINE:"spine",DEBOSS_PREVIEW:"debossPreview",DEBOSS_INLAY:"debossInlay"},ADAPTIVE:{xmlName:"adaptiveLayouts",surface:"page"},ADAPTIVE_FRONT_COVER:{xmlName:"adaptiveFrontCoverLayouts",surface:"frontCover"},ADAPTIVE_BACK_COVER:{xmlName:"adaptiveBackCoverLayouts",surface:"backCover"},ADAPTIVE_SPINE:{xmlName:"adaptiveSpineLayouts",surface:"spine"},ADAPTIVE_TITLE:{xmlName:"adaptiveTitleLayouts",surface:"title"},ADAPTIVE_SPREAD:{xmlName:"adaptiveSpreadLayouts",surface:"spread"},DEFAULT:{xmlName:"defaultLayouts",surface:"page"},DEFAULT_FRONT_COVER:{xmlName:"defaultFrontCoverLayouts",surface:"frontCover"},DEFAULT_BACK_COVER:{xmlName:"defaultBackCoverLayouts",surface:"backCover"},DEFAULT_SPINE:{xmlName:"defaultSpineLayouts",surface:"spine"},DEFAULT_TITLE:{xmlName:"defaultTitleLayouts",surface:"title"},DEFAULT_CALENDAR:{xmlName:"defaultCalendarLayouts",surface:"ideapage"},DEFAULT_CALENDAR_TITLE:{xmlName:"defaultCalendarTitleLayouts",surface:"ideatitle"},DEFAULT_CALENDAR_GRID:{xmlName:"defaultCalendarGridLayouts",surface:"ideagrid"},CALENDAR_DATE:{xmlName:"dateCellLayouts",surface:"datecell"},CORE:{xmlName:"coreLayouts",surface:"page"},CORE_FRONT_COVER:{xmlName:"frontCoverLayouts",surface:"frontCover"},CORE_BACK_COVER:{xmlName:"backCoverLayouts",surface:"backCover"},CORE_SPINE:{xmlName:"spineLayouts",surface:"spine"},CORE_TITLE:{xmlName:"titleLayouts",surface:"title"},CORE_SPREAD:{xmlName:"spreadCoreLayouts",surface:"spread"},CORE_GRID:{xmlName:"gridCoreLayouts",surface:"grid"},DEBOSS_PREVIEW:{xmlName:"debossPreviewLayouts",surface:"debossPreview"},DEBOSS_INLAY:{xmlName:"debossInlayLayouts",surface:"debossInlay"},IDEA_FRONT_COVER:{xmlName:"frontCoverIdeaPages",surface:"frontCover"},IDEA_BACK_COVER:{xmlName:"backCoverIdeaPages",surface:"backCover"},IDEA_PAGE:{xmlName:"coreIdeaPages",surface:"page"},IDEA_TITLE_PAGE:{xmlName:"titleIdeaPages",surface:"title"},IDEA_SPREAD_PAGE:{xmlName:"spreadCoreIdeaPages",surface:"spread"},IDEA_SPINE_PAGE:{xmlName:"spineIdeaPages",surface:"ideaspine"},IDEA_GRID_PAGE:{xmlName:"coreIdeaGrids",surface:"ideagrid"},getValue:function(a){return vb.Enum.getValue(a,this)},toAdaptiveType:function(a){switch(a.type){case vb.PageTypeEnum.INNERPAGE:return a.cardinality===ra.SPREAD_PAGE?Aa.ADAPTIVE_SPREAD:Aa.ADAPTIVE;case vb.PageTypeEnum.FRONTPAGE:return Aa.ADAPTIVE_FRONT_COVER;case vb.PageTypeEnum.BACKPAGE:return Aa.ADAPTIVE_BACK_COVER;case vb.PageTypeEnum.SPINEPAGE:return Aa.ADAPTIVE_SPINE;case vb.PageTypeEnum.TITLEPAGE:return Aa.ADAPTIVE_TITLE;case vb.PageTypeEnum.CALENDAR_TITLEPAGE:return Aa.CORE_TITLE;case vb.PageTypeEnum.CALENDAR_PAGE:return Aa.CORE;case vb.PageTypeEnum.CALENDAR_GRIDPAGE:return Aa.CORE_GRID}},toDefaultType:function(a){switch(a){case vb.PageTypeEnum.INNERPAGE:return Aa.DEFAULT;case vb.PageTypeEnum.FRONTPAGE:return Aa.DEFAULT_FRONT_COVER;case vb.PageTypeEnum.BACKPAGE:return Aa.DEFAULT_BACK_COVER;case vb.PageTypeEnum.SPINEPAGE:return Aa.DEFAULT_SPINE;case vb.PageTypeEnum.TITLEPAGE:return Aa.DEFAULT_TITLE;case vb.PageTypeEnum.CALENDAR_TITLEPAGE:return Aa.DEFAULT_CALENDAR_TITLE;case vb.PageTypeEnum.CALENDAR_PAGE:return Aa.DEFAULT_CALENDAR;case vb.PageTypeEnum.CALENDAR_GRIDPAGE:return Aa.DEFAULT_CALENDAR_GRID}},toPageType:function(a){return Aa.toCalendarPageType(a)||function(){switch(null!=a?a.surface:void 0){case"page":case"spread":return vb.PageTypeEnum.INNERPAGE;case"frontCover":return vb.PageTypeEnum.FRONTPAGE;case"backCover":return vb.PageTypeEnum.BACKPAGE;case"spine":case"ideaspine":return vb.PageTypeEnum.SPINEPAGE;case"title":return vb.PageTypeEnum.TITLEPAGE;case"debossPreview":case"debossInlay":return vb.PageTypeEnum.FRONTPAGE}}()},toCalendarPageType:function(a){var b;switch(b=[Aa.DEFAULT_CALENDAR_GRID,Aa.CORE_GRID,Aa.IDEA_GRID_PAGE],!1){case a!==Aa.DEFAULT_CALENDAR:return vb.PageTypeEnum.CALENDAR_PAGE;case a!==Aa.DEFAULT_CALENDAR_TITLE:return vb.PageTypeEnum.CALENDAR_TITLEPAGE;case wb.call(b,a)<0:return vb.PageTypeEnum.CALENDAR_GRIDPAGE;default:return}},coreToAdaptiveType:function(a){switch(a){case Aa.CORE:case Aa.CORE_GRID:return Aa.ADAPTIVE;case Aa.CORE_FRONT_COVER:return Aa.ADAPTIVE_FRONT_COVER;case Aa.CORE_BACK_COVER:return Aa.ADAPTIVE_BACK_COVER;case Aa.CORE_SPINE:return Aa.ADAPTIVE_SPINE;case Aa.CORE_TITLE:return Aa.ADAPTIVE_TITLE;case Aa.CORE_SPREAD:return Aa.ADAPTIVE_SPREAD}},isCoreType:function(a){switch(a){case Aa.CORE:case Aa.CORE_FRONT_COVER:case Aa.CORE_BACK_COVER:case Aa.CORE_SPINE:case Aa.CORE_TITLE:case Aa.CORE_SPREAD:case Aa.CORE_GRID:return!0;default:return!1}},isDebossType:function(a){return a===Aa.DEBOSS_INLAY||a===Aa.DEBOSS_PREVIEW}},Ha={RAW:"raw",STYLED:"styled",IDEA:"ideapage",isValidType:function(a){return a===Ha.RAW||a===Ha.STYLED||a===Ha.IDEA}},Na={FRONT_COVER:-1,SPINE:-2,BACK_COVER:-3},Pa={PAGE_NUM_L:"page_num_L",PAGE_NUM_R:"page_num_R"},bb={WIDE:"wide",NARROW:"narrow"},U=function(){function a(a){this.targetCount=Math.max(1,a)}var b;return a.prototype.increaseToTarget=function(a){var c,d,e,f,g,h,i,j,k,l;if(vb.ArgumentValidation.assertObjectIsSpecified(a,"groups"),0===a.length)return a;if(k={},a.length<this.targetCount)for(g=this.targetCount-a.length,j=new b(a),e=l=0;0<=g?l<g:l>g;e=0<=g?++l:--l)d=j.getNextGroupIndex(),null==k[d]&&(k[d]=0),k[d]+=1;h=[];for(f in a)c=a[f],i=k[f],null!=i&&i>0?h=h.concat(vb.ArrayUtil.evenlySplitList(c,i)):h.push(c);return h},a.prototype.reduceToTarget=function(a){var b,c,d,e,f;for(vb.ArgumentValidation.assertObjectIsSpecified(a,"groups"),e=function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(b.slice());return e}(),c=new W(e);e.length>this.targetCount;)f=c.getNextGroupIndex(),d=f-1,e.splice(d,2,e[d].concat(e[f]));return e},b=function(){function a(a){var b,c;this.groups=function(){var d;d=[];for(c in a)b=a[c],d.push({originalIndex:parseInt(c),group:b});return d}(),this.groups.sort(function(a,b){return vb.SortUtil.compare(b.group.length,a.group.length)}),this.passCount=0,this.next=0}return a.prototype.getNextGroupIndex=function(){var a,b,c;return this.next>=this.groups.length&&(this.passCount+=1,this.next=0),c=this.passCount+1,a=this.groups[this.next].group.length-1,c>a&&(this.passCount+=1,this.next=0),b=this.groups[this.next].originalIndex,this.next+=1,b},a}(),a.GroupSplitIterator=b,a}(),W=function(){function a(a){this.groups=a}return a.prototype.getNextGroupIndex=function(){var a,b,c,d,e,f;for(a=Number.POSITIVE_INFINITY,b=-1,c=e=1,f=this.groups.length;1<=f?e<f:e>f;c=1<=f?++e:--e)d=this.groups[c-1].length+this.groups[c].length,d<a&&(a=d,b=c);return b},a}(),X=function(){function a(a){null==a&&(a=1),this.maxGroupSize=Math.max(1,a)}return a.prototype.limitByExpanding=function(a){var b,c,d,e;for(vb.ArgumentValidation.assertObjectIsSpecified(a,"groups"),c=[],d=0,e=a.length;d<e;d++)b=a[d],this._pushNext(b,c);return c},a.prototype._pushNext=function(a,b){return a.length>this.maxGroupSize?this._splitNext(a,b):b.push(a)},a.prototype._splitNext=function(a,b){var c;return c=ka.findMaxInterval(a).rightIndex,this._pushNext(a.slice(0,c),b),this._pushNext(a.slice(c),b)},a.prototype.limitByDistributing=function(a){var b,c,d,e,f;for(vb.ArgumentValidation.assertObjectIsSpecified(a,"groups"),d=function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(b.slice());return e}(),c=e=0,f=d.length;0<=f?e<f:e>f;c=0<=f?++e:--e)d[c].length>this.maxGroupSize&&this._throttleAt(c,d);return d},a.prototype._throttleAt=function(a,b){var c,d,e,f,g,h;return h=this._getCapacitiesAt(a,b),c=h[0],g=h[1],f=b[a].length-this.maxGroupSize,d=Math.ceil((f+c-g)/2),e=f-d,this._moveImagesLeft(Math.min(f,d),a,b),this._moveImagesRight(Math.min(f,e),a,b)},a.prototype._getCapacitiesAt=function(a,b){var c;return c=new vb.CumulativeCount(b),[c.getCapacityBefore(a,this.maxGroupSize),c.getCapacityAfter(a,this.maxGroupSize)]},a.prototype._moveImagesLeft=function(a,b,c){var d,e;if(!(a<0||0===b))return d=c[b].splice(0,a),e=c[b-1],e.push.apply(e,d),this._moveImagesLeft(e.length-this.maxGroupSize,b-1,c)},a.prototype._moveImagesRight=function(a,b,c){var d,e;if(!(a<0||b>c.length-2))return d=c[b].splice(-a,a),e=c[b+1],e.unshift.apply(e,d),this._moveImagesRight(e.length-this.maxGroupSize,b+1,c)},a}(),p=function(){function a(a,b){null==a&&(a=null),null==b&&(b=null),this.container=null!=a?a:new z,this.imageRectangle=null!=b?b:new z}return a.SQUARE_MULTIPLIER=1,a.RECT_MULTIPLIER=1.293,a.forLayout=function(b,c){return vb.PageTypeEnum.isInnerType(c)?a.forInnerLayout(b):a.forCoverLayout(b)},a.forInnerLayout=function(b){var c;return c=this._dimensWithBleed(b),new a(c,c.clone())},a._dimensWithBleed=function(a){var b,c,d,e;return c=a.width+a.bleedInside+a.bleedOutside,b=a.height+a.bleedTop+a.bleedBottom,d=-a.bleedInside,e=-a.bleedTop,new z(c,b,d,e)},a.forCoverLayout=function(b){var c,d,e;return c=this._dimensWithBleed(b),d=b.aspectRatio===vb.ContentDimens.SQUARE?this.SQUARE_MULTIPLIER:this.RECT_MULTIPLIER,e=c.clone(),e.width=c.height*d,e.xOffset=-((e.width-c.width)/2+b.bleedInside),new a(c,e)},a.forSpread=function(b){var c,d,e,f,g,h;return c=b.layoutDimens,h=b.spreadDimens,null!=h&&(c=h.clone(),c.width=h.width/2),d=a.forInnerLayout(c),f=a.forInnerLayout(c),e=-(c.bleedOutside+c.bleedInside),g=c.width,d.container.xOffset=d.imageRectangle.xOffset=e,f.container.xOffset=f.imageRectangle.xOffset=g,{left:d,right:f}},a}(),u=function(){function a(a){var b;this.cellTemplateAssets=a.cellTemplateAssets,this.cellHeight=a.cellHeight,this.cellXOffset=a.cellXOffset,this.cellYOffset=a.cellYOffset,this.cellIndex=a.cellIndex,this.splitDate=a.splitDate,b=a.monthStartDate,this.style=a.style,this.guidanceContent=a.guidanceContent,this.containerMap=a.containerMap,this.existingPageCrop=a.existingPageCrop,this.textHandler=a.textHandler,this.addAsset=a.addAsset,this.options=a.options,this.originalStartDate=new Date(b.originalYear,b.month-1,1),this.monthStartDate=new Date(b.year,b.month-1,1),this.monthEndDate=new Date(b.year,b.month,0),this.cellTemplateAssets=this.cellTemplateAssets.filter(function(a){return!vb.LayoutGraphicAssetTypeEnum.isEventTextBackground(a)})}return a.startSync=function(b){var c;return c=new a(b),c.startSync()},a.prototype.startSync=function(){var a,b,c,d,e,f,g,h;for(b=JSON.parse(JSON.stringify(this.cellTemplateAssets)),c=d=0,e=b.length;d<e;c=++d)a=b[c],this._shouldClone(a,this.cellIndex)&&(null!=(f=a.container)&&(f.locked="true"),this._writeImageContainerId(a,this.cellIndex,this.cellHeight),this._shiftCoords(a.container,this.cellXOffset,this.cellYOffset),this._shiftCoords(a.imageRectangle,this.cellXOffset,this.cellYOffset),"event-2"!==(g=a.guidanceText)&&"date-2"!==g||null==this.splitDate?(this._populateDateAsset(a,this.cellIndex,void 0),this._rewriteEventGuidanceForAsset(a,this.cellIndex,void 0),this._assignAssociatedImage(a,this.cellIndex,!1)):(this._populateDateAsset(a,this.cellIndex,this.splitDate),this._rewriteEventGuidanceForAsset(a,this.cellIndex,this.splitDate),this._assignAssociatedImage(a,this.cellIndex,!0)),this._updateContainerId(a,c,this.cellIndex),this._ensureImageRectangle(a),(null!=(h=this.options)?h.omitEmptyAssets:void 0)?(this._isGraphicAsset(a)||this._hasImageAssignment(a)||this._hasText(a))&&this.addAsset(a):this.addAsset(a))},a.prototype._shouldClone=function(a,b){return a.assetType!==vb.LayoutAssetTypeEnum.TEXT||this._isValidDateTextAsset(a,b)},a.prototype._hasImageAssignment=function(a){var b;return a.assetType===vb.LayoutAssetTypeEnum.IMAGE&&null!=(null!=(b=a.imageAssignment)?b.imageReference:void 0)},a.prototype._isGraphicAsset=function(a){return a.assetType===vb.LayoutAssetTypeEnum.GRAPHIC},a.prototype._hasText=function(a){var b,c,d,e,f,g;return a.assetType===vb.LayoutAssetTypeEnum.TEXT&&""!==(null!=(b=a.text)&&null!=(c=b.TextFlow)&&null!=(d=c.p)&&null!=(e=d[0])&&null!=(f=e.spans)&&null!=(g=f[0])?g.text:void 0)},a.prototype._isValidDateTextAsset=function(a,b){return this._isValidDateAsset(a,vb.LayoutAssetTypeEnum.TEXT,b);
},a.prototype._isValidDateAsset=function(a,b,c){return a.assetType===b&&c>=this.monthStartDate.getDay()+1&&c-this.monthStartDate.getDay()<=this.monthEndDate.getDate()},a.prototype._writeImageContainerId=function(a,b,c){var d;if(a.assetType===vb.LayoutAssetTypeEnum.IMAGE)return d=a.container.yOffset>c/3,this._writeContainerId(a,this._imageContainerId(b,d))},a.prototype._imageContainerId=function(a,b){var c;return c=b===!0?"-2":"","image-"+a+this.monthStartDate.getFullYear()+this.monthStartDate.getMonth()+c},a.prototype._writeContainerId=function(a,b){var c;return c=a.container.id,a.container.id=b,a.scriptLabel=a.scriptLabel.replace("id="+c,"id="+a.container.id)},a.prototype._shiftCoords=function(a,b,c){var d,e;if(null!=(null!=a?a.xOffset:void 0)&&null!=(null!=a?a.yOffset:void 0))return b=parseFloat(b,10),c=parseFloat(c,10),d=b+parseFloat(a.xOffset,10),e=c+parseFloat(a.yOffset,10),a.xOffset=""+d,a.yOffset=""+e},a.prototype._populateDateAsset=function(a,b,c){var d,e;if(0===(null!=(d=a.guidanceText)?d.indexOf("date"):void 0)&&this._isValidDateTextAsset(a,b))return a.guidanceText="date-"+this._dateForIndex(b,c),null!=(e=this.options)&&e.preserveTextStyle&&null!=this.guidanceContent[a.guidanceText]?void(a.text=this.guidanceContent[a.guidanceText].text):this._applyTextContent(a,!1,""+this._dateForIndex(b,c))},a.prototype._dateForIndex=function(a,b){return null!=b?b:a-this.monthStartDate.getDay()},a.prototype._applyTextContent=function(a,b,c){var d,e,f,g,h,i;if(!b||!mb.hasDefaultText(a))return mb.hasTextDefinition(a)||this.textHandler.applyEmptyContent(a,this.style),mb.hasUserTextDefinition(a)?null!=(d=a.text.TextFlow.p[0])&&null!=(e=d.spans)&&null!=(f=e[0])?f.text=c:void 0:mb.hasDefaultTextDefinition(a)&&null!=(g=a.text.TextFlow.div.p[0])&&null!=(h=g.spans)&&null!=(i=h[0])?i.text=c:void 0},a.prototype._rewriteEventGuidanceForAsset=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;if(0===(null!=(f=a.guidanceText)?f.indexOf("event"):void 0)&&this._isValidDateTextAsset(a,b)){if(null==a.text&&this.textHandler.applyEmptyContent(a,this.style),a.guidanceText="event-"+this._dateForIndex(b,c),d="",null!=this.guidanceContent[a.guidanceText]){if(e=this.guidanceContent[a.guidanceText],null!=(g=this.options)?g.preserveTextStyle:void 0)return void(a.text=e.text);d=null!=(i=null!=(j=e.text.TextFlow.p)&&null!=(k=j[0])&&null!=(l=k.spans)&&null!=(m=l[0])?m.text:void 0)?i:null!=(n=e.text.TextFlow.div.p)&&null!=(o=n[0])&&null!=(p=o.spans)&&null!=(h=p[0])?h.text:void 0}return this._applyTextContent(a,!1,d||"")}},a.prototype._assignAssociatedImage=function(a,b,c){if(this._isValidDateTextAsset(a,b))return a.associatedImage=this._imageContainerId(b,c)},a.prototype._updateContainerId=function(a,b,c){var d;if(a.assetType!==vb.LayoutAssetTypeEnum.IMAGE)return d=""+b+c+this.monthStartDate.getFullYear()+this.monthStartDate.getMonth(),this._writeContainerId(a,d)},a.prototype._convertImageIdToOriginal=function(a,b){var c,d,e,f,g,h;return null==b&&(b=function(a){return a}),g=this.originalStartDate.getDay()+1,c=this.monthStartDate.getDay()+1,g===c?a:(f=g>c?this.cellIndex+(g-c):this.cellIndex-(c-g),f=b(f),e=""+this.cellIndex+this.monthStartDate.getFullYear(),h=""+f+this.originalStartDate.getFullYear(),d=a.replace(e,h),"-2"===d.substring(d.length-2)?d.substring(0,d.length-2):d)},a.prototype._ensureImageRectangle=function(a){var b,c,d,e,f,g,h,i;if(a.assetType===vb.LayoutAssetTypeEnum.IMAGE&&(c=a.container.id,"-2"===c.substring(c.length-2)&&(f=function(a){return a+7}),g=this._convertImageIdToOriginal(c,f),e=null!=(i=this.containerMap[c])?i:this.containerMap[g],null==e&&null==this.splitDate&&(b=this._convertImageIdToOriginal(c,function(a){return a-7}),e=this.containerMap[""+b+"-2"]),null!=e&&(h=JSON.parse(JSON.stringify(e.original)),d=this.existingPageCrop[h.id],vb.ImageUtil.setImageReferenceCrop(h,d),a.imageAssignment={imageReference:h}),null==a.imageRectangle))return a.imageRectangle={height:a.container.height,rotation:a.container.rotation,rotationLimit:a.container.rotationLimit,verticalScale:a.container.verticalScale,width:a.container.width,xOffset:a.container.xOffset,yOffset:a.container.yOffset}},a}(),v=function(){function a(a){var b,e,f,g,h;this.layout=a.layout,this.groupSpec=a.groupSpec,b=a.style,this.textHandler=a.textHandler,this.layoutRequestPool=a.layoutRequestPool,this.options=a.options,vb.ArgumentValidation.assertObjectIsSpecified(this.layout,"layout"),vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),vb.ArgumentValidation.assertObjectIsSpecified(this.groupSpec.year,"groupSpec.year"),vb.ArgumentValidation.assertObjectIsSpecified(this.groupSpec.month,"groupSpec.month"),this.gridRects=this.groupSpec.config.calendars.gridRects,this.style=null!=(e=null!=(f=this.groupSpec)?f.style:void 0)?e:b,this.locale=null!=(g=null!=(h=this.groupSpec)?h.locale:void 0)?g:d,this.startingDate=new Date(this.groupSpec.year,this.groupSpec.month-1,1),this.endingDate=new Date(this.groupSpec.year,this.groupSpec.month,0),null!=la&&(this.weekdayFormatter=new la.DateTimeFormat(this.locale,{weekday:"long"})),this.overflowCount=this.endingDate.getDate()-(c*j-this.startingDate.getDay()),this.guidanceContent={},vb.ArgumentValidation.assertObjectIsSpecified(this.style,"style"),vb.ArgumentValidation.assertObjectIsSpecified(this.layoutRequestPool,"layoutRequestPool")}var b,c,d,e,f,g,i,j;return c=7,j=5,b="dateCellLayouts",d="en-US",e=["year","month","day","date","event"],i=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],g=i.map(function(a){return"day-"+a}),a.start=function(b){var c;return c=new a(b),c.start()},a.prototype.start=function(){var a,b=this;return a=new vb.Promise,this._setUpGuidanceContent(),this._fetchCellTemplateData().then(function(c){return b._populateAssets(c),a.setResult(b.layout,null)}),a},a.prototype._setUpGuidanceContent=function(){var a,b,c,d,e;if(null!=this.groupSpec.originalTextAreas){for(d=this.groupSpec.originalTextAreas,e=[],b=0,c=d.length;b<c;b++)a=d[b],/date-|event-/.test(a.guidanceText)&&e.push(this.guidanceContent[a.guidanceText]=JSON.parse(JSON.stringify(a)));return e}},a.prototype._populateAssets=function(a){var b;return this._lockAssets(),b=this._sortDayAssets(),this._populateDayAssets(b),this._populateMonthAsset(),this._populateYearAsset(),this._insertCells(a,b),this._sequenceAssets()},a.prototype._insertCells=function(a,b){var d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t,v,w,x,y,z,A,B;for(x=this._initCellStartData(b[0]),n=x.initialXOffset,h=x.currentXOffset,i=x.currentYOffset,q=x.newRowIndices,s=a.singleCellLayout,t=a.splitCellLayout,g=a.cellWidth,d=a.cellHeight,p=q.slice(-1)[0],r=0,A=[],m=w=1,y=c*j;1<=y?w<=y:w>=y;m=1<=y?++w:--w)e=s,f=e.content,v=void 0,o=!1,this.overflowCount>0&&wb.call(function(){B=[];for(var a=p,b=p+this.overflowCount;p<=b?a<b:a>b;p<=b?a++:a--)B.push(a);return B}.apply(this),m)>=0&&(e=t,v=this.endingDate.getDate()-this.overflowCount+ ++r,o=!0),l=[],u.startSync({cellTemplateAssets:e.content.assets,cellHeight:d,cellXOffset:h,cellYOffset:i,cellIndex:m,splitDate:v,monthStartDate:{year:this.groupSpec.year,month:this.groupSpec.month,originalYear:this.groupSpec.originalYear},style:this.style,guidanceContent:this.guidanceContent,containerMap:this.groupSpec.containerMap,existingPageCrop:this.groupSpec.existingPageCrop,textHandler:this.textHandler,addAsset:function(a){return l.push(a)},options:this.options}),k=this._getEventAssetId(l),null!=k&&this._applyEventBackground(o,f,l,k),this._concatGridcellAssets(l),z=m+1,wb.call(q,z)>=0?(h=n,A.push(i+=d)):A.push(h+=g);return A},a.prototype._concatGridcellAssets=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)b=a[c],this.layout.content.assets.push(b)},a.prototype._getEventAssetId=function(a){var b,c,d,e,f,g;for(d=this.groupSpec.eventGuidanceTexts,e=0,f=a.length;e<f;e++)if(b=a[e],0===(null!=(g=b.guidanceText)&&"function"==typeof g.indexOf?g.indexOf("event-"):void 0)&&(c=b.guidanceText,null!=d&&wb.call(d,c)>=0))return b.container.id},a.prototype._applyEventBackground=function(a,b,c,d){var e;return vb.ArgumentValidation.assertIsBoolean(a,"isSplitCell"),vb.ArgumentValidation.assertObjectIsSpecified(b,"gridCellTemplate"),vb.ArgumentValidation.assertArrayIsNotEmpty(c,"gridCellAssets"),vb.ArgumentValidation.assertStringIsNotEmpty(d,"eventTextId"),e={isSplitCell:a,gridCellTemplate:b,gridCellAssets:c,eventTextId:d},h.create(e).startSync()},a.prototype._initCellStartData=function(a){var b,d,e,f,g,h;return e=this.gridRects[this.style.sizeId],g=e.left,b=g,d=e.top,h=function(){var a,b;for(b=[],f=a=1;1<=j?a<j:a>j;f=1<=j?++a:--a)b.push(c*f+1);return b}(),{initialXOffset:g,currentXOffset:b,currentYOffset:d,newRowIndices:h}},a.prototype._fetchCellTemplateData=function(){var b,c,d,e,f;return e=a._pickTemplateLayouts(this.style,Aa.CALENDAR_DATE,"single_datecell")[0],f=a._pickTemplateLayouts(this.style,Aa.CALENDAR_DATE,"split_datecell")[0],b={},d=new vb.Promise,c=this._loadLayouts([e,f],b),c.then(function(a,c){var g,h,i,j;return null!=c?void d.setError(c):(i=b[e.id],j=b[f.id],h=parseFloat(i.content.width,10),g=parseFloat(i.content.height,10),d.setResult({singleCellLayout:i,splitCellLayout:j,cellWidth:h,cellHeight:g}))}),d},a.prototype._populateYearAsset=function(){var a,b,c,d,e;for(d=this.layout.content.assets.filter(function(a){return"year"===a.guidanceText}),e=[],b=0,c=d.length;b<c;b++)a=d[b],a.assetType===vb.LayoutAssetTypeEnum.TEXT&&e.push(this._applyTextContent(a,!1,""+this.groupSpec.year));return e},a.prototype._populateMonthAsset=function(){var a,b,c,d,e,g,h,i;for(c=null!=la&&"function"==typeof(null!=(g=b=this._monthFormatter())?g.format:void 0)?b.format(this.startingDate).split(" ")[0]:f[this.startingDate.getMonth()],h=this.layout.content.assets.filter(function(a){return"month"===a.guidanceText}),i=[],d=0,e=h.length;d<e;d++)a=h[d],a.assetType===vb.LayoutAssetTypeEnum.TEXT&&i.push(this._applyTextContent(a,!0,""+c));return i},a.prototype._monthFormatter=function(){return new la.DateTimeFormat(this.locale,{month:"long"})},a.prototype._sortDayAssets=function(){var a,b,c,d,e,f=this;for(c={},b=d=0,e=g.length;d<e;b=++d)a=g[b],c[a]=b;return this.layout.content.assets.filter(function(a){return f._isDayAsset(a)}).sort(function(a,b){return c[a.guidanceText]<c[b.guidanceText]?-1:1})},a.prototype._populateDayAssets=function(a){var b,c,d,e,f;for(f=[],c=d=0,e=a.length;d<e;c=++d)b=a[c],c<=6&&b.assetType===vb.LayoutAssetTypeEnum.TEXT&&f.push(this._applyTextContent(b,!0,this._localizedDayLabel(c)));return f},a.prototype._localizedDayLabel=function(a){var b,c;return b=new Date,b.setDate(b.getDate()-b.getDay()+a),"function"!=typeof(null!=(c=this.weekdayFormatter)?c.format:void 0)?i[b.getDay()]:this.weekdayFormatter.format(b).split(",")[0]},a.prototype._loadLayouts=function(a,b){var c,d,e,f;for(d=[],e=0,f=a.length;e<f;e++)c=a[e],d.push(this._populateLayoutContent(c,b));return vb.Promise.join(d)},a.prototype._populateLayoutContent=function(a,b){var c;return null!=a.content?(b[a.id]=a.clone(),vb.Promise.createFinishedPromise(b[a.id])):(c=new vb.Promise,this.layoutRequestPool.getLayout(a).then(function(d,e){return null!=e?void c.setError(e):(a=a.clone(),a.content=d,b[a.id]=a,c.setResult(a))}),c)},a.prototype._lockAssets=function(){var a,b,c,d,f,g,h;for(d=this.layout.content.assets,h=[],b=0,c=d.length;b<c;b++)a=d[b],f=a.guidanceText,wb.call(e,f)>=0||this._isDayAsset(a)?h.push(null!=(g=a.container)?g.locked="true":void 0):h.push(void 0);return h},a.prototype._isDayAsset=function(a){var b;return 0===(null!=(b=a.guidanceText)&&"function"==typeof b.indexOf?b.indexOf("day-"):void 0)},a.prototype._sequenceAssets=function(){var a,b,c,d,e,f;for(b=new Za,e=this.layout.content.assets,f=[],c=0,d=e.length;c<d;c++)a=e[c],null==a.scriptLabel&&(a.scriptLabel=""),f.push(b.applyNextNumToAsset(a));return f},a.prototype._applyTextContent=function(a,b,c){var d,e,f,g,h,i;if(!b||!mb.hasDefaultText(a))return mb.hasTextDefinition(a)||this.textHandler.applyEmptyContent(a,this.style),mb.hasUserTextDefinition(a)?null!=(d=a.text.TextFlow.p[0])&&null!=(e=d.spans)&&null!=(f=e[0])?f.text=c:void 0:mb.hasDefaultTextDefinition(a)&&null!=(g=a.text.TextFlow.div.p[0])&&null!=(h=g.spans)&&null!=(i=h[0])?i.text=c:void 0},a._pickTemplateLayouts=function(a,b,c){var d;return null==c||null==b?[]:(d=a.getLayoutsForType(b),d.filter(function(a){return a.id.substring(a.id.length-c.length)===c}))},a}(),z=function(){function a(a,b,c,d){this.width=null!=a?a:0,this.height=null!=b?b:0,this.xOffset=null!=c?c:0,this.yOffset=null!=d?d:0}return a.prototype.clone=function(){return new a(this.width,this.height,this.xOffset,this.yOffset)},a}(),ba=function(){function a(a,b){this.image=a,this.imageAreaId=b,this.previousPageCrop=null,this.content=null}return a.prototype.setPreviousPageCrop=function(a){return this.previousPageCrop=a},a.prototype.toExternal=function(){return{image:this.image.original,imageAreaId:this.imageAreaId,content:this.content}},a.prototype.populateImageAssignment=function(b){var c;return c=this._getComposedCrop(b),this.content=a._createContent(this.image,c),b.imageAssignment=this.content.imageAssignment},a._createContent=function(b,c){return{imageAssignment:a._createImageAssignment(b,c)}},a._createImageAssignment=function(a,b){var c;return c=vb.ImageUtil.imageToImageReference(a),vb.ImageUtil.setImageReferenceCrop(c,b),{imageReference:vb.ImageUtil.setDefaultProjectImageProperties(c)}},a.prototype._getComposedCrop=function(a){var b,c;return b=null!=(c=this.previousPageCrop)?c:this.image.crop,vb.CropUtil.expandCropForArea({width:this.image.rotatedWidth,height:this.image.rotatedHeight},b,{width:a.container.width,height:a.container.height})},a}(),ta={getImages:function(a){var b,c,d,e,f,g,h;if(null==a||null==a.assets)return[];for(d=[],g=a.assets,e=0,f=g.length;e<f;e++)b=g[e],"image"===b.assetType&&(null!=(null!=(h=b.imageAssignment)?h.imageReference:void 0)?(c=vb.ImageUtil.imageFromImageReference(b.imageAssignment.imageReference),d.push(c)):d.push(null));return d},fabricateLayoutAttributes:function(a,b){var c,d,e;return null==b&&(b="raw"),d="",e=/(^[A-Za-z0-9]+)/.exec(a),null!=e&&e.length>0&&(d=e[0]),c=pa.create(d,!1,b,0)},parseImageAreas:function(a){var b,c,d,e,f,g,h,i;for(f=[],h=0,i=a.length;h<i;h++)b=a[h],"image"===b.assetType&&(d=b.container.id,g=Math.round(b.container.width),c=Math.round(b.container.height),e=new _(d,g,c,b.seqNum),f.push(e));return f},calculateLPSFromImageAreas:function(a){var b,c,d,e,f,g;if(c=d=e=0,(null!=a?a.length:void 0)>0)for(f=0,g=a.length;f<g;f++)switch(b=a[f],b.orientation){case vb.OrientationEnum.LANDSCAPE:c++;break;case vb.OrientationEnum.PORTRAIT:d++;break;case vb.OrientationEnum.SQUARE:e++}return new na(c,d,e)},countTextAreas:function(a){var b,c,d,e;for(c=0,d=0,e=a.length;d<e;d++)b=a[d],"text"!==b.assetType||/page_num_/.test(b.paraStyle)||c++;return c},identifyLayoutTypeFromId:function(a,b){var c,d,e;if(null==b&&(b=null),d=/_([a-zA-Z]+)$/.exec(a),c=null,!(e=null!=d&&d.length>1?d[1]:null))return c;switch(e.toLowerCase()){case"page":c=null==(null!=b?b.getLayoutsForType(Aa.CALENDAR_DATE):void 0)||b.allowsAutofill?Aa.ADAPTIVE:Aa.DEFAULT_CALENDAR;break;case"spread":c=Aa.ADAPTIVE_SPREAD;break;case"grid":c=Aa.CORE_GRID;break;case"ideagrid":c=Aa.DEFAULT_CALENDAR_GRID;break;case"frontcover":c=Aa.ADAPTIVE_FRONT_COVER;break;case"backcover":c=Aa.ADAPTIVE_BACK_COVER;break;case"spine":c=Aa.ADAPTIVE_SPINE;break;case"title":c=Aa.ADAPTIVE_TITLE;break;case"ideapage":c=null==(null!=b?b.getLayoutsForType(Aa.CALENDAR_DATE):void 0)||b.allowsAutofill?Aa.IDEA_PAGE:Aa.DEFAULT_CALENDAR;break;case"ideaspread":c=Aa.IDEA_SPREAD_PAGE;break;case"ideabackcover":c=Aa.IDEA_BACK_COVER;break;case"ideaspine":c=Aa.IDEA_SPINE_PAGE;break;case"ideatitle":c=null==(null!=b?b.getLayoutsForType(Aa.CALENDAR_DATE):void 0)||b.allowsAutofill?Aa.IDEA_TITLE_PAGE:Aa.DEFAULT_CALENDAR_TITLE;break;case"ideafrontcover":c=Aa.IDEA_FRONT_COVER;break;case"debossinlay":c=Aa.DEBOSS_INLAY;break;case"debosspreview":c=Aa.DEBOSS_PREVIEW;break;case"datecell":c=Aa.CALENDAR_DATE}return c},parseLayoutAttributes:function(a,b){var c,d,e,f,g,h,i,j,k;for(d=this.fabricateLayoutAttributes(a),e=null!=(i=b.template)&&null!=(j=i.assetReference)?j.isFlippable:void 0,"true"!==e&&e!==!0||(d.isFlippable=e),f=0,k=b.assets,g=0,h=k.length;g<h;g++)c=k[g],"Embellishment"===c.type?f++:"text"===c.assetType&&"page_num_R"!==c.paraStyle&&"page_num_L"!==c.paraStyle&&d.numTextAreas++;return f>0&&(d.layoutType="styled"),d},findAssetByContainerId:function(a,b){var c,d,e;if(null!=b)for(d=0,e=b.length;d<e;d++)if(c=b[d],c.container.id===a)return c;return null}},ua={softCoverOnly:["5x7","7x9"],hardCoverOnly:["12x12","11x14"],knownSizes:{"5x7":{USER_CUSTOM_SOFT:{back:new vb.ContentDimens(490.752,396,7.2,7.2,9.288,0,vb.ContentDimens.RECTANGLE),front:new vb.ContentDimens(490.752,396,7.2,7.2,0,9.288,vb.ContentDimens.RECTANGLE),spine:new vb.ContentDimens(64.8,396,7.2,7.2,0,0,vb.ContentDimens.RECTANGLE)},inner:new vb.ContentDimens(512.64,396,7.2,7.2,9,9,vb.ContentDimens.RECTANGLE),spread:new vb.ContentDimens(1025.28,396,7.2,7.2,9,9,vb.ContentDimens.RECTANGLE)},"7x9":{USER_CUSTOM_SOFT:{back:new vb.ContentDimens(606.24,485.28,8.64,8.64,11.16,0,vb.ContentDimens.RECTANGLE),front:new vb.ContentDimens(606.24,485.28,8.64,8.64,0,11.16,vb.ContentDimens.RECTANGLE),spine:new vb.ContentDimens(64.8,485.28,8.64,8.64,0,0,vb.ContentDimens.RECTANGLE)},inner:new vb.ContentDimens(627.84,485.28,8.64,8.64,11.16,11.16,vb.ContentDimens.RECTANGLE),spread:new vb.ContentDimens(1255.68,485.28,8.64,8.64,9,9,vb.ContentDimens.RECTANGLE)},"8x8":{USER_CUSTOM_SOFT:{back:new vb.ContentDimens(530.856,558,7.2,7.2,12.888,0,vb.ContentDimens.SQUARE),front:new vb.ContentDimens(530.856,558,7.2,7.2,0,12.888,vb.ContentDimens.SQUARE),spine:new vb.ContentDimens(64.8,558,7.2,7.2,0,0,vb.ContentDimens.SQUARE)},USER_CUSTOM:{back:new vb.ContentDimens(540,576,61.2,61.2,61.2,0,vb.ContentDimens.SQUARE),front:new vb.ContentDimens(540,576,61.2,61.2,0,61.2,vb.ContentDimens.SQUARE),spine:new vb.ContentDimens(103.464,576,61.2,61.2,0,0,vb.ContentDimens.SQUARE)},USER_CUSTOM_WIDE:{spine:new vb.ContentDimens(144,576,61.2,61.2,0,0,vb.ContentDimens.SQUARE)},STOCK:{front:new vb.ContentDimens(383.76,288,0,0,0,0,vb.ContentDimens.SQUARE)},inner:new vb.ContentDimens(558,558,7.2,7.2,7.2,7.2,vb.ContentDimens.SQUARE),spread:new vb.ContentDimens(1116,558,7.2,7.2,7.2,7.2,vb.ContentDimens.SQUARE)},"8x11":{USER_CUSTOM_SOFT:{back:new vb.ContentDimens(770.4,612,7.2,7.2,11.16,0,vb.ContentDimens.RECTANGLE),front:new vb.ContentDimens(770.4,612,7.2,7.2,0,11.16,vb.ContentDimens.RECTANGLE),spine:new vb.ContentDimens(64.8,612,7.2,7.2,0,0,vb.ContentDimens.RECTANGLE)},USER_CUSTOM:{back:new vb.ContentDimens(774,630,61.2,61.2,61.2,0,vb.ContentDimens.RECTANGLE),front:new vb.ContentDimens(774,630,61.2,61.2,0,61.2,vb.ContentDimens.RECTANGLE),spine:new vb.ContentDimens(103.464,630,61.2,61.2,0,0,vb.ContentDimens.RECTANGLE)},USER_CUSTOM_WIDE:{spine:new vb.ContentDimens(144,630,61.2,61.2,0,0,vb.ContentDimens.RECTANGLE)},STOCK:{front:new vb.ContentDimens(480.024,360,0,0,0,0,vb.ContentDimens.RECTANGLE)},inner:new vb.ContentDimens(792,612,7.2,7.2,9,9,vb.ContentDimens.RECTANGLE),spread:new vb.ContentDimens(1584,612,7.2,7.2,9,9,vb.ContentDimens.RECTANGLE)},"8x11_CALENDAR":{inner:new vb.ContentDimens(777.6,603,7.74,7.74,11.52,11.52,vb.ContentDimens.RECTANGLE)},"10x10":{USER_CUSTOM_SOFT:{back:new vb.ContentDimens(680.4,702,7.2,7.2,12.888,0,vb.ContentDimens.SQUARE),front:new vb.ContentDimens(680.4,702,7.2,7.2,0,12.888,vb.ContentDimens.SQUARE),spine:new vb.ContentDimens(64.8,702,7.2,7.2,0,0,vb.ContentDimens.SQUARE)},USER_CUSTOM:{back:new vb.ContentDimens(684,720,61.2,61.2,61.2,0,vb.ContentDimens.SQUARE),front:new vb.ContentDimens(684,720,61.2,61.2,0,61.2,vb.ContentDimens.SQUARE),spine:new vb.ContentDimens(103.464,720,61.2,61.2,0,0,vb.ContentDimens.SQUARE)},USER_CUSTOM_WIDE:{spine:new vb.ContentDimens(144,720,61.2,61.2,0,0,vb.ContentDimens.SQUARE)},STOCK:{front:new vb.ContentDimens(480.024,360,0,0,0,0,vb.ContentDimens.SQUARE)},inner:new vb.ContentDimens(702,702,7.2,7.2,7.2,7.2,vb.ContentDimens.SQUARE),spread:new vb.ContentDimens(1404,702,7.2,7.2,7.2,7.2,vb.ContentDimens.SQUARE)},"12x12":{USER_CUSTOM:{back:new vb.ContentDimens(828,864,61.2,61.2,61.2,0,vb.ContentDimens.SQUARE),front:new vb.ContentDimens(828,864,61.2,61.2,0,61.2,vb.ContentDimens.SQUARE),spine:new vb.ContentDimens(103.464,864,61.2,61.2,0,0,vb.ContentDimens.SQUARE)},USER_CUSTOM_WIDE:{spine:new vb.ContentDimens(144,864,61.2,61.2,0,0,vb.ContentDimens.SQUARE)},STOCK:{front:new vb.ContentDimens(558,418.5,0,0,0,0,vb.ContentDimens.SQUARE)},inner:new vb.ContentDimens(846,846,7.2,7.2,7.2,7.2,vb.ContentDimens.SQUARE),spread:new vb.ContentDimens(1692,846,7.2,7.2,7.2,7.2,vb.ContentDimens.SQUARE)},"11x14":{USER_CUSTOM:{back:new vb.ContentDimens(982.8,792,61.2,61.2,61.2,0,vb.ContentDimens.RECTANGLE),front:new vb.ContentDimens(982.8,792,61.2,61.2,0,61.2,vb.ContentDimens.RECTANGLE),spine:new vb.ContentDimens(103.464,792,61.2,61.2,0,0,vb.ContentDimens.RECTANGLE)},USER_CUSTOM_WIDE:{spine:new vb.ContentDimens(144,792,61.2,61.2,0,0,vb.ContentDimens.RECTANGLE)},STOCK:{front:new vb.ContentDimens(558,418.5,0,0,0,0,vb.ContentDimens.RECTANGLE)},inner:new vb.ContentDimens(1000.8,774,7.2,7.2,9,9,vb.ContentDimens.RECTANGLE),spread:new vb.ContentDimens(2001.6,774,7.2,7.2,9,9,vb.ContentDimens.RECTANGLE)}},forSizeAndPage:function(a,b,c,d,e){var f,g;switch("8x11"===b&&a===vb.ProjectTypeEnum.MATISSE_CALENDAR&&(b="8x11_CALENDAR"),f=ua.knownSizes[b],!1){case!(vb.PageTypeEnum.isInnerType(c)&&c!==vb.PageTypeEnum.TITLEPAGE):return d?f.spread:f.inner;case c!==vb.PageTypeEnum.TITLEPAGE:return f.inner;default:return g=ua._simplifyCoverType(e,b),f[g][c]}},_simplifyCoverType:function(a,b){return/STOCK/gi.test(a)?"STOCK":wb.call(ua.softCoverOnly,b)>=0?"USER_CUSTOM_SOFT":wb.call(ua.hardCoverOnly,b)>=0&&"USER_CUSTOM_SOFT"===a?"USER_CUSTOM":"USER_CUSTOM_PADDED"===a?"USER_CUSTOM":"USER_CUSTOM_PADDED_WIDE"===a?"USER_CUSTOM_WIDE":a},toSpreadDimens:function(a){var b;return b=a.clone(),b.width*=2,b}},va=function(){function a(a,b,c,d,e,f){var g,h,i;return this.numSourceTextAreas=null!=c?c:null,this.numDestinationTextAreas=null!=d?d:null,this.sourceImages=null!=e?e:null,this.descImageAreas=null!=f?f:null,this.fits=null,this.textFits=null,this.unusedAreaCount=0,this.translationCount=0,this.squareToSomethingCount=0,this.imageQuality={bestRankedImageAreasTotalSize:0,goodRankedImageAreasTotalSize:0,otherRankedImageAreasTotalSize:0},this.sourceImages&&this.descImageAreas&&this._scoreImageWells(),null!=c&&null!=d&&(this.textFits=this.numSourceTextAreas<=this.numDestinationTextAreas,this.textLossCount=this.numSourceTextAreas-this.numDestinationTextAreas),a.count>b.count?void(this.fits=!1):(this.unusedAreaCount=b.count-a.count,g=a.l>b.l?a.l-b.l:0,h=a.p>b.p?a.p-b.p:0,g+h>b.s?void(this.fits=!1):(i=a.s+g+h,this.squareToSomethingCount=i>b.s?i-b.s:0,this.translationCount=g+h+this.squareToSomethingCount,void(this.fits=!0)))}return a.prototype._categorizeImagesByRanking=function(){var a,b,c,d,e,f,g;for(b={},g=this.sourceImages,e=0,f=g.length;e<f;e++)c=g[e],d=parseInt(c.ranking,10),c.ranking!==ga.BEST&&c.ranking!==ga.GOOD&&(d=ga.OTHER),a=b[d],a||(a=[]),a.push(c),b[d]=a;return b},a.prototype._categorizeImageAreasByOrientation=function(){var a,b,c,d,e,f,g,h;for(b={},h=this.descImageAreas,f=0,g=h.length;f<g;f++)c=h[f],d=b[c.orientation],d||(d=[]),d.push(parseInt(c.width,10)*parseInt(c.height,10)),b[c.orientation]=d;for(e in b)a=b[e],a.sort(function(a,b){return b-a}),b[e]=a;return b},a.prototype._calculateTotalBiggestImageArea=function(a,b){var c,d,e,f,g,h,i;if(!a)return 0;if(!vb.ImageUtil)return 0;for(g=0,h=0,i=a.length;h<i;h++)c=a[h],d=vb.ImageUtil.getImageOrientation(c),f=b[d],(null!=f?f.length:void 0)>0&&(e=parseInt(f.shift(),10),g+=e,b[d]=f);return g},a.prototype._scoreImageWells=function(){var a,b;if(this.sourceImages)return b=this._categorizeImagesByRanking(),a=this._categorizeImageAreasByOrientation(),this.imageQuality={bestRankedImageAreasTotalSize:this._calculateTotalBiggestImageArea(b[ga.BEST],a),goodRankedImageAreasTotalSize:this._calculateTotalBiggestImageArea(b[ga.GOOD],a),otherRankedImageAreasTotalSize:this._calculateTotalBiggestImageArea(b[ga.OTHER],a)}},a.prototype.compare=function(a){if(!this.fits)return!a.fits||null!=a.textFits&&!a.textFits?0:1;if(!a.fits)return null==this.textFits||this.textFits?-1:0;if(null!=this.textFits&&null!=a.textFits){if(this.textFits!==a.textFits)return this.textFits?-1:1;if(this.textLossCount!==a.textLossCount)return vb.SortUtil.compare(this.textLossCount,a.textLossCount)}return a.imageQuality.bestRankedImageAreasTotalSize-this.imageQuality.bestRankedImageAreasTotalSize!==0?a.imageQuality.bestRankedImageAreasTotalSize-this.imageQuality.bestRankedImageAreasTotalSize:this.unusedAreaCount!==a.unusedAreaCount?vb.SortUtil.compare(this.unusedAreaCount,a.unusedAreaCount):this.translationCount!==a.translationCount?vb.SortUtil.compare(this.translationCount,a.translationCount):vb.SortUtil.compare(this.squareToSomethingCount,a.squareToSomethingCount)},a}(),wa={parseCover:function(a){return/hard/.test(a)?G.HARD:/soft/.test(a)?G.SOFT:/inlay/.test(a)||/wide/.test(a)||/layflat/.test(a)?G.STOCK:""},parseBinding:function(a){return/wide/.test(a)||/layflat/.test(a)?q.LAYFLAT:q.LOOSELEAF}},xa={SPINE_CONVERSION_MAP:{"00_00L01P00S":"00_00L01P00S","01_00L00P00S":"00_00L00P00S","00_00L00P00S":"01_00L00P00S"},constructTargetLayoutId:function(a,b,c,d){var e;switch(e=c,null!=d?d.surface:void 0){case Aa.SURFACES.PAGE:case Aa.SURFACES.TITLE:case Aa.SURFACES.SPREAD:e=c.replace(a.sizeID,b.productSize);break;case Aa.SURFACES.SPINE:e=xa._convertSpineLayout(c,b,a);break;default:e=xa._convertLayoutByReplacingFormFactor(c,b)}return e},stripInvalidLayoutIdComponents:function(a){return"string"!=typeof a?a:a.replace("layflat","hard").replace("hinged","hard").replace("wide","hard")},_convertSpineLayout:function(a,b,c){var d,e,f;return f=null,xa._hasSameCoverType(a,xa._layoutFormFactor(b))?f=xa._convertLayoutByReplacingFormFactor(a,b):(d=a.split("_"),e=xa.SPINE_CONVERSION_MAP[d[2]+"_"+d[3]],f=""+xa._layoutFormFactor(b)+"_"+d[1]+"_"+e+"_"+d[4]+"_"+d[5]),f=_a.getAppropriateLayoutId(b,c.pageCount,f)},_layoutFormFactor:function(a){return xa.stripInvalidLayoutIdComponents(a.layoutFormFactor)},_hasSameCoverType:function(a,b){return xa._isHard(a)&&xa._isHard(b)||xa._isSoft(a)&&xa._isSoft(b)},_convertLayoutByReplacingFormFactor:function(a,b){return xa._layoutFormFactor(b)+a.substring(a.indexOf("_"))},_isHard:function(a){return a.indexOf("hard")>=0||a.indexOf("wide")>=0},_isSoft:function(a){return a.indexOf("soft")>=0}},ya=function(){function a(){this.assignments={},this.unassignedImages=[]}return a.prototype.addManualAssignment=function(a){return this.assignments[a.imageAreaId]=a},a.create=function(b,c,d){var e,f,g,h,i,j,k,l,m,n;null==d&&(d={}),j=new a,m=j._assignImagesBySeqNum(b.images,c.imageAreas),l=m.unassignedImages,g=m.emptyAreas,i=new Qa({items:l,getOrientation:function(a){return a.croppedOrientation},getDimensions:function(a){return{width:a.croppedWidth,height:a.croppedHeight}}}),h=new Qa({items:g,getOrientation:function(a){return a.orientation},getDimensions:function(a){return{width:a.width,height:a.height}}}),j._assign(i,h,d),n=j.assignments;for(e in n)f=n[e],k=b.existingPageCrop[f.image.id],null!=k&&f.setPreviousPageCrop(k);return j},a.prototype._assignImagesBySeqNum=function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(null==a||null==b)return{unassignedImages:a,emptyAreas:b};for(i=[],d=[],g={},j=0,l=b.length;j<l;j++)c=b[j],null!=c.seqNum?g[""+c.seqNum]=c:d.push(c);for(k=0,m=a.length;k<m;k++)e=a[k],h=null!=e.seqNum?""+e.seqNum:null,null!=h&&null!=(f=g[h])?(this.assignments[f.id]=new ba(e,f.id),delete g[h]):i.push(e);for(h in g)c=g[h],d.push(c);return{unassignedImages:i,emptyAreas:d}},a.prototype._assign=function(a,b,c){if(this._assignMatchingOrientations(a,b),a.hasPendingAssignment()&&(this._assignToSquareOrientation(a,b),a.hasPendingAssignment()))return this._assignFromSquareOrientation(a,b),(null!=c?c.ignoreOrientation:void 0)?this.unassignedImages=this._assignRemainingImagesBySize(a,b):this.unassignedImages=a.getPendingAssignments()},a.prototype._assignMatchingOrientations=function(a,b){return this._assignOrientations(a.landscapes,b.landscapes),this._assignOrientations(a.portraits,b.portraits)},a.prototype._assignToSquareOrientation=function(a,b){return this._assignOrientations(a.landscapes,b.squares),this._assignOrientations(a.portraits,b.squares)},a.prototype._assignFromSquareOrientation=function(a,b){return this._assignOrientations(a.squares,b.squares),this._assignOrientations(a.squares,b.portraits),this._assignOrientations(a.squares,b.landscapes)},a.prototype._assignOrientations=function(a,b){for(var c,d;null!==(c=a.peek())&&!b.isEmpty();)d=b.pop(),this.assignments[d.id]=new ba(c,d.id),a.pop()},a.prototype._assignRemainingImagesBySize=function(a,b){var c,d,e,f,g;for(b=b.getPendingAssignments().sort(this._sortBySize),a=a.getPendingAssignments().sort(this._sortBySize),c=0,f=0,g=b.length;f<g;f++)d=b[f],c<a.length&&(this.assignments[d.id]=new ba(a[c++],d.id));for(e=[];c<a.length;)e.push(a[c++]);return e},a.prototype._sortBySize=function(a,b){var c;return c=function(a){return null!=a.croppedWidth&&null!=a.croppedHeight?a.croppedWidth*a.croppedHeight:null!=a.width&&null!=a.height?a.width*a.height:0},vb.SortUtil.compare(c(b),c(a))},a}(),za=function(){function a(a){this.imageCountMap={},this._indexLayouts(a),this._sortedImageCounts=null}var b,c;return a.prototype._indexLayouts=function(a){var b,c,d,e,f;for(e=0,f=a.length;e<f;e++)c=a[e],b=c.lpsCount.count,d=this._lookupLayoutMap(b,c.attributes.formFactor)||this._createLayoutMapEntry(b,c.attributes.formFactor),d.addLayout(c)},a.prototype._lookupLayoutMap=function(a,b){var c;return c=this._lookupImageCount(a),null!=c?c.getEntry(b):void 0},a.prototype._lookupImageCount=function(a){return this.imageCountMap[a]},a.prototype._createLayoutMapEntry=function(a,b){var c,d;return c=this._lookupImageCount(a)||this._createImageCountEntry(a),d=c.addEntry(b)},a.prototype._createImageCountEntry=function(a){return this._sortedImageCounts=null,this.imageCountMap[a]=new b},a.prototype.getMatchingLayouts=function(a,b,c){var d,e,f,g,h,i,j,k;if(g=[],d=this.imageCountMap[a],null!=b&&null!=d)return f=d.getEntry(b),null!=f?f.getLayouts(c):g;for(h in d)if(yb.call(d,h))for(f=d[h],k=f.getLayouts(c),i=0,j=k.length;i<j;i++)e=k[i],g.push(e);return g},a.prototype.getSortedImageCounts=function(){var a;return null===this._sortedImageCounts&&(this._sortedImageCounts=function(){var b,c,d,e;for(d=Object.keys(this.imageCountMap),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(parseFloat(a));return e}.call(this),this._sortedImageCounts.sort(vb.SortUtil.compare)),this._sortedImageCounts},b=function(){function a(){}return a.prototype.addEntry=function(a){return this[a]=new c},a.prototype.getEntry=function(a){return null!=this[a]?this[a]:null},a}(),c=function(){function a(){this.layouts={}}return a.prototype.getLayouts=function(a){var b,c,d,e;c=[],e=this.layouts;for(b in e)d=e[b],(null==a||a(d))&&c.push(d);return c},a.prototype.addLayout=function(a){return this.layouts[a.id]=a},a}(),a}(),Ba=function(){function a(a,b,c,d){var e;this.style=a,this.constraintSet=b,this.layoutUsage=null!=c?c:null,this.layoutFormFactor=null!=d?d:null,this.indexByPageType={},this.orientationConstraint=null!=(e=this.constraintSet.orientationConstraint)?e.fidelity:void 0}return a.prototype._getLayoutIndexForGroupSpec=function(a){var b,c;return c=a.pageSpec.type,b=a.pageSpec.cardinality,null==this.indexByPageType[c]&&(this.indexByPageType[c]={}),null==this.indexByPageType[c][b]&&(this.indexByPageType[c][b]=new za(this.style.getLayoutsForType(Aa.toAdaptiveType(a.pageSpec)))),this.indexByPageType[c][b]},a.prototype.pickLayout=function(a,b,c){var d,e;if(null!=a.prechosenLayout)return{layout:a.prechosenLayout};if(d=this.constraintSet.imageCountConstraint,e=function(){switch(null!=d?d.match:void 0){case da.EXACT_MATCH:
return this._findFitForImageCount(a,b,c);case da.EQUAL_OR_GREATER_MATCH:return this._findVariableImageFit(a,b,c)}}.call(this),null!=e)return{layout:e};if((null!=c?c.ignoreOrientation:void 0)||d.fallback===da.FALLBACK_ANY_LAYOUT){if(e=this._findFitIgnoringOrientation(a,b,c),null!=e)return{layout:e};if(b>0)return this.pickLayout(a,b-1,c)}else if(d.fallback===da.FALLBACK_NO_ASSIGNMENT&&(e=this._findFitWithoutImages(a,c),null!=e))return{layout:e,unassignedImages:a.images};return{unassignedImages:a.images}},a.prototype._findVariableImageFit=function(a,b,c){var d,e,f,g,h,i;for(f=this._getLayoutIndexForGroupSpec(a),i=f.getSortedImageCounts(),g=0,h=i.length;g<h;g++)if(d=i[g],!(d<b)&&(e=this._findFitForImageCount(a,d,c),null!==e))return e;return null},a.prototype._isGoodFit=function(a){return!!a.fits&&!(this.orientationConstraint===Ma.STRICT&&a.translationCount>0)},a.prototype._findFitForImageCount=function(a,b,c){var d,e,f,g,h,i,j,k,l,m;for(d=function(){function a(){this.layout=null,this.fitSummary=null}return a.prototype.consider=function(a,b){if(!this.layout||b.compare(this.fitSummary)<0)return this.layout=a,this.fitSummary=b},a}(),e=new d,g=new d,f=new d,l=this._getLayoutCandidates(a,b,c),j=0,k=l.length;j<k;j++)h=l[j],i=this._makeLayoutFitSummary(a,h),this._isGoodFit(i)&&(null!=(null!=c&&null!=(m=c.discourage)?m[h.id]:void 0)?f.consider(h,i):null==this.layoutUsage||this.layoutUsage.isWithinUsageThreshold(h)?e.consider(h,i):g.consider(h,i));return null!=e.layout?e.layout:null!=g.layout?g.layout:null!=f.layout?f.layout:null},a.prototype._makeLayoutFitSummary=function(a,b){var c,d,e,f;return d=[],c=[],null!=a.images&&a.images.length===(null!=(e=b.imageAreas)?e.length:void 0)&&(d=a.images,c=b.imageAreas),null==(null!=(f=this.constraintSet)?f.textAreaCountConstraint:void 0)&&a.textAreaCount>0?new va(a.lpsCount,b.lpsCount,a.textAreaCount,b.attributes.numTextAreas,d,c):new va(a.lpsCount,b.lpsCount,null,null,d,c)},a.prototype._getLayoutCandidates=function(a,b,c){var d,e,f,g,h,i,j,k;return g=a.pageSpec.isCoverPageType()?this.layoutFormFactor:void 0,h=this._getLayoutIndexForGroupSpec(a),f=null!=(j=null!=c?c.layoutTypeFilter:void 0)?j:this._createLayoutFilter(a,g),i=h.getMatchingLayouts(b,g,f),i=i.filter(function(a){var b;return null==(null!=c&&null!=(b=c.disallow)?b[a.id]:void 0)}),null!=(null!=c?c.filter:void 0)&&(d=i.filter(c.filter),e=(null!=(k=this.constraintSet.imageCountConstraint)?k.fallback:void 0)===da.FALLBACK_ANY_LAYOUT,(null==this.constraintSet.layoutCategoryConstraint||!e||d.length>1)&&(i=d)),vb.ArrayUtil.shuffle(i)},a.prototype._createLayoutFilter=function(a,b){var c,d,e,f;if(e=a.pageSpec,(!e.isSpinePageType()||wa.parseCover(b)!==G.HARD)&&(null!=(c=this.constraintSet.textAreaCountConstraint)&&(f=c.pageSpecific[e.type]||c.rule),this._isEmptySpec(a)&&(f!==kb.VARIABLE||this._isBackOrSpine(a))&&(f=kb.NONE),null!=f))return d=function(b){return f===kb.NONE?0===b.attributes.numTextAreas:f===kb.VARIABLE?b.attributes.numTextAreas>0:f!==kb.MATCH||b.attributes.numTextAreas===a.textAreaCount}},a.prototype._findFitIgnoringOrientation=function(a,b,c){var d;return d=this._getLayoutCandidates(a,b,c),d[0]},a.prototype._findFitWithoutImages=function(a,b){var c,d,e,f,g,h,i;for(c={id:a.id,lpsCount:new na(0,0,0),pageSpec:a.pageSpec,images:[]},f=this._getLayoutIndexForGroupSpec(a),i=f.getSortedImageCounts(),g=0,h=i.length;g<h;g++)if(d=i[g],e=this._findFitForImageCount(c,d,b),null!=e)return e;return null},a.prototype._isBackOrSpine=function(a){var b,c;return(b=null!=a&&null!=(c=a.pageSpec)?c.type:void 0)===vb.PageTypeEnum.BACKPAGE||b===vb.PageTypeEnum.SPINEPAGE},a.prototype._isEmptySpec=function(a){var b,c;return!((null!=(b=a.images)?b.length:void 0)>0||(null!=(c=a.originalTextAreas)?c.length:void 0)>0)},a}(),Da=function(){function a(a,b,c,d){this.style=a,this.productSpec=b,this.pageCount=c,this.constraintSet=d,this._layoutCategoryFilter=xb(this._layoutCategoryFilter,this),this._layoutStylingFilter=xb(this._layoutStylingFilter,this),this._layoutAttributesMatchFilter=xb(this._layoutAttributesMatchFilter,this),this._layoutFilter=xb(this._layoutFilter,this),this.picks={},this.disallowedLayoutIds={},this.layoutIteratorsByType={}}return a.Messages={layoutNotFoundForGroup:function(a,b){return new vb.Message("layoutNotFoundForGroup","No layout found for a group",null,{groupIndex:a,groupSpec:b})}},a.prototype.disallowLayout=function(a){return this.disallowedLayoutIds[a]=!0},a.prototype.isAllowed=function(a){return!(this.disallowedLayoutIds[a]===!0)},a.prototype.getPicksArray=function(){var a,b;return function(){var c,d;c=this.picks,d=[];for(a in c)b=c[a],d.push(b);return d}.call(this)},a.prototype.pickDefaultLayouts=function(a,b){var c,d,e,f;for(c in a){if(d=a[c],e=null!=d.prechosenLayout?d.prechosenLayout:null!=(f=this._pickDefaultLayout(d,b))?f:this._pickAdaptiveLayout(d,b),null==e)throw new Error("null layout in pickDefaultLayouts");e=e.clone(),this.picks[c]=new Ca(d,e,[])}return this},a.prototype._pickDefaultLayout=function(a,b){var c;return c=Aa.toDefaultType(a.pageSpec.type),this._pickOrderedLayout(a,c,b)},a.prototype._pickAdaptiveLayout=function(a,b){var c;return c=Aa.toAdaptiveType(a.pageSpec),this._pickOrderedLayout(a,c,b)},a.prototype._pickOrderedLayout=function(a,b,c){var d;return c=a.pageSpec.isCoverPageType()?c:null,d=null!=a.month?this._getLayoutIterator(a,b,c).source[a.month-1]:this._getLayoutIterator(a,b,c).next(),d=this._fixSpineLayoutPick(a,d)},a.prototype._getLayoutIterator=function(a,b,c){var d,e,f,g,h=this;return null==c&&(c=null),d=null!=c?""+b.xmlName+"_"+c:b.xmlName,null!=this.layoutIteratorsByType[d]?this.layoutIteratorsByType[d]:(f=null!=(g=a.style)?g:this.style,e=f.getLayoutsForType(b),e=e.filter(function(a){return h._layoutFilter(a,c)}),this.layoutIteratorsByType[d]=new vb.ArrayIterator(e,!0))},a.prototype._layoutFilter=function(a,b){return(null==b||a.attributes.formFactor===b)&&(!!this._layoutAttributesMatchFilter(a)&&(!!this._layoutStylingFilter(a)&&!!this._layoutCategoryFilter(a)))},a.prototype._layoutAttributesMatchFilter=function(a){return!(null!=this.constraintSet.layoutAttributesMatchConstraint&&!this.constraintSet.layoutAttributesMatchConstraint.matchesLayout(a))},a.prototype._layoutStylingFilter=function(a){return!(null!=this.constraintSet.layoutStylingConstraint&&!this.constraintSet.layoutStylingConstraint.matchesLayout(a))},a.prototype._layoutCategoryFilter=function(a){return!(null!=this.constraintSet.layoutCategoryConstraint&&!this.constraintSet.layoutCategoryConstraint.matchesLayout(a))},a.prototype.pickAutofillLayouts=function(a,b){var c,d,e,f,g,h,i,j,k;g=this._newLayoutUsage(a.length),f=this._newLayoutLookup(this.style,g,b),i=function(a){if(null!=(null!=a?a.layout:void 0))return g.recordUsage(a.layout)};for(c in a)d=a[c],null!=this.picks[c]?i(this.picks[c]):d.pageSpec.type!==vb.PageTypeEnum.CALENDAR_GRIDPAGE||this.style.allowsAutofill?(j=f,null!=d.style&&(j=this._newLayoutLookup(d.style,g,b)),h=this._pickOneLayout(j,c,d,g),this.picks[c]=h,i(h)):(e=null!=(k=this._pickDefaultLayout(d,b))?k:this._pickAdaptiveLayout(d,b),h=new Ca(d,e.clone(),d.images),this.picks[c]=h,i(h));return this},a.prototype._fixSpineLayoutPick=function(a,b){return null!=a&&null!=b&&a.pageSpec.type===vb.PageTypeEnum.SPINEPAGE?_a.getAppropriateLayout(this.style,this.productSpec,this.pageCount,b):b},a.prototype._adjustLayoutFormFactorForLayflatBook=function(a){return xa.stripInvalidLayoutIdComponents(a)},a.prototype._newLayoutUsage=function(a){return new Ia(a)},a.prototype._newLayoutLookup=function(a,b,c){return c=this._adjustLayoutFormFactorForLayflatBook(c),new Ba(a,this.constraintSet,b,c)},a.prototype._pickOneLayout=function(b,c,d,e){var f,g,h,i,j;return f=this._getLayoutLookupHints(c,d),h=b.pickLayout(d,d.imageAreaCount,f),h.layout=this._fixSpineLayoutPick(d,h.layout),i=new Ca(d,null,h.unassignedImages),null!=h.layout?(g=h.layout.clone(),(null!=(j=h.layout)?j.isFlippable():void 0)&&e.getNonFlippedUsageCount(h.layout)>e.getFlippedUsageCount(h.layout)&&(g.flipPending=!0),null!=h.unassignedImages&&(g.unassignedImages=h.unassignedImages),i.layout=g):i.error=a.Messages.layoutNotFoundForGroup(c,d),i},a.prototype._getLayoutLookupHints=function(a,b){var c,d,e,f,g=this;return d=new La,e=this.picks[parseInt(a)-1],null!=(null!=e&&null!=(f=e.layout)?f.id:void 0)&&(d.discourage[e.layout.id]=!0),d.disallow=sb.clone(this.disallowedLayoutIds),d.ignoreOrientation=b.ignoreOrientationOnImageAssignment,b.pageSpec.type===vb.PageTypeEnum.CALENDAR_GRIDPAGE&&(d.layoutTypeFilter=function(a){return a.type===Aa.CORE_GRID}),c=function(a){return g._layoutCategoryFilter(a)&&g._layoutStylingFilter(a)&&g._layoutAttributesMatchFilter(a)},null==this.constraintSet.layoutCategoryConstraint&&null==this.constraintSet.layoutStylingConstraint&&null==this.constraintSet.layoutAttributesMatchConstraint||(d.filter=c),d},a}(),Ca=function(){function a(a,b,c){this.groupSpec=a,this.layout=null!=b?b:null,null==c&&(c=[]),this.unassignedImages=c.concat(),this.error=null}return a}(),La=function(){function a(){this.discourage={},this.disallow={}}return a}(),Ea=function(){function a(a){var b,c,d,e,f,g,h,i,j,k;this.layout=a.layout,this.groupSpec=a.groupSpec,d=a.content,c=a.assets,f=a.style,this.textHandler=a.textHandler,g=a.useDefaultTextStyle,e=a.preferUserText,b=a.applyFrames,this.projectTypeEnum=a.projectTypeEnum,this.layoutRequestPool=a.layoutRequestPool,this.options=a.options,vb.ArgumentValidation.assertObjectIsSpecified(this.layout,"layout"),vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),this.style=null!=(h=null!=(i=this.groupSpec)?i.style:void 0)?h:f,vb.ArgumentValidation.assertObjectIsSpecified(this.style,"@style"),this.assets=c||{},this.useDefaultTextStyle=g||!1,this.incomingContent=d,this.applyFrames=b||!1,this.preferUserText=e||!1,this.pageTypePopulation={},this.pageTypePopulation[vb.PageTypeEnum.CALENDAR_GRIDPAGE]=v,this.replaceTextContent=(null!=(j=this.options)?j.replaceTextContent:void 0)||!1,this.conversion=(null!=(k=this.options)?k.conversion:void 0)||!1}return a.start=function(b){var c;return c=new a(b),c.start()},a.prototype.start=function(){var a,b,c,d,e,f=this;return this.layout.content=JSON.parse(JSON.stringify(this.incomingContent)),this._shouldResizeLayoutFor8x11Calendar()?(c=new vb.Promise,a=Aa.getValue(this.layout.type),e=ua.knownSizes["8x11_CALENDAR"].inner,b={enableTextWrapRecalculation:!1},d=Wa.create({layoutId:this.layout.id,layoutContent:this.layout.content,layoutListType:a,targetDimens:e,textHandler:this.textHandler,options:b}),d.start().then(function(a){return f.layout.content=a,f._populateAndFinishAssets().then(function(a){return c.setResult(a)})}),c):this._populateAndFinishAssets()},a.prototype._populateAndFinishAssets=function(){var a,b,c,d,e,f,g;return f=new vb.Promise,this._populateImageAssignments(),a=[],f={},d=vb.PageTypeEnum.identifyTypeByLayoutId(this.layout.id),null!=(e=this.pageTypePopulation[d])?(f=e.start({layout:this.layout,groupSpec:this.groupSpec,style:this.style,textHandler:this.textHandler,layoutRequestPool:this.layoutRequestPool,options:this.options}),c=this.layout.content.assets.filter(function(a){return vb.LayoutGraphicAssetTypeEnum.isBackground(a)})[0],null!=(null!=(g=this.assets)?g.backgrounds:void 0)&&this.assets.backgrounds.length>0?(b=this.assets.backgrounds[0],this._isBackgroundRatioChange(b)&&(b=this._changeBackgroundAspectRatio(b))):b=this._chooseBackground()||this.assets.defaultBackground.getDefaultForSurfaceType(this.layout.type.surface),null!=c&&null==c.assetReference&&null!=b&&this._applyBackground(c,b)):f=this._finishAssetPopulation(a),this._unassignBrokenImageAssignments(a),f},a.prototype._shouldResizeLayoutFor8x11Calendar=function(){return this.projectTypeEnum===vb.ProjectTypeEnum.MATISSE_CALENDAR&&"8x11"===this.style.sizeId},a.prototype._populateImageAssignments=function(){var a,b,c,d,e;d=this.layout.imageAreaAssignments,e=[];for(c in d){b=d[c];try{e.push(b.populateImageAssignment(this.layout.findAssetDetailsForImageArea(c)))}catch(b){a=b,e.push(this.layout.populationErrors.push(new oa.Messages.failedImageAssignment(c,this.layout.id)))}}return e},a.prototype._finishAssetPopulation=function(a){var b,c,d,e,f,g,h,i,j,k;d=null!=(g=null!=(h=this.assets.backgrounds)?h.slice(0):void 0)?g:[],f=[],i=this.layout.content.assets;for(e in i)b=i[e],b.assetType===vb.LayoutAssetTypeEnum.IMAGE?(this._applyImageAreaAttributes(b),null!=(null!=(j=b.imageAssignment)&&null!=(k=j.imageReference)?k.id:void 0)&&(this._applyFrameToImageArea(b),a.push(""+b.container.id+"-"+b.imageAssignment.imageReference.id))):b.assetType===vb.LayoutAssetTypeEnum.TEXT?f.push(b):vb.LayoutGraphicAssetTypeEnum.isBackground(b)&&(d.length>0?c=this._chooseBackground(b,d.shift()):null==c&&(c=this._chooseBackground(b)),null!=c&&this._applyBackground(b,c),this.layout.content.type===ra.SPREAD_PAGE&&this._fixSpreadBackgroundPositon(b));return null!=this.assets.audio&&this.layout.content.assets.push(this.assets.audio),this._populateText(f)},a.prototype._applyFrameToImageArea=function(a){var b,c;if(this.applyFrames&&null!=this.assets.imageIdToFrameMap)return null!=(c=this.assets.imageIdToFrameMap[a.imageAssignment.imageReference.id])&&null!=(b=this.textHandler.globalContent.getRGBColor(c.color))?(a.container.borderStroke=c.pointSize,a.container.borderColor=c.color,a.container.objectStyle=c.id,a.container.borderColorRGB=b,a.container.frameOwnedByUser="true"):void 0},a.prototype._unassignBrokenImageAssignments=function(a){var b,c,d,e,f;if(a.length>0){e=this.layout.imageAreaAssignments,f=[];for(d in e)c=e[d],b=""+d+"-"+c.image.id,wb.call(a,b)<0?(this.layout.unassignedImages.push(c.image),f.push(delete this.layout.imageAreaAssignments[c.imageAreaId])):f.push(void 0);return f}},a.prototype._chooseBackground=function(a,b){var c,d,e,f,g,h,i,j;return null!=(null!=(h=this.groupSpec)?h.background:void 0)?this.groupSpec.background:null!=(null!=(i=this.groupSpec)?i.prechosenBackgroundId:void 0)&&(d=this.style.getBackgroundById(this.groupSpec.prechosenBackgroundId),null!=d)?d:this.layout.isIdeaPage()&&(null!=a&&null!=(j=a.assetReference)?j.assetId:void 0)&&!this.conversion&&(c=this._getBackgroundFromAssetId(a.assetReference),null!=c)?c:null!=b?(this._isBackgroundRatioChange(b)&&null==this.style.getBackgroundById(b.id)&&(b=this._changeBackgroundAspectRatio(b),(f=null!=b?b.bgImage:void 0)&&(e=vb.Project.extractCropFromImageAssignment(f),g=vb.Project.extractImageSize(f),null!=e&&null!=g&&vb.CropUtil.recalculateImageReferenceCrop(g,e,a,f))),b):this.layout.isIdeaPage()||Aa.isDebossType(this.layout.type)?null:this.assets.defaultBackground.getDefaultForSurfaceType(this.layout.type.surface)},a.prototype._getBackgroundFromAssetId=function(a){var b;return b=this.style.getBackgroundById(a.assetId),!b&&a.assetId&&a.version&&a.sourceUrl&&(b=new o(a.assetId,a.version,a.sourceUrl)),b},a.prototype._isBackgroundRatioChange=function(a){var b,c;return c=this.layout.aspectRatio,b=a.aspectRatio,c!==b},a.prototype._changeBackgroundAspectRatio=function(a){var b,c;return null==a.bgImage&&(b=a.getIdForAspectRatio(this.layout.aspectRatio),null!=(c=this.style.getBackgroundById(b)))?c:a.toAspectRatio(this.layout.aspectRatio)},a.prototype._applyImageAreaAttributes=function(b){b.imageRectangle=a._createImageRectangle(b.container)},a._createImageRectangle=function(a){return{height:a.height,rotation:a.rotation,rotationLimit:a.rotationLimit,verticalScale:a.verticalScale,width:a.width,xOffset:a.xOffset,yOffset:a.yOffset}},a.prototype._applyBackground=function(a,b){a.assetReference={assetId:b.id,version:b.version,sourceUrl:b.swfUrl,assetType:b.type,isFlippable:"false"},a.imageAssignment=b.bgImage},a.prototype._fixSpreadBackgroundPositon=function(a){var b,c,d,e;return b=parseFloat(this.layout.content.width)/2,c=parseFloat(a.container.xOffset)<0?b-parseFloat(a.container.width):b,null!=(d=a.container)&&(d.xOffset=c.toString()),null!=(e=a.imageRectangle)?e.xOffset=c.toString():void 0},a.prototype._populateText=function(a){var b,c,d,e,f,g,h,i,j;return h=this._applyPredefinedText(a),g=h[0],c=h[1],i=this._transferTextBySeqNum(g),f=i[0],e=i[1],j=this._transferAvailableText(f),d=j[0],b=j[1],this._applyDefaultText(d),vb.Promise.join(c.concat(e,b))},a.prototype._applyPredefinedText=function(a){var b,c,d;return null!=(null!=(d=this.groupSpec)?d.populateWithText:void 0)&&(c=[],b=null,a.forEach(function(a){return null===b&&"1"===a.seqNum.toString()?b=a:c.push(a)}),null!=b)?[c,[this.textHandler.applyTextString(b,this.groupSpec.populateWithText,this.style)]]:[a,[]]},a.prototype._transferTextBySeqNum=function(a){var b=this;return this._findAndTransfer(a,function(a){return mb.findTextForAsset(a,b.assets.textAreaContentMap,b.preferUserText)})},a.prototype._transferAvailableText=function(a){var b=this;return this._findAndTransfer(a,function(a){return mb.findAnyTextForAsset(a,b.assets.textAreaContentMap)})},a.prototype._findAndTransfer=function(a,b){var c,d,e,f,g,h;for(f=[],e=[],g=0,h=a.length;g<h;g++)c=a[g],null!=(d=b(c))?e.push(this._transferTextToAsset(d,c)):f.push(c);return[f,e]},a.prototype._transferTextToAsset=function(a,b){var c,d=this;return this.useDefaultTextStyle&&this.textHandler.applyTextStyle(a,this.style),c=this.replaceTextContent?this.textHandler.replaceTextContent(b,a,this.style):this.textHandler.applyTextContent(b,a),c.then(function(a,b){if(null!=b)return d.layout.populationErrors.push(b)}),c},a.prototype._applyDefaultText=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)b=a[c],this.textHandler.applyDefaultText(b,this.style);return[]},a}(),Ia=function(){function a(a){this.groupCount=a,vb.ArgumentValidation.assertNumberIsPositive(this.groupCount,"groupCount"),this.maxUsageRatio=.2}var b;return a.prototype.isWithinUsageThreshold=function(a){var b;return b=this.getUsageCount(a),null==b||b/this.groupCount<=this.maxUsageRatio},a.prototype.recordUsage=function(a){var c,d;return d=a.type.xmlName,c=this[d]||(this[d]=new b(d)),c.recordUsage(a)},a.prototype.getFlippedUsageCount=function(a){var b,c;return null!=(b=null!=(c=this[a.type.xmlName])?c[a.id]:void 0)?b.numFlippedUses:0},a.prototype.getNonFlippedUsageCount=function(a){var b,c;return null!=(b=null!=(c=this[a.type.xmlName])?c[a.id]:void 0)?b.numNonFlippedUses:0},a.prototype.getUsageCount=function(a){var b,c;return null!=(b=null!=(c=this[a.type.xmlName])?c[a.id]:void 0)?b.numFlippedUses+b.numNonFlippedUses:0},b=function(){function a(a){this.type=a}return a.prototype.recordUsage=function(a){var b;return b=this.getUsageCount(a),a.flippedLayout||a.flipPending?b.numFlippedUses++:b.numNonFlippedUses++,this[a.id]=b},a.prototype.getUsageCount=function(a){return this[a.id]||{numFlippedUses:0,numNonFlippedUses:0}},a}(),a}(),db={parse:function(a){var b,c,d,e;d={spreadBackgrounds:{},originalTextAreas:[]},e=a.assets;for(c in e)b=e[c],b.assetType===vb.LayoutAssetTypeEnum.TEXT?db.parseTextArea(b,d):vb.LayoutGraphicAssetTypeEnum.isBackground(b)&&db.parseBackground(b,d);return d},parseTextArea:function(a,b){return null!=mb.copyTextAreaContentToContentMap(a,b)&&b.originalTextAreas.push(a),b},parseBackground:function(a,b){var c,d;return c=a.assetReference,null!=c&&(d=new o(c.assetId,c.version,c.sourceUrl),null==b.spreadBackgrounds.left?b.spreadBackgrounds.left=d:b.spreadBackgrounds.right=d),b},removeAssignedTextAssets:function(a){var b;return b=[],null!=a.textAreaContentMap&&(b=a.originalTextAreas.filter(function(b){return null!=a.textAreaContentMap[b.seqNum]})),a.originalTextAreas=b},halve:function(a){var b,c,d,e,f,g,h,i,j,l;for(c=parseFloat(a.width)/2,d={left:new k,right:new k},j=a.assets,f=0,h=j.length;f<h;f++)e=j[f],b=JSON.parse(JSON.stringify(e)),this._selectSide(b,c,d).push(b),vb.LayoutGraphicAssetTypeEnum.isBackground(b)&&this._recenterBackground(b,c);for(l=d.right.assets,g=0,i=l.length;g<i;g++)b=l[g],vb.LayoutGraphicAssetTypeEnum.isBackground(b)||this._repositionRightAsset(b,c);return this._copyPageNumber(d.left,Pa.PAGE_NUM_L,d.right,1),this._copyPageNumber(d.right,Pa.PAGE_NUM_R,d.left,2),{left:d.left.assets,right:d.right.assets}},_selectSide:function(a,b,c){var d;return d=vb.TransformUtil.getAbsoluteCenter(a.container),d.x<b?c.left:c.right},_recenterBackground:function(a,b){return this._repositionAsset(a,(b-parseFloat(a.container.width))/2)},_repositionRightAsset:function(a,b){return this._repositionAsset(a,parseFloat(a.container.xOffset)-b)},_repositionAsset:function(a,b){var c;return a.container.xOffset=""+b,null!=(c=a.imageRectangle)?c.xOffset=""+b:void 0},_copyPageNumber:function(a,b,c,d){var e,f,g,h;for(h=a.assets,f=0,g=h.length;f<g;f++)if(e=h[f],e.paraStyle===b)return c.assets.splice(d,0,JSON.parse(JSON.stringify(e))),!0;return!1}},k=function(){function a(){this.counter=new Za,this.assets=[]}return a.prototype.push=function(a){return this.counter.applyNextNumToAsset(a),this.assets.push(a)},a}(),e=function(){function a(a,b,c,d,e,f){var g,h,i,j,k;this.id=a,this.pageSpec=c,this.originalTextAreas=d,this.audioAsset=e,this.constraintSet=null!=f?f:null,this.errors=[],this.images=[],this.imageAreaCount=b.length,this.textAreaCount=(null!=(i=this.originalTextAreas)?i.length:void 0)||0;for(g in b)h=b[g],this._parseOriginalImage(g,h);this.lpsCount=this._findLpsCount(this.images),this.existingPageCrop={},this.containerMap={},this.prechosenLayout=null,this.prechosenLayoutId=null,this.style=null,this.background=null,this.prechosenBackgroundId=null,this.populateWithText=null,this.pageSpec.isSpinePageType()||(null!=(j=this.constraintSet)&&null!=(k=j.orientationConstraint)?k.fidelity:void 0)===Ma.RELAXED?this.ignoreOrientationOnImageAssignment=!0:this.ignoreOrientationOnImageAssignment=!1}return a.Messages={invalidImage:function(a,b){return new vb.Message("AdaptiveGroupSpec.invalidImage","Ignoring an invalid image",null,{imageIndex:a,imageId:b.id,causedBy:b.errors})}},a.create=function(b){var c,d,e,f,g,h,i,j,k;return f=b.id,g=b.images,h=b.pageSpec,i=b.pageType,k=b.textAreas,e=b.existingPageCrop,c=b.audioAsset,d=b.constraintSet,null==h&&(h=new Oa(i)),null==g&&(g=[]),j=new a(f,g,h,k,c,d),null!=e&&(j.existingPageCrop=e),j},a.prototype._findLpsCount=function(a){var b,c,d,e;for(c=new na(0,0,0),d=0,e=a.length;d<e;d++)b=a[d],c.incrementFromImage(b);return c},a.prototype._parseOriginalImage=function(b,c){var d;if(null!=c)return d=c.constructor===vb.Image?c:vb.Image.createFromImage(c),d.errors.length>0?this.errors.push(a.Messages.invalidImage(b,d)):(vb.ImageUtil.setProjectImageProperties(c,d),this.images.push(d)),d},a}(),g=function(){function a(a,b,c,d){this.productSize=c,this.layoutFormFactor=d,this.styleId=vb.ArgumentValidation.parseAndAssertNumber(a,"AdaptiveProductSpec.styleId"),this.styleVersion=vb.ArgumentValidation.parseAndAssertNumber(b,"AdaptiveProductSpec.styleVersion"),vb.ArgumentValidation.assertStringIsNotEmpty(this.productSize,"AdaptiveProductSpec.productSize"),vb.ArgumentValidation.assertStringIsNotEmpty(this.layoutFormFactor,"AdaptiveProductSpec.layoutFormFactor"),this.styleName=null}return a.prototype.getBinding=function(){return wa.parseBinding(this.layoutFormFactor)},a.prototype.getCoverType=function(){return wa.parseCover(this.layoutFormFactor)},a}(),o=function(){function a(b,c,d,e){this.id=b,this.version=c,this.swfUrl=d,this.bgImage=null!=e?e:null,this.type="background",this.aspectRatio=a._identifyAspectRatio(this.id)}return a.SQUARE="_sq_",a.RECTANGLE="_rec_",a._identifyAspectRatio=function(b){return b.indexOf(a.SQUARE)>-1?a.SQUARE:b.indexOf(a.RECTANGLE)>-1?a.RECTANGLE:void 0},a.prototype.getIdForAspectRatio=function(b){return b===this.aspectRatio?this.id:b===a.SQUARE||b===a.RECTANGLE?this.id.replace(this.aspectRatio,b):null},a.prototype.toBookSizeID=function(b){var c;return c=null!=b?b.split("x"):void 0,null==(null!=c?c[0]:void 0)||null==(null!=c?c[1]:void 0)||2!==c.length?this.clone():c[0]===c[1]?this.toAspectRatio(a.SQUARE):this.toAspectRatio(a.RECTANGLE)},a.prototype.toAspectRatio=function(b){var c,d;return b===this.aspectRatio?this.clone():null!=(c=this.getIdForAspectRatio(b))?(d=this.swfUrl.replace(this.aspectRatio,b),new a(c,this.version,d,this.bgImage)):null},a.prototype.clone=function(){return new a(this.id,this.version,this.swfUrl,this.bgImage)},a}(),x=function(){function a(){this.targetGroupCount=null,this.targetImageCount=0,this.maxGroupSize=Y.DEFAULT_MAX_SIZE,this.problems=[]}return a.Messages={unattainableDensity:function(a,b){return new vb.Message("unattainableDensity","Unattainable density: "+a+" images provided, but only "+b+" images can be accommodated")},conflictingGoals:function(a,b,c){return new vb.Message("conflictingGoals","Conflicting goals: LinearDensityConstraint specifies a target group count of "+a+", "+("but GroupCountConstraint has a range of ("+b+","+c+")"))}},a.DEFAULT_DENSITY=3.5,a.create=function(b,c){var d,e,f,g,h,i,j,k;return d=new a,g=c.linearDensityConstraint,e=c.groupCountConstraint,f=c.groupSizeConstraint,null!=f&&(d.maxGroupSize=f.max),d.targetImageCount=a.getMaxImageCount(b.length,e,d.maxGroupSize),d.targetImageCount<b.length&&d.problems.push(a.Messages.unattainableDensity(b.length,d.targetImageCount)),null!=g&&(j=Math.min(d.maxGroupSize,g.getTargetDensity(d.targetImageCount)),k=d.targetImageCount/j,null!=e&&(k<e.min||k>e.max)&&(k=Math.min(e.max,Math.max(e.min,k)),d.problems.push(a.Messages.conflictingGoals(k,e.min,e.max))),d.targetGroupCount=k),null==d.targetGroupCount&&null!=e&&(h=(e.min+e.max)/2,i=d.targetImageCount/d.maxGroupSize,k=Math.max(h,i),d.targetGroupCount=k),null==d.targetGroupCount&&null!=f&&(d.targetGroupCount=Math.ceil(b.length/f.max)),null==d.targetGroupCount&&(d.targetGroupCount=b.length/a.DEFAULT_DENSITY),d},a.getMaxImageCount=function(a,b,c){return null!=b?Math.min(a,b.max*c):a},a}(),N=function(){function a(a,b,c,d){this.id=a,this.weight=b,this.pointSize=c,this.color=d}return a.Constants={validWeights:["fine","medium","heavy"]},a.createFromIdAndSize=function(b,c){var d,e,f;return null==b?null:(e=b.split("_"),null!=e&&e.length<5?null:(f=e[3],d=e[4],""===d||wb.call(a.Constants.validWeights,f)<0?null:new a(b,f,O.getPointSize(c,f),"id_"+d)))},a}(),Sa={create:function(a,b,c){return{fine:a,medium:b,heavy:c}}},O={sizes_5x7:Sa.create("0.5","2","4"),sizes_7x9:Sa.create("1","3","7"),sizes_8x8:Sa.create("1","3","7"),sizes_10x10:Sa.create("2","5","10"),sizes_8x11:Sa.create("2","5","10"),sizes_12x12:Sa.create("2","5","10"),sizes_11x14:Sa.create("2","5","10"),getPointSize:function(a,b){return/5x7/.test(a)?O.sizes_5x7[b]:/7x9/.test(a)?O.sizes_7x9[b]:/8x8/.test(a)?O.sizes_8x8[b]:/10x10/.test(a)?O.sizes_10x10[b]:/8x11/.test(a)?O.sizes_8x11[b]:/12x12/.test(a)?O.sizes_12x12[b]:/11x14/.test(a)?O.sizes_11x14[b]:O.sizes_10x10.medium}},Z=function(){function a(a){this._map=null!=a?a:{},this.total=0,this.keys=[]}return a.prototype.increment=function(a){return void 0===this._map[a]&&(this._map[a]=0,this.keys.push(a)),this._map[a]+=1,this.total+=1},a.prototype.get=function(a){return this._map[a]},a}(),$=function(){function a(a){this.original=a,this.id=this.original.id,this.filename=this.original.filename||"",this.captureTime=this.original.captureTime,this.captureTimeSeconds=this._parseCaptureTime(this.original.captureTime),this.errors=[],this._checkForErrors()}return a.Errors={missingField:function(a){return"Missing field: "+a}},a.BOTH_UNDATED="both-undated",a.ONE_UNDATED="one-undated",a.ALL_SEPARATE_GROUPS="all-separate-groups",a.GROUP_EVERYTHING="group-everything",a.prototype._parseCaptureTime=function(a){var b,c;if(c=void 0,null!=a)try{c=vb.DateUtil.secondsFromISOUTCDate(this.original.captureTime)}catch(a){b=a}return c},a.prototype.hasDate=function(){return null!=this.captureTimeSeconds},a.prototype._checkForErrors=function(){if(null==this.id)return this.errors.push(a.Errors.missingField("id")),this.id=""},a.bothUndated=function(a,b){return!a.hasDate()&&!b.hasDate()},a.oneUndated=function(a,b){var c;return c=0,a.hasDate()&&(c+=1),b.hasDate()&&(c+=1),1===c},a.eitherUndated=function(a,b){return!a.hasDate()||!b.hasDate()},a.captureTimeInterval=function(b,c){return a.eitherUndated(b,c)?a.bothUndated(b,c)?a.BOTH_UNDATED:a.ONE_UNDATED:c.captureTimeSeconds-b.captureTimeSeconds},a}(),_=function(){function a(b,c,d,e){this.id=b,this.width=c,this.height=d,this.seqNum=e,this.orientation=a.getOrientation(this.width,this.height)}return a.getOrientation=function(a,b){var c;return c=a/b,.9<=c&&c<=1.1?vb.OrientationEnum.SQUARE:a>b?vb.OrientationEnum.LANDSCAPE:vb.OrientationEnum.PORTRAIT},a}(),ea=function(){function a(a){this.images=a,vb.ArgumentValidation.assertArrayIsNotEmpty(a,"images")}return a.prototype.averageCaptureTime=function(){var a,b,c,d,e,f;for(b=0,c=0,f=this.images,d=0,e=f.length;d<e;d++)a=f[d],a.hasDate()&&(b++,c+=a.captureTimeSeconds);return b>0?Math.round(c/b):0},a}(),fa=function(){function a(a,b,c){this.groups=a,this.unusedImages=null!=b?b:[],this.warnings=null!=c?c:[],vb.ArgumentValidation.assertObjectIsSpecified(a,"groups")}return a}(),ja=function(){function a(a){this.histogram=a}return a.create=function(b){var c,d,e,f,g,h,i;for(f=new Z,d=0,h=0,i=b.length;h<i&&(c=b[h],!(d+1>=b.length));h++)g=b[d+1],d+=1,e=$.captureTimeInterval(c,g),f.increment(e);return new a(f)},a.prototype.getSortedIntervalList=function(){var a;return a=this.histogram.keys.slice(),a.sort(function(a,b){return a===$.BOTH_UNDATED||b===$.ONE_UNDATED?-1:b===$.BOTH_UNDATED||a===$.ONE_UNDATED?1:vb.SortUtil.compare(a,b)}),a},a.prototype.getIntervalToGroupCountMap=function(){var a,b,c,d,e,f;for(c=this.getSortedIntervalList(),d={},a=this.histogram.total+1,e=0,f=c.length;e<f;e++)b=c[e],a-=this.histogram.get(b),d[b]=a;return d},a}(),ka=function(){function a(a){var b;this.images=a,vb.ArgumentValidation.assertArrayLengthAtLeast(a,2,"images"),this.intervals=function(){var a,c,d;for(d=[],b=a=0,c=this.images.length-1;0<=c?a<c:a>c;b=0<=c?++a:--a)d.push(new ia(this.images,b,b+1));return d}.call(this),this.sortDescending()}return a.prototype.sortDescending=function(){return this.intervals.sort(function(a,b){return a.distance<b.distance?1:b.distance<a.distance?-1:0})},a.hasDatedImage=function(a){var b,c,d;for(c=0,d=a.length;c<d;c++)if(b=a[c],b.hasDate())return!0;return!1},a.findMaxInterval=function(b){var c,d,e,f,g,h;if(vb.ArgumentValidation.assertArrayLengthAtLeast(b,2,"images"),f=0,a.hasDatedImage(b))for(e=-1,d=g=1,h=b.length;1<=h?g<h:g>h;d=1<=h?++g:--g)c=ia.getDistance(b[d-1],b[d]),c>e&&(e=c,f=d);else f=Math.ceil(b.length/2);return new ia(b,f-1,f)},a}(),ia=function(){function a(b,c,d){this.leftIndex=c,this.rightIndex=d,this.left=b[c],this.right=b[d],this.distance=a.getDistance(this.left,this.right)}return a.getDistance=function(a,b){return null!=b.captureTimeSeconds&&null!=a.captureTimeSeconds?Math.abs(b.captureTimeSeconds-a.captureTimeSeconds):Number.MAX_VALUE},a}(),na=function(){function a(a,b,c){this.l=null!=a?a:0,this.p=null!=b?b:0,this.s=null!=c?c:0,this.count=this.l+this.p+this.s}return a.Messages={unrecognizedOrientation:function(a){return new Message("unrecognizedOrientation","Unrecognized orientation: "+a)}},a.prototype.incrementFromImage=function(a){return a.croppedWidth>a.croppedHeight?this.l+=1:a.croppedWidth<a.croppedHeight?this.p+=1:this.s+=1,this.count+=1},a.prototype.incrementFromEnum=function(b){switch(b){case vb.OrientationEnum.LANDSCAPE:this.l+=1;break;case vb.OrientationEnum.PORTRAIT:this.p+=1;break;case vb.OrientationEnum.SQUARE:this.s+=1;break;default:throw a.Messages.unrecognizedOrientation(b).toError()}return this.count+=1},a.prototype.equals=function(a){return this.l===a.l&&this.p===a.p&&this.s===a.s},a}(),oa=function(){function a(a,b,c,d,e,f,g){this.id=a,this.version=b,this.sdjsonUrl=c,this.lpsCount=d,this.type=e,this.attributes=null!=f?f:pa.create(),this.imageAreas=null!=g?g:[],this.imageAreaAssignments={},this.unassignedImages=[],this.content=null,this.populationErrors=[],this.groupSpec=null,this.stockCover=null,this.customLayout=!1,this.flipPending=!1,this.flippedLayout=!1,this.aspectRatio=this._identifyAspectRatio()}return a.Messages={sdjsonNotYetFetched:new vb.Message("sdjsonNotYetFetched","Layout SDJSON has not been fetched"),failedImageAssignment:function(a,b){return new vb.Message("failedImageAssignment","Unable to assign image to image area, id="+a+", of layout, id="+b,vb.LogLevel.INFO,{
imageAreaId:a,layoutId:b})}},a.prototype._identifyAspectRatio=function(){var a,b;return b=/(\d+)x(\d+)/i,null!=(a=b.exec(this.id))&&a[1]===a[2]?o.SQUARE:o.RECTANGLE},a.prototype.clone=function(){var b,c,d;b=Object.create(a.prototype);for(c in this)d=this[c],null!=d&&this._isWritableProperty(c)?b[c]=JSON.parse(JSON.stringify(d)):"function"!=typeof d&&(b[c]=d);return b},a.prototype._isWritableProperty=function(a){return"content"===a||"populationErrors"===a||"stockCover"===a},a.prototype.toExternal=function(){var a,b,c,d,e;c={},e=this.imageAreaAssignments;for(d in e)a=e[d],null!=a?c[d]=a.image.original:c[d]=null;return b={id:this.id,version:this.version,sdjsonUrl:this.sdjsonUrl,customLayout:this.customLayout,flippedLayout:this.flippedLayout,imageAreaAssignments:c,unassignedImages:this.unassignedImages,imageAreas:this.imageAreas,content:this.content,originalType:this.type,attributes:this.attributes},b.type=Aa.toPageType(this.type),b},a.prototype.isIdeaPage=function(){return this.attributes.layoutType===Ha.IDEA||this.id&&/_idea[a-z]+$/i.test(this.id)},a.prototype.isFlippable=function(){var a,b,c,d;return!(this.customLayout||!((null!=(c=this.type)?c.xmlName:void 0)||this.id))&&(b=/([a-zA-Z]+)$/.exec((null!=(d=this.type)?d.xmlName:void 0)||this.id),null!=b&&2===b.length&&(a=null!=b[0]?b[0].toLowerCase():null,!/spine|deboss|grid|dateCell/i.test(a)))},a.prototype.setImageAssignments=function(a){return this.imageAreaAssignments=a.assignments,this.unassignedImages=a.unassignedImages},a.prototype.setGroupSpec=function(a){return this.groupSpec=a},a.getImages=function(a){return ta.getImages(a)},a.prototype.findAssetDetailsForImageArea=function(b){if(null==this.content)throw a.Messages.sdjsonNotYetFetched.toError();return ta.findAssetByContainerId(b,this.content.assets)},a.fromPageJSON=function(b,c,d){var e,f,g,h;return null==d&&(d="raw"),f=ta.parseImageAreas(b.layout.assets),h=ta.calculateLPSFromImageAreas(f),e=ta.fabricateLayoutAttributes(b.layoutName,d),e.numTextAreas=ta.countTextAreas(b.layout.assets),g=new a(b.layoutName,b.layoutVersion,void 0,h,c,e,f),g.content=b.layout,g.customLayout="true"===b.customLayout||b.customLayout===!0,g},a.fromLayoutJSON=function(b,c,d,e){var f,g,h,i,j;return null==e&&(e=null),g=ta.parseImageAreas(d.assets),j=ta.calculateLPSFromImageAreas(g),i=ta.identifyLayoutTypeFromId(b,e),f=ta.parseLayoutAttributes(b,d),h=new a(b,c,void 0,j,i,f,g),h.content=d,h},a}(),pa={create:function(a,b,c,d){return{formFactor:a||"",isFlippable:b||!1,layoutType:c||"",numTextAreas:d||0}},createFromStyleContent:function(a){var b,c;return b=function(a){return"true"===(null!=a?a.toString().toLowerCase():void 0)},c=function(a){var b;return b=parseFloat(a,10),isNaN(b)?0:b},{formFactor:(null!=a?a.formFactor:void 0)||"",accomsLowResImages:b(null!=a?a.accomsLowResImages:void 0),isFlippable:b(null!=a?a.isFlippable:void 0),isFullBleed:b(null!=a?a.isFullBleed:void 0),isSymmetric:b(null!=a?a.isSymmetric:void 0),layoutType:(null!=a?a.layoutType:void 0)||"",numLPics:c(null!=a?a.numLPics:void 0),numPPics:c(null!=a?a.numPPics:void 0),numPics:c(null!=a?a.numPics:void 0),numSPics:c(null!=a?a.numSPics:void 0),numTextAreas:c(null!=a?a.numTextAreas:void 0),previewHeight:c(null!=a?a.previewHeight:void 0),previewWidth:c(null!=a?a.previewWidth:void 0),state:(null!=a?a.state:void 0)||"",usedForAutofill:b(null!=a?a.usedForAutofill:void 0)}}},Ja=function(){function a(a,b,c,d){var e;this.productSpec=b,this.warnings=null!=c?c:[],this.unassignedImages=null!=d?d:[],vb.ArgumentValidation.assertIsArray(a,"layouts"),vb.ArgumentValidation.assertObjectIsSpecified(this.productSpec,"productSpec"),vb.ArgumentValidation.assertIsArray(this.unassignedImages,"unassignedImages"),this.layouts=function(){var b,c,d;for(d=[],b=0,c=a.length;b<c;b++)e=a[b],null!=e?d.push(e.toExternal()):d.push(null);return d}()}return a}(),Oa=function(){function a(a,b){this.type=a,this.cardinality=null!=b?b:ra.ONE_PAGE,this._validateType(this.type),this._validateCardinality(this.cardinality)}return a.Messages={unknownType:function(a){return new vb.Message("unknownType","Unknown page type="+a)},unknownCardinality:function(a){return new vb.Message("unknownCardinality","Unknown page cardinality="+a)}},a.prototype.isCoverPageType=function(){return!(this.type===vb.PageTypeEnum.INNERPAGE||this.type===vb.PageTypeEnum.TITLEPAGE)},a.prototype.isSpinePageType=function(){return this.type===vb.PageTypeEnum.SPINEPAGE},a.prototype._validateType=function(b){if(vb.ArgumentValidation.assertStringIsNotEmpty(b,"value"),!vb.PageTypeEnum.isValid(b))throw a.Messages.unknownType(b).toError()},a.prototype._validateCardinality=function(b){if(!ra.isValid(b))throw a.Messages.unknownCardinality(b).toError()},a}(),Qa=function(){function a(a){var b,c,d;d=a.items,c=a.getOrientation,b=a.getDimensions,this._sortByRankedDimensionAscending=xb(this._sortByRankedDimensionAscending,this),this.getOrientation=null!=c?c:function(a){return a.orientation},this.getDimensions=null!=b?b:function(a){return{width:a.width,height:a.height}},this.landscapes=new hb,this.portraits=new hb,this.squares=new hb,this._initialize(d)}return a.prototype.hasPendingAssignment=function(){return!(this.landscapes.isEmpty()&&this.portraits.isEmpty()&&this.squares.isEmpty())},a.prototype.getPendingAssignments=function(){return[].concat(this.landscapes.stack,this.portraits.stack,this.squares.stack)},a.prototype._initialize=function(a){var b,c,d,e;if(null!=a)for(b=[].concat(a).sort(this._sortByRankedDimensionAscending),d=0,e=b.length;d<e;d++)switch(c=b[d],this.getOrientation(c)){case vb.OrientationEnum.LANDSCAPE:this.landscapes.push(c);break;case vb.OrientationEnum.PORTRAIT:this.portraits.push(c);break;case vb.OrientationEnum.SQUARE:this.squares.push(c)}},a.prototype._sortByRankedDimensionAscending=function(a,b){var c,d,e=this;return d=function(a){var b;return b=e.getDimensions(a),b.width*b.height},null!=a.ranking&&null!=b.ranking?(c=parseInt(b.ranking,10)-parseInt(a.ranking,10),0===c?vb.SortUtil.compare(d(a),d(b)):c):vb.SortUtil.compare(d(a),d(b))},a}(),Ta=function(){function a(a){this.type=a.type,this.sizeID=a.sizeID,this.product=a.product,this.pageCount=a.pageCount}return a.create=function(b){var c,d,e;switch(e=null,d=null,c=0,b.type){case vb.ProjectTypeEnum.PHOTOBOOK_30:d=b.book,null!=d&&(e=d.bookSizeID,c=d.pages.length+3);break;default:d=b.product,null!=d&&(e=d.sizeID,c=d.pages.length)}return new a({type:b.type,sizeID:e,product:d,pageCount:c})},a}(),ab=function(a){function b(a){this.variant=a,b.__super__.constructor.call(this,vb.PageTypeEnum.SPINEPAGE),this._identifyVariant(this.variant)}return zb(b,a),b.Messages={unknownVariant:function(a){return new vb.Message("unknownVariant","Unknown spine variant="+a)}},b.prototype._identifyVariant=function(a){switch(vb.ArgumentValidation.assertStringIsNotEmpty(a,"variant"),a){case bb.NARROW:return bb.NARROW;case bb.WIDE:return bb.WIDE;default:throw b.Messages.unknownVariant(a).toError()}},b}(Oa),hb=function(){function a(a){null==a&&(a=null),this.stack=[],null!=a&&(this.stack=this.stack.concat(a))}return a.prototype.push=function(a){return this.stack.push(a),a},a.prototype.pop=function(){return this.stack.length>0?this.stack.pop():null},a.prototype.peek=function(){var a;return a=this.stack.length,a>0?this.stack[a-1]:null},a.prototype.isEmpty=function(){return 0===this.stack.length},a.prototype.size=function(){return this.stack.length},a}(),ib=function(){function a(a,b,c,d,e){this.styleId=a,this.styleVersion=b,this.styleName=c,this.sizeId=d,this.logger=e,this._parseLayoutImageAreas=xb(this._parseLayoutImageAreas,this),this._parseLayoutImageAttributes=xb(this._parseLayoutImageAttributes,this),this._findUrlWithType=xb(this._findUrlWithType,this),this._parseLayout=xb(this._parseLayout,this),this._parseBackground=xb(this._parseBackground,this),this.layoutsByTypeName={},this.backgroundsByTypeName={},this.backgroundsById={},this.seamlessBackgroundsById={},this.layoutsById={},this.layouts=[],this.fontAssignments={},this.assetUrlHostPrefix=null,this.allowsAutofill=!0}return a.Constants={assetTypeLayout:"layout",assetTypeBackground:"background",urlTypeJSON:"json",urlTypeSWF:"swf"},a.Messages={styleMessage:function(a,b,c,d){return new vb.Message(a,b+(" style="+c+",v"+d))},invalidType:function(b,c,d,e){return a.Messages.styleMessage("invalidType","Invalid "+c+" type="+JSON.stringify(b),d,e)},unspecifiedSDJSONUrl:function(b,c,d){return a.Messages.styleMessage("unspecifiedSDJSONUrl","Unspecified sdjson url for layout id="+b,c,d)},unspecifiedSWFUrl:function(b,c,d){return a.Messages.styleMessage("unspecifiedSWFUrl","Unspecified swf url for background id="+b,c,d)},unspecifiedLayout_JSON:function(b,c,d){return a.Messages.styleMessage("unspecifiedLayout_JSON","Unspecified layout_JSON for deboss layout id="+b,c,d)},failedToParseStyle:function(a){return new vb.Message("failedToParseStyle","Failed to parse style",null,{causedBy:a})}},a.fromJSON=function(b,c){var d,e,f,g,h,i;try{for(f=a.parseStyleInfo(b,c),f.parseFontAssignments(b),i=b.assetLists.assetList,g=0,h=i.length;g<h;g++)d=i[g],f._parseStyleAsset(d);return f._listSeamlessBackgrounds(),vb.freeze(f),[f,null]}catch(b){return e=b,[null,new a.Messages.failedToParseStyle(e.originalMessage||e)]}},a.parseStyleInfo=function(b,c){var d,e;return e=parseInt(b.styleId),NaN===e&&(e=b.styleId),d=new a(e,b.version,b.displayName,b.sizeId,c),d.allowsAutofill=b.allowsAutofill!==!1,d},a.prototype._log=function(a){if(null!=this.logger)return this.logger.log(a)},a.prototype.parseFontAssignments=function(a){var b,c,d,e;for(e=a.fontAssignmentSet.fontAssignment,c=0,d=e.length;c<d;c++)b=e[c],this.fontAssignments[b.key]=b.fontDescriptor},a.prototype._parseStyleAsset=function(b){var c,d,e;if(b.assetType===a.Constants.assetTypeLayout){if(e=Aa.getValue(b.listType),null!=e)return this._parseAsset(b,e,this.getLayoutsForType(e),this._parseLayout)}else if(b.assetType===a.Constants.assetTypeBackground)return c=I.getValue(b.listType),d=null!=c?this.getBackgroundsForType(c):[],this._parseAsset(b,b.assetType,d,this._parseBackground)},a.prototype._parseAsset=function(a,b,c,d){var e,f,g,h,i;for(f=a.assetRef||[],h=0,i=f.length;h<i;h++)e=f[h],g=d(b,e),null!=g&&(vb.freeze(g),c.push(g))},a.prototype._parseBackground=function(b,c){var d,e,f,g,h;return e=c.assetId,g=c.version,f=this._findUrlWithType(a.Constants.urlTypeSWF,c.url),null==f?(this._log(a.Messages.unspecifiedSWFUrl(e,this.styleId,this.styleVersion)),null):(null==this.assetUrlHostPrefix&&this._setAssetUrlHostPrefix(f),d=new o(e,g,f),this.backgroundsById[c.assetId]=d,(null!=(h=c.backgroundAttributes)?h.IsSeamless:void 0)&&(this.seamlessBackgroundsById[c.assetId]=d),d)},a.prototype._setAssetUrlHostPrefix=function(a){var b;if(b=a.split("/",3),3===b.length)return this.assetUrlHostPrefix=b[0]+"//"+b[2]},a.prototype._parseLayout=function(a,b){var c,d,e;return e=a===Aa.DEBOSS_PREVIEW||a===Aa.DEBOSS_INLAY?this._createLayoutFromNonAttributedAsset(b,a):this._createLayoutFromAsset(b,a),d=function(a){var b;return null!=(null!=(b=a.layoutAttributes)?b.SpecialContent:void 0)},Aa.isCoreType(a)&&(a!==Aa.CORE&&a!==Aa.CORE_SPREAD||!d(b))&&(a=Aa.coreToAdaptiveType(a),c=this._createLayoutFromAsset(b,a),this.getLayoutsForType(a).push(c)),e},a.prototype._createLayoutFromNonAttributedAsset=function(b,c){var d,e,f,g,h,i,j,k;return k=this._parseLayoutPrimitiveTypeProperties(b),e=k[0],j=k[1],i=k[2],null==b.layout_JSON?(this._log(a.Messages.unspecifiedLayout_JSON(e,this.styleId,this.styleVersion)),null):(d=ta.fabricateLayoutAttributes(e),f=ta.parseImageAreas(b.layout_JSON.assets),h=ta.calculateLPSFromImageAreas(f),g=new oa(e,j,i,h,c,d,f),this.layouts.push(g),this.layoutsById[g.id]=g,g)},a.prototype._createLayoutFromAsset=function(a,b){var c,d,e,f,g,h,i,j,k,l;return l=this._parseLayoutPrimitiveTypeProperties(a),d=l[0],k=l[1],j=l[2],h=this._normalizeAttributeNames(a.layoutAttributes),i=this._parseLayoutImageAttributes(h),c=this._parseLayoutAttributes(h),e=null!=a.layout_JSON?ta.parseImageAreas(a.layout_JSON.assets):null!=(f=h.photoAreaInfos)?this._parseLayoutImageAreas(f):[],g=new oa(d,k,j,i,b,c,e),g.content=a.layout_JSON,this.layouts.push(g),this.layoutsById[g.id]=g,g},a.prototype._normalizeAttributeNames=function(a){var b,c,d,e;c={};for(b in a)e=a[b],d=vb.StringUtil.toCamelCase(b),c[d]=e;return c},a.prototype._parseLayoutPrimitiveTypeProperties=function(b){var c,d,e;return c=b.assetId,e=b.version,d=this._findUrlWithType(a.Constants.urlTypeJSON,b.url),null==d&&this._log(a.Messages.unspecifiedSDJSONUrl(c,this.styleId,this.styleVersion)),[c,e,d]},a.prototype._parseLayoutAttributes=function(a){return pa.createFromStyleContent(a)},a.prototype._findUrlWithType=function(a,b){var c,d,e;if(!(b instanceof Array))return null;for(d=0,e=b.length;d<e;d++)if(c=b[d],c.repType===a)return c.value;return null},a.prototype._parseLayoutImageAttributes=function(a){var b,c,d;return b=a.numLPics,c=a.numPPics,d=a.numSPics,new na(b,c,d)},a.prototype._parseLayoutImageAreas=function(a){var b,c,d,e,f,g;for(c=[],g=a.photoAreaInfo,e=0,f=g.length;e<f;e++)d=g[e],b=new _(d.id,d.width,d.height,d.seqNum),c.push(b);return c},a.prototype.getLayoutsForType=function(b,c){var d;if(null==c&&(c=null),null==b.xmlName)throw a.Messages.invalidType(b,"layout",this.styleId,this.styleVersion).toError();return null==this.layoutsByTypeName[b.xmlName]&&(this.layoutsByTypeName[b.xmlName]=[]),d=this.layoutsByTypeName[b.xmlName],null!=c&&(d=d.filter(function(a){return c.test(a.attributes.formFactor)})),d},a.prototype.getLayout=function(a){return this.layoutsById[a]||null},a.prototype.getBackgroundsForType=function(b){if(null==b.xmlName)throw a.Messages.invalidType(b,"background",this.styleId,this.styleVersion).toError();return null==this.backgroundsByTypeName[b.xmlName]&&(this.backgroundsByTypeName[b.xmlName]=[]),this.backgroundsByTypeName[b.xmlName]},a.prototype.getBackgroundById=function(a){return this.backgroundsById[a]},a.prototype.getDefaultBackground=function(){return new H(this)},a.prototype._listSeamlessBackgrounds=function(){var a,b;return this.backgroundsByTypeName[I.SPREAD.xmlName]=function(){var c,d;c=this.seamlessBackgroundsById,d=[];for(b in c)a=c[b],d.push(a);return d}.call(this)},a}(),lb={DEFAULT_LINE_HEIGHT_MULTIPLIER:1.2,DEFAULT_VERTICAL_ALIGN:"top",DEFAULT_TEXT_ALIGN:"center",VALID_VERTICAL_ALIGN_VALUES:{top:"top",middle:"middle",bottom:"bottom",center:"middle"},generateTextFlowForAsset:function(a,b,c,d,e){var f,g,h;return null==e&&(e=null),g=lb._generateParagraphForAsset(a,b,c,d),h=this._verifyVerticalAlign(a.vertJustification),f={breakOpportunity:"auto",kerning:"on",ligatureLevel:"on",trackingRight:"0",verticalAlign:h,whiteSpaceCollapse:"preserve",p:[g]}},_verifyVerticalAlign:function(a){var b;return a=null!=a?a.toLowerCase():void 0,null!=(b=lb.VALID_VERTICAL_ALIGN_VALUES[a])?b:lb.DEFAULT_VERTICAL_ALIGN},_generateParagraphForAsset:function(a,b,c,d,e){var f,g,h,i,j;return null==e&&(e=null),g=lb.generateSpanForAsset(a,b,c,d),h=null!=(i=null!=(j=a.horizJustification)?j.toLowerCase():void 0)?i:lb.DEFAULT_TEXT_ALIGN,f={textAlign:h,marginTop:null,marginBottom:null,spans:[g]}},generateSpanForAsset:function(a,b,c,d,e){var f,g,h;return null==e&&(e=null),a.paraStyle||(a.paraStyle="medium"),(h=b.fontAssignments[a.paraStyle])||(null!=e&&e.error("unknownParaStyle","Text paraStyle is not specified in the style, defaulting to medium",{paraStyle:a.paraStyle,styleId:b.styleId,sizeId:b.sizeId,styleVersion:b.styleVersion}),a.paraStyle="medium",h=b.fontAssignments[a.paraStyle]),f=c.getFontDefinition(h.fontId),g={baselineShift:"0",text:d,textDecoration:"none",color:lb._getDefaultTextColor(a,b,c),fontId:f.fontId,fontFamily:f.fontFace,fontName:f.fontName,fontSize:h.pointSize,fontStyle:f.style,fontWeight:f.weight,lineHeight:h.pointSize*lb.DEFAULT_LINE_HEIGHT_MULTIPLIER}},_getDefaultTextColor:function(a,b,c){var d,e,f;return d=b.fontAssignments[a.paraStyle],null!=d?(e=null!=(f=c.getRGBColor(d.colorId))?f:"000000","#"+e):"#000000"}},nb={generateDefaultWraps:function(){return[{paragraphs:[{lines:[{startAtChar:"1",visible:null}]}]}]},generateWrapsFromWeb2Print:function(a,b){var c,d,e,f,g,h,i,j,k,l;for(g=[],d=b.split(/\n/g),j=0,h=0,k=0,l=d.length;k<l;k++){for(c=d[k],i=[1],e=c.length+1,j+=e;a.length>0&&a[0]<j;)i.push(a.shift()+2-h);h+=e,f=nb._wrapLines(i),g.push(f)}return[{paragraphs:g}]},_wrapLines:function(a){var b;return{lines:function(){var c,d,e;for(e=[],c=0,d=a.length;c<d;c++)b=a[c],e.push(this._wrapLine(b));return e}.call(this)}},_wrapLine:function(a){return{startAtChar:""+a,visible:null}},generateWrapsFromEndings:function(a){var b,c,d,e;for(b=[{startAtChar:"1",visible:null}],d=0,e=a.length;d<e;d++)c=a[d],b.push({startAtChar:c.toString(10),visible:null});return[{paragraphs:[{lines:b}]}]}},pb=function(){function a(){}var b;return b="autofill-0.4.0-2836.ffa4518aac9f4816284b879530bf5cf7cca0aece",a.getVersion=function(){return b},a}(),d=function(){function a(a,b,c,d,e,f,g,h,i){this.contentClient=a,this.textHandler=b,this.images=c,this.originalLayout=d,this.productSpec=e,this.constraintSet=f,this.disallowedLayoutIds=null!=g?g:[],this.options=null!=h?h:{},this.projectTypeEnum=i,this.promise=new vb.Promise,this.pageType=d.pageType}return a.Messages={unidentifiedLayout:new vb.Message("unidentifiedLayout","Unable to identify layout type"),layoutWithoutBackground:function(a){return new vb.Message("layoutWithoutBackground","Layout with template asset id '"+a+"' has no background container",vb.LogLevel.ERROR,{templateAssetId:a})}},a.create=function(b,c,d,e,f,g,h,i,j){return new a(b,c,d,e,f,g,h,i,j)},a.prototype.start=function(){var a,b,c,d,f,g,h,i,j,k,l=this;return g=new Oa(this.originalLayout.pageType,this.originalLayout.content.type),i=vb.Project.getPopulatedTextAreasFromLayout(this.originalLayout.content),a=vb.Project.extractAudioFromLayout(this.originalLayout),c=new e(1,this.images,g,i,a,this.constraintSet),f={fetchFullLayouts:!0,disallowedLayoutIds:this.disallowedLayoutIds,forceAutofill:!0,allowAutofillLayoutOverride:!0,altSize:this.options.altSize,pageCount:this.options.pageCount,useDefaultTextStyle:null==(j=this.options.useDefaultTextStyle)||j},null!=this.options.styleJson&&(k=ib.fromJSON(this.options.styleJson),h=k[0],b=k[1],null==b&&(f.style=h)),d=P.create(this.contentClient,this.textHandler,[c],this.productSpec,this.constraintSet,f,this.projectTypeEnum),d.start().then(function(a,b){return l._parseLayoutResults(a,b)}),this.promise},a.prototype._parseLayoutResults=function(a,b){var c,d;if(null!=b)return void this.promise.setError(b);if(d=null,null!=(c=this._getFirstLayoutContents(a)))try{this._assignAssets(c)}catch(a){b=a,d=b}return this.promise.setResult(a,d)},a.prototype._getFirstLayoutContents=function(a){var b;return null!=a.layouts?null!=(b=a.layouts[0])?b.content:void 0:null},a.prototype._isIdeaLayout=function(a){var b,c,d;return b=null!=a&&null!=(c=a.template)&&null!=(d=c.assetSource)?d.id:void 0,null!=b&&/_idea[a-z]+.indd$/.test(b)},a.prototype._assignAssets=function(a){return this._assignBackground(a)},a.prototype._assignBackground=function(b){var c,d,e;if(c=this._findBackground(this.originalLayout.content),d=this._findBackground(b),null==d)throw e=b.template.assetReference.assetId,new a.Messages.layoutWithoutBackground(e).toError();return d.assetReference=sb.cloneDeep(c.assetReference)},a.prototype._findBackground=function(a){var b;return b=a.assets.filter(function(a){return"Background"===a.type}),b[0]},a}(),h=function(){function a(a){this.isSplitCell=a.isSplitCell,this.gridCellTemplate=a.gridCellTemplate,this.gridCellAssets=a.gridCellAssets,this.eventTextId=a.eventTextId}return a.Messages={eventBackgroundNotFound:function(a){return new vb.Message("eventBackgroundNotFound","Unable to find event background asset for template, "+a+"; gridCellAssets unchanged")}},a.create=function(b){return new a(b)},a.prototype.startSync=function(){var b,c,d,e,f,g,h;return c=JSON.parse(JSON.stringify(this.gridCellTemplate)),T.identifyGridCellId(this.gridCellAssets)?(d=T.getEventTextAssetIndex(this.eventTextId,this.gridCellAssets),d>=0?T.hasEventBackground(this.gridCellAssets,d)?{warning:null,gridCellAssets:this.gridCellAssets}:(b=this._getTemplateEventBackground(c,d))?(this.gridCellAssets.splice(d,0,b),this._updatePosition(b,c),T.updateContainerIds(this.gridCellAssets),{warning:null,gridCellAssets:this.gridCellAssets}):(e=null!=(g=this.gridCellTemplate.template)&&null!=(h=g.assetReference)?h.assetId:void 0,f=a.Messages.eventBackgroundNotFound(e),{warning:f,gridCellAssets:this.gridCellAssets}):(f=T.Messages.eventTextAssetNotFound(this.eventTextId),{warning:f,gridCellAssets:this.gridCellAssets})):(f=T.Messages.unknownGridCellId,{warning:f,gridCellAssets:this.gridCellAssets})},a.prototype._getTemplateEventBackground=function(a,b){var c;return c=this._parseTemplateEventBackgrounds(a),this.isSplitCell&&this._isBottomCellEventText(this.gridCellAssets[b])&&c.length>1?c[1]:c.length>=1?c[0]:null},a.prototype._isBottomCellEventText=function(a){return/image-[0-9]+-2/.test(a.associatedImage)},a.prototype._parseTemplateEventBackgrounds=function(a){var b,c,d,e,f;for(c=[],f=a.assets,d=0,e=f.length;d<e;d++)b=f[d],T.isEventBackground(b)&&c.push(b);return c.sort(function(a,b){return parseFloat(a.container.yOffset)-parseFloat(b.container.yOffset)}),c},a.prototype._updatePosition=function(a,b){var c,d;return c=parseFloat(this.gridCellAssets[0].container.xOffset)-parseFloat(b.assets[0].container.xOffset),d=parseFloat(this.gridCellAssets[0].container.yOffset)-parseFloat(b.assets[0].container.yOffset),a.container.xOffset=c+parseFloat(a.container.xOffset),a.container.yOffset=d+parseFloat(a.container.yOffset),a.imageRectangle.xOffset=a.container.xOffset,a.imageRectangle.yOffset=a.container.yOffset},a}(),i=function(){function a(a,b,c,d,e,f,g){this.layoutContent=a,this.originalPages=b,this.styleJson=c,this.layoutMetadata=d,this.textHandler=e,this.options=null!=f?f:{},this.projectTypeEnum=g,vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),vb.ArgumentValidation.assertObjectIsSpecified(this.layoutContent,"layoutContent"),vb.ArgumentValidation.assertObjectIsSpecified(this.originalPages,"pages"),vb.ArgumentValidation.assertObjectIsSpecified(this.styleJson,"style"),vb.ArgumentValidation.assertObjectIsSpecified(this.layoutMetadata,"layoutMetadata"),vb.ArgumentValidation.assertObjectIsSpecified(this.projectTypeEnum,"projectTypeEnum"),this.promise=new vb.Promise}return a.create=function(b,c,d,e,f,g,h){return new a(b,c,d,e,f,g,h)},a.prototype.start=function(){var a,b,c,d,e,f=this;return e=ib.fromJSON(this.styleJson),d=e[0],b=e[1],null!=b?(this.promise.setResult(null,b),this.promise):(a=this._createLayoutWithImages(this.originalPages,this.layoutContent,this.layoutMetadata),this.options.replaceTextContent=!0,c=Va.create({layout:a,layoutContent:this.layoutContent,originalPages:this.originalPages,style:d,textHandler:this.textHandler,productSize:d.sizeId,projectTypeEnum:this.projectTypeEnum,options:this.options}),c.start().then(function(a,b){return null!=b?void f.promise.setError(b):(a.populationErrors.length>0&&(f.warnings=a.populationErrors),f._processResult(a))}),this.promise)},a.prototype._processResult=function(a){var b;return(null!=(b=a.content)?b.type:void 0)===ra.SPREAD_PAGE&&this._removeAudioAssets(a),this.layout=a.toExternal(),this.promise.setResult(this.layout)},a.prototype._removeAudioAssets=function(a){return a.content.assets=a.content.assets.filter(function(a){return"audio"!==a.assetType})},a.prototype._createLayoutWithImages=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;for(a=Array.isArray(a)?a:[a],i=new oa(c.id,c.version,null,null,Aa.toDefaultType(c.type)),k=this._findImageAreaAssets(b),l=new ya,h=[],p=0,r=a.length;p<r;p++)m=a[p],g=vb.Project.extractImagesFromPage(m),null!=g&&(h=h.concat(g));for(q=0,s=h.length;q<s;q++)t=h[q],o=t.seqNum,d=t.image,n=t.pageCrop,j=k.shift(),j?(e=b.assets[j].container.id,f=new ba(d,e),f.setPreviousPageCrop(n),l.addManualAssignment(f)):l.unassignedImages.push(d);return i.setImageAssignments(l),i},a.prototype._findImageAreaAssets=function(a){var b,c,d,e,f,g;if(d=[],!a||!a.assets)return d;for(g=a.assets,c=e=0,f=g.length;e<f;c=++e)b=g[c],b&&b.assetType===vb.LayoutAssetTypeEnum.IMAGE&&d.push(c);return d},a}(),j=function(){function a(a,b,c,d,e){this.project=a,this.sourcePageNumber=b,this.styleJson=c,this.options=d,this.textHandler=e,vb.ArgumentValidation.assertObjectIsSpecified(this.project,"project"),vb.ArgumentValidation.assertObjectIsSpecified(this.sourcePageNumber,"sourcePageNumber"),vb.ArgumentValidation.assertObjectIsSpecified(this.styleJson,"styleJson"),vb.ArgumentValidation.assertObjectIsSpecified(this.options,"options"),vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),this.sourcePage=this._getSourcePage(),this.styleDetails=null,this.promise=new vb.Promise}return a.Messages={samePage:function(a,b){return new vb.Message("mustBeAtLeastOne",'Expected sourcePage "'+a+'" and destinationPage "'+b+'" to be different')}},a.create=function(b,c,d,e,f){return new a(b,c,d,e,f)},a.prototype.start=function(){var a,b,c,d=this;return c=ib.fromJSON(this.styleJson),b=c[0],a=c[1],null!=a?(this.promise.setError(a),this.promise):(this._applyLayouts().then(function(a,b){return null!=b?d.promise.setError(b):d._applyBackground().then(function(a,b){return null!=b?d.promise.setError(b):d._applyFrame().then(function(a,b){return null!=b?d.promise.setError(b):d.promise.setResult(d.project)})})}),this.promise)},a.prototype._applyLayouts=function(){var a,b;return b=new vb.Promise,this.options.layout?(a="Spread"===this.sourcePage.layout.type?this._applySpreadLayouts():this._applyStandardLayouts(),a.then(function(a,c){return null!=c?b.setError(c):b.setResult(null)})):b.setResult(null),b},a.prototype._applyStandardLayouts=function(){var a,b,c=this;return b=new vb.Promise,a=[],this._splitAllSpreads().then(function(d,e){var f,g,h,i;if(null!=e)return b.setError(e);for(i=c.project.book.pages,g=0,h=i.length;g<h;g++)f=i[g],parseInt(f.surfaceNumber)!==c.sourcePageNumber&&a.push(c._applySingleLayout(f));return a.length>0?(a=vb.Promise.join(a),a.then(function(a,c){return null!=c?b.setError(c):b.setResult(null)})):b.setResult(null)}),b},a.prototype._applySpreadLayouts=function(){var a,b,c,d,e,f;for(c=new vb.Promise,a=[],f=this.project.book.pages,d=0,e=f.length;d<e;d++)b=f[d],parseInt(b.surfaceNumber)%2===0&&parseInt(b.surfaceNumber)!==parseInt(this.project.book.pages.length)&&parseInt(b.surfaceNumber)!==this.sourcePageNumber&&(this._moveImageAssets(this._getPageBySurfaceNumber(parseInt(b.surfaceNumber)+1),b),a.push(this._applySingleLayout(b)));return a.length>0?(a=vb.Promise.join(a),a.then(function(a,b){return null!=b?c.setError(b):c.setResult(null)})):c.setResult(null),c},a.prototype._splitAllSpreads=function(){var a,b,c,d,e,f;for(b=new vb.Promise,c=[],f=this.project.book.pages,d=0,e=f.length;d<e;d++)a=f[d],"Spread"===a.layout.type&&c.push(this._splitSpread(a));return vb.Promise.join(c).then(function(a,c){return null!=c?b.setError(c):b.setResult(null)}),b},a.prototype._splitSpread=function(a){var b,c=this;return b=new vb.Promise,fb.create(a.layout).start().then(function(d,e){var f;return null!=e?b.setError(e):(a.layout=d.leftLayout.content,f=c._getPageBySurfaceNumber(parseInt(a.surfaceNumber)+1),f.layout=d.rightLayout.content,b.setResult(null))}),b},a.prototype._moveImageAssets=function(b,c){var d,e,f,g;if(parseInt(b.surfaceNumber)===parseInt(c.surfaceNumber))throw a.Messages.samePage(b,c).toError();for(g=b.layout.assets,e=f=g.length-1;f>=0;e=f+=-1)d=g[e],"image"===d.assetType&&(c.layout.assets.push(d),b.layout.assets.splice(e,1));return null},a.prototype._applySingleLayout=function(a){var b,c,d,e,f;return vb.ArgumentValidation.assertObjectIsSpecified(a,"page"),e=new vb.Promise,b={id:this.sourcePage.layoutName,version:this.sourcePage.layoutVersion,type:vb.PageTypeEnum.identifyTypeBySurfaceNumber(parseInt(this.sourcePage.surfaceNumber))},d={fetchFullLayouts:!0,disallowedLayoutIds:[],forceAutofill:!0,allowAutofillLayoutOverride:!0,altSize:this.project.book.bookSizeID.split("x"),pageCount:this.project.book.pages.length,useDefaultTextStyle:!0},f=JSON.parse(JSON.stringify(this.sourcePage)),this._removePreexistingContent(f),c=i.create(f.layout,a,this.styleJson,b,this.textHandler,d,this.project.type),c.start().then(function(b,c){return null!=c?e.setError(c):(a.layout=b.content,a.layoutName=b.id,a.layoutVersion=b.version,e.setResult(a))}),e},a.prototype._removePreexistingContent=function(a){var b,c,d,e;for(e=a.layout.assets,c=0,d=e.length;c<d;c++)switch(b=e[c],b.assetType){case"text":mb.ensureEmptyContent(b);break;case"image":b.imageAssignment=null}return null},a.prototype._getPageBySurfaceNumber=function(a){var b,c,d,e;for(e=this.project.book.pages,c=0,d=e.length;c<d;c++)if(b=e[c],parseInt(b.surfaceNumber)===a)return b;return null},a.prototype._getPageImages=function(a){var b,c,d,e,f;for(c=[],f=a.layout.assets,d=0,e=f.length;d<e;d++)b=f[d],"image"===b.assetType&&c.push(b);return c},a.prototype._applyBackground=function(){var a,b,c,d,e,f,g,h,i,j;if(c=new vb.Promise,this.options.background){for(d=JSON.parse(JSON.stringify(this._getBackgroundAsset(this.sourcePage))),i=this.project.book.pages,e=0,g=i.length;e<g;e++)if(b=i[e],parseInt(b.surfaceNumber)!==this.sourcePageNumber&&null!=b.layout.assets)for(j=b.layout.assets,f=0,h=j.length;f<h;f++)a=j[f],"Background"===a.type&&this._applyBackgroundReference(a,d);c.setResult(null)}else c.setResult(null);return c},a.prototype._getBackgroundAsset=function(a){var b,c,d,e;for(e=a.layout.assets,c=0,d=e.length;c<d;c++)if(b=e[c],"Background"===b.type)return b;return null},a.prototype._applyBackgroundReference=function(a,b){a.assetReference={assetId:b.assetReference.assetId,version:b.assetReference.version,sourceUrl:b.assetReference.sourceUrl,assetType:b.assetReference.assetType,isFlippable:"false"}},a.prototype._applyFrame=function(){var a,b,c,d,e,f,g,h,i,j,k;if(d=new vb.Promise,this.options.frames){for(this.sourceImages=this._getSourcePageImages(),j=this.project.book.pages,f=0,h=j.length;f<h;f++)if(c=j[f],parseInt(c.surfaceNumber)!==this.sourcePageNumber)for(b=0,k=c.layout.assets,g=0,i=k.length;g<i;g++)a=k[g],"image"===a.assetType&&(e=this.sourceImages[b%this.sourceImages.length],m.assignFrameSettings(a.container,e.container),b++);d.setResult(null)}else d.setResult(null);return d},a.prototype._getSourcePage=function(){var a,b,c,d;for(d=this.project.book.pages,b=0,c=d.length;b<c;b++)if(a=d[b],parseInt(a.surfaceNumber)===this.sourcePageNumber)return a;return null},a.prototype._getSourcePageImages=function(){var a,b,c,d,e,f,g,h,i;for(b=[],h=this.project.book.pages,d=0,f=h.length;d<f;d++)if(c=h[d],parseInt(c.surfaceNumber)===this.sourcePageNumber){for(i=c.layout.assets,e=0,g=i.length;e<g;e++)a=i[e],"image"===a.assetType&&b.push(a);break}return b},a}(),m={findImageAsset:function(a,b){var c,d,e,f,g,h;if(null==(null!=b?b.assets:void 0))return null;for(f=b.assets,d=0,e=f.length;d<e;d++)if(c=f[d],"image"===c.assetType&&(null!=(g=c.imageAssignment)&&null!=(h=g.imageReference)?h.id:void 0)===a)return c;return null},assignFrameSettings:function(a,b){return a.borderStroke=b.borderStroke,a.borderColor=b.borderColor,a.objectStyle=b.objectStyle,a.borderColorRGB=b.borderColorRGB,a.frameOwnedByUser=b.frameOwnedByUser},assignUserOwnedFrames:function(a,b){var c,d,e,f,g,h,i;if(null!=(null!=b?b.assets:void 0))for(h=b.assets,f=0,g=h.length;f<g;f++)c=h[f],"image"===c.assetType&&("true"!==c.container.frameOwnedByUser&&c.container.frameOwnedByUser!==!0||(e=null!=(i=c.imageAssignment.imageReference)?i.id:void 0,null!=(d=m.findImageAsset(e,a))&&m.assignFrameSettings(d.container,c.container)))}},D=function(){function a(a){this.style=a.style,this.groupSpec=a.groupSpec,this.conversionSpec=a.conversionSpec,this.projectSummary=a.projectSummary,this.productSpec=a.productSpec,this.textHandler=a.textHandler,this.layoutRequestPool=a.layoutRequestPool,this.logger=a.logger}var b;return a.create=function(b){return new a(b)},a.prototype.convertPage=function(a,b){return this._isPageResizable(a)?this._resizePage(a,b):this._convertPage(a,b);
},a.prototype._isPageResizable=function(a){return("true"===a.customLayout||a.customLayout===!0||"blank"===a.layoutName)&&!(this._isStyleChange()||this._isGridPage(a))},a.prototype._isStyleChange=function(){return parseInt(this.projectSummary.product.styleId)!==this.productSpec.styleId},a.prototype._isGridPage=function(a){return vb.PageTypeEnum.identifyTypeByLayoutId(a.layoutName)===vb.PageTypeEnum.CALENDAR_GRIDPAGE},a.prototype._resizePage=function(a,b){var c,d,e,f;return d=Aa.toPageType(b),c=a.layout.type===ra.SPREAD_PAGE,f=ua.forSizeAndPage(this.projectSummary.type,this.productSpec.productSize,d,c,this._identifyTargetCoverType()),e=new vb.Promise,Xa.create(a,b,f,this.textHandler,this.logger,this.projectSummary,this.productSpec).start().then(function(b){return e.setResult({surfaceNumber:a.surfaceNumber,layout:b})}),e},a.prototype._identifyTargetCoverType=function(){var a;return null!=(a=this.conversionSpec.cover)?this.textHandler.globalContent.getCover(a.coverSpecId).coverType:null},a.prototype._convertPage=function(a,b){var c;return c=this._findLayoutInStyle(a,b),this.fetchAndPopulateLayout(a,c)},a.prototype._findLayoutInStyle=function(a,b){var c,d;return Aa.isDebossType(b)?c=this.style.getLayoutsForType(b)[0]:(d=xa.constructTargetLayoutId(this.projectSummary,this.productSpec,a.layoutName,b),c=this.style.getLayout(d)),c?c.clone():this._createStubLayout(d,b,a)},a.prototype._createStubLayout=function(a,b,c){var d,e;return e=c.ideaLayout?Ha.IDEA:"",d=pa.create("",!1,e,0),new oa(a,c.layoutVersion,null,null,b,d)},a.prototype.fetchAndPopulateLayout=function(a,b,c){var d,e=this;return null==c&&(c=null),d=new vb.Promise,this.layoutRequestPool.getLayout(b).then(function(f,g){var h;return null!=g?d.setError(g):(h=function(f){return e._populateLayout(b,f,a,c).then(function(a){return d.setResult(a)})},"true"===a.flippedLayout||a.flippedLayout===!0?(b.flippedLayout=!0,h(M.create(f).startSync())):h(f))}),d},a.prototype._populateLayout=function(a,b,c,d){var e,f,g;return null==d&&(d=null),a.type===Aa.DEBOSS_PREVIEW||a.type===Aa.DEBOSS_INLAY?(this._populateImagesAutomatically(c,a),a.type===Aa.DEBOSS_PREVIEW&&null!=(null!=(g=this.conversionSpec.cover.stockCover)?g.background:void 0)&&(d=this.conversionSpec.cover.stockCover.background)):this._populateImagesManually(c,a,b),e=Va.create({layout:a,layoutContent:b,originalPages:c,style:this.style,textHandler:this.textHandler,productSize:this.productSpec.productSize,groupSpec:this.groupSpec,background:d,projectTypeEnum:this.projectSummary.type,layoutRequestPool:this.layoutRequestPool,applyFrames:!0,preferUserText:!0}),f=new vb.Promise,e.start().then(function(a,b){return null!=b?f.setError(b):f.setResult({layout:a,surfaceNumber:c.surfaceNumber})}),f},a.prototype._populateImagesAutomatically=function(a,b){var c,d,e,f,g,h,i,j,k;for(e=[],c={images:e,existingPageCrop:{}},j=vb.Project.extractImagesFromPage(a),h=0,i=j.length;h<i;h++)k=j[h],d=k.image,g=k.pageCrop,e.push(d),c.existingPageCrop[d.id]=g;return f=ya.create(c,b,{ignoreOrientation:!0}),b.setImageAssignments(f)},a.prototype._populateImagesManually=function(a,b,c){var d,e,f;return e=new ya,d=this._getLayoutImageAreas(c),f=this._getPageImages(a),this._assignImagesBySeqNum(d,f,e),this.unassignedImages=this._assignRemainingImages(d,f,e),b.setImageAssignments(e)},a.prototype._getLayoutImageAreas=function(a){var b,c,d,e,f;for(c=[],f=a.assets,d=0,e=f.length;d<e;d++)b=f[d],b.assetType===vb.LayoutAssetTypeEnum.IMAGE&&c.push(b);return c.sort(this._compareImageSeqNum)},b=function(a,b){return parseInt(a.seqNum)-parseInt(b.seqNum)},a.prototype._getPageImages=function(a){var b;return b={},vb.Project.extractImagesFromPage(a).forEach(function(a){return b[a.seqNum]=a}),b},a.prototype._assignImagesBySeqNum=function(a,b,c){var d,e,f,g,h,i;for(d=0,h=0,i=a.length;h<i;h++)e=a[h],g=e.seqNum,null!=(f=b[g])&&(this._assignImage(f,e.container.id,c),delete b[g],a[d]=null),d++},a.prototype._assignImage=function(a,b,c){var d;return d=new ba(a.image,b),d.setPreviousPageCrop(a.pageCrop),c.addManualAssignment(d)},a.prototype._assignRemainingImages=function(a,b,c){var d,e,f,g,h,i;for(g=this._sortPageImagesBySeqNum(b),h=0,i=a.length;h<i;h++)d=a[h],g.length>0&&d&&(e=g.shift(),this._assignImage(e,d.container.id,c));return f=[],g.forEach(function(a){return f.push(a.image)}),f},a.prototype._sortPageImagesBySeqNum=function(a){var b,c,d;d=[];for(c in a)b=a[c],d.push(b);return d.sort(this._compareImageSeqNum)},a}(),E=function(){function a(a,b,c,d,e,f,g){this.contentClient=a,this.textHandler=b,this.productSpec=d,this.conversionSpec=e,this.groupSpecs=f,this.logger=g,vb.ArgumentValidation.assertObjectIsSpecified(this.contentClient,"contentClient"),vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),vb.ArgumentValidation.assertObjectIsSpecified(c,"existingProject"),this.projectSummary=Ta.create(c),vb.ArgumentValidation.assertObjectIsSpecified(this.projectSummary.product,"product"),this.promise=new vb.Promise,this.style=null,this.errors=[],this.unassignedImages=[],this.convertedLayouts=[],this.layoutRequestPool=Fa.create(this.contentClient)}return a.Messages={failedToConvertProjectType:function(a){return new vb.Message("failedToConvertProjectType","Project type is not supported for conversion",null,{type:a.type,guid:a.projectGUID})},failedToGenerateLayout:function(a){return new vb.Message("failedToGenerateLayout","Style contained no layouts for layout type",null,{layoutType:a})},failedToFetchLayout:function(a,b){return new vb.Message("failedToFetchLayout","Failed to fetch layout",null,{layoutId:a,causedBy:b})},failedToPopulateLayout:function(a,b){return new vb.Message("failedToPopulateLayout","Failed to populate layout",null,{layoutId:a,causedBy:b})},convertedLayoutIdNotFound:function(a,b,c,d){return new vb.Message("convertedLayoutIdNotFound","Modified layout id not found in new style",vb.LogLevel.INFO,{convertedLayoutId:a,originalLayoutId:b,projectStyleId:c,productSpecStyleId:d})},failedToConvertPage:function(a,b){return new vb.Message("failedToConvertPage","Failed to convert page",null,{surfaceNumber:a,causedBy:b})}},a.create=function(b,c,d,e,f,g,h){return new a(b,c,d,e,f,g,h)},a.prototype.start=function(){var a,b=this;return null!=(null!=(a=this.conversionSpec)?a.style:void 0)?(this._setStyle(this.conversionSpec.style),this._proceedWithStyle()):this.contentClient.getStyleForProductSpec(this.productSpec,this.projectSummary.type).then(function(a,c){var d,e,f;return null!=c?void b.promise.setResult(null,c):(f=ib.fromJSON(a),e=f[0],d=f[1],null!=d?(d.properties.productSpec=b.productSpec,void b.promise.setResult(null,d)):(b._setStyle(e),b._proceedWithStyle()))}),this.promise},a.prototype._setStyle=function(a){return this.style=a},a.prototype._proceedWithStyle=function(){var a,b=this;return a=null!=this.projectSummary.product.cover&&null!=this.conversionSpec.cover?this._convertCover():[],this.projectSummary.product.pages.map(function(c){var d,e;return d=function(a,b){return/_title$/.test(a)?Aa.ADAPTIVE_TITLE:b===ra.SPREAD_PAGE?Aa.ADAPTIVE_SPREAD:Aa.ADAPTIVE},e=b._convertPage(c,d(c.layoutName,c.layout.type)),a.push(e)}),vb.Promise.join(a).then(function(){return b._finish()})},a.prototype._convertCover=function(){var a,b,c;return c=[],a=s.getRule(this.conversionSpec.cover.coverSpecId),b=this.projectSummary.product.cover,c.push(this._convertFrontCover(b.frontPage)),a.acceptsImageOn.front||this._copyPageImagesToUnassignedList(b.frontPage),a.hasSpine&&c.push(this._convertPage(b.spinePage,Aa.ADAPTIVE_SPINE,Na.SPINE)),a.acceptsImageOn.spine||this._copyPageImagesToUnassignedList(b.spinePage),a.hasBack&&c.push(this._convertPage(b.backPage,Aa.ADAPTIVE_BACK_COVER,Na.BACK_COVER)),a.acceptsImageOn.back||this._copyPageImagesToUnassignedList(b.backPage),c},a.prototype._copyPageImagesToUnassignedList=function(a){var b,c,d,e,f,g;if(null!=a)for(f=vb.Project.extractImagesFromPage(a),d=0,e=f.length;d<e;d++)g=f[d],c=g.seqNum,b=g.image,this.unassignedImages.push(b)},a.prototype._createStubLayout=function(a,b,c){var d,e;return e=c.ideaLayout?Ha.IDEA:"",d=pa.create("",!1,e,0),new oa(a,c.layoutVersion,null,null,b,d)},a.prototype._convertFrontCover=function(a){var b,c,d,e,f,g,h;return this.conversionSpec.isStockCover()?(c=this.conversionSpec.cover.binding,d=(null!=(h=c.debossInlayId)?h.length:void 0)>0?this.style.getLayout(this.conversionSpec.cover.binding.debossInlayId):this.style.getLayoutsForType(Aa.DEBOSS_INLAY)[0],f=this.style.getLayout(this.conversionSpec.cover.binding.debossPreviewId),null==d&&null==f?vb.Promise.createFinishedPromise():(g=[],null!=d&&g.push(this._fetchAndPopulateLayout(a,d)),null!=f&&g.push(this._fetchAndPopulateLayout(a,f)),vb.Promise.join(g))):this._hasInlayLayout(a)?(b=new H(this.style),e=this._findPhotoLayoutForStock(a),this._fetchAndPopulateLayout(a,e,b)):this._convertPage(a,Aa.ADAPTIVE_FRONT_COVER,Na.FRONT_COVER)},a.prototype._hasInlayLayout=function(a){return/debossinlay/i.test(a.layoutName)},a.prototype._findPhotoLayoutForStock=function(a){var b,c,d;return d=this._identifyLPSMinimum(a),b=new RegExp(this.productSpec.layoutFormFactor),c=this.style.getLayoutsForType(Aa.ADAPTIVE_FRONT_COVER,b),c=c.filter(function(a){return a.lpsCount.l>=d.l&&a.lpsCount.p>=d.p}),(null!=c?c.length:void 0)>0?F._anyItem(c):F.anyFrontCover(this.style,this.productSpec.layoutFormFactor)},a.prototype._identifyLPSMinimum=function(a){var b,c,d;return c=vb.Project.extractImagesFromPage(a),d=new na,c.length>0&&(b=c[0].image,d=b.width<b.height?new na(0,1,0):new na(1,0,0)),d},a.prototype._convertPage=function(b,c,d){var e,f,g=this;return null==b?this._generatePage(c,d):(f=new vb.Promise,e={style:this.style,groupSpec:this._getGroupSpecForPage(b),conversionSpec:this.conversionSpec,projectSummary:this.projectSummary,productSpec:this.productSpec,textHandler:this.textHandler,layoutRequestPool:this.layoutRequestPool,logger:this.logger},D.create(e).convertPage(b,c).then(function(c,d){var e;return null!=d?(e=a.Messages.failedToConvertPage(b.surfaceNumber,d),g.errors.push(e),g._copyPageImagesToUnassignedList(b),f.setError(e)):(null!=c.layout.populationErrors&&(g.errors=g.errors.concat(c.layout.populationErrors)),g._registerConvertedLayout(c.surfaceNumber,c.layout),f.setResult(c))}),f)},a.prototype._getGroupSpecForPage=function(a){var b,c;return a.surfaceNumber<0?(c=vb.PageTypeEnum.identifyTypeBySurfaceNumber(a.surfaceNumber),b=this.groupSpecs.filter(function(a){return a.pageSpec.type===c}),b[0]):this.groupSpecs[a.surfaceNumber-1]},a.prototype._generatePage=function(b,c){var d,e,f,g,h=this;switch(g=Aa.toPageType(b)){case vb.PageTypeEnum.SPINEPAGE:d=_a.getAnyAppropriateLayout(this.style,this.productSpec,this.projectSummary.pageCount);break;case vb.PageTypeEnum.FRONTPAGE:d=F.anyFrontCover(this.style,this.productSpec.layoutFormFactor);break;case vb.PageTypeEnum.BACKPAGE:d=F.anyBackCover(this.style,this.productSpec.layoutFormFactor);break;default:d=this.style.getLayoutsForType(b)[0]}return d?(this._registerConvertedLayout(c,d),f=new vb.Promise,e=this.layoutRequestPool.getLayout(d),e.then(function(b,c){var e;return null!=c?(h.errors.push(a.Messages.failedToFetchLayout(d.id,c)),void f.setError(c)):(e={defaultBackground:new H(h.style)},Ea.start({layout:d,content:b,assets:e,style:h.style,textHandler:h.textHandler,useDefaultTextStyle:!0,options:h.options,preferUserText:!0,projectTypeEnum:h.projectSummary.type,conversion:!0}).then(function(a,b){return f.setResult(a)}))}),f):(this.errors.push(a.Messages.failedToGenerateLayout(b)),vb.Promise.createFinishedPromise())},a.prototype._registerConvertedLayout=function(a,b){return this.convertedLayouts.push({surfaceNumber:a,layout:b})},a.prototype._fetchAndPopulateLayout=function(b,c,d){var e,f,g,h=this;return null==d&&(d=null),e=c.clone(),this._registerConvertedLayout(b.surfaceNumber,e),g=new vb.Promise,f={style:this.style,groupSpec:this._getGroupSpecForPage(b),conversionSpec:this.conversionSpec,projectSummary:this.projectSummary,productSpec:this.productSpec,textHandler:this.textHandler,layoutRequestPool:this.layoutRequestPool,logger:this.logger},D.create(f).fetchAndPopulateLayout(b,e,d).then(function(c,d){var f;return null!=d?(f=a.Messages.failedToPopulateLayout(e.id,d),h.errors.push(f),h._copyPageImagesToUnassignedList(b),g.setError(f)):(null!=c.layout.populationErrors&&(h.errors=h.errors.concat(c.layout.populationErrors)),g.setResult(c))}),g},a.prototype._finish=function(){var a;return this.convertedLayouts.sort(function(a,b){return a.surfaceNumber-b.surfaceNumber}),a=this.convertedLayouts.map(function(a){return a.layout}),this.promise.setResult(new Ja(a,this.productSpec,this.errors,this.unassignedImages))},a}(),J=function(){function a(a){this.gridAssets=a.gridAssets,this.gridCellStartIndex=a.gridCellStartIndex,this.removeAssetAtIndex=a.removeAssetAtIndex}return a.startSync=function(b){var c;return c=new a(b),c.startSync()},a.prototype.startSync=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;for(j=vb.CalendarGridCellUtil.parseStartingGridCellId(this.gridAssets[this.gridCellStartIndex].container.id),c=j.dateCellIndex,g=j.year,e=j.month,e--,f="0"+(c+1)+g+e,b=[],d=h=k=this.gridCellStartIndex,l=this.gridAssets.length-1;(k<=l?h<=l:h>=l)&&(a=this.gridAssets[d],a.container.id!==f);d=k<=l?++h:--h)this._isRemovableAsset(a)&&b.push(d);if(b.length>0){for(n=[],d=i=m=b.length-1;m<=0?i<=0:i>=0;d=m<=0?++i:--i)n.push(this.removeAssetAtIndex(b[d]));return n}},a.prototype._isRemovableAsset=function(a){return a.assetType===vb.LayoutAssetTypeEnum.TEXT&&/event/.test(a.guidanceText)||a.assetType===vb.LayoutAssetTypeEnum.IMAGE},a}(),M=function(){function a(a){this.layout=a,this._flipAsset=xb(this._flipAsset,this)}return a.create=function(b){return new a(b)},a.prototype.startSync=function(){var a;return a=sb.clone(this.layout),a.assets.filter(this._isEditable).map(this._flipAsset),a},a.prototype._isEditable=function(a){return!(mb.isPageNumber(a)||vb.LayoutGraphicAssetTypeEnum.isBackground(a))},a.prototype._flipAsset=function(a){return this._isFlippable(a)?this._flipRotateAndTranslate(a):this._rotateAndTranslate(a)},a.prototype._isFlippable=function(a){return a.assetType===vb.LayoutAssetTypeEnum.GRAPHIC&&"true"===a.assetReference.isFlippable},a.prototype._flipRotateAndTranslate=function(a){var b,c,d,e;if(c=(-parseFloat(a.container.rotation)+180)%360,e=parseFloat(this.layout.width)-parseFloat(a.container.xOffset),b=new vb.Vector(e,a.container.yOffset),d=-parseFloat(a.container.verticalScale),vb.TransformUtil.translateContainer(a.container,b,c),a.container.verticalScale=""+d,null!=a.imageRectangle)return vb.TransformUtil.translateContainer(a.imageRectangle,b,c),a.imageRectangle.verticalScale=""+d},a.prototype._rotateAndTranslate=function(a){var b,c,d;if(b=vb.TransformUtil.getAbsoluteCenter(a.container),b.x=parseFloat(this.layout.width)-b.x,d=-parseFloat(a.container.rotation),c=vb.TransformUtil.getTranslatedOrigin(a.container,b,d),vb.TransformUtil.translateContainer(a.container,c,d),null!=a.imageRectangle)return vb.TransformUtil.translateContainer(a.imageRectangle,c,d)},a}(),P=function(){function a(a,b,c,d,e,f,g){var h,i,j;this.contentClient=a,this.textHandler=b,this.groupSpecs=c,this.productSpec=d,this.constraintSet=e,this.options=null!=f?f:{},this.projectTypeEnum=g,vb.ArgumentValidation.assertObjectIsSpecified(this.contentClient,"contentClient"),vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),this.promise=new vb.Promise,this.warnings=[],this.style=null,this.layoutPicker=null,this.retryCount=0,this.defaultBackground=null,this.layoutContentById={},this.pageCount=null!=(h=null!=(i=this.options.pageCount)?i:null!=(j=this.groupSpecs)?j.length:void 0)?h:0,null!=this.options.style&&this._setStyle(this.options.style),null==this.options.useDefaultTextStyle&&(this.options.useDefaultTextStyle=!0),null==this.options.preferUserText&&(this.options.preferUserText=!1),this.layoutRequestPool=Fa.create(this.contentClient)}return a.Constants={MAX_RETRY_COUNT:2},a.Messages={failedToGetLayouts:new vb.Message("failedToGetLayouts","Failed to get all layouts"),layoutNotFoundForGroup:function(a){return new vb.Message("layoutNotFoundForGroup","No layout found for a group",null,{groupIndex:a})},failedToFetchLayout:function(a,b){return new vb.Message("failedToFetchLayout","Failed to fetch layout",null,{layoutId:a,causedBy:b})}},a.create=function(b,c,d,e,f,g,h){return new a(b,c,d,e,f,g,h)},a.prototype.start=function(){return null==this.style?this._getStyle():this._pickAndFetchContents(),this.promise},a.prototype._getStyle=function(){var a=this;return R.create(this.contentClient,this.productSpec,this.projectTypeEnum).start().then(function(b,c){return null!=c?a.promise.setError(c):(a._setStyle(b),a._pickAndFetchContents())})},a.prototype._setStyle=function(a){return this.style=a,this.defaultBackground=new H(a),this.productSpec.styleName=a.styleName,this.layoutPicker=new Da(this.style,this.productSpec,this.pageCount,this.constraintSet)},a.prototype._pickAndFetchContents=function(){var a=this;return this._pickLayouts(),this.options.fetchFullLayouts?this._fetchLayoutContents().then(function(){if(!a._findLayoutFetchErrors())return null!=a.options.altSize?a._resizeLayouts().then(function(){return a._populateLayouts()}):a._populateLayouts()}):this._onFinish()},a.prototype._pickLayouts=function(){var a,b,c,d,e,f;if(null!=(null!=(e=this.options)?e.disallowedLayoutIds:void 0))for(f=this.options.disallowedLayoutIds,c=0,d=f.length;c<d;c++)a=f[c],this.layoutPicker.disallowLayout(a);return b=this.productSpec.layoutFormFactor,this.style.allowsAutofill||this.options.forceAutofill&&this.options.allowAutofillLayoutOverride?this.layoutPicker.pickAutofillLayouts(this.groupSpecs,b):this.layoutPicker.pickDefaultLayouts(this.groupSpecs,b),null},a.prototype._getPickedLayouts=function(){var a,b;return a=function(){var a,c,d,e;for(d=this.layoutPicker.getPicksArray(),e=[],a=0,c=d.length;a<c;a++)b=d[a],e.push(b.layout);return e}.call(this).filter(function(a){return null!=(null!=a?a.id:void 0)})},a.prototype._fetchLayoutContents=function(){var b,c=this;return b=this.layoutPicker.getPicksArray().filter(function(a){return null!=a.layout}).filter(function(a){return null==a.layout.content}),b.forEach(function(b){var d;return d=b.layout,c.layoutRequestPool.getLayout(d).then(function(e,f){return null!=f?b.error=a.Messages.failedToFetchLayout(d.id,f):c.layoutContentById[d.id]=e})}),vb.Promise.join(this.layoutRequestPool.getPendingRequests())},a.prototype._findLayoutFetchErrors=function(){var b,c,d,e,f,g,h;if(e=function(){var a,b,e;a=this.layoutPicker.picks,e=[];for(c in a)d=a[c],"failedToFetchLayout"===(null!=(b=d.error)?b.id:void 0)&&e.push({groupIndex:c,pick:d});return e}.call(this),e.length>0){if(this.retryCount>=a.Constants.MAX_RETRY_COUNT)return this.layoutPicker.disallowLayout(d.error.properties.layoutId),!1;for(this.retryCount+=1,f=0,g=e.length;f<g;f++)h=e[f],b=h.groupIndex,d=h.pick,this.layoutPicker.disallowLayout(d.error.properties.layoutId),delete this.layoutPicker.picks[b];return this._pickAndFetchContents(),!0}return!1},a.prototype._resizeLayouts=function(){var a,b,c,d,e,f,g=this;if(null==this.options.altSize)return vb.Promise.createFinishedPromise(this.layoutContentById);b={width:72*this.options.altSize.width,height:72*this.options.altSize.height},e=[],f=this.layoutContentById;for(c in f)a=f[c],d=Xa.create(a,b).start().then(function(a){return g.layoutContentById[c]=a}),e.push(d);return vb.Promise.join(e)},a.prototype._populateLayouts=function(){var a,b,c,d,e,f,g,h,i,j,k=this;j=[],h=this.layoutPicker.getPicksArray().filter(function(a){return null!=a.layout});for(e in h)g=h[e],f=g.layout,b=this._conditionallyFlipLayout(f,f.content||this.layoutContentById[f.id]),f.imageAreas=ta.parseImageAreas((null!=b?b.assets:void 0)||[]),d=this.groupSpecs[e],this._setPendingLayoutImageAssignments(d,f,g),c=(null!=d?d.style:void 0)?new H(d.style):this.defaultBackground,a={defaultBackground:c,audio:d.audioAsset},f.setGroupSpec(d),this._addGroupSpecTextToAssets(this.groupSpecs[e],a),i=Ea.start({layout:f,groupSpec:d,content:b,assets:a,style:this.style,textHandler:this.textHandler,layoutRequestPool:this.layoutRequestPool,useDefaultTextStyle:this.options.useDefaultTextStyle,preferUserText:this.options.preferUserText,projectTypeEnum:this.projectTypeEnum,options:this.options}),j.push(i);vb.Promise.join(j).then(function(){return k._onFinish()})},a.prototype._conditionallyFlipLayout=function(a,b){return a.flipPending?(a.flippedLayout=!0,M.create(b).startSync()):b},a.prototype._setPendingLayoutImageAssignments=function(a,b,c){var d,e,f;return d=function(a,b,c){var d;return d=ya.create(a,b,c),b.setImageAssignments(d)},e={ignoreOrientation:a.ignoreOrientationOnImageAssignment},this.style.allowsAutofill||this.options.forceAutofill?d(a,b,e):this.style.allowsAutofill||(f=a.pageSpec.type)!==vb.PageTypeEnum.FRONTPAGE&&f!==vb.PageTypeEnum.TITLEPAGE?void 0:(d(a,b,e),c.unassignedImages=b.unassignedImages)},a.prototype._addGroupSpecTextToAssets=function(a,b){var c,d,e,f;if(null==(null!=a?a.originalTextAreas:void 0))return b;for(f=a.originalTextAreas,d=0,e=f.length;d<e;d++)c=f[d],mb.copyTextAreaContentToContentMap(c,b);return b},a.prototype._onFinish=function(){var a,b,c,d,e,f,g,h,i;for(b=[],e=[],a=[],h=this.layoutPicker.getPicksArray(),f=0,g=h.length;f<g;f++)d=h[f],b.push(d.layout),null!=d.unassignedImages&&(e=e.concat(d.unassignedImages)),null!=d.error&&a.push(d.error),(null!=(i=d.layout)?i.populationErrors.length:void 0)>0&&(a=a.concat(d.layout.populationErrors));return c=new Ja(b,this.productSpec,this.warnings.concat(a),e),this.promise.setResult(c,null)},a}(),Q=function(){function a(a,b,c,d,e,f,g){this.contentClient=a,this.textHandler=b,this.productSpec=c,this.style=d,this.images=e,this.assets=f,this.projectTypeEnum=g}return a.create=function(b,c,d,e,f,g,h){return new a(b,c,d,e,f,g,h)},a.prototype.start=function(){var a,b,c,d,e;return e=new vb.Promise,a=this._createConstraintSet(),b=[this._createGroupSpec(this.images,this.assets,a)],d={style:this.style,fetchFullLayouts:!0},c=P.create(this.contentClient,this.textHandler,b,this.productSpec,a,d,this.projectTypeEnum),c.start().then(function(a,b){var c,d,f,g;return null!=b?void e.setError(b):(c=(null!=(g=a.layouts)?g.length:void 0)>0?a.layouts[0]:null,f=a.warnings,d=a.unassignedImages,e.setResult({layout:c,warnings:f,unassignedImages:d}))}),e},a.prototype._createGroupSpec=function(a,b,c){var d,f,g;return f=new Oa(vb.PageTypeEnum.INNERPAGE),d=new e(1,a,f,b.originalTextAreas,b.audioAsset,c),d.background=(null!=(g=b.backgrounds)?g.length:void 0)>0?b.backgrounds[0]:void 0,d},a.prototype._createConstraintSet=function(){var a;return a=new y,a.addConstraint(new da(da.EQUAL_OR_GREATER_MATCH,da.FALLBACK_NO_ASSIGNMENT)),a},a}(),R=function(){function a(a,b,c){this.contentClient=a,this.productSpec=b,this.projectTypeEnum=c,vb.ArgumentValidation.assertObjectIsSpecified(this.contentClient,"contentClient"),vb.ArgumentValidation.assertObjectIsSpecified(this.productSpec,"productSpec")}return a.create=function(b,c,d){return new a(b,c,d)},a.prototype.start=function(){var a=this;return this.getStylePromise=new vb.Promise,this.contentClient.getStyleForProductSpec(this.productSpec,this.projectTypeEnum).then(function(b,c){return null!=c?a.getStylePromise.setError(c):a._parseStyle(b)}),this.getStylePromise},a.prototype._parseStyle=function(a){var b,c,d;return d=ib.fromJSON(a),c=d[0],b=d[1],null!=b&&(b.properties.productSpec=this.productSpec),this.getStylePromise.setResult(c,b)},a}(),T={Messages:{eventTextAssetNotFound:function(a){return new vb.Message("eventTextAssetNotFound","Unable to find eventTextId, "+a+"; gridCellAssets unchanged")},unknownGridCellId:new vb.Message("unknownGridCellId","Unable to identify grid cell id; gridCellAssets unchanged")},getEventTextAssetIndex:function(a,b){var c,d,e,f;for(d=e=0,f=b.length;e<f;d=++e)if(c=b[d],c.container.id===a)return d;return-1},isEventBackground:function(a){return"Embellishment"===a.type&&/event-text-bg$/.test(a.assetReference.assetId)},identifyGridCellId:function(a){var b;return b=/0([0-9]+)/.exec(a[0].container.id),b&&b.length>1?b[1]:null},updateContainerIds:function(a){var b,c,d,e,f,g;if(c=this.identifyGridCellId(a),!c)return null;for(d=f=0,g=a.length;f<g;d=++f)b=a[d],"image"!==b.assetType&&(e=b.container.id,b.container.id=""+d+c,b.scriptLabel=b.scriptLabel.replace("id="+e,"id="+b.container.id));return c},hasEventBackground:function(a,b){var c;return c=b-1,!(c<0)&&this.isEventBackground(a[c])}},ha=function(){function a(a){var b,c;if(this.gridCellAssets=a.gridCellAssets,this.gridCellNumber=a.gridCellNumber,this.gridCellXOffset=a.gridCellXOffset,this.gridCellYOffset=a.gridCellYOffset,this.cellTemplate=a.cellTemplate,this.textHandler=a.textHandler,this.styleJSON=a.styleJSON,this.gridCellXOffset-=this.cellTemplate.assets[0].container.xOffset,this.gridCellYOffset-=this.cellTemplate.assets[0].container.yOffset,/_split_datecell$/.test(this.cellTemplate.template.assetReference.assetId)&&(this.isSplitCell=!0),this.numGridCellAssets=this.cellTemplate.assets.length-(this.isSplitCell?4:2),this.isSplitCell&&(this.splitDate=this._identifySplitDate()),c=ib.fromJSON(this.styleJSON),this.style=c[0],b=c[1],null!=b)throw new Error("Encountered error parsing styleJSON");this.inflatedAssets=[]}return a.startSync=function(b){var c;return c=new a(b),c.startSync()},a.prototype._identifySplitDate=function(){var a,b,c,d,e;b=this._getDateAssetIndices(this.gridCellAssets),a=0,e=b.indicesMap;for(c in e)d=e[c],a=Math.max(parseInt(c.match(/date-([\d]+)/)[1]),a);return a},a.prototype.startSync=function(){var a,b,c,d;return d=vb.CalendarGridCellUtil.parseStartingGridCellId(this.gridCellAssets[0].container.id),a=d.dateCellIndex,this.year=d.year,this.month=d.month,this._validateCellAssetCount("0"+(a+1)+this.year+(this.month-1),this.numGridCellAssets),b=JSON.parse(JSON.stringify(this.cellTemplate.assets)),c=this._getDateAssetIndices(b),this._replaceDateAssets(b,c),this._populateGridCell(b),this.inflatedAssets},a.prototype._validateCellAssetCount=function(a,b){var c,d,e,f,g;for(d=0,g=this.gridCellAssets,e=0,f=g.length;e<f&&(c=g[e],c.container.id!==a);e++)d++;if(d!==b)throw new Error("cell asset count mismatch, # template assets: "+b+", # grid assets: "+d)},a.prototype._getDateAssetIndices=function(a){var b,c,d,e,f,g;for(d={},e=0,c=f=0,g=a.length;f<g;c=++f)b=a[c],b.assetType===vb.LayoutAssetTypeEnum.TEXT&&/date/.test(b.guidanceText)&&(d[b.guidanceText]=c,e++);return{indicesMap:d,numInstances:e}},a.prototype._getGuidanceTextDateValue=function(a){var b;return b=/date-([\d]+)/.exec(a)[1],null!=b?b:null},a.prototype._replaceDateAssets=function(a,b){var c,d,e,f,g,h;for(d=b.numInstances,c=e=f=this.gridCellStartIndex,g=this.cellEndIndex;f<=g?e<=g:e>=g;c=f<=g?++e:--e)d>0&&this.gridCellAssets[c].assetType===vb.LayoutAssetTypeEnum.TEXT&&("date"===(h=this.gridCellAssets[c].guidanceText)||"date-2"===h)&&(a.splice(b.indicesMap[this.gridCellAssets[c].guidanceText],1,this.gridCellAssets[c]),d++)},a.prototype._populateGridCell=function(a){var b=this;return u.startSync({cellTemplateAssets:a,cellHeight:this.gridCellAssets[0].container.height,cellXOffset:this.gridCellXOffset,cellYOffset:this.gridCellYOffset,cellIndex:this.gridCellNumber,splitDate:this.splitDate,monthStartDate:{year:this.year,month:this.month},style:this.style,guidanceContent:{},containerMap:{},existingPageCrop:{},textHandler:this.textHandler,addAsset:function(a){return b.inflatedAssets.push(a)}})},a}(),ma=function(){function a(a,b){this.leftLayout=JSON.parse(JSON.stringify(a)),this.rightLayout=JSON.parse(JSON.stringify(b)),this.leftPageWidth=parseFloat(this.leftLayout.width)}return a.ID_SUFFIX="_custom_spread",a.create=function(b,c){return new a(b,c)},a.prototype.start=function(){var a,b,c;return a=new vb.Promise,c={customLayout:!0,layoutName:this._createSpreadId(),layoutVersion:0,layout:this._joinLayouts()},b=oa.fromPageJSON(c,Aa.ADAPTIVE_SPREAD).toExternal(),a.setResult(b)},a.prototype._createSpreadId=function(){var b,c;return b=this.leftLayout.template.assetReference.assetId,c=b.substring(0,b.indexOf("_")),""+c+a.ID_SUFFIX},a.prototype._joinLayouts=function(){return this.newContent=JSON.parse(JSON.stringify(this.leftLayout)),this.newContent.type=ra.SPREAD_PAGE,this.newContent.width=""+(parseFloat(this.leftLayout.width)+parseFloat(this.rightLayout.width)),this.newContent.template.surfaces=this._describeSurfaces([this.leftLayout,this.rightLayout]),this.newContent.assets=[],this._registerAssets().dedupeNumericalIds(),this._appendBackgrounds(),this._appendPageNumbers(),this._appendUserAssets(),this.newContent},a.prototype._describeSurfaces=function(a){var b,c,d,e,f;for(c=[],d=0,e=0,f=a.length;e<f;e++)b=a[e],c.push({xOffset:""+d,yOffset:"0",width:""+b.width,height:""+b.height}),d+=parseFloat(b.width);return c},a.prototype._registerAssets=function(){var a;return a=new l,[this.leftLayout.assets,this.rightLayout.assets].forEach(function(b){return b.forEach(function(b){return a.register(b)})}),a},a.prototype._appendBackgrounds=function(){var a,b,c,d;return a=this._findBackground(this.leftLayout),d=this._findBackground(this.rightLayout),c=parseFloat(a.container.width),b=(this.leftPageWidth-c).toString(),this._updateXOffset(a,b),this._updateXOffset(d,this.leftPageWidth),this._appendAsset(a),this._appendAsset(d)},a.prototype._appendAsset=function(a){return this.newContent.assets.push(a)},a.prototype._updateXOffset=function(a,b){var c,d;return null!=(c=a.container)&&(c.xOffset=""+b),null!=(d=a.imageRectangle)?d.xOffset=""+b:void 0},a.prototype._findBackground=function(a){var b;return b=a.assets.filter(vb.LayoutGraphicAssetTypeEnum.isBackground),null!=b?b[0]:void 0},a.prototype._appendPageNumbers=function(){var a,b;return a=this._findTextField(this.leftLayout,Pa.PAGE_NUM_L),b=this._findTextField(this.leftLayout,Pa.PAGE_NUM_R),b.container.xOffset=(parseFloat(b.container.xOffset)+parseFloat(this.rightLayout.width)).toString(),this._appendAsset(a),this._appendAsset(b)},a.prototype._findTextField=function(a,b){var c;return c=a.assets.filter(function(a){return a.paraStyle===b}),null!=c?c[0]:void 0},a.prototype._appendUserAssets=function(){var a,b,c,d,e,f,g,h,i;for(c=new Za,h=this._findUserAssets(this.leftLayout),d=0,f=h.length;d<f;d++)a=h[d],this._appendUserAsset(a,c);for(i=this._findUserAssets(this.rightLayout),e=0,g=i.length;e<g;e++)a=i[e],b=parseFloat(a.container.xOffset)+this.leftPageWidth,this._updateXOffset(a,b),this._appendUserAsset(a,c)},a.prototype._findUserAssets=function(a){return a.assets.filter(function(a){return a.type!==vb.LayoutGraphicAssetTypeEnum.BACKGROUND&&a.assetType!==vb.LayoutAssetTypeEnum.AUDIO&&a.paraStyle!==Pa.PAGE_NUM_L&&a.paraStyle!==Pa.PAGE_NUM_R})},a.prototype._appendUserAsset=function(a,b){return b.applyNextNumToAsset(a),this._appendAsset(a)},a}(),l=function(){function a(){this._assetsById={},this._maxId=0}return a.ID_EXP=/id=\d+/gi,a.prototype.register=function(a){var b;if(b=parseInt(a.container.id),!isNaN(b))return this._lookupAssetList(a.container.id).push(a),this._maxId=Math.max(this._maxId,b)},a.prototype._lookupAssetList=function(a){return null==this._assetsById[a]&&(this._assetsById[a]=[]),this._assetsById[a]},a.prototype.dedupeNumericalIds=function(){var b,c,d,e,f;e=this._assetsById,f=[];for(d in e)c=e[d],f.push(function(){var d;for(d=[];c.length>1;)b=c.splice(1,1)[0],b.container.id=this._nextId(),d.push(b.scriptLabel=b.scriptLabel.replace(a.ID_EXP,"id="+b.container.id));return d}.call(this));return f},a.prototype._nextId=function(){return this._maxId++,""+this._maxId},a}(),Ua=function(){function a(a){this.isSplitCell=a.isSplitCell,this.gridCellAssets=a.gridCellAssets,this.eventTextId=a.eventTextId}return a.create=function(b){return new a(b)},a.prototype.startSync=function(){var a,b,c;return T.identifyGridCellId(this.gridCellAssets)?(a=T.getEventTextAssetIndex(this.eventTextId,this.gridCellAssets),a>=0?T.hasEventBackground(this.gridCellAssets,a)?(b=this.gridCellAssets.length,this._removeEventBackgroundPriorToIndex(a),this.gridCellAssets.length!==b&&T.updateContainerIds(this.gridCellAssets),{warning:null,gridCellAssets:this.gridCellAssets
}):{warning:null,gridCellAssets:this.gridCellAssets}:(c=T.Messages.eventTextAssetNotFound(this.eventTextId),{warning:c,gridCellAssets:this.gridCellAssets})):(c=T.Messages.unknownGridCellId,{warning:c,gridCellAssets:this.gridCellAssets})},a.prototype._removeEventBackgroundPriorToIndex=function(a){if(a>1&&T.isEventBackground(this.gridCellAssets[a-1]))return this.gridCellAssets.splice(a-1,1)},a}(),Va=function(){function a(a){var b,c,d,e,f;this.layout=a.layout,this.layoutContent=a.layoutContent,e=a.originalPages,this.style=a.style,this.textHandler=a.textHandler,this.productSize=a.productSize,c=a.background,b=a.applyFrames,f=a.preferUserText,this.projectTypeEnum=a.projectTypeEnum,this.groupSpec=a.groupSpec,this.layoutRequestPool=a.layoutRequestPool,this.options=a.options,this.originalPages=Array.isArray(e)?e:[e],vb.ArgumentValidation.assertObjectIsSpecified(this.layout,"layout"),vb.ArgumentValidation.assertObjectIsSpecified(this.layoutContent,"layoutContent"),vb.ArgumentValidation.assertObjectIsSpecified(this.originalPages,"originalPages"),vb.ArgumentValidation.assertObjectIsSpecified(this.style,"style"),vb.ArgumentValidation.assertObjectIsSpecified(this.textHandler,"textHandler"),vb.ArgumentValidation.assertIsString(this.productSize,"productSize"),this.promise=new vb.Promise,d=this.layout.type===Aa.DEBOSS_PREVIEW,this.sourceLayouts=this.originalPages.map(function(a){return d&&null!=a.stockCover?a.stockCover:a.layout}),this.background=null!=c?c:null,this.applyFrames=b||!1,this.preferUserText=f||!1,this.options=this.options||{}}return a.create=function(b){return new a(b)},a.prototype.start=function(){var a=this;return this.defaultBackground=new H(this.style),this._populateLayout(this.layout,this.layoutContent).then(function(){return a.promise.setResult(a.layout)}),this.promise},a.prototype._populateLayout=function(a,b){var c,d,e;return c=this._parsePageAssets(),d=!1,this.options.replaceTextContent=null!=(e=this.options.replaceTextContent)&&e,Ea.start({layout:a,content:b,assets:c,style:this.style,textHandler:this.textHandler,useDefaultTextStyle:d,applyFrames:this.applyFrames,preferUserText:this.preferUserText,projectTypeEnum:this.projectTypeEnum,groupSpec:this.groupSpec,layoutRequestPool:this.layoutRequestPool,options:this.options})},a.prototype._parsePageAssets=function(){var a,b,c,d,e,f;for(c={defaultBackground:this.defaultBackground,backgrounds:[]},a=vb.Project.scrapeLayoutAssets(this.sourceLayouts),d=this.sourceLayouts.length>1?new Za:void 0,e=0,f=a.length;e<f;e++)b=a[e],null!=d&&d.applyNextNumToAsset(b),b.assetType===vb.LayoutAssetTypeEnum.IMAGE?this._parseImageArea(b,c):b.assetType===vb.LayoutAssetTypeEnum.TEXT?this._parseTextArea(b,c):b.assetType===vb.LayoutAssetTypeEnum.AUDIO?this._parseAudio(b,c):this._parseGraphicAsset(b,c);return c},a.prototype._parseImageArea=function(a,b){var c;return this.applyFrames?(this._imageAreaHasUserOwnedFrame(a)&&(c=N.createFromIdAndSize(a.container.objectStyle,this.productSize),null!=c&&null!=c.color&&(null==b.imageIdToFrameMap&&(b.imageIdToFrameMap={}),b.imageIdToFrameMap[a.imageAssignment.imageReference.id]=c)),b):b},a.prototype._imageAreaHasUserOwnedFrame=function(a){var b,c,d;return null!=(null!=(b=a.imageAssignment)&&null!=(c=b.imageReference)?c.id:void 0)&&(null!=(d=a.container.borderColor)?d.length:void 0)>0&&(a.container.frameOwnedByUser===!0||"true"===a.container.frameOwnedByUser)},a.prototype._parseTextArea=function(a,b){return mb.copyTextAreaContentToContentMap(a,b),b},a.prototype._parseGraphicAsset=function(a,b){var c;return vb.LayoutGraphicAssetTypeEnum.isBackground(a)&&b.backgrounds.unshift(null!=(c=this.background)?c:this._parseBackground(a)),b},a.prototype._parseBackground=function(a){var b,c;if(c=a.imageAssignment,b=a.assetReference,null!=b)return new o(b.assetId,b.version,b.sourceUrl,c)},a.prototype._parseAudio=function(a,b){return b.audio=a,b},a}(),Wa=function(){function a(a){var b;this.layoutId=a.layoutId,this.layoutContent=a.layoutContent,this.layoutListType=a.layoutListType,this.targetDimens=a.targetDimens,this.textHandler=a.textHandler,this.logger=a.logger,this.productSpec=a.productSpec,b=a.options,this._recalculateTextWrap=xb(this._recalculateTextWrap,this),this.pageTypeLayoutTextHandler={},this.pageTypeLayoutTextHandler[vb.PageTypeEnum.CALENDAR_GRIDPAGE]=w,this.enableTextWrapRecalculation=null!=b?b.enableTextWrapRecalculation:void 0,null==this.enableTextWrapRecalculation||this.enableTextWrapRecalculation===!0||"true"===this.enableTextWrapRecalculation?this.enableTextWrapRecalculation=!0:this.enableTextWrapRecalculation=!1}return a.create=function(b){return new a(b)},a.prototype.start=function(){var a,b=this;return this.targetLayoutJSON=JSON.parse(JSON.stringify(this.layoutContent)),a=new vb.Promise,this.xScale=this.targetDimens.width/this.layoutContent.width,this.yScale=this.targetDimens.height/this.layoutContent.height,this.meanScale=(this.xScale+this.yScale)/2,this.warnings=[],this.pageType=Aa.toPageType(this.layoutListType),this._modifyLayoutAttributes(),this._modifyAssetAttributes().then(function(){return a.setResult(b.targetLayoutJSON,b.warnings)}),a},a.prototype._modifyLayoutAttributes=function(){return this._modifyLayoutDimensions(),this._modifyLayoutBleedSettings(),this._modifyLayoutTemplateSurfaces()},a.prototype._modifyLayoutDimensions=function(){return this.targetLayoutJSON.width=this.targetDimens.width,this.targetLayoutJSON.height=this.targetDimens.height},a.prototype._modifyLayoutBleedSettings=function(){return this.targetLayoutJSON.bleedTop=this.targetDimens.bleedTop,this.targetLayoutJSON.bleedBottom=this.targetDimens.bleedBottom,this.targetLayoutJSON.bleedInside=this.targetDimens.bleedInside,this.targetLayoutJSON.bleedOutside=this.targetDimens.bleedOutside},a.prototype._modifyLayoutTemplateSurfaces=function(){var a,b;return b=this.targetDimens.width,a=this.targetDimens.height,this.layoutContent.type===ra.SPREAD_PAGE?(b/=2,this.targetLayoutJSON.template.surfaces=[{xOffset:"0",yOffset:"0",width:b,height:a},{xOffset:b,yOffset:"0",width:b,height:a}]):this.targetLayoutJSON.template.surfaces=[{xOffset:"0",yOffset:"0",width:b,height:a}]},a.prototype._modifyAssetAttributes=function(){var a,b,c,d,e,f,g,h,i;for(f=[],i=this.targetLayoutJSON.assets,g=0,h=i.length;g<h;g++)switch(a=i[g],a.assetType){case"graphic":"Background"===a.type?this._resizeBackground(a):(this._moveAndRespectAspect(a.container),null!=a.imageRectangle&&this._moveAndRespectAspect(a.imageRectangle));break;case"text":"page_num_R"===a.paraStyle?(this._respectRightOffset(a.container),this._respectBottomOffset(a.container)):"page_num_L"===a.paraStyle?this._respectBottomOffset(a.container):(this._moveAndStretch(a.container),this.enableTextWrapRecalculation&&mb.hasText(a)&&(e=this.pageTypeLayoutTextHandler[vb.PageTypeEnum.identifyTypeByLayoutId(this.layoutId)],null!=e?f.push(e.recalculateTextWrap(a,this._recalculateTextWrap)):f.push(this._recalculateTextWrap(a))));break;case"image":c=null!=a?a.imageAssignment:void 0,null!=c&&(b=vb.Project.extractCropFromImageAssignment(c)),d=vb.Project.extractImageSize(c),this._moveAndStretch(a.container),null!=a.imageRectangle&&this._moveAndStretch(a.imageRectangle),null!=a.imageAssignment&&null!=b&&null!=d&&vb.CropUtil.recalculateImageReferenceCrop(d,b,a,a.imageAssignment)}return vb.Promise.join(f)},a.prototype._resizeBackground=function(a){var b,c,d,e,f,g,h;if(this._resizeAssetReference(a.assetReference),this.layoutContent.type===ra.SPREAD_PAGE?(h=p.forSpread({spreadDimens:this.targetDimens}),f=h.left,g=h.right,b=a.container.xOffset<this.layoutContent.width/2?f:g):b=p.forLayout(this.targetDimens,this.pageType),this._applyContainerDimens(a.container,b.container),this._applyContainerDimens(a.imageRectangle,b.imageRectangle),d=null!=a?a.imageAssignment:void 0)return c=vb.Project.extractCropFromImageAssignment(d),e=vb.Project.extractImageSize(d),vb.CropUtil.recalculateImageReferenceCrop(e,c,a,d)},a.prototype._resizeAssetReference=function(a){var b,c;if(a&&null!=a.assetId&&null!=a.version&&null!=a.sourceUrl&&null!=this.productSpec)return b=new o(a.assetId,a.version,a.sourceUrl),c=b.toBookSizeID(this.productSpec.productSize),a.assetId=c.id,a.version=c.version,a.sourceUrl=c.swfUrl},a.prototype._applyContainerDimens=function(a,b){return a.xOffset=this._toRoundedString(b.xOffset),a.yOffset=this._toRoundedString(b.yOffset),a.width=this._toRoundedString(b.width),a.height=this._toRoundedString(b.height)},a.prototype._respectRightOffset=function(a){var b;return b=this.layoutContent.width-a.xOffset,a.xOffset=this._toRoundedString(this.targetDimens.width-b)},a.prototype._respectBottomOffset=function(a){var b;return b=this.layoutContent.height-a.yOffset,a.yOffset=this._toRoundedString(this.targetDimens.height-b)},a.prototype._moveAndStretch=function(a){var b,c,d;return d=parseFloat(a.width)*this.xScale,c=parseFloat(a.height)*this.yScale,b=vb.TransformUtil.getTransformedOrigin(a,d,c),this._transformContainer(a,b,d,c)},a.prototype._moveAndRespectAspect=function(a){var b,c,d;return d=parseFloat(a.width)*this.meanScale,c=parseFloat(a.height)*this.meanScale,b=vb.TransformUtil.getScaledOrigin(a,this.xScale,this.yScale,d,c),this._transformContainer(a,b,d,c)},a.prototype._transformContainer=function(a,b,c,d){return a.xOffset=this._toRoundedString(b.x),a.yOffset=this._toRoundedString(b.y),a.width=this._toRoundedString(c),a.height=this._toRoundedString(d)},a.prototype._toRoundedString=function(a){return vb.NumberUtil.round(a).toString(10)},a.prototype._recalculateTextWrap=function(a){var b,c=this;return b=this.textHandler.applyTextWraps(a),b.then(function(a,b){var d;if(null!=b)return c.warnings.push(b),null!=(d=c.logger)?d.warn("Text rewrap failed while resizing layout: "+b.toString()):void 0}),b},a}(),Xa=function(){function a(a,b,c,d,e,f,g){this.page=a,this.layoutListType=b,this.targetDimens=c,this.textHandler=d,this.logger=e,this.projectSummary=f,this.productSpec=g}return a.create=function(b,c,d,e,f,g,h){return new a(b,c,d,e,f,g,h)},a.prototype.start=function(){var a,b,c=this;return b=new vb.Promise,this.pageJSON=JSON.parse(JSON.stringify(this.page)),a=Wa.create({layoutId:this.page.layoutName,layoutContent:this.page.layout,layoutListType:this.layoutListType,targetDimens:this.targetDimens,textHandler:this.textHandler,logger:this.logger,productSpec:this.productSpec}),a.start().then(function(a,d){var e,f;return c.warnings=d,e=c.page.ideaLayout?Ha.IDEA:void 0,c.pageJSON.layout=a,c._modifyPageAttributes(),f=oa.fromPageJSON(c.pageJSON,c.layoutListType,e),f.customLayout=!0,b.setResult(f)}),b},a.prototype._modifyPageAttributes=function(){var a,b,c,d,e;if(c=this._extractLayoutIDs(),b=c.layoutName,a=c.layoutAssetId,null!=b&&(this.pageJSON.layoutName=b),null!=a)return null!=(d=this.pageJSON.layout.template)&&null!=(e=d.assetReference)?e.assetId=a:void 0},a.prototype._extractLayoutIDs=function(){var a,b,c;return c=void 0,b=void 0,null==this.projectSummary||null==this.productSpec?{layoutName:c,layoutAssetId:b}:(c=xa.constructTargetLayoutId(this.projectSummary,this.productSpec,this.page.layoutName,this.layoutListType),a=this.page.layout.template.assetReference.assetId,b=xa.constructTargetLayoutId(this.projectSummary,this.productSpec,a,this.layoutListType),{layoutName:c,layoutAssetId:b})},a}(),$a=function(){function a(a){this.layout=a.layout,this.images=a.images,vb.ArgumentValidation.assertObjectIsSpecified(this.layout,"layout"),vb.ArgumentValidation.assertArrayIsNotEmpty(this.layout.assets,"layout.assets"),vb.ArgumentValidation.assertIsArray(this.images,"images"),this.layoutImageAreas=ta.parseImageAreas(this.layout.assets)}return a.Messages={failedToAssignImages:function(a){return new vb.Message("failedToAssignImages","Failed to assign images to the following imageAreas: "+a,vb.LogLevel.WARN)}},a.create=function(b){return new a(b)},a.prototype.startSync=function(){var a,b,c,d;return c=this._getImagesFromLayout(this.layout),a=vb.ImagesUtil.chooseImagesAtRandom(this.layoutImageAreas.length,this.images),b=ya.create({images:a,existingPageCrop:c.cropMap},{imageAreas:this.layoutImageAreas},{ignoreOrientation:!0}),d=this._populateImageAssignments(b.assignments,this.layout).warning,{layout:this.layout,warning:d}},a.prototype._getImagesFromLayout=function(a){var b,c,d,e,f,g;for(e=[],b={},d=vb.Project.extractImagesFromLayout(a),f=0,g=d.length;f<g;f++)c=d[f],e.push(c.image),b[c.image.id]=c.pageCrop;return{images:e,cropMap:b}},a.prototype._populateImageAssignments=function(b,c){var d,e,f,g;d=[];for(f in b){e=b[f];try{e.populateImageAssignment(ta.findAssetByContainerId(f,c.assets))}catch(a){d.push(f)}}return g=null,d.length>0&&(g=a.Messages.failedToAssignImages(d)),{assignments:b,warning:g}},a}(),cb=function(){function a(a){this.spreadLayout=a.spreadLayout,this.styleJson=a.styleJson,this.productSpec=a.productSpec,this.contentClient=a.contentClient,this.textHandler=a.textHandler,this.options=a.options,this.projectTypeEnum=a.projectTypeEnum,this.promise=new vb.Promise}return a.Messages={unspecifiedLayout:new vb.Message("unspecifiedLayout","left or right layout unspecified in options"),conflictingLayout:new vb.Message("unspecifiedLayout","both left and right layouts cannot be specified in options")},a.start=function(b){var c;return c=new a(b),c.start()},a.prototype.start=function(){var a,b,c,d,e,f,g,h=this;return c=null,d=null,f=[],e=[],g=ib.fromJSON(this.styleJson),this.style=g[0],b=g[1],null!=b?(this.promise.setError(b),this.promise):(a=db.parse(this.spreadLayout,this.textHandler),a.defaultBackground=new H(this.style),null==this.options.leftLayout&&null==this.options.rightLayout||this._splitSpreadWithLayout(this.options,a).then(function(b,g){return null!=g?void h.promise.setError(g):(null!=h.options.leftLayout?c=b.layout:d=b.layout,f=b.warnings,db.removeAssignedTextAssets(a),h._getPopulatedLayout(h.options,b.unassignedImages,a).then(function(a,b){return null!=b?void h.promise.setError(b):(null!=h.options.leftLayout?d=a.layout:c=a.layout,f=f.concat(a.warnings),e=a.unassignedImages,h.promise.setResult({leftLayout:c,rightLayout:d,warnings:f,unassignedImages:e}))}))}),this.promise)},a.prototype._splitSpreadWithLayout=function(b,c){var d,e,f;return f=new vb.Promise,e=b.leftLayout||b.rightLayout,null==e?(f.setError(a.Messages.unspecifiedLayout),f):(d=oa.fromPageJSON(this._createLayoutFromMetaData(e),Aa.ADAPTIVE,e.layoutType),ca.transfer(d,this.spreadLayout),null!=b.leftLayout?c.backgrounds=null!=c.spreadBackgrounds?[c.spreadBackgrounds.left]:void 0:c.backgrounds=null!=c.spreadBackgrounds?[c.spreadBackgrounds.right]:void 0,Ea.start({layout:d,content:d.content,assets:c,style:this.style,textHandler:this.textHandler,options:this.options}).then(function(a,b){var c,e;return null!=b?void f.setError(b):(e=d.populationErrors,c=d.unassignedImages,d.unassignedImages=[],d=d.toExternal(),f.setResult({layout:d,warnings:e,unassignedImages:c}))}),f)},a.prototype._createLayoutFromMetaData=function(a){return{layoutName:a.id,layoutVersion:a.version,layout:a.layoutJson}},a.prototype._getPopulatedLayout=function(a,b,c){var d;return null!=a.leftLayout?c.backgrounds=null!=c.spreadBackgrounds?[c.spreadBackgrounds.right]:void 0:c.backgrounds=null!=c.spreadBackgrounds?[c.spreadBackgrounds.left]:void 0,d=Q.create(this.contentClient,this.textHandler,this.productSpec,this.style,b,c,this.projectTypeEnum),d.start()},a}(),ca={transfer:function(a,b){var c,d,e,f,g,h,i,j,k;for(d={images:[],existingPageCrop:{}},j=vb.Project.extractImagesFromLayout(b),h=0,i=j.length;h<i;h++)k=j[h],f=k.image,g=k.pageCrop,d.images.push(f),d.existingPageCrop[f.id]=g;return e={ignoreOrientation:!0},c=ya.create(d,a,e),a.setImageAssignments(c),a}},fb=function(){function a(a){this.spreadLayout=a}return a.ID_SUFFIX="_custom_page",a.create=function(b){return new a(b)},a.prototype.start=function(){var a,b,c,d,e,f;return c=new vb.Promise,f=db.halve(this.spreadLayout),a=f.left,d=f.right,b=oa.fromPageJSON(this._createPage(a),Aa.ADAPTIVE),e=oa.fromPageJSON(this._createPage(d),Aa.ADAPTIVE),c.setResult({leftLayout:b.toExternal(),rightLayout:e.toExternal()})},a.prototype._createPage=function(a){var b;return b=this._createLayout(a),{customLayout:!0,layoutName:this._createLayoutName(),layoutVersion:0,layout:b}},a.prototype._createLayout=function(a){var b;return b=JSON.parse(JSON.stringify(this.spreadLayout)),b.type=ra.ONE_PAGE,b.width=""+parseFloat(this.spreadLayout.width)/2,b.assets=a,b.template.surfaces=[this._describeHalfSurface()],b},a.prototype._describeHalfSurface=function(){return{xOffset:"0",yOffset:"0",width:""+parseFloat(this.spreadLayout.width)/2,height:this.spreadLayout.height}},a.prototype._createLayoutName=function(){var b,c;return b=this.spreadLayout.template.assetReference.assetId,c=b.substring(0,b.indexOf("_")),""+c+a.ID_SUFFIX},a}(),gb=function(){function a(a){this.spreadLayout=a.spreadLayout,this.styleJson=a.styleJson,this.productSpec=a.productSpec,this.contentClient=a.contentClient,this.textHandler=a.textHandler,this._createDefaultConstraints(),this.options={styleJson:this.styleJson}}return a.create=function(b){var c,d,e,f,g;return e=b.spreadLayout,f=b.styleJson,d=b.productSpec,c=b.contentClient,g=b.textHandler,new a({spreadLayout:e,styleJson:f,productSpec:d,contentClient:c,textHandler:g})},a.prototype.start=function(){var a,b,c,d,e=this;return c=new vb.Promise,a=fb.create(this.spreadLayout).start().result,b=this._adaptLayout(a.leftLayout),d=this._adaptLayout(a.rightLayout),vb.Promise.join([b,d]).then(function(){var a,f;return f={leftLayout:e._getFirstLayout(b),rightLayout:e._getFirstLayout(d),warnings:e._concatWarnings(b,d),unassignedImages:e._concatImages(b,d)},a={left:b.error,right:d.error},c.setResult(f,a)}),c},a.prototype._createDefaultConstraints=function(){return this.constraints=new y,this.constraints.addConstraint(new da(da.EQUAL_OR_GREATER_MATCH,da.FALLBACK_NO_ASSIGNMENT)),this.constraints.addConstraint(new Ma(Ma.PARTIAL))},a.prototype._adaptLayout=function(a){var b,c,e;return c={content:a.content,pageType:vb.PageTypeEnum.INNERPAGE},b=oa.getImages(a.content),e=d.create(this.contentClient,this.textHandler,b,c,this.productSpec,this.constraints,null,this.options),e.start()},a.prototype._getFirstLayout=function(a){var b,c;return null!=(b=a.result)&&null!=(c=b.layouts)?c[0]:void 0},a.prototype._concatWarnings=function(a,b){var c,d;return this._concat(null!=(c=a.result)?c.warnings:void 0,null!=(d=b.result)?d.warnings:void 0)},a.prototype._concatImages=function(a,b){var c,d;return this._concat(null!=(c=a.result)?c.unassignedImages:void 0,null!=(d=b.result)?d.unassignedImages:void 0)},a.prototype._concat=function(a,b){return(null!=a?a:[]).concat(null!=b?b:[])},a}(),r={create:function(a,b,c,d){return{hasFront:a,hasSpine:b,hasBack:c,acceptsImageOn:d}}},s={photo:r.create(!0,!0,!0,{front:!0,spine:!0,back:!0}),stock:r.create(!0,!1,!1,{front:!0,spine:!1,back:!1}),premium:r.create(!0,!1,!1,{front:!1,spine:!1,back:!1}),defaultRule:r.create(!1,!1,!1,{front:!1,spine:!1,back:!1}),getRule:function(a){return/hard|soft|padded/.test(a)?s.photo:/silk|premiumleather/.test(a)?s.premium:/leather|cloth|linen/.test(a)?s.stock:s.defaultRule}},F={anyFrontCover:function(a,b){var c,d;return c=this._formFactorExpression(b),d=a.getLayoutsForType(Aa.ADAPTIVE_FRONT_COVER,c),this._anyItem(d)},anyBackCover:function(a,b){var c,d;return c=this._formFactorExpression(b),d=a.getLayoutsForType(Aa.ADAPTIVE_BACK_COVER,c),this._anyItem(d)},_formFactorExpression:function(a){return a=a.replace(/wide/,"hard").replace(/hinged/,"hard"),new RegExp(a)},_anyItem:function(a){var b;return b=Math.floor(Math.random()*(a.length-1)),a[b]}},Ra={getPageCount:function(a){return null!=a.book?3+a.book.pages.length:a.product.pages.length}},_a={WIDE_SPINE_THRESHOLD:58,getAppropriateLayoutId:function(a,b,c){return null==a||a.getBinding()!==q.LAYFLAT?c:b>=_a.WIDE_SPINE_THRESHOLD?c.replace("hard","wide"):c.replace("wide","hard")},getAppropriateLayout:function(a,b,c,d){var e;return null==d?d:(e=_a.getAppropriateLayoutId(b,c,d.id),e===d.id?d:a.getLayout(e))},getAnyAppropriateLayout:function(a,b,c){return this.needsWideSpine(b,c)?this.getAnyWideSpine(a):b.getCoverType()===G.SOFT?this.getAnySoftSpine(a):this.getAnyHardSpine(a)},needsWideSpine:function(a,b){return a.getBinding()===q.LAYFLAT&&b>=_a.WIDE_SPINE_THRESHOLD},getAnyWideSpine:function(a){return this.getMatchingSpine(a,/wide/)},getAnyHardSpine:function(a){return this.getMatchingSpine(a,/hard/)},getAnySoftSpine:function(a){return this.getMatchingSpine(a,/soft/)},getMatchingSpine:function(a,b){var c;return c=a.getLayoutsForType(Aa.ADAPTIVE_SPINE,b),null!=c?c[0]:void 0}},H=function(){function a(a){this.style=a,this._bgIndexByType={},this._defaultBackground=this._adjustBackgroundUrlHostPrefix(this._getDefaultBackground(this.style.sizeId),this.style.assetUrlHostPrefix)}return a.Constants={DEFAULT_BKGD_SQ_ID:"bg_sq_sfly_classic-white",DEFAULT_BKGD_SQ_VERSION:3,DEFAULT_BKGD_SQ_URL:"http://c1.staticsfly.com/asset/fetch/bg_sq_sfly_classic-white/bkg.swf/v3",DEFAULT_BKGD_REC_ID:"bg_rec_sfly_classic-white",DEFAULT_BKGD_REC_VERSION:3,DEFAULT_BKGD_REC_URL:"http://c1.staticsfly.com/asset/fetch/bg_rec_sfly_classic-white/bkg.swf/v3"},a.prototype._getDefaultForBackgroundType=function(a){var b,c,d;return c=a.xmlName,this._bgIndexByType[c]||(this._bgIndexByType[c]=0),b=this.style.getBackgroundsForType(a),d=b.length,0===d?this._defaultBackground:(this._bgIndexByType[c]>=d&&(this._bgIndexByType[c]=0),b[this._bgIndexByType[c]++])},a.prototype.getDefaultForSurfaceType=function(a){return this._getDefaultForBackgroundType(I.fromSurfaceType(a))},a.prototype.getDefaultForPageType=function(a){return this._getDefaultForBackgroundType(I.fromPageType(a))},a.prototype._getDefaultBackground=function(b){return this._isRectangle(b)?new o(a.Constants.DEFAULT_BKGD_REC_ID,a.Constants.DEFAULT_BKGD_REC_VERSION,a.Constants.DEFAULT_BKGD_REC_URL):new o(a.Constants.DEFAULT_BKGD_SQ_ID,a.Constants.DEFAULT_BKGD_SQ_VERSION,a.Constants.DEFAULT_BKGD_SQ_URL)},a.prototype._isRectangle=function(a){var b,c,d;return c=a.split("x"),2===c.length&&(b=parseInt(c[0]),d=parseInt(c[1]),!isNaN(b)&&!isNaN(d)&&(0!==b&&0!==d&&b/d!==1))},a.prototype._adjustBackgroundUrlHostPrefix=function(a,b){return(null!=b?b.length:void 0)>0&&(a.swfUrl=a.swfUrl.replace("http://c1.staticsfly.com",b)),a},a}(),b.exports={utils:vb,photoccino:tb,AdaptiveGroupSpec:e,AdaptiveLayout:f,AdaptiveProductSpec:g,AutoGroup:n,ConstraintSet:y,ContentClient:A,ContentFactory:B,DensityRangeConstraint:K,Frame:N,GlobalContent:S,GroupCountConstraint:V,GroupSizeConstraint:Y,ImageArea:_,ImageCountConstraint:da,ImageGroup:ea,ImageGroups:fa,Layout:oa,LayoutCardinalityEnum:ra,LayoutCategoryConstraint:sa,LayoutRequestPool:Fa,LayoutsResult:Ja,LayoutTypeEnum:Ha,LayoutListTypeEnum:Aa,LayoutAssetTypeEnum:vb.LayoutAssetTypeEnum,LinearDensityConstraint:Ka,OrientationConstraint:Ma,PageSpec:Oa,PageTypeEnum:vb.PageTypeEnum,ProjectSummary:Ta,ProjectTypeEnum:vb.ProjectTypeEnum,ResolutionConstraint:Ya,SpinePageSpec:ab,SpineVariantEnum:bb,Style:ib,TextAreaCountConstraint:kb,LayoutStylingConstraint:Ga,LayoutAttributesMatchConstraint:qa,TextHandler:mb,TextFlow:lb,TextWraps:nb,TimeDeduplicationConstraint:ob,Version:pb,Web2PrintClient:qb,Web2PrintTextAsset:rb,LayoutIdConversion:xa,SpreadConstraint:eb,EmbellishmentAsset:L,ImageAreaAsset:aa,TextAreaAsset:jb,private:{AdaptLayoutOperation:d,AddGridCellEventBackgroundOperation:h,ApplyLayoutOperation:i,ApplyToOtherPagesOperation:j,AssignFrames:m,Background:o,BackgroundDimens:p,BindingTypeEnum:q,BookCoverRules:s,BrowserContentRequest:t,CalendarGridLayoutTextHandler:w,CompiledGoal:x,ContainerDimens:z,ContentRequest:C,ConvertPageOperation:D,ConvertProjectOperation:E,CoverLayout:F,CoverTypeEnum:G,DefaultBackground:H,DefaultBackgroundTypeEnum:I,DeflateGridCellOperation:J,FlipLayoutOperation:M,FramePointSizes:O,GetLayoutsOperation:P,GetSingleLayoutOperation:Q,GetStyleOperation:R,GridCellEventBackgroundOperation:T,GroupCount:U,GroupJoinIterator:W,GroupSize:X,Image:$,ImageAreaAssignment:ba,InflateGridCellOperation:ha,Interval:ia,IntervalList:ka,JoinLayoutsOperation:ma,LayoutAttributes:pa,LayoutContentUtil:ta,LayoutDimens:ua,LayoutFitSummary:va,LayoutFormFactor:wa,LayoutImageAssignments:ya,LayoutIndex:za,LayoutLookup:Ba,LayoutPicker:Da,LayoutPopulation:Ea,CalendarGridCellPopulation:u,CalendarGridLayoutPopulation:v,LayoutUsage:Ia,LookupHints:La,LPSCount:na,PendingLPSAssignments:Qa,PhotobookProject:Ra,RemoveGridCellEventBackgroundOperation:Ua,ReplaceLayoutOperation:Va,ResizePageOperation:Xa,ResizeLayoutOperation:Wa,SeqNumCounter:Za,ShuffleLayoutImagesOperation:$a,SpineLayout:_a,SplitSpreadOperation:cb,SpreadAssets:db,SpreadToCustomLayoutsOperation:fb,SpreadToLayoutsOperation:gb,Stack:hb}}}).call(this)}).call(this,a("buffer").Buffer)},{"./photoccino.js":13,"./utils.js":14,"browser-request":1,buffer:3,http:"http",intl:"intl","lodash.clone":9,"lodash.clonedeep":10,request:"request",url:"url",zlib:"zlib"}],13:[function(a,b,c){(function(){"use strict";var c,d,e;d=a("undefined"!=typeof window&&null!==window?"browser-request":"request"),e=a("./utils.js"),c=function(){function a(a,b){this.serviceURI=a,this.apiKey=b}return a.create=function(b){var c,d;return d=b.serviceURI,c=b.apiKey,new a(d,c)},a.prototype.generateRequestHeader=function(){return{key:this.apiKey,time:Math.floor(Date.now()/1e3),token:""}},a.prototype.getPhotosById=function(a,b,c){var d;return null==c&&(c={}),d={partnerUserId:a,photoIds:b,photoFullInfo:c.photoFullInfo!==!1},this._requestFromEndpoint("GetPhotos",d,this._parsePhotos)},a.prototype.getRank=function(a,b,c,d){var e;return null==d&&(d={}),e={partnerUserId:a,fullPhotoData:b,photoFullInfo:d.photoFullInfo!==!1,oauthToken:c},this._requestFromEndpoint("GetRank",e,this._parsePhotos)},a.prototype._parsePhotos=function(a){var b;return null!=(b=a.responseBody)?b:{photos:[]}},a.prototype._requestFromEndpoint=function(a,b,c){var f,g,h,i=this;return h=new e.Promise,f={requestHeader:this.generateRequestHeader(),requestBody:b},g={method:"POST",url:"https://"+this.serviceURI+"/"+a,json:!0,body:f},d(g,function(a,b,d){return null!=a?h.setError(i._toRequestError(a,f.requestBody)):b.statusCode>=400?h.setError(i._toResponseError(f.requestBody,b)):h.setResult(c(d))}),h},a.prototype._toRequestError=function(a,b){var c,d;return new e.Message("photoccinoRequestError","Error invoking remote API",e.LogLevel.WARN,{error:a,serviceURI:this.serviceURI,userId:b.partnerUserId,photoCount:(null!=(c=b.photoIds)?c.length:void 0)||(null!=(d=b.fullPhotoData)?d.length:void 0)})},a.prototype._toResponseError=function(a,b){var c,d;return new e.Message("photoccinoResponseError","Error received from remote API",e.LogLevel.WARN,{error:b.body,serviceURI:this.serviceURI,status:b.statusCode,userId:a.partnerUserId,photoCount:(null!=(c=a.photoIds)?c.length:void 0)||(null!=(d=a.fullPhotoData)?d.length:void 0)})},a}(),b.exports={PhotoccinoClient:c}}).call(this)},{"./utils.js":14,"browser-request":1,request:"request"}],14:[function(a,b,c){(function(){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_=function(a,b){return function(){return a.apply(b,arguments)}},aa=[].indexOf||function(a){for(var b=0,c=this.length;b<c;b++)if(b in this&&this[b]===a)return b;return-1},ba={}.hasOwnProperty,ca=function(a,b){function c(){this.constructor=a}for(var d in b)ba.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};J=function(){function a(){this._onResponse=_(this._onResponse,this),this._onError=_(this._onError,this)}return a.Errors={errorOnRequest:function(a,b){return"Error="+a+" on request for url="+b},requestTimeout:function(a){return"Timeout expiration, "+a+"ms exceeded"}},a.Defaults={maxAttempts:3,msRequestTimeout:1e4},a.HeaderFields={Accept:"Accept"},a.prototype._setTimeout=function(a,b){return setTimeout(a,b)},a.prototype._parseOptions=function(b,d){var e;return c.assertObjectIsSpecified(b,"options"),c.assertStringIsNotEmpty(b.url,"options.url"),c.assertObjectIsSpecified(d,"responseHandler"),e={options:{maxAttempts:b.maxAttempts||a.Defaults.maxAttempts,msRequestTimeout:b.msRequestTimeout||a.Defaults.msRequestTimeout,url:b.url,headers:b.headers||void 0},responseHandler:d,numAttempts:1}},a.prototype._onError=function(a,b,c){var d,e,f,g=this;return null==c&&(c=null),d=null!=c&&this._is4xxResponse(null!=(f=c.status)?f:c.statusCode),d||b.numAttempts>=b.options.maxAttempts?void b.responseHandler(a,c,b.numAttempts):(e=this._computeIntervalBetweenRetry(b.numAttempts),b.numAttempts++,this._setTimeout(function(){return g._requestMethod(b)},e))},a.prototype._onResponse=function(b,c){return this._isSuccessResponse(b.status)?c.responseHandler(null,b,c.numAttempts):this._onError(a.Errors.errorOnRequest(b.status,c.options.url),c,b)},a.prototype._computeIntervalBetweenRetry=function(a){return 1===a?500:1e3*(a-1)},a.prototype._is4xxResponse=function(a){return a>=400&&a<500},a.prototype._isSuccessResponse=function(a){return 200===a},a}(),u={DEBUG:"debug",VERBOSE:"verbose",INFO:"info",WARN:"warn",ERROR:"error"},c=function(){function a(){}return a.Messages={valueUnspecified:function(a,b){return new x("valueUnspecified",'Expected "'+a+'" to be specified, actual value='+b)},stringNotEmpty:function(a,b){return new x("stringNotEmpty",'Expected "'+a+'" to be an empty string, actual value='+b)},unexpectedArrayLength:function(a,b){return new x("unexpectedArrayLength",'Expected "'+a+'" to be a list with length >='+b)},notANumber:function(a,b){return new x("notANumber",'Expected "'+a+'" to be a number, actual value='+b)},numberIsNegative:function(a,b){return new x("numberIsNegative",'Expected "'+a+'" to be positive, actual value='+b)},lowerRangeBoundaryEqualOrBeyondUpper:function(a,b){return new x("lowerRangeBoundaryEqualOrBeyondUpper","Expected lower="+a+" range boundary to be less than upper="+b)},lowerRangeBoundaryBeyondUpper:function(a,b){return new x("lowerRangeBoundaryBeyondUpper","Expected lower="+a+" range boundary to be less than or equal upper="+b)},targetEqualOrBelowLowerRangeBoundary:function(a,b){return new x("targetEqualOrBelowLowerRangeBoundary","Expected target="+a+" to be greater than lower="+b+" range boundary")},targetEqualOrBeyondUpperRangeBoundary:function(a,b){return new x("targetEqualOrBeyondUpperRangeBoundary","Expected target="+a+" to be less than upper="+b+" range boundary")},targetBelowLowerRangeBoundary:function(a,b){return new x("targetBelowLowerRangeBoundary","Expected target="+a+" to be greater than or equal lower="+b+" range boundary")},targetBeyondUpperRangeBoundary:function(a,b){return new x("targetBeyondUpperRangeBoundary","Expected target="+a+" to be less than or equal upper="+b+" range boundary")},valueIsNotFunction:function(a,b){return new x("valueIsNotFunction",'Expected "'+a+'" to be a function, actual value='+b)},valueIsNotString:function(a,b){return new x("valueIsNotString",'Expected "'+a+'" to be a string, actual value='+b)},valueIsNotArray:function(a,b){return new x("valueIsNotArray",'Expected "'+a+'" to be an array, actual value='+b)},valueIsNotBoolean:function(a,b){return new x("valueIsNotBoolean",'Expected "'+a+'" to be a boolean, actual value='+JSON.stringify(b))}},a.assertIsArray=function(b,c){if(!Array.isArray(b))throw a.Messages.valueIsNotArray(c,b).toError()},a.assertArrayIsNotEmpty=function(b,c){if(!Array.isArray(b)||0===b.length)throw a.Messages.valueUnspecified(c,b).toError()},a.assertArrayLengthAtLeast=function(b,c,d){if(!Array.isArray(b)||b.length<c)throw a.Messages.unexpectedArrayLength(d,c).toError()},a.assertString=function(b,c){if(null==b)throw a.Messages.valueUnspecified(c,b).toError();return a.assertIsString(b,c)},a.assertStringIsNotEmpty=function(b,c){if(a.assertString(b,c),""===b)throw a.Messages.valueUnspecified(c,b).toError()},a.assertStringIsEmpty=function(b,c){if(a.assertString(b,c),""!==b)throw a.Messages.stringNotEmpty(c,b).toError()},a.assertObjectIsSpecified=function(b,c){if(null==b)throw a.Messages.valueUnspecified(c,b).toError()},a.parseAndAssertNumber=function(b,c){var d;if(d=parseFloat(b),isNaN(d)||!isFinite(d))throw a.Messages.notANumber(c,b).toError();
return d},a.assertNumberIsPositive=function(b,c){if(this.parseAndAssertNumber(b,c),b<0)throw a.Messages.numberIsNegative(c,b).toError()},a.assertRangeExclusive=function(b,c){if(b>=c)throw a.Messages.lowerRangeBoundaryEqualOrBeyondUpper(b,c).toError()},a.assertRangeInclusive=function(b,c){if(b>c)throw a.Messages.lowerRangeBoundaryBeyondUpper(b,c).toError()},a.assertTargetInRangeExclusive=function(b,c,d){if(b<=c)throw new a.Messages.targetEqualOrBelowLowerRangeBoundary(b,c).toError();if(b>=d)throw a.Messages.targetEqualOrBeyondUpperRangeBoundary(b,d).toError()},a.assertTargetInRangeInclusive=function(b,c,d){if(b<c)throw a.Messages.targetBelowLowerRangeBoundary(b,c).toError();if(b>d)throw a.Messages.targetBeyondUpperRangeBoundary(b,d).toError()},a.assertIsFunction=function(b,c){if(!(b instanceof Function))throw a.Messages.valueIsNotFunction(c,b).toError()},a.assertIsString=function(b,c){if("string"!=typeof b)throw a.Messages.valueIsNotString(c,b).toError()},a.assertIsBoolean=function(b,c){if("boolean"!=typeof b)throw a.Messages.valueIsNotBoolean(c,b).toError()},a}(),d=function(){function a(a,b){this.source=a,this.wrap=null!=b&&b,c.assertIsArray(this.source),this._cursor=0}return a.prototype.next=function(){var a;return a=this.source[this._cursor],this._cursor++,this.wrap&&this._cursor===this.source.length?this._cursor=0:this._cursor=Math.min(this._cursor,this.source.length),a},a.prototype.hasNext=function(){return this.wrap||this._cursor<this.source.length},a}(),e={last:function(a){return a[a.length-1]},shuffle:function(a,b){var c,d,e,f,g;if(null==b&&(b=null),a.length<2)return a;for(c=e=f=a.length-1;f<=0?e<=0:e>=0;c=f<=0?++e:--e)d=null!=b?b.next(c+1):Math.floor(Math.random()*(c+1)),g=[a[d],a[c]],a[c]=g[0],a[d]=g[1];return a},formGroups:function(a,b){var c,d,f,g,h,i;if(0===a.length)return[[]];for(g=[[a[0]]],c=0,h=0,i=a.length;h<i&&(d=a[h],!(c+1>=a.length));h++)f=a[c+1],c+=1,b(d,f)||g.push([]),e.last(g).push(f);return g},evenlySplitList:function(a,b){var c,d,f,g,h,i,j;b>a.length-1&&(b=a.length-1),i=1+b,j=a.length/i,f=[[]];for(c in a)d=a[c],c>0&&(h=Math.floor(c/j),g=Math.floor((c-1)/j),h!==g&&f.push([])),e.last(f).push(d);return f}},f=function(){function a(b,c,d){this.logger=b,this.metricId=c,this.url=d,this.startTime=a.now(),this.resolved=!1}return a.now=function(){return Date.now()},a.create=function(b,c,d){return new a(b,c,d)},a.prototype.log=function(b){return null==b&&(b={}),!this.resolved&&(b.clientStartTime=this.startTime,b.duration=a.now()-this.startTime,null!=this.url&&(b.url=this.url),this.logger.metric(this.metricId,b),!0)},a.prototype.success=function(a){return null==a&&(a={}),a.success=!0,this.log(a),this.resolved=!0},a.prototype.failure=function(a){return null==a&&(a={}),a.success=!1,this.log(a),this.resolved=!0},a}(),g={getGridCellImagePosition:function(a,b,c){var d,e,f,g,h,i,j;for(g=[],d=c.layout_JSON.assets[0],j=c.layout_JSON.assets,h=0,i=j.length;h<i;h++)e=j[h],"image"===e.assetType&&(f={xOffset:a+(parseFloat(e.container.xOffset)-parseFloat(d.container.xOffset)),yOffset:b+(parseFloat(e.container.yOffset)-parseFloat(d.container.yOffset)),width:parseFloat(e.container.width),height:parseFloat(e.container.height)},g.push(f));return g},getSingleGridCellTemplate:function(a){return this._getGridCellTemplate(a,1)},getSplitGridCellTemplate:function(a){return this._getGridCellTemplate(a,2)},_getGridCellTemplate:function(a,b){var c,d,e,f,g,h,i,j,k,l,m;if(!((null!=a&&null!=(i=a.assetLists)&&null!=(j=i.assetList)?j.length:void 0)>0))return null;for(k=a.assetLists.assetList,e=0,g=k.length;e<g;e++)if(c=k[e],"dateCellLayouts"===(null!=c?c.listType:void 0))for(l=c.assetRef,f=0,h=l.length;f<h;f++)if(d=l[f],(null!=(m=d.layoutAttributes)?m.NumPics:void 0)===b)return d;return null},parseStartingGridCellId:function(a){var b,c;if(c=a.match(/0([\d]+)([2|1][\d]{3})([0-9]+$)/),4!==c.length)throw new Error("unrecognized starting grid cell index id, "+a);return b=function(a,b){if(b=parseInt(b),"number"!=typeof b||isNaN(b))throw new Error("invalid "+a+" value, "+b);return b},{dateCellIndex:b("dateCellIndex",c[1]),year:b("year",c[2]),month:b("month",c[3])+1}}},h=function(){function a(){this.includes=_(this.includes,this),this.filters=[]}return a.prototype.addFilter=function(a){return this.filters.push(a)},a.prototype.includes=function(a){var b,c,d,e;for(e=this.filters,c=0,d=e.length;c<d;c++)if(b=e[c],!b(a))return!1;return!0},a.prototype.applyToList=function(a){var b,c,d,e;for(c=[],d=0,e=a.length;d<e;d++)b=a[d],this.includes(b)&&c.push(b);return c},a}(),k={expandCropForArea:function(a,b,c){var d,e,f,g,h,i,j,l;return b.llx=parseFloat(b.llx),b.lly=parseFloat(b.lly),b.urx=parseFloat(b.urx),b.ury=parseFloat(b.ury),a.width=parseFloat(a.width),a.height=parseFloat(a.height),c.width=parseFloat(c.width),c.height=parseFloat(c.height),d=c.width/c.height,f={x:(b.urx-b.llx)*a.width,y:(b.ury-b.lly)*a.height},e=f.x/f.y,i={},i=e>d?{x:f.x,y:f.x/d}:e<d?{x:f.y*d,y:f.y}:f,h={x:i.x/a.width,y:i.y/a.height},l=Math.max(h.x,h.y),l>1&&(h.x/=l,h.y/=l),j={x:(b.urx+b.llx)/2,y:(b.ury+b.lly)/2},g={llx:j.x-h.x/2,urx:j.x+h.x/2,lly:j.y-h.y/2,ury:j.y+h.y/2},k._shiftCropIfNeeded(g),g},_shiftCropIfNeeded:function(a){var b;return b={x:function(){switch(!1){case!(a.llx<0):return-a.llx;case!(a.urx>1):return 1-a.urx;default:return 0}}(),y:function(){switch(!1){case!(a.lly<0):return-a.lly;case!(a.ury>1):return 1-a.ury;default:return 0}}()},a.llx+=b.x,a.urx+=b.x,a.lly+=b.y,a.ury+=b.y,a},reduceCrop:function(a,b,c){var d,e,f,g,h;return this._isTargetSmaller(b,c)?(e={width:a.urx-a.llx,height:a.ury-a.lly},h={width:e.width*(c.width/b.width),height:e.height*(c.height/b.height)},f=a.llx+(e.width-h.width)/2,g=a.lly+(e.height-h.height)/2,d={llx:f,lly:g,urx:f+h.width,ury:g+h.height}):null},_isTargetSmaller:function(a,b){return b.width<a.width&&b.height<a.height},recalculateImageReferenceCrop:function(a,b,c,d){var e,f;return e=d.imageReference,f=this.expandCropForArea(a,b,c.container),e.llx=f.llx,e.lly=f.lly,e.urx=f.urx,e.ury=f.ury},applyCrop:function(a,b){return b.llx=a.llx,b.lly=a.lly,b.urx=a.urx,b.ury=a.ury}},Y=function(a,b){var c;for(null==b&&(b=2),c=String(a);c.length<b;)c="0"+c;return c},m={secondsFromISOUTCDate:function(a){var b;return b=m.dateFromISOUTCDate(a),Date.UTC(b.year,b.month,b.day,b.hours,b.minutes,b.seconds,b.milliseconds)/1e3},dateFromISOUTCDate:function(a){var b,c,d,e,f;if(c=/(.*)T(.*)Z/.exec(a),null==c||3!==c.length)throw new x("invalidISODate","Invalid ISO UTC date="+a).toError();b=m.parseDate(c[1]),e=m.parseTime(c[2]);for(d in e)f=e[d],b[d]=f;return b},dateToISOUTCDate:function(a,b){return null==b&&(b=!1),b||null==a.toISOString?a.getUTCFullYear()+"-"+Y(a.getUTCMonth()+1)+"-"+Y(a.getUTCDate())+"T"+Y(a.getUTCHours())+":"+Y(a.getUTCMinutes())+":"+Y(a.getUTCSeconds())+"."+String((a.getUTCMilliseconds()/1e3).toFixed(3)).slice(2,5)+"Z":a.toISOString(a)},parseDate:function(a){var b,c,d,e;if(b=null!=a?a.split(/[\/\-.]/):null,!b||0===b[0].length)throw new x("invalidDate","Invalid date="+a+", expected YYYY-MM-DD or at minimum YYYY").toError();return e=parseFloat(b[0]),d=parseFloat(b[1]||1)-1,c=parseFloat(b[2]||1),{year:e,month:d,day:c}},parseTime:function(a){var b,c,d,e,f;if(b=null!=a?a.split(/[:.]/):null,!b||0===b[0].length)throw new x("invalidTime","Invalid time="+a+", expected HH:MM:SS:MMM or at minimum HH").toError();return c=parseFloat(b[0]),d=parseFloat(b[1]||0),f=parseFloat(b[2]||0),e=parseFloat(b[3]||0),{hours:c,minutes:d,seconds:f,milliseconds:e}}},q={Constants:{IMAGE_REFERENCE_PROPERTIES:["id","description","width","height","llx","lly","urx","ury","rotation","effect","data","redeye","fadeColor","fadeValue","projectImageId"]},imageFromImageReference:function(a){var b;return b={},null!=a.id&&(b.id=a.id),null!=a.description&&(b.description=a.description),null!=a.width&&(b.width=parseInt(a.width)),null!=a.height&&(b.height=parseInt(a.height)),null!=a.effect&&(b.effect=a.effect),null!=a.data&&(b.data=a.data),null!=a.rotation&&(b.rotation=parseInt(a.rotation)),null!=a.redeye&&(b.redeye=a.redeye),null!=a.fadeColor&&(b.fadeColor=a.fadeColor),null!=a.fadeValue&&(b.fadeValue=a.fadeValue),null!=a.projectImageId&&(b.projectImageId=a.projectImageId),b.crop=p.parseCrop({llx:parseFloat(a.llx),lly:parseFloat(a.lly),urx:parseFloat(a.urx),ury:parseFloat(a.ury)}),b},imageToImageReference:function(a){var b,c,d;b={};for(c in a)d=a[c],aa.call(q.Constants.IMAGE_REFERENCE_PROPERTIES,c)>=0&&(b[c]=d);return b.rotation=""+a.rotation,b.fadeValue=a.fadeValue,null!=a.crop&&q.setImageReferenceCrop(b,a.crop),b},setImageReferenceCrop:function(a,b){return a.llx=b.llx,a.lly=b.lly,a.urx=b.urx,a.ury=b.ury},setProjectImageProperties:function(a,b){return null!=a.fadeColor&&(b.fadeColor=a.fadeColor),null!=a.fadeValue&&(b.fadeValue=a.fadeValue),null!=a.projectImageId&&(b.projectImageId=a.projectImageId),b},setDefaultProjectImageProperties:function(a){return null==a.fadeColor&&(a.fadeColor="#FFFFFF"),null==a.fadeValue&&(a.fadeValue="1"),a},getOrientation:function(a,b,c){var d;return null==c&&(c=L.ZERO_DEGREES),a=Math.round(a),b=Math.round(b),c=parseInt(c),c!==L.NINETY_DEGREES&&c!==L.TWO_SEVENTY_DEGREES||(d=[b,a],a=d[0],b=d[1]),a>b?A.LANDSCAPE:b>a?A.PORTRAIT:A.SQUARE},getImageOrientation:function(a){var b,c;return q.getOrientation(null!=(b=a.croppedWidth)?b:a.width,null!=(c=a.croppedHeight)?c:a.height,a.rotation)},fitsOrientation:function(a,b){switch(b){case A.PORTRAIT:return q.getImageOrientation(a)!==A.LANDSCAPE;case A.LANDSCAPE:return q.getImageOrientation(a)!==A.PORTRAIT;default:return!0}}},r={chooseImagesAtRandom:function(a,b){var c,d,e,f;for(c=[],f=[].concat(b);c.length<a&&f.length>0;)d=Math.floor(Math.random()*f.length+1),e=r._createImage(f.splice(d-1,1)[0]),null!=e&&c.push(e);return c},_createImage:function(a){var b,c;c=null;try{c=p.createFromImage(a)}catch(a){b=a}return(null!=c?c.errors.length:void 0)>0&&(c=null),c}},v=function(){function a(a,b,d){this.moduleName=a,this.moduleVersion=b,this.winstonLogger=null!=d?d:null,c.assertStringIsNotEmpty(this.moduleName,"moduleName"),c.assertStringIsNotEmpty(this.moduleVersion,"moduleVersion")}return a.prototype.debug=function(a,b,c){return null==c&&(c={}),this._log(u.DEBUG,a,b,c)},a.prototype.info=function(a,b,c){return null==c&&(c={}),this._log(u.INFO,a,b,c)},a.prototype.metric=function(a,b){return null==b&&(b={}),this._log(u.INFO,a,null,b)},a.prototype.asyncMetric=function(a,b){return new f(this,a,b)},a.prototype.warn=function(a,b,c){return null==c&&(c={}),this._log(u.WARN,a,b,c)},a.prototype.error=function(a,b,c){return null==c&&(c={}),this._log(u.ERROR,a,b,c)},a.prototype.log=function(a){return this._log(a.level,a.id,a.message,a.properties)},a.prototype.registerCallback=function(a){if(null!=a&&"function"==typeof a)return this.callback=a},a.prototype._log=function(a,b,c,d){var e;if(e=w.formatEntry(this.moduleName,this.moduleVersion,a,b,c,d),null!=this.winstonLogger?this._logToWinston(a,e):this._logToConsole(e),null!=this.callback)return this.callback(new x(b,c,a,d))},a.prototype._logToWinston=function(a,b){return this.winstonLogger.log(a,b)},a.prototype._logToConsole=function(a){return console.log(a)},a}(),w={formatEntry:function(a,b,c,d,e,f){var g,h;return g=""+c+" ["+X()+"] module: "+a+"."+b+" ["+d+"]: "+e,h=x.propertiesToString(f),h.length>0&&(g+=" "+h),g}},X=function(){return m.dateToISOUTCDate(new Date)},W=function(a){return new String(a).toUpperCase()},V=function(a,b){return a+": "+b},x=function(){function a(a,b,c,d){this.id=a,this.message=b,null==c&&(c=u.ERROR),this.properties=null!=d?d:{},null!=c&&""!==c||(c=u.ERROR),this.level=c}return a.prototype.toString=function(){var b,c;return c="["+this.id+"]: "+this.message+" ("+this.level+")",b=a.propertiesToString(this.properties),b.length>0&&(c+=" "+b),c},a.prototype.toError=function(){var a;return a=new Error(this.toString()),a.id=this.id,a.level=this.level,a.properties=this.properties,a.originalMessage=this,a},a.propertiesToString=function(a){var b,c,d;c="";for(b in a)d=a[b],0===c.length&&(c="{"),c+=b+":"+JSON.stringify(d)+", ";return c.replace(/, $/,"}")},a}(),y={round:function(a,b){var c;return null==b&&(b=4),c=Math.pow(10,b),Math.round(a*c)/c},floor:function(a,b){var c;return null==b&&(b=4),c=Math.pow(10,b),Math.floor(a*c)/c},ceil:function(a,b){var c;return null==b&&(b=4),c=Math.pow(10,b),Math.ceil(a*c)/c}},Z=a("autofill").utils,z={Messages:{deepReplaceKeyNotFound:function(a,b){return new Z.Message("deep_replace_key_not_found","Key not found (at index "+a+"): "+b)}},deepReplace:function(a,b,c,d){var e,f,g;if(null==d&&(d=0),f=a instanceof Array?[]:{},void 0===a[b[d]])throw this.Messages.deepReplaceKeyNotFound(d,b[d]);for(e in a)g=a[e],e===b[d].toString()?d===b.length-1?f[e]=c:f[e]=z.deepReplace(g,b,c,d+1):f[e]=g;return f},addConstant:function(a,b,c){var d;return z._hasDefineProperty()?(d={value:c,writable:!1},Object.defineProperty(a,b,d)):a[b]=c},_hasDefineProperty:function(){return null!=Object.defineProperty&&"function"==typeof Object.defineProperty}},F=function(){function a(){this.setResult=_(this.setResult,this),this.result=null,this.error=null,this.done=!1,this._listeners=[]}return a.Messages={repeatedSetResult:new x("repeatedSetResult","Promise received a second setResult call")},a.prototype.setResult=function(b,c){var d,e,f,g;if(this.done)throw a.Messages.repeatedSetResult.toError();for(this.done=!0,this.result=b,this.error=c,g=this._listeners,e=0,f=g.length;e<f;e++)(d=g[e])(b,c);return this._listeners=[],this},a.prototype.setError=function(a){return this.setResult(null,a)},a.prototype.then=function(a){return this.done?a(this.result,this.error):this._listeners.push(a),this},a.prototype.thenFinish=function(a){return this.then(a.setResult)},a.join=function(b){var c,d,e,f,g;for(e={waitingForCount:b.length},c=new a,0===b.length&&c.setResult(null),f=0,g=b.length;f<g;f++)d=b[f],d.then(function(){if(e.waitingForCount-=1,e.waitingForCount<=0)return c.setResult(null)});return c},a.createFinishedPromise=function(b){var c;return c=new a,c.setResult(b),c},a.createErroredPromise=function(b){var c;return c=new a,c.setError(b),c},a}(),H=function(){function a(a){this.concurrentRequests=null!=a?a:2,this._pending=[],this._active=[]}return a.prototype.submitRequest=function(a,b){var c;if("function"!=typeof a)throw new Error("Expected request function");if("function"!=typeof b)throw new Error("Expected responseHandler function");return c={request:a,responseHandler:b},this._pending.push(c),this._issueRequests()},a.prototype._issueRequests=function(){var a;if(0!==this._pending.length)for(;this._active.length<this.concurrentRequests&&this._pending.length>0;)a=this._pending.shift(),this._active.push(a),this._issueRequest(a)},a.prototype._issueRequest=function(a){var b,c=this;try{return a.request().then(function(b,d){return c._handleResponse(a,d,b)})}catch(c){return b=c,this._handleResponse(a,b,null)}},a.prototype._handleResponse=function(a,b,c){return this._active.splice(this._active.indexOf(a),1),a.responseHandler(b,c),this._issueRequests()},a}(),M={compare:function(a,b){return a<b?-1:a>b?1:0},sortImagesByDate:function(a){var b,c,d;return c=-1,d=1,b=function(a,b){if(null!=a.captureTimeSeconds&&null!=b.captureTimeSeconds){if(a.captureTimeSeconds<b.captureTimeSeconds)return c;if(a.captureTimeSeconds>b.captureTimeSeconds)return d}else{if(null!=a.captureTimeSeconds)return c;if(null!=b.captureTimeSeconds)return d}return M.compare(a.filename,b.filename)},a.sort(b)}},N={toCamelCase:function(a){return a.slice(0,1).toLowerCase()+a.slice(1)},toPascalCase:function(a){return a.slice(0,1).toUpperCase()+a.slice(1)}},P=function(){function a(a){this.severity=this.severityOf(a)}return a.LEVELS=["debug","verbose","info","warn","error"],a.prototype.severityOf=function(b){return a.LEVELS.indexOf(b)},a.prototype.log=function(a,b){this.severityOf(a)>=this.severity&&console.log(a,b)},a}(),Q={loadContentToTarget:function(a,b,c){var d,e,f;return null==c&&(c="content"),d=function(b){return expect("There was an error loading "+a).toBeNull(),console.log(JSON.stringify(b,null,2))},f=function(d){var e;return e=JSON.parse(d.target.response),b[c]=e,console.log("Successfully loaded "+a)},e=Q.createHttpRequest(),e.addEventListener("error",d),e.addEventListener("abort",d),e.addEventListener("load",f),e.open("GET",a,!1),e.send()},createHttpRequest:function(){return new XMLHttpRequest},loadParamsToTarget:function(a,b){return Q.loadContentToTarget(a,b,"params")}},R=function(){function a(){}return a.getRelativeCenter=function(b){return a._originToCenter(b.width,b.height,b.rotation)},a.getAbsoluteCenter=function(b){var c,d;return c=a.getRelativeCenter(b),d=new T(b.xOffset,b.yOffset),T.add(d,c)},a.getScaledOrigin=function(b,c,d,e,f){var g,h;return g=a.getAbsoluteCenter(b),h=a._originToCenter(e,f,b.rotation),g.x*=c,g.y*=d,T.subtract(g,h)},a.getTransformedOrigin=function(b,c,d){var e,f;return e=c/parseFloat(b.width),f=d/parseFloat(b.height),a.getScaledOrigin(b,e,f,c,d)},a._originToCenter=function(b,c,d){var e,f,g;return b=parseFloat(b),c=parseFloat(c),d=parseFloat(d),f=-d*Math.PI/180,e=a._toPolar(c/2,f),g=a._toPolar(b/2,f+Math.PI/2),T.add(e,g)},a._toPolar=function(a,b){return new T(a*Math.sin(b),a*Math.cos(b))},a.getTranslatedOrigin=function(a,b,c){var d;return null==c&&(c=0),d=this._originToCenter(a.width,a.height,c),T.subtract(b,d)},a.translateContainer=function(a,b,c){if(null==c&&(c=null),a.xOffset=this.toRoundedString(b.x),a.yOffset=this.toRoundedString(b.y),null!=c)return a.rotation=this.toRoundedString(c)},a.redimensionContainer=function(a,b,c){return a.width=this.toRoundedString(b),a.height=this.toRoundedString(c)},a.toRoundedString=function(a){return y.round(a).toString(10)},a}(),S={join:function(){var a,b,c,d,e,f,g;if(0===arguments.length)return"";for(d=arguments[0],b=f=1,g=arguments.length;1<=g?f<g:f>g;b=1<=g?++f:--f)a=arguments[b],c="/"===d[d.length-1],e="/"===a[0],d+=c&&e?a.substring(1):c||e?a:"/"+a;return d}},U=function(){function a(){}return a.parseResponseHeaders=function(a){var b,c,d,e,f,g,h;if(c={},f=a.getAllResponseHeaders(),null!=f)for(b=f.split("\n"),g=0,h=b.length;g<h;g++)d=b[g],null!=d&&d.indexOf(":")>0&&(e=d.split(":"),c[e[0].toLowerCase()]=e[1].trim());return c},a}(),j={USER_CUSTOM:"USER_CUSTOM",USER_CUSTOM_SOFT:"USER_CUSTOM_SOFT"},n={hasValue:function(a,b){return null!==this.getValue(a,b)},getValue:function(a,b){var c,d,e;if(null!=(null!=(e=b.__values)?e[a]:void 0))return b.__values[a];null==b.__values&&(b.__values={});for(c in b)if(d=b[c],null==b.indexedName&&c===a||null!=b.indexedName&&null!=d[b.indexedName]&&d[b.indexedName]===a)return b.__values[a]=d;return null}},o={PADDED:"padded",MATTE:"matte",NONE:"none"},s={IMAGE:"image",TEXT:"text",GRAPHIC:"graphic",AUDIO:"audio"},t={BACKGROUND:"Background",EMBELLISHMENT:"Embellishment",EVENT_TEXT_BG_REG_EX:/-event-text-bg$/,isEventTextBackground:function(a){var b,c;return null!=(null!=a?a.type:void 0)&&null!=(b=null!=a&&null!=(c=a.container)?c.id:void 0)&&(a.type===t.EMBELLISHMENT&&t.EVENT_TEXT_BG_REG_EX.test(b))},isBackground:function(a){return a.assetType===s.GRAPHIC&&a.type===t.BACKGROUND}},A={LANDSCAPE:"landscape",PORTRAIT:"portrait",SQUARE:"square"},B={FRONTPAGE:"front",BACKPAGE:"back",SPINEPAGE:"spine",TITLEPAGE:"title",CALENDAR_TITLEPAGE:"calendar-title",CALENDAR_PAGE:"calendar-page",CALENDAR_GRIDPAGE:"calendar-gridpage",INNERPAGE:"inner",LOGOPAGE:"logo",_id:{grid:/_[idea]*grid$/i,spread:/_[idea]*spread/i,front:/_[idea]*frontcover/i,spine:/_[idea]*spine/i,back:/_[idea]*backcover/i,title:/_[idea]*title/i,page:/_[idea]*page/i},isInnerType:function(a){return a===B.TITLEPAGE||a===B.INNERPAGE||a===B.CALENDAR_TITLEPAGE||a===B.CALENDAR_PAGE||a===B.CALENDAR_GRIDPAGE},isValid:function(a){var b,c;for(b in B)if(c=B[b],c===a)return!0;return!1},identifyTypeByLayoutId:function(a){return this._id.page.test(a)||this._id.spread.test(a)?this.INNERPAGE:this._id.title.test(a)?this.TITLEPAGE:this._id.grid.test(a)?this.CALENDAR_GRIDPAGE:this._id.front.test(a)?this.FRONTPAGE:this._id.spine.test(a)?this.SPINEPAGE:this._id.back.test(a)?this.BACKPAGE:void 0},identifyTypeBySurfaceNumber:function(a){if(a=parseInt(a),a>1)return B.INNERPAGE;switch(a){case 1:return this.TITLEPAGE;case-1:return this.FRONTPAGE;case-2:return this.SPINEPAGE;case-3:return this.BACKPAGE}}},D={},Object.defineProperty(D,"BOOKFORGE",{value:"BOOKFORGE",writable:!1}),Object.defineProperty(D,"GCP",{value:"GCP",writable:!1}),Object.defineProperty(D,"GSP",{value:"GSP",writable:!1}),Object.defineProperty(D,"MMB",{value:"MMB",writable:!1}),Object.defineProperty(D,"MMB_HIDDEN",{value:"MMB_HIDDEN",writable:!1}),Object.defineProperty(D,"SCOUT",{value:"SCOUT",writable:!1}),E={},Object.defineProperty(E,"PHOTOBOOK_30",{value:"PHOTOBOOK_30",writable:!1}),Object.defineProperty(E,"PHOTOBOOK_20",{value:"PHOTOBOOK_20",writable:!1}),Object.defineProperty(E,"MATISSE_CALENDAR",{value:"MATISSE_CALENDAR",writable:!1}),Object.defineProperty(E,"MATISSE_PROJECT",{value:"MATISSE_PROJECT",writable:!1}),L={ZERO_DEGREES:0,NINETY_DEGREES:90,ONE_EIGHTY_DEGREES:180,TWO_SEVENTY_DEGREES:270,rotationFlipsDimensions:function(a){return a===L.NINETY_DEGREES||a===L.TWO_SEVENTY_DEGREES}},I=function(b){function c(){return $=c.__super__.constructor.apply(this,arguments)}return ca(c,b),c.Constants={DONE:4},c.Errors={requestCreationError:"Unable to create http request, window and/or request object is undefined"},c.prototype.get=function(a,b){var c;return c=this._parseOptions(a,b),this._requestMethod(c)},c.prototype._requestMethod=function(a){var b,d,e=this;return d=a.options.url,b=this._getRequest(d),this._setHeaders(a.options.headers,b),b._timeoutId=this._setTimeout(function(){return e._onTimeout(b,a)},a.options.msRequestTimeout),b.onreadystatechange=function(){if(b.readyState===c.Constants.DONE)return clearTimeout(b._timeoutId),e._onResponse(b,a)},b.send()},c.prototype._onTimeout=function(a,b){var c;return a.abort(),c={status:408},this._onError(J.Errors.requestTimeout(b.options.msRequestTimeout),b,c)},c.prototype._getRequest=function(b){var c,d;return c=function(){return"undefined"!=typeof window&&null!==window},d=c()?new window.XMLHttpRequest:new(a("xmlhttprequest").XMLHttpRequest),d.open("GET",b,!0),d},c.prototype._setHeaders=function(a,b){var c,d,e;e=[];for(c in a)d=a[c],e.push(b.setRequestHeader(c,d));return e},c}(J),l=function(){function a(a){this.groups=a,c.assertArrayIsNotEmpty(a,"groups")}return a.prototype.getCountAt=function(a){var b,d,e;for(c.assertTargetInRangeInclusive(a,0,this.groups.length-1),b=0,d=e=0;0<=a?e<=a:e>=a;d=0<=a?++e:--e)b+=this.groups[d].length;return b},a.prototype.getCapacityBefore=function(a,b){return c.assertTargetInRangeInclusive(a,0,this.groups.length-1),0===a?0:this._getCapacityFrom(0,a-1,b)},a.prototype.getCapacityAfter=function(a,b){var d;return d=this.groups.length-1,c.assertTargetInRangeInclusive(a,0,d),a===d?0:this._getCapacityFrom(a+1,d,b)},a.prototype._getCapacityFrom=function(a,b,c){var d,e,f;for(d=0,e=f=a;a<=b?f<=b:f>=b;e=a<=b?++f:--f)d+=c-this.groups[e].length;return d},a.prototype.getTotalCapacity=function(a){return c.assertNumberIsPositive(a,"maxGroupSize"),this._getCapacityFrom(0,this.groups.length-1,a)},a}(),G=function(){function a(a){this.seed=null!=a?a:0}return a.prototype._next=function(){return this.seed=1103515245*this.seed+12345&4294967295,(this.seed>>16)+(this.seed<<16)&2147483647},a.prototype.next=function(a){return this._next()%a},a.prototype.nextFloat=function(){return this._next()/2147483647%1},a.prototype.arrayShuffle=function(a){return e.shuffle(a,this)},a.prototype.pickFromArray=function(a){return a[this.next(a.length)]},a}(),K=function(){function a(a,b,c){var d,e;for(this.bucketDuration=a,this.bucketCount=b,null==c&&(c=null),this.timeFunc=c||function(){return(new Date).valueOf()/1e3},this.buckets=new Array(b),this._bucketStartTime=this.timeFunc(),this._numFinishedBuckets=0,this._currentIndex=0,d=e=0;0<=b?e<b:e>b;d=0<=b?++e:--e)this.buckets[d]=0}return a.prototype._incrementIndex=function(a){return a+=1,a>=this.buckets.length&&(a=0),a},a.prototype._updateCurrentIndex=function(){var a,b,c;if(b=this.timeFunc(),b>=this._bucketStartTime+this.bucketDuration){for(a=Math.floor((b-this._bucketStartTime)/this.bucketDuration),this._numFinishedBuckets+=a,this._bucketStartTime=this._numFinishedBuckets*this.bucketDuration,c=[];(a-=1)>=0;)this._currentIndex=this._incrementIndex(this._currentIndex),c.push(this.buckets[this._currentIndex]=0);return c}},a.prototype.getCurrentBucket=function(){return this._updateCurrentIndex(),this.buckets[this._currentIndex]},a.prototype.modifyCurrentBucket=function(a){return this._updateCurrentIndex(),this.buckets[this._currentIndex]=a(this.buckets[this._currentIndex])},a.prototype._getRecordedDuration=function(){var a,b;return b=this.timeFunc(),a=(b-this._bucketStartTime)/this.bucketDuration,a>1&&(a=1),(this.buckets.length-1+a)*this.bucketDuration},a.prototype.getAverage=function(){var a,b,c,d,e,f;for(this._updateCurrentIndex(),a=this._getRecordedDuration(),c=0,f=this.buckets,d=0,e=f.length;d<e;d++)b=f[d],c+=b;return c/a},a.prototype.getTotal=function(){var a,b,c,d,e;for(this._updateCurrentIndex(),b=0,e=this.buckets,c=0,d=e.length;c<d;c++)a=e[c],b+=a;return b},a.prototype.increment=function(){return this.modifyCurrentBucket(function(a){return a+1})},a.prototype.add=function(a){return this.modifyCurrentBucket(function(b){return b+a})},a}(),T=function(){function a(a,b){this.x=parseFloat(a),this.y=parseFloat(b)}return a.prototype.toString=function(){return"("+this.x+", "+this.y+")"},a.add=function(b,c){return new a(b.x+c.x,b.y+c.y)},a.subtract=function(b,c){return new a(b.x-c.x,b.y-c.y)},a}(),i=function(){function a(b,c,d,e,f,g,h){if(this.width=b,this.height=c,this.bleedTop=d,this.bleedBottom=e,this.bleedInside=f,this.bleedOutside=g,this.aspectRatio=h,this.aspectRatio!==a.SQUARE&&this.aspectRatio!==a.RECTANGLE)throw a.Messages.unknownAspectRatio(this.aspectRatio).toError()}return a.SQUARE="sq",a.RECTANGLE="rec",a.Messages={unknownAspectRatio:function(a){return new x("unknownAspectRatio","Unknown aspect ratio",null,{aspectRatio:a})}},a.prototype.getDPI=function(){return 72},a.prototype.clone=function(){return new a(this.width,this.height,this.bleedTop,this.bleedBottom,this.bleedInside,this.bleedOutside,this.aspectRatio)},a}(),p=function(){function a(){}return a.Messages={idNotString:function(a){return new x("imageIdNotString","image.id was not a string, actual value: "+a)},dimensionNotNumber:function(a,b,c){return new x("imageDimNotNumber","image."+b+" was not a positive number, actual value: "+c,null,{imageId:a})},invalidRotation:function(a){return new x("invalidRotation","Invalid rotation value "+a)}},a.Defaults={ranking:0,placement:"autoFill",crop:{llx:0,lly:0,urx:1,ury:1},rotation:L.ZERO_DEGREES,effect:"Auto",fadebw:50,grayscale:!1,fadeValue:"1"},a.ValidRotations=[0,90,180,270],a.InvalidRotationTable={1:90,2:180,3:270},a.createFromImage=function(b){var c;return c=new a,a.initializeFromImage(b,c),c.original=b,c},a.initializeFromImage=function(b,c){var d,e,f,g,h;if(c.errors=[],c.id=b.id,c.title=b.title||null,c.description=b.description||null,c.filename=b.filename||null,c.uploadTime=b.uploadTime||null,c.captureTime=b.captureTime||null,c.ranking=null!=b.ranking?parseFloat(b.ranking):a.Defaults.ranking,c.placement=b.placement||a.Defaults.placement,c.width=parseFloat(b.width),c.height=parseFloat(b.height),c.crop=a.extractCropFromImage(b),c.rotation=a.parseRotation(b.rotation,c),c.effect=b.effect||a.Defaults.effect,c.data=b.data,c.fadebw=null!=b.fadebw?parseFloat(b.fadebw):a.Defaults.fadebw,c.redeye=null!=(d=b.redeye)?d:null,c.grayscale=b.grayscale||a.Defaults.grayscale,c.projectImageId=null!=(e=b.projectImageId)?e:void 0,c.xOrigin=null!=(f=b.xOrigin)?f:void 0,c.fadeValue=b.fadeValue||a.Defaults.fadeValue,c.orientation=q.getOrientation(c.width,c.height,c.rotation),L.rotationFlipsDimensions(c.rotation)?(g=[b.width,b.height],c.rotatedHeight=g[0],c.rotatedWidth=g[1]):(h=[b.width,b.height],c.rotatedWidth=h[0],c.rotatedHeight=h[1]),c.croppedWidth=c.rotatedWidth*(c.crop.urx-c.crop.llx),c.croppedHeight=c.rotatedHeight*(c.crop.ury-c.crop.lly),c.croppedOrientation=q.getOrientation(c.croppedWidth,c.croppedHeight),"string"==typeof b.id&&""!==b.id||(c.id="",c.errors.push(this.Messages.idNotString(b.id))),(!isFinite(c.width)||c.width<0)&&(c.width=0,c.errors.push(this.Messages.dimensionNotNumber(b.id,"width",b.width))),(!isFinite(c.height)||c.height<0)&&(c.height=0,c.errors.push(this.Messages.dimensionNotNumber(b.id,"height",b.height))),null!=b.seqNum)return c.seqNum=b.seqNum},a.parseRotation=function(b,c){return null==b?a.Defaults.rotation:(b=parseInt(b),aa.call(a.ValidRotations,b)>=0||(b=a.InvalidRotationTable[b],null==b&&(b=L.ZERO_DEGREES)),b)},a.parseCrop=function(a){var b,c,d,e,f;return b=function(a){return null!=a&&(a>=0&&a<=1)},c=parseFloat(a.llx),d=parseFloat(a.lly),e=parseFloat(a.urx),f=parseFloat(a.ury),b(c)&&b(d)&&b(e)&&b(f)?{llx:c,lly:d,urx:e,ury:f}:null},a.extractCropFromImage=function(b){var c;return null!=b.crop&&(c=a.parseCrop(b.crop))?c:(c=a.parseCrop(b))?c:a.Defaults.crop},a}(),C={unwrapProject:function(a){var b;return null!=(b=a.MatisseProject)?b:null!=(b=a.PhotobookProject)?b:null!=(b=a.MatisseCalendarProject)?b:void 0},unwrapProduct:function(a){switch(a.type){case E.PHOTOBOOK_30:return a.book;default:return a.product}},stripProjectIdentifiers:function(a){var b;return null!=(b=C.unwrapProject(a))&&(delete b.userId,delete b.projectGUID,null!=b.book&&delete b.book.bookGUID,null!=b.product&&delete b.product.productGUID),a},findProjectImage:function(a,b){var c,d,e,f;if(null==a||null==b)return null;for(f=a.imageCollection.projectImages,d=0,e=f.length;d<e;d++)if(c=f[d],c.productImageID===b)return c;return null},extractImagesFromPage:function(a){return C.extractImagesFromLayout(null!=a?a.layout:void 0)},extractImagesFromLayout:function(a){var b,c,d,e,f,g;for(d=[],c=null!=(g=null!=a?a.assets:void 0)?g:[],e=0,f=c.length;e<f;e++)b=c[e],b.assetType===s.IMAGE&&null!=b.imageAssignment&&d.push({containerId:b.container.id,seqNum:b.seqNum,image:this.extractImageFromAssignment(b.imageAssignment,this.existingProject),pageCrop:this.extractCropFromImageAssignment(b.imageAssignment)});return d},extractImageSize:function(a){var b,c;if(null!=(null!=a?a.imageReference:void 0))return c=this.extractImageFromAssignment(a,null),b={width:c.rotatedWidth,height:c.rotatedHeight}},getPopulatedTextAreasFromLayout:function(a){var b,c,d,e;d=[],e=a.assets;for(c in e)b=e[c],b.assetType===s.TEXT&&this._textAreaHasUserAssignedText(b)&&d.push(b);return d},_textAreaHasUserAssignedText:function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n;if(c=(null!=(i=a.text)&&null!=(j=i.TextFlow)?j.p:void 0)||(null!=(k=a.text)&&null!=(l=k.TextFlow)&&null!=(m=l.div)?m.p:void 0),null==c)return!1;for(e=0,g=c.length;e<g;e++)if(b=c[e],null!=(null!=b?b.spans:void 0))for(n=b.spans,f=0,h=n.length;f<h;f++)if(d=n[f],null!=d.text&&""!==d.text)return!0;return!1},extractImageFromAssignment:function(a,b){var c,d,e,f,g,h;if(null==b&&(b=null),d=a.imageReference,c={id:d.id,description:d.description,width:parseInt(d.width),height:parseInt(d.height),effect:d.effect,data:d.data,rotation:parseInt(d.rotation),redeye:d.redeye,fadeColor:d.fadeColor,fadeValue:d.fadeValue,projectImageId:d.projectImageId},f=C.findProjectImage(b,c.projectImageId),null!=f){h=C.parseViewString(f.view);for(e in h)g=h[e],c[e]=g}return p.createFromImage(c)},extractCropFromImageAssignment:function(a){var b;return b=a.imageReference,{llx:b.llx,lly:b.lly,urx:b.urx,ury:b.ury}},parseViewString:function(a){var b,c,d,e,f,g,h,i,j,k;for(e=function(a,b){return a.substr(0,b.length)===b},f=function(a){return a.substr(a.indexOf("=")+1)},c={crop:{},xOrigin:null},i=a.split("&"),g=0,h=i.length;g<h;g++)switch(d=i[g],!1){case!e(d,"cropll="):b=f(d),j=b.split(","),c.crop.llx=j[0],c.crop.lly=j[1];break;case!e(d,"cropur="):b=f(d),k=b.split(","),c.crop.urx=k[0],c.crop.ury=k[1];break;case!e(d,"Xorigin"):c.xOrigin=f(d)}return c},extractAudioFromLayout:function(a){var b,c,d,e;if(null!=(null!=a?a.assets:void 0))for(e=a.assets,c=0,d=e.length;c<d;c++)if(b=e[c],b.assetType===s.AUDIO)return b},scrapeLayoutAssets:function(a,b){
var c;return null==a&&(a=[]),c=[],a.map(function(a){var d;if(null!=(d=a.assets))return null!=b&&(d=d.filter(b)),c=c.concat(d)}),c}},O={_logValidateDuration:!1,Messages:{styleValidationError:function(a,b){return new x("styleValidationError","Style validation error on property "+a+": "+b)}},validate:function(a,b){var c,d,e,f,g;return g=(new Date).getTime(),e=a.validate(b,O._styleSchema),d=function(){var a,b,c,d;for(c=e.errors,d=[],a=0,b=c.length;a<b;a++)f=c[a],d.push(O.Messages.styleValidationError(f.property,f.message));return d}(),O._logValidateDuration&&(c=(new Date).getTime()-g,console.log("validate took: "+c+"ms")),d},_styleSchema:{type:"object",properties:{displayName:{required:!0,type:"string"},styleId:{required:!0,type:"string"},sizeId:{required:!0,type:"string"},assetLists:{required:!0,type:"object",properties:{assetList:{required:!0,type:"array",items:{required:!0,type:"object",properties:{assetRef:{type:"array",items:{type:"object",required:!0,properties:{assetId:{required:!0,type:"string"},version:{required:!0,type:"integer"},url:{required:!0,type:"array",items:{type:"object",properties:{value:{type:"string",required:!0},repType:{type:"string",required:!0}}}},layoutAttributes:{type:"object",properties:{NumLPics:{required:!0,type:"integer"},NumPPics:{required:!0,type:"integer"},NumSPics:{required:!0,type:"integer"}}}}}}}}}}}}}},b.exports={ArrayIterator:d,ArrayUtil:e,ArgumentValidation:c,AsyncMetric:f,CalendarGridCellUtil:g,CompoundFilter:h,ContentDimens:i,CropUtil:k,CoverTypeEnum:j,CumulativeCount:l,currentTimeSeconds:function(){return(new Date).valueOf()/1e3},DateUtil:m,Enum:n,FinishTypeEnum:o,freeze:"function"==typeof Object.freeze?Object.freeze:function(){},Image:p,ImageUtil:q,ImagesUtil:r,LayoutAssetTypeEnum:s,LayoutGraphicAssetTypeEnum:t,Logger:v,LogLevel:u,Message:x,NumberUtil:y,ObjectUtil:z,OrientationEnum:A,PageTypeEnum:B,Project:C,ProjectSubtypeEnum:D,ProjectTypeEnum:E,Promise:F,Pseudorandom:G,RequestScheduler:H,RetriableHttpGetRequest:I,RollingHistory:K,RotationEnum:L,SortUtil:M,StringUtil:N,StyleSchema:O,TestLogger:P,TestUtil:Q,TransformUtil:R,URL:S,Vector:T,XHRUtil:U,private:{LoggerUtil:w,RetriableHttpRequest:J}}}).call(this)},{autofill:12,xmlhttprequest:"xmlhttprequest"}]},{},[12])(12)}),function(){var a=function(a,b){return b.priority-a.priority},b=function(a,b){return a.priority-b.priority};PriorityQueue=function(c){var d,e=[],f=!1;d=c&&c.low?a:b;var g=function(){e.sort(d),f=!0},h={pop:function(){f||g();var a=e.pop();return a?a.object:void 0},top:function(){f||g();var a=e[e.length-1];return a?a.object:void 0},includes:function(a){for(var b=e.length-1;b>=0;b--)if(e[b].object===a)return!0;return!1},size:function(){return e.length},empty:function(){return 0===e.length},push:function(a,b){e.push({object:a,priority:b}),f=!1}};return h}}(),function(a,b){"use strict";function c(){if(!d.READY){d.event.determineEventTypes();for(var a in d.gestures)d.gestures.hasOwnProperty(a)&&d.detection.register(d.gestures[a]);d.event.onTouch(d.DOCUMENT,d.EVENT_MOVE,d.detection.detect),d.event.onTouch(d.DOCUMENT,d.EVENT_END,d.detection.detect),d.READY=!0}}var d=function(a,b){return new d.Instance(a,b||{})};d.defaults={stop_browser_behavior:{userSelect:"none",touchAction:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},d.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,d.HAS_TOUCHEVENTS="ontouchstart"in a,d.MOBILE_REGEX=/mobile|tablet|ip(ad|hone|od)|android/i,d.NO_MOUSEEVENTS=d.HAS_TOUCHEVENTS&&navigator.userAgent.match(d.MOBILE_REGEX),d.EVENT_TYPES={},d.DIRECTION_DOWN="down",d.DIRECTION_LEFT="left",d.DIRECTION_UP="up",d.DIRECTION_RIGHT="right",d.POINTER_MOUSE="mouse",d.POINTER_TOUCH="touch",d.POINTER_PEN="pen",d.EVENT_START="start",d.EVENT_MOVE="move",d.EVENT_END="end",d.DOCUMENT=document,d.plugins={},d.READY=!1,d.Instance=function(a,b){var e=this;return c(),this.element=a,this.enabled=!0,this.options=d.utils.extend(d.utils.extend({},d.defaults),b||{}),this.options.stop_browser_behavior&&d.utils.stopDefaultBrowserBehavior(this.element,this.options.stop_browser_behavior),d.event.onTouch(a,d.EVENT_START,function(a){e.enabled&&d.detection.startDetect(e,a)}),this},d.Instance.prototype={on:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.addEventListener(c[d],b,!1);return this},off:function(a,b){for(var c=a.split(" "),d=0;d<c.length;d++)this.element.removeEventListener(c[d],b,!1);return this},trigger:function(a,b){var c=d.DOCUMENT.createEvent("Event");c.initEvent(a,!0,!0),c.gesture=b;var e=this.element;return d.utils.hasParent(b.target,e)&&(e=b.target),e.dispatchEvent(c),this},enable:function(a){return this.enabled=a,this}};var e=null,f=!1,g=!1;d.event={bindDom:function(a,b,c){for(var d=b.split(" "),e=0;e<d.length;e++)a.addEventListener(d[e],c,!1)},onTouch:function(a,b,c){var h=this;this.bindDom(a,d.EVENT_TYPES[b],function(i){var j=i.type.toLowerCase();if(!j.match(/mouse/)||!g){(j.match(/touch/)||j.match(/pointerdown/)||j.match(/mouse/)&&1===i.which)&&(f=!0),j.match(/touch|pointer/)&&(g=!0);var k=0;f&&(d.HAS_POINTEREVENTS&&b!=d.EVENT_END?k=d.PointerEvent.updatePointer(b,i):j.match(/touch/)?k=i.touches.length:g||(k=j.match(/up/)?0:1),k>0&&b==d.EVENT_END?b=d.EVENT_MOVE:k||(b=d.EVENT_END),k||null===e?e=i:i=e,c.call(d.detection,h.collectEventData(a,b,i)),d.HAS_POINTEREVENTS&&b==d.EVENT_END&&(k=d.PointerEvent.updatePointer(b,i))),k||(e=null,f=!1,g=!1,d.PointerEvent.reset())}})},determineEventTypes:function(){var a;a=d.HAS_POINTEREVENTS?d.PointerEvent.getEvents():d.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],d.EVENT_TYPES[d.EVENT_START]=a[0],d.EVENT_TYPES[d.EVENT_MOVE]=a[1],d.EVENT_TYPES[d.EVENT_END]=a[2]},getTouchList:function(a){return d.HAS_POINTEREVENTS?d.PointerEvent.getTouchList():a.touches?a.touches:[{identifier:1,pageX:a.pageX,pageY:a.pageY,target:a.target}]},collectEventData:function(a,b,c){var e=this.getTouchList(c,b),f=d.POINTER_TOUCH;return(c.type.match(/mouse/)||d.PointerEvent.matchType(d.POINTER_MOUSE,c))&&(f=d.POINTER_MOUSE),{center:d.utils.getCenter(e),timeStamp:(new Date).getTime(),target:c.target,touches:e,eventType:b,pointerType:f,srcEvent:c,preventDefault:function(){this.srcEvent.preventManipulation&&this.srcEvent.preventManipulation(),this.srcEvent.preventDefault&&this.srcEvent.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return d.detection.stopDetect()}}}},d.PointerEvent={pointers:{},getTouchList:function(){var a=this,b=[];return Object.keys(a.pointers).sort().forEach(function(c){b.push(a.pointers[c])}),b},updatePointer:function(a,b){return a==d.EVENT_END?this.pointers={}:(b.identifier=b.pointerId,this.pointers[b.pointerId]=b),Object.keys(this.pointers).length},matchType:function(a,b){if(!b.pointerType)return!1;var c={};return c[d.POINTER_MOUSE]=b.pointerType==b.MSPOINTER_TYPE_MOUSE||b.pointerType==d.POINTER_MOUSE,c[d.POINTER_TOUCH]=b.pointerType==b.MSPOINTER_TYPE_TOUCH||b.pointerType==d.POINTER_TOUCH,c[d.POINTER_PEN]=b.pointerType==b.MSPOINTER_TYPE_PEN||b.pointerType==d.POINTER_PEN,c[a]},getEvents:function(){return["pointerdown MSPointerDown","pointermove MSPointerMove","pointerup pointercancel MSPointerUp MSPointerCancel"]},reset:function(){this.pointers={}}},d.utils={extend:function(a,c,d){for(var e in c)a[e]!==b&&d||(a[e]=c[e]);return a},hasParent:function(a,b){for(;a;){if(a==b)return!0;a=a.parentNode}return!1},getCenter:function(a){for(var b=[],c=[],d=0,e=a.length;d<e;d++)b.push(a[d].pageX),c.push(a[d].pageY);return{pageX:(Math.min.apply(Math,b)+Math.max.apply(Math,b))/2,pageY:(Math.min.apply(Math,c)+Math.max.apply(Math,c))/2}},getVelocity:function(a,b,c){return{x:Math.abs(b/a)||0,y:Math.abs(c/a)||0}},getAngle:function(a,b){var c=b.pageY-a.pageY,d=b.pageX-a.pageX;return 180*Math.atan2(c,d)/Math.PI},getDirection:function(a,b){var c=Math.abs(a.pageX-b.pageX),e=Math.abs(a.pageY-b.pageY);return c>=e?a.pageX-b.pageX>0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT:a.pageY-b.pageY>0?d.DIRECTION_UP:d.DIRECTION_DOWN},getDistance:function(a,b){var c=b.pageX-a.pageX,d=b.pageY-a.pageY;return Math.sqrt(c*c+d*d)},getScale:function(a,b){return a.length>=2&&b.length>=2?this.getDistance(b[0],b[1])/this.getDistance(a[0],a[1]):1},getRotation:function(a,b){return a.length>=2&&b.length>=2?this.getAngle(b[1],b[0])-this.getAngle(a[1],a[0]):0},isVertical:function(a){return a==d.DIRECTION_UP||a==d.DIRECTION_DOWN},stopDefaultBrowserBehavior:function(a,b){var c,d=["webkit","khtml","moz","ms","o",""];if(b&&a.style){for(var e=0;e<d.length;e++)for(var f in b)b.hasOwnProperty(f)&&(c=f,d[e]&&(c=d[e]+c.substring(0,1).toUpperCase()+c.substring(1)),a.style[c]=b[f]);"none"==b.userSelect&&(a.onselectstart=function(){return!1})}}},d.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(a,b){this.current||(this.stopped=!1,this.current={inst:a,startEvent:d.utils.extend({},b),lastEvent:!1,name:""},this.detect(b))},detect:function(a){if(this.current&&!this.stopped){a=this.extendEventData(a);for(var b=this.current.inst.options,c=0,e=this.gestures.length;c<e;c++){var f=this.gestures[c];if(!this.stopped&&b[f.name]!==!1&&f.handler.call(f,a,this.current.inst)===!1){this.stopDetect();break}}return this.current&&(this.current.lastEvent=a),a.eventType==d.EVENT_END&&!a.touches.length-1&&this.stopDetect(),a}},stopDetect:function(){this.previous=d.utils.extend({},this.current),this.current=null,this.stopped=!0},extendEventData:function(a){var b=this.current.startEvent;if(b&&(a.touches.length!=b.touches.length||a.touches===b.touches)){b.touches=[];for(var c=0,e=a.touches.length;c<e;c++)b.touches.push(d.utils.extend({},a.touches[c]))}var f=a.timeStamp-b.timeStamp,g=a.center.pageX-b.center.pageX,h=a.center.pageY-b.center.pageY,i=d.utils.getVelocity(f,g,h);return d.utils.extend(a,{deltaTime:f,deltaX:g,deltaY:h,velocityX:i.x,velocityY:i.y,distance:d.utils.getDistance(b.center,a.center),angle:d.utils.getAngle(b.center,a.center),direction:d.utils.getDirection(b.center,a.center),scale:d.utils.getScale(b.touches,a.touches),rotation:d.utils.getRotation(b.touches,a.touches),startEvent:b}),a},register:function(a){var c=a.defaults||{};return c[a.name]===b&&(c[a.name]=!0),d.utils.extend(d.defaults,c,!0),a.index=a.index||1e3,this.gestures.push(a),this.gestures.sort(function(a,b){return a.index<b.index?-1:a.index>b.index?1:0}),this.gestures}},d.gestures=d.gestures||{},d.gestures.Hold={name:"hold",index:10,defaults:{hold_timeout:500,hold_threshold:1},timer:null,handler:function(a,b){switch(a.eventType){case d.EVENT_START:clearTimeout(this.timer),d.detection.current.name=this.name,this.timer=setTimeout(function(){"hold"==d.detection.current.name&&b.trigger("hold",a)},b.options.hold_timeout);break;case d.EVENT_MOVE:a.distance>b.options.hold_threshold&&clearTimeout(this.timer);break;case d.EVENT_END:clearTimeout(this.timer)}}},d.gestures.Tap={name:"tap",index:100,defaults:{tap_max_touchtime:250,tap_max_distance:10,tap_always:!0,doubletap_distance:20,doubletap_interval:300},handler:function(a,b){if(a.eventType==d.EVENT_END){var c=d.detection.previous,e=!1;if(a.deltaTime>b.options.tap_max_touchtime||a.distance>b.options.tap_max_distance)return;c&&"tap"==c.name&&a.timeStamp-c.lastEvent.timeStamp<b.options.doubletap_interval&&a.distance<b.options.doubletap_distance&&(b.trigger("doubletap",a),e=!0),e&&!b.options.tap_always||(d.detection.current.name="tap",b.trigger(d.detection.current.name,a))}}},d.gestures.Swipe={name:"swipe",index:40,defaults:{swipe_max_touches:1,swipe_velocity:.7},handler:function(a,b){if(a.eventType==d.EVENT_END){if(b.options.swipe_max_touches>0&&a.touches.length>b.options.swipe_max_touches)return;(a.velocityX>b.options.swipe_velocity||a.velocityY>b.options.swipe_velocity)&&(b.trigger(this.name,a),b.trigger(this.name+a.direction,a))}}},d.gestures.Drag={name:"drag",index:50,defaults:{drag_min_distance:10,drag_max_touches:1,drag_block_horizontal:!1,drag_block_vertical:!1,drag_lock_to_axis:!1,drag_lock_min_distance:25},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(b.options.drag_max_touches>0&&a.touches.length>b.options.drag_max_touches))switch(a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:if(a.distance<b.options.drag_min_distance&&d.detection.current.name!=this.name)return;d.detection.current.name=this.name,(d.detection.current.lastEvent.drag_locked_to_axis||b.options.drag_lock_to_axis&&b.options.drag_lock_min_distance<=a.distance)&&(a.drag_locked_to_axis=!0);var c=d.detection.current.lastEvent.direction;a.drag_locked_to_axis&&c!==a.direction&&(d.utils.isVertical(c)?a.direction=a.deltaY<0?d.DIRECTION_UP:d.DIRECTION_DOWN:a.direction=a.deltaX<0?d.DIRECTION_LEFT:d.DIRECTION_RIGHT),this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),b.trigger(this.name+a.direction,a),(b.options.drag_block_vertical&&d.utils.isVertical(a.direction)||b.options.drag_block_horizontal&&!d.utils.isVertical(a.direction))&&a.preventDefault();break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Transform={name:"transform",index:45,defaults:{transform_min_scale:.01,transform_min_rotation:1,transform_always_block:!1},triggered:!1,handler:function(a,b){if(d.detection.current.name!=this.name&&this.triggered)return b.trigger(this.name+"end",a),void(this.triggered=!1);if(!(a.touches.length<2))switch(b.options.transform_always_block&&a.preventDefault(),a.eventType){case d.EVENT_START:this.triggered=!1;break;case d.EVENT_MOVE:var c=Math.abs(1-a.scale),e=Math.abs(a.rotation);if(c<b.options.transform_min_scale&&e<b.options.transform_min_rotation)return;d.detection.current.name=this.name,this.triggered||(b.trigger(this.name+"start",a),this.triggered=!0),b.trigger(this.name,a),e>b.options.transform_min_rotation&&b.trigger("rotate",a),c>b.options.transform_min_scale&&(b.trigger("pinch",a),b.trigger("pinch"+(a.scale<1?"in":"out"),a));break;case d.EVENT_END:this.triggered&&b.trigger(this.name+"end",a),this.triggered=!1}}},d.gestures.Touch={name:"touch",index:-(1/0),defaults:{prevent_default:!1,prevent_mouseevents:!1},handler:function(a,b){return b.options.prevent_mouseevents&&a.pointerType==d.POINTER_MOUSE?void a.stopDetect():(b.options.prevent_default&&a.preventDefault(),void(a.eventType==d.EVENT_START&&b.trigger(this.name,a)))}},d.gestures.Release={name:"release",index:1/0,handler:function(a,b){a.eventType==d.EVENT_END&&b.trigger(this.name,a)}},"object"==typeof module&&"object"==typeof module.exports?module.exports=d:(a.Hammer=d,"function"==typeof a.define&&a.define.amd&&a.define("hammer",[],function(){return d}))}(this),angular.module("angular-gestures",[]);var HGESTURES={hmDoubleTap:"doubletap",hmDragstart:"dragstart",hmDrag:"drag",hmDragUp:"dragup",hmDragDown:"dragdown",hmDragLeft:"dragleft",hmDragRight:"dragright",hmDragend:"dragend",hmHold:"hold",hmPinch:"pinch",hmPinchIn:"pinchin",hmPinchOut:"pinchout",hmRelease:"release",hmRotate:"rotate",hmSwipe:"swipe",hmSwipeUp:"swipeup",hmSwipeDown:"swipedown",hmSwipeLeft:"swipeleft",hmSwipeRight:"swiperight",hmTap:"tap",hmTouch:"touch",hmTransformstart:"transformstart",hmTransform:"transform",hmTransformend:"transformend"},VERBOSE=!1;angular.forEach(HGESTURES,function(a,b){angular.module("angular-gestures").directive(b,["$parse","$log","$timeout",function(c,d,e){return function(f,g,h){var i,j;h.$observe(b,function(k){var l=c(k),m=c(h[b+"Opts"])(f,{});i=new Hammer(g[0],m),j=function(b){VERBOSE&&d.debug("angular-gestures: %s",a),e(function(){l(f,{$event:b})},0)},i.on(a,j)}),f.$on("$destroy",function(){i.off(a,j)})}}])}),!function(a,b){var c=b.isDefined,d=b.isUndefined,e=b.isNumber,f=b.isObject,g=b.isArray,h=b.extend,i=b.toJson;b.module("LocalStorageModule",[]).provider("localStorageService",function(){this.prefix="ls",this.storageType="localStorage",this.cookie={expiry:30,path:"/",secure:!1},this.defaultToCookie=!0,this.notify={setItem:!0,removeItem:!1},this.setPrefix=function(a){return this.prefix=a,this},this.setStorageType=function(a){return this.storageType=a,this},this.setDefaultToCookie=function(a){return this.defaultToCookie=!!a,this},this.setStorageCookie=function(a,b,c){return this.cookie.expiry=a,this.cookie.path=b,this.cookie.secure=c,this},this.setStorageCookieDomain=function(a){return this.cookie.domain=a,this},this.setNotify=function(a,b){return this.notify={setItem:a,removeItem:b},this},this.$get=["$rootScope","$window","$document","$parse","$timeout",function(a,b,j,k,l){function m(c){if(c||(c=b.event),r.setItem&&v(c.key)){var d=u(c.key);l(function(){a.$broadcast("LocalStorageModule.notification.changed",{key:d,newvalue:c.newValue,storageType:o.storageType})})}}var n,o=this,p=o.prefix,q=o.cookie,r=o.notify,s=o.storageType;j?j[0]&&(j=j[0]):j=document,"."!==p.substr(-1)&&(p=p?p+".":"");var t=function(a){return p+a},u=function(a){return a.replace(new RegExp("^"+p,"g"),"")},v=function(a){return 0===a.indexOf(p)},w=function(){try{var c=s in b&&null!==b[s],d=t("__"+Math.round(1e7*Math.random()));return c&&(n=b[s],n.setItem(d,""),n.removeItem(d)),c}catch(b){return o.defaultToCookie&&(s="cookie"),a.$broadcast("LocalStorageModule.notification.error",b.message),!1}},x=w(),y=function(b,c,e){if(J(e),c=d(c)?null:i(c),!x&&o.defaultToCookie||"cookie"===o.storageType)return x||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:"cookie"}),E(b,c);try{n&&n.setItem(t(b),c),r.setItem&&a.$broadcast("LocalStorageModule.notification.setitem",{key:b,newvalue:c,storageType:o.storageType})}catch(d){return a.$broadcast("LocalStorageModule.notification.error",d.message),E(b,c)}return!0},z=function(b,c){if(J(c),!x&&o.defaultToCookie||"cookie"===o.storageType)return x||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),F(b);var d=n?n.getItem(t(b)):null;if(!d||"null"===d)return null;try{return JSON.parse(d)}catch(a){return d}},A=function(){var b=0;arguments.length>=1&&("localStorage"===arguments[arguments.length-1]||"sessionStorage"===arguments[arguments.length-1])&&(b=1,J(arguments[arguments.length-1]));var c,d;for(c=0;c<arguments.length-b;c++)if(d=arguments[c],!x&&o.defaultToCookie||"cookie"===o.storageType)x||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),r.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:d,storageType:"cookie"}),G(d);else try{n.removeItem(t(d)),r.removeItem&&a.$broadcast("LocalStorageModule.notification.removeitem",{key:d,storageType:o.storageType})}catch(b){a.$broadcast("LocalStorageModule.notification.error",b.message),G(d)}},B=function(b){if(J(b),!x)return a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),[];var c=p.length,d=[];for(var e in n)if(e.substr(0,c)===p)try{d.push(e.substr(c))}catch(b){return a.$broadcast("LocalStorageModule.notification.error",b.Description),[]}return d},C=function(b,c){J(c);var d=p?new RegExp("^"+p):new RegExp,e=b?new RegExp(b):new RegExp;if(!x&&o.defaultToCookie||"cookie"===o.storageType)return x||a.$broadcast("LocalStorageModule.notification.warning","LOCAL_STORAGE_NOT_SUPPORTED"),H();if(!x&&!o.defaultToCookie)return!1;var f=p.length;for(var g in n)if(d.test(g)&&e.test(g.substr(f)))try{A(g.substr(f))}catch(b){return a.$broadcast("LocalStorageModule.notification.error",b.message),H()}return!0},D=function(){try{return b.navigator.cookieEnabled||"cookie"in j&&(j.cookie.length>0||(j.cookie="test").indexOf.call(j.cookie,"test")>-1)}catch(b){return a.$broadcast("LocalStorageModule.notification.error",b.message),!1}}(),E=function(b,c,h,k){if(d(c))return!1;if((g(c)||f(c))&&(c=i(c)),!D)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;try{var l="",m=new Date,n="";if(null===c?(m.setTime(m.getTime()+-864e5),l="; expires="+m.toGMTString(),c=""):e(h)&&0!==h?(m.setTime(m.getTime()+24*h*60*60*1e3),l="; expires="+m.toGMTString()):0!==q.expiry&&(m.setTime(m.getTime()+24*q.expiry*60*60*1e3),l="; expires="+m.toGMTString()),b){var o="; path="+q.path;q.domain&&(n="; domain="+q.domain),"boolean"==typeof k?k===!0&&(n+="; secure"):q.secure===!0&&(n+="; secure"),j.cookie=t(b)+"="+encodeURIComponent(c)+l+o+n}}catch(b){return a.$broadcast("LocalStorageModule.notification.error",b.message),!1}return!0},F=function(b){if(!D)return a.$broadcast("LocalStorageModule.notification.error","COOKIES_NOT_SUPPORTED"),!1;for(var c=j.cookie&&j.cookie.split(";")||[],d=0;d<c.length;d++){for(var e=c[d];" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t(b)+"=")){var f=decodeURIComponent(e.substring(p.length+b.length+1,e.length));try{return JSON.parse(f)}catch(a){return f}}}return null},G=function(a){E(a,null)},H=function(){for(var a=null,b=p.length,c=j.cookie.split(";"),d=0;d<c.length;d++){for(a=c[d];" "===a.charAt(0);)a=a.substring(1,a.length);var e=a.substring(b,a.indexOf("="));G(e)}},I=function(){return s},J=function(a){return a&&s!==a&&(s=a,x=w()),x},K=function(a,b,d,e,g){e=e||b;var i=z(e,g);return null===i&&c(d)?i=d:f(i)&&f(d)&&(i=h(i,d)),k(b).assign(a,i),a.$watch(b,function(a){y(e,a,g)},f(a[b]))};x&&(b.addEventListener?(b.addEventListener("storage",m,!1),a.$on("$destroy",function(){b.removeEventListener("storage",m)})):b.attachEvent&&(b.attachEvent("onstorage",m),a.$on("$destroy",function(){b.detachEvent("onstorage",m)})));var L=function(a){J(a);for(var c=0,d=b[s],e=0;e<d.length;e++)0===d.key(e).indexOf(p)&&c++;return c};return{isSupported:x,getStorageType:I,setStorageType:J,set:y,add:y,get:z,keys:B,remove:A,clearAll:C,bind:K,deriveKey:t,underiveKey:u,length:L,defaultToCookie:this.defaultToCookie,cookie:{isSupported:D,set:E,add:E,get:F,remove:G,clearAll:H}}}]})}(window,window.angular),function(){"use strict";function a(b,d){function e(a,b){return function(){return a.apply(b,arguments)}}var f;if(d=d||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=d.touchBoundary||10,this.layer=b,this.tapDelay=d.tapDelay||200,this.tapTimeout=d.tapTimeout||700,!a.notNeeded(b)){for(var g=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],h=this,i=0,j=g.length;i<j;i++)h[g[i]]=e(h[g[i]],h);c&&(b.addEventListener("mouseover",this.onMouse,!0),b.addEventListener("mousedown",this.onMouse,!0),b.addEventListener("mouseup",this.onMouse,!0)),b.addEventListener("click",this.onClick,!0),b.addEventListener("touchstart",this.onTouchStart,!1),b.addEventListener("touchmove",this.onTouchMove,!1),b.addEventListener("touchend",this.onTouchEnd,!1),b.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(b.removeEventListener=function(a,c,d){var e=Node.prototype.removeEventListener;"click"===a?e.call(b,a,c.hijacked||c,d):e.call(b,a,c,d)},b.addEventListener=function(a,c,d){var e=Node.prototype.addEventListener;"click"===a?e.call(b,a,c.hijacked||(c.hijacked=function(a){a.propagationStopped||c(a)}),d):e.call(b,a,c,d)}),"function"==typeof b.onclick&&(f=b.onclick,b.addEventListener("click",function(a){f(a)},!1),b.onclick=null)}}var b=navigator.userAgent.indexOf("Windows Phone")>=0,c=navigator.userAgent.indexOf("Android")>0&&!b,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!b,e=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),f=d&&/OS [6-7]_\d/.test(navigator.userAgent),g=navigator.userAgent.indexOf("BB10")>0;a.prototype.needsClick=function(a){switch(a.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(a.disabled)return!0;break;case"input":if(d&&"file"===a.type||a.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(a.className)},a.prototype.needsFocus=function(a){switch(a.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!c;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!a.disabled&&!a.readOnly;default:return/\bneedsfocus\b/.test(a.className)}},a.prototype.sendClick=function(a,b){var c,d;document.activeElement&&document.activeElement!==a&&document.activeElement.blur(),d=b.changedTouches[0],c=document.createEvent("MouseEvents"),c.initMouseEvent(this.determineEventType(a),!0,!0,window,1,d.screenX,d.screenY,d.clientX,d.clientY,!1,!1,!1,!1,0,null),c.forwardedTouchEvent=!0,a.dispatchEvent(c)},a.prototype.determineEventType=function(a){return c&&"select"===a.tagName.toLowerCase()?"mousedown":"click"},a.prototype.focus=function(a){var b;d&&a.setSelectionRange&&0!==a.type.indexOf("date")&&"time"!==a.type&&"month"!==a.type?(b=a.value.length,a.setSelectionRange(b,b)):a.focus()},a.prototype.updateScrollParent=function(a){var b,c;if(b=a.fastClickScrollParent,!b||!b.contains(a)){c=a;do{if(c.scrollHeight>c.offsetHeight){b=c,a.fastClickScrollParent=c;break}c=c.parentElement}while(c)}b&&(b.fastClickLastScrollTop=b.scrollTop)},a.prototype.getTargetElementFromEventTarget=function(a){return a.nodeType===Node.TEXT_NODE?a.parentNode:a},a.prototype.onTouchStart=function(a){var b,c,f;if(a.targetTouches.length>1)return!0;if(b=this.getTargetElementFromEventTarget(a.target),c=a.targetTouches[0],d){if(f=window.getSelection(),f.rangeCount&&!f.isCollapsed)return!0;if(!e){if(c.identifier&&c.identifier===this.lastTouchIdentifier)return a.preventDefault(),!1;this.lastTouchIdentifier=c.identifier,this.updateScrollParent(b)}}return this.trackingClick=!0,this.trackingClickStart=a.timeStamp,this.targetElement=b,this.touchStartX=c.pageX,this.touchStartY=c.pageY,a.timeStamp-this.lastClickTime<this.tapDelay&&a.preventDefault(),!0},a.prototype.touchHasMoved=function(a){var b=a.changedTouches[0],c=this.touchBoundary;return Math.abs(b.pageX-this.touchStartX)>c||Math.abs(b.pageY-this.touchStartY)>c},a.prototype.onTouchMove=function(a){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(a.target)||this.touchHasMoved(a))&&(this.trackingClick=!1,this.targetElement=null),!0)},a.prototype.findControl=function(a){return void 0!==a.control?a.control:a.htmlFor?document.getElementById(a.htmlFor):a.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},a.prototype.onTouchEnd=function(a){var b,g,h,i,j,k=this.targetElement;if(!this.trackingClick)return!0;if(a.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(a.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=a.timeStamp,g=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,f&&(j=a.changedTouches[0],k=document.elementFromPoint(j.pageX-window.pageXOffset,j.pageY-window.pageYOffset)||k,k.fastClickScrollParent=this.targetElement.fastClickScrollParent),h=k.tagName.toLowerCase(),"label"===h){if(b=this.findControl(k)){if(this.focus(k),c)return!1;k=b}}else if(this.needsFocus(k))return a.timeStamp-g>100||d&&window.top!==window&&"input"===h?(this.targetElement=null,!1):(this.focus(k),this.sendClick(k,a),d&&"select"===h||(this.targetElement=null,a.preventDefault()),!1);return!(!d||e||(i=k.fastClickScrollParent,!i||i.fastClickLastScrollTop===i.scrollTop))||(this.needsClick(k)||(a.preventDefault(),this.sendClick(k,a)),!1)},a.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},a.prototype.onMouse=function(a){return!this.targetElement||(!!a.forwardedTouchEvent||(!a.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(a.stopImmediatePropagation?a.stopImmediatePropagation():a.propagationStopped=!0,a.stopPropagation(),a.preventDefault(),!1))))},a.prototype.onClick=function(a){var b;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===a.target.type&&0===a.detail||(b=this.onMouse(a),b||(this.targetElement=null),b)},a.prototype.destroy=function(){var a=this.layer;c&&(a.removeEventListener("mouseover",this.onMouse,!0),a.removeEventListener("mousedown",this.onMouse,!0),a.removeEventListener("mouseup",this.onMouse,!0)),a.removeEventListener("click",this.onClick,!0),a.removeEventListener("touchstart",this.onTouchStart,!1),a.removeEventListener("touchmove",this.onTouchMove,!1),a.removeEventListener("touchend",this.onTouchEnd,!1),a.removeEventListener("touchcancel",this.onTouchCancel,!1)},a.notNeeded=function(a){var b,d,e,f;if("undefined"==typeof window.ontouchstart)return!0;if(d=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!c)return!0;if(b=document.querySelector("meta[name=viewport]")){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(d>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(g&&(e=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),e[1]>=10&&e[2]>=3&&(b=document.querySelector("meta[name=viewport]")))){if(b.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===a.style.msTouchAction||"manipulation"===a.style.touchAction||(f=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(f>=27&&(b=document.querySelector("meta[name=viewport]"),b&&(b.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===a.style.touchAction||"manipulation"===a.style.touchAction))},a.attach=function(b,c){return new a(b,c)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?(module.exports=a.attach,module.exports.FastClick=a):window.FastClick=a}(),function(a,b){function c(b,c){var e,f,g,h=b.nodeName.toLowerCase();return"area"===h?(e=b.parentNode,f=e.name,!(!b.href||!f||"map"!==e.nodeName.toLowerCase())&&(g=a("img[usemap=#"+f+"]")[0],!!g&&d(g))):(/input|select|textarea|button|object/.test(h)?!b.disabled:"a"===h?b.href||c:c)&&d(b)}function d(b){return a.expr.filters.visible(b)&&!a(b).parents().addBack().filter(function(){return"hidden"===a.css(this,"visibility")}).length}var e=0,f=/^ui-id-\d+$/;a.ui=a.ui||{},a.extend(a.ui,{version:"1.10.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),a.fn.extend({focus:function(b){return function(c,d){return"number"==typeof c?this.each(function(){var b=this;setTimeout(function(){a(b).focus(),d&&d.call(b)},c)}):b.apply(this,arguments)}}(a.fn.focus),scrollParent:function(){var b;return b=a.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.css(this,"position"))&&/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(a.css(this,"overflow")+a.css(this,"overflow-y")+a.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length)for(var d,e,f=a(this[0]);f.length&&f[0]!==document;){if(d=f.css("position"),("absolute"===d||"relative"===d||"fixed"===d)&&(e=parseInt(f.css("zIndex"),10),!isNaN(e)&&0!==e))return e;f=f.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++e)})},removeUniqueId:function(){return this.each(function(){f.test(this.id)&&a(this).removeAttr("id")})}}),a.extend(a.expr[":"],{data:a.expr.createPseudo?a.expr.createPseudo(function(b){return function(c){return!!a.data(c,b)}}):function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e);
}}),a("<a>").outerWidth(1).jquery||a.each(["Width","Height"],function(c,d){function e(b,c,d,e){return a.each(f,function(){c-=parseFloat(a.css(b,"padding"+this))||0,d&&(c-=parseFloat(a.css(b,"border"+this+"Width"))||0),e&&(c-=parseFloat(a.css(b,"margin"+this))||0)}),c}var f="Width"===d?["Left","Right"]:["Top","Bottom"],g=d.toLowerCase(),h={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){return c===b?h["inner"+d].call(this):this.each(function(){a(this).css(g,e(this,c)+"px")})},a.fn["outer"+d]=function(b,c){return"number"!=typeof b?h["outer"+d].call(this,b):this.each(function(){a(this).css(g,e(this,b,!0,c)+"px")})}}),a.fn.addBack||(a.fn.addBack=function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}),a("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(a.fn.removeData=function(b){return function(c){return arguments.length?b.call(this,a.camelCase(c)):b.call(this)}}(a.fn.removeData)),a.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),a.support.selectstart="onselectstart"in document.createElement("div"),a.fn.extend({disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e,f=a.ui[b].prototype;for(e in d)f.plugins[e]=f.plugins[e]||[],f.plugins[e].push([c,d[e]])},call:function(a,b,c){var d,e=a.plugins[b];if(e&&a.element[0].parentNode&&11!==a.element[0].parentNode.nodeType)for(d=0;d<e.length;d++)a.options[e[d][0]]&&e[d][1].apply(a.element,c)}},hasScroll:function(b,c){if("hidden"===a(b).css("overflow"))return!1;var d=c&&"left"===c?"scrollLeft":"scrollTop",e=!1;return b[d]>0||(b[d]=1,e=b[d]>0,b[d]=0,e)}})}(jQuery),function(a,b){var c=0,d=Array.prototype.slice,e=a.cleanData;a.cleanData=function(b){for(var c,d=0;null!=(c=b[d]);d++)try{a(c).triggerHandler("remove")}catch(a){}e(b)},a.widget=function(b,c,d){var e,f,g,h,i={},j=b.split(".")[0];b=b.split(".")[1],e=j+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][e.toLowerCase()]=function(b){return!!a.data(b,e)},a[j]=a[j]||{},f=a[j][b],g=a[j][b]=function(a,b){return this._createWidget?void(arguments.length&&this._createWidget(a,b)):new g(a,b)},a.extend(g,f,{version:d.version,_proto:a.extend({},d),_childConstructors:[]}),h=new c,h.options=a.widget.extend({},h.options),a.each(d,function(b,d){return a.isFunction(d)?void(i[b]=function(){var a=function(){return c.prototype[b].apply(this,arguments)},e=function(a){return c.prototype[b].apply(this,a)};return function(){var b,c=this._super,f=this._superApply;return this._super=a,this._superApply=e,b=d.apply(this,arguments),this._super=c,this._superApply=f,b}}()):void(i[b]=d)}),g.prototype=a.widget.extend(h,{widgetEventPrefix:f?h.widgetEventPrefix||b:b},i,{constructor:g,namespace:j,widgetName:b,widgetFullName:e}),f?(a.each(f._childConstructors,function(b,c){var d=c.prototype;a.widget(d.namespace+"."+d.widgetName,g,c._proto)}),delete f._childConstructors):c._childConstructors.push(g),a.widget.bridge(b,g)},a.widget.extend=function(c){for(var e,f,g=d.call(arguments,1),h=0,i=g.length;h<i;h++)for(e in g[h])f=g[h][e],g[h].hasOwnProperty(e)&&f!==b&&(a.isPlainObject(f)?c[e]=a.isPlainObject(c[e])?a.widget.extend({},c[e],f):a.widget.extend({},f):c[e]=f);return c},a.widget.bridge=function(c,e){var f=e.prototype.widgetFullName||c;a.fn[c]=function(g){var h="string"==typeof g,i=d.call(arguments,1),j=this;return g=!h&&i.length?a.widget.extend.apply(null,[g].concat(i)):g,h?this.each(function(){var d,e=a.data(this,f);return e?a.isFunction(e[g])&&"_"!==g.charAt(0)?(d=e[g].apply(e,i),d!==e&&d!==b?(j=d&&d.jquery?j.pushStack(d.get()):d,!1):void 0):a.error("no such method '"+g+"' for "+c+" widget instance"):a.error("cannot call methods on "+c+" prior to initialization; attempted to call method '"+g+"'")}):this.each(function(){var b=a.data(this,f);b?b.option(g||{})._init():a.data(this,f,new e(g,this))}),j}},a.Widget=function(){},a.Widget._childConstructors=[],a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(b,d){d=a(d||this.defaultElement||this)[0],this.element=a(d),this.uuid=c++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=a.widget.extend({},this.options,this._getCreateOptions(),b),this.bindings=a(),this.hoverable=a(),this.focusable=a(),d!==this&&(a.data(d,this.widgetFullName,this),this._on(!0,this.element,{remove:function(a){a.target===d&&this.destroy()}}),this.document=a(d.style?d.ownerDocument:d.document||d),this.window=a(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:a.noop,_getCreateEventData:a.noop,_create:a.noop,_init:a.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(a.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:a.noop,widget:function(){return this.element},option:function(c,d){var e,f,g,h=c;if(0===arguments.length)return a.widget.extend({},this.options);if("string"==typeof c)if(h={},e=c.split("."),c=e.shift(),e.length){for(f=h[c]=a.widget.extend({},this.options[c]),g=0;g<e.length-1;g++)f[e[g]]=f[e[g]]||{},f=f[e[g]];if(c=e.pop(),1===arguments.length)return f[c]===b?null:f[c];f[c]=d}else{if(1===arguments.length)return this.options[c]===b?null:this.options[c];h[c]=d}return this._setOptions(h),this},_setOptions:function(a){var b;for(b in a)this._setOption(b,a[b]);return this},_setOption:function(a,b){return this.options[a]=b,"disabled"===a&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!b).attr("aria-disabled",b),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(b,c,d){var e,f=this;"boolean"!=typeof b&&(d=c,c=b,b=!1),d?(c=e=a(c),this.bindings=this.bindings.add(c)):(d=c,c=this.element,e=this.widget()),a.each(d,function(d,g){function h(){if(b||f.options.disabled!==!0&&!a(this).hasClass("ui-state-disabled"))return("string"==typeof g?f[g]:g).apply(f,arguments)}"string"!=typeof g&&(h.guid=g.guid=g.guid||h.guid||a.guid++);var i=d.match(/^(\w+)\s*(.*)$/),j=i[1]+f.eventNamespace,k=i[2];k?e.delegate(k,j,h):c.bind(j,h)})},_off:function(a,b){b=(b||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,a.unbind(b).undelegate(b)},_delay:function(a,b){function c(){return("string"==typeof a?d[a]:a).apply(d,arguments)}var d=this;return setTimeout(c,b||0)},_hoverable:function(b){this.hoverable=this.hoverable.add(b),this._on(b,{mouseenter:function(b){a(b.currentTarget).addClass("ui-state-hover")},mouseleave:function(b){a(b.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(b){this.focusable=this.focusable.add(b),this._on(b,{focusin:function(b){a(b.currentTarget).addClass("ui-state-focus")},focusout:function(b){a(b.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(b,c,d){var e,f,g=this.options[b];if(d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent)for(e in f)e in c||(c[e]=f[e]);return this.element.trigger(c,d),!(a.isFunction(g)&&g.apply(this.element[0],[c].concat(d))===!1||c.isDefaultPrevented())}},a.each({show:"fadeIn",hide:"fadeOut"},function(b,c){a.Widget.prototype["_"+b]=function(d,e,f){"string"==typeof e&&(e={effect:e});var g,h=e?e===!0||"number"==typeof e?c:e.effect||c:b;e=e||{},"number"==typeof e&&(e={duration:e}),g=!a.isEmptyObject(e),e.complete=f,e.delay&&d.delay(e.delay),g&&a.effects&&a.effects.effect[h]?d[b](e):h!==b&&d[h]?d[h](e.duration,e.easing,f):d.queue(function(c){a(this)[b](),f&&f.call(d[0]),c()})}})}(jQuery),function(a,b){var c=!1;a(document).mouseup(function(){c=!1}),a.widget("ui.mouse",{version:"1.10.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent"))return a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=1===b.which,f=!("string"!=typeof this.options.cancel||!b.target.nodeName)&&a(b.target).closest(this.options.cancel).length;return!(e&&!f&&this._mouseCapture(b))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(b)!==!1,!this._mouseStarted)?(b.preventDefault(),!0):(!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0,!0))}},_mouseMove:function(b){return a.ui.ie&&(!document.documentMode||document.documentMode<9)&&!b.button?this._mouseUp(b):this._mouseStarted?(this._mouseDrag(b),b.preventDefault()):(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b)),!this._mouseStarted)},_mouseUp:function(b){return a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target===this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b)),!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(a,b){a.widget("ui.draggable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(b){var c=this.options;return!(this.helper||c.disabled||a(b.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(b),!!this.handle&&(a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")}),!0))},_mouseStart:function(b){var c=this.options;return this.helper=this._createHelper(b),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),this._setContainment(),this._trigger("start",b)===!1?(this._clear(),!1):(this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b),!0)},_mouseDrag:function(b,c){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute"),!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1)return this._mouseUp({}),!1;this.position=d.position}return this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),a.ui.ddmanager&&a.ui.ddmanager.drag(this,b),!1},_mouseStop:function(b){var c=this,d=!1;return a.ui.ddmanager&&!this.options.dropBehaviour&&(d=a.ui.ddmanager.drop(this,b)),this.dropped&&(d=this.dropped,this.dropped=!1),!("original"===this.options.helper&&!a.contains(this.element[0].ownerDocument,this.element[0]))&&("invalid"===this.options.revert&&!d||"valid"===this.options.revert&&d||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,d)?a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){c._trigger("stop",b)!==!1&&c._clear()}):this._trigger("stop",b)!==!1&&this._clear(),!1)},_mouseUp:function(b){return a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b),a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(b){return!this.options.handle||!!a(b.target).closest(this.element.find(this.options.handle)).length},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):"clone"===c.helper?this.element.clone().removeAttr("id"):this.element;return d.parents("body").length||d.appendTo("parent"===c.appendTo?this.element[0].parentNode:c.appendTo),d[0]===this.element[0]||/(fixed|absolute)/.test(d.css("position"))||d.css("position","absolute"),d},_adjustOffsetFromHelper:function(b){"string"==typeof b&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){var b=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&a.ui.ie)&&(b={top:0,left:0}),{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b,c,d,e=this.options;return e.containment?"window"===e.containment?void(this.containment=[a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,a(window).scrollLeft()+a(window).width()-this.helperProportions.width-this.margins.left,a(window).scrollTop()+(a(window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===e.containment?void(this.containment=[0,0,a(document).width()-this.helperProportions.width-this.margins.left,(a(document).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):e.containment.constructor===Array?void(this.containment=e.containment):("parent"===e.containment&&(e.containment=this.helper[0].parentNode),c=a(e.containment),d=c[0],void(d&&(b="hidden"!==c.css("overflow"),this.containment=[(parseInt(c.css("borderLeftWidth"),10)||0)+(parseInt(c.css("paddingLeft"),10)||0),(parseInt(c.css("borderTopWidth"),10)||0)+(parseInt(c.css("paddingTop"),10)||0),(b?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(c.css("borderRightWidth"),10)||0)-(parseInt(c.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(b?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(c.css("borderBottomWidth"),10)||0)-(parseInt(c.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c))):void(this.containment=null)},_convertPositionTo:function(b,c){c||(c=this.position);var d="absolute"===b?1:-1,e="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent;return this.offset.scroll||(this.offset.scroll={top:e.scrollTop(),left:e.scrollLeft()}),{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top)*d,left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)*d}},_generatePosition:function(b){var c,d,e,f,g=this.options,h="absolute"!==this.cssPosition||this.scrollParent[0]!==document&&a.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=b.pageX,j=b.pageY;return this.offset.scroll||(this.offset.scroll={top:h.scrollTop(),left:h.scrollLeft()}),this.originalPosition&&(this.containment&&(this.relative_container?(d=this.relative_container.offset(),c=[this.containment[0]+d.left,this.containment[1]+d.top,this.containment[2]+d.left,this.containment[3]+d.top]):c=this.containment,b.pageX-this.offset.click.left<c[0]&&(i=c[0]+this.offset.click.left),b.pageY-this.offset.click.top<c[1]&&(j=c[1]+this.offset.click.top),b.pageX-this.offset.click.left>c[2]&&(i=c[2]+this.offset.click.left),b.pageY-this.offset.click.top>c[3]&&(j=c[3]+this.offset.click.top)),g.grid&&(e=g.grid[1]?this.originalPageY+Math.round((j-this.originalPageY)/g.grid[1])*g.grid[1]:this.originalPageY,j=c?e-this.offset.click.top>=c[1]||e-this.offset.click.top>c[3]?e:e-this.offset.click.top>=c[1]?e-g.grid[1]:e+g.grid[1]:e,f=g.grid[0]?this.originalPageX+Math.round((i-this.originalPageX)/g.grid[0])*g.grid[0]:this.originalPageX,i=c?f-this.offset.click.left>=c[0]||f-this.offset.click.left>c[2]?f:f-this.offset.click.left>=c[0]?f-g.grid[0]:f+g.grid[0]:f)),{top:j-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():this.offset.scroll.top),left:i-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){return d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),"drag"===b&&(this.positionAbs=this._convertPositionTo("absolute")),a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("ui-draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"ui-sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("ui-draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,"original"===d.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("ui-draggable"),e=this;a.each(d.sortables,function(){var f=!1,g=this;this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(f=!0,a.each(d.sortables,function(){return this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this!==g&&this.instance._intersectsWith(this.instance.containerCache)&&a.contains(g.instance.element[0],this.instance.element[0])&&(f=!1),f})),f?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(){var b=a("body"),c=a(this).data("ui-draggable").options;b.css("cursor")&&(c._cursor=b.css("cursor")),b.css("cursor",c.cursor)},stop:function(){var b=a(this).data("ui-draggable").options;b._cursor&&a("body").css("cursor",b._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(){var b=a(this).data("ui-draggable");b.scrollParent[0]!==document&&"HTML"!==b.scrollParent[0].tagName&&(b.overflowOffset=b.scrollParent.offset())},drag:function(b){var c=a(this).data("ui-draggable"),d=c.options,e=!1;c.scrollParent[0]!==document&&"HTML"!==c.scrollParent[0].tagName?(d.axis&&"x"===d.axis||(c.overflowOffset.top+c.scrollParent[0].offsetHeight-b.pageY<d.scrollSensitivity?c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop+d.scrollSpeed:b.pageY-c.overflowOffset.top<d.scrollSensitivity&&(c.scrollParent[0].scrollTop=e=c.scrollParent[0].scrollTop-d.scrollSpeed)),d.axis&&"y"===d.axis||(c.overflowOffset.left+c.scrollParent[0].offsetWidth-b.pageX<d.scrollSensitivity?c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft+d.scrollSpeed:b.pageX-c.overflowOffset.left<d.scrollSensitivity&&(c.scrollParent[0].scrollLeft=e=c.scrollParent[0].scrollLeft-d.scrollSpeed))):(d.axis&&"x"===d.axis||(b.pageY-a(document).scrollTop()<d.scrollSensitivity?e=a(document).scrollTop(a(document).scrollTop()-d.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<d.scrollSensitivity&&(e=a(document).scrollTop(a(document).scrollTop()+d.scrollSpeed))),d.axis&&"y"===d.axis||(b.pageX-a(document).scrollLeft()<d.scrollSensitivity?e=a(document).scrollLeft(a(document).scrollLeft()-d.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<d.scrollSensitivity&&(e=a(document).scrollLeft(a(document).scrollLeft()+d.scrollSpeed)))),e!==!1&&a.ui.ddmanager&&!d.dropBehaviour&&a.ui.ddmanager.prepareOffsets(c,b)}}),a.ui.plugin.add("draggable","snap",{start:function(){var b=a(this).data("ui-draggable"),c=b.options;b.snapElements=[],a(c.snap.constructor!==String?c.snap.items||":data(ui-draggable)":c.snap).each(function(){var c=a(this),d=c.offset();this!==b.element[0]&&b.snapElements.push({item:this,width:c.outerWidth(),height:c.outerHeight(),top:d.top,left:d.left})})},drag:function(b,c){var d,e,f,g,h,i,j,k,l,m,n=a(this).data("ui-draggable"),o=n.options,p=o.snapTolerance,q=c.offset.left,r=q+n.helperProportions.width,s=c.offset.top,t=s+n.helperProportions.height;for(l=n.snapElements.length-1;l>=0;l--)h=n.snapElements[l].left,i=h+n.snapElements[l].width,j=n.snapElements[l].top,k=j+n.snapElements[l].height,r<h-p||q>i+p||t<j-p||s>k+p||!a.contains(n.snapElements[l].item.ownerDocument,n.snapElements[l].item)?(n.snapElements[l].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=!1):("inner"!==o.snapMode&&(d=Math.abs(j-t)<=p,e=Math.abs(k-s)<=p,f=Math.abs(h-r)<=p,g=Math.abs(i-q)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j-n.helperProportions.height,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i}).left-n.margins.left)),m=d||e||f||g,"outer"!==o.snapMode&&(d=Math.abs(j-s)<=p,e=Math.abs(k-t)<=p,f=Math.abs(h-q)<=p,g=Math.abs(i-r)<=p,d&&(c.position.top=n._convertPositionTo("relative",{top:j,left:0}).top-n.margins.top),e&&(c.position.top=n._convertPositionTo("relative",{top:k-n.helperProportions.height,left:0}).top-n.margins.top),f&&(c.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left),g&&(c.position.left=n._convertPositionTo("relative",{top:0,left:i-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[l].snapping&&(d||e||f||g||m)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,b,a.extend(n._uiHash(),{snapItem:n.snapElements[l].item})),n.snapElements[l].snapping=d||e||f||g||m)}}),a.ui.plugin.add("draggable","stack",{start:function(){var b,c=this.data("ui-draggable").options,d=a.makeArray(a(c.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});d.length&&(b=parseInt(a(d[0]).css("zIndex"),10)||0,a(d).each(function(c){a(this).css("zIndex",b+c)}),this.css("zIndex",b+d.length))}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("ui-draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("ui-draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})}(jQuery),function(a,b){function c(a){return parseInt(a,10)||0}function d(a){return!isNaN(parseInt(a,10))}a.widget("ui.resizable",a.ui.mouse,{version:"1.10.4",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var b,c,d,e,f,g=this,h=this.options;if(this.element.addClass("ui-resizable"),a.extend(this,{_aspectRatio:!!h.aspectRatio,aspectRatio:h.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:h.helper||h.ghost||h.animate?h.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(a("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=h.handles||(a(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),b=this.handles.split(","),this.handles={},c=0;c<b.length;c++)d=a.trim(b[c]),f="ui-resizable-"+d,e=a("<div class='ui-resizable-handle "+f+"'></div>"),e.css({zIndex:h.zIndex}),"se"===d&&e.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[d]=".ui-resizable-"+d,this.element.append(e);this._renderAxis=function(b){var c,d,e,f;b=b||this.element;for(c in this.handles)this.handles[c].constructor===String&&(this.handles[c]=a(this.handles[c],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(d=a(this.handles[c],this.element),
f=/sw|ne|nw|se|n|s/.test(c)?d.outerHeight():d.outerWidth(),e=["padding",/ne|nw|n/.test(c)?"Top":/se|sw|s/.test(c)?"Bottom":/^e$/.test(c)?"Right":"Left"].join(""),b.css(e,f),this._proportionallyResize()),a(this.handles[c]).length},this._renderAxis(this.element),this._handles=a(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){g.resizing||(this.className&&(e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),g.axis=e&&e[1]?e[1]:"se")}),h.autoHide&&(this._handles.hide(),a(this.element).addClass("ui-resizable-autohide").mouseenter(function(){h.disabled||(a(this).removeClass("ui-resizable-autohide"),g._handles.show())}).mouseleave(function(){h.disabled||g.resizing||(a(this).addClass("ui-resizable-autohide"),g._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var b,c=function(b){a(b).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(c(this.element),b=this.element,this.originalElement.css({position:b.css("position"),width:b.outerWidth(),height:b.outerHeight(),top:b.css("top"),left:b.css("left")}).insertAfter(b),b.remove()),this.originalElement.css("resize",this.originalResizeStyle),c(this.originalElement),this},_mouseCapture:function(b){var c,d,e=!1;for(c in this.handles)d=a(this.handles[c])[0],(d===b.target||a.contains(d,b.target))&&(e=!0);return!this.options.disabled&&e},_mouseStart:function(b){var d,e,f,g=this.options,h=this.element.position(),i=this.element;return this.resizing=!0,/absolute/.test(i.css("position"))?i.css({position:"absolute",top:i.css("top"),left:i.css("left")}):i.is(".ui-draggable")&&i.css({position:"absolute",top:h.top,left:h.left}),this._renderProxy(),d=c(this.helper.css("left")),e=c(this.helper.css("top")),g.containment&&(d+=a(g.containment).scrollLeft()||0,e+=a(g.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:d,top:e},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:i.width(),height:i.height()},this.originalSize=this._helper?{width:i.outerWidth(),height:i.outerHeight()}:{width:i.width(),height:i.height()},this.originalPosition={left:d,top:e},this.sizeDiff={width:i.outerWidth()-i.width(),height:i.outerHeight()-i.height()},this.originalMousePosition={left:b.pageX,top:b.pageY},this.aspectRatio="number"==typeof g.aspectRatio?g.aspectRatio:this.originalSize.width/this.originalSize.height||1,f=a(".ui-resizable-"+this.axis).css("cursor"),a("body").css("cursor","auto"===f?this.axis+"-resize":f),i.addClass("ui-resizable-resizing"),this._propagate("start",b),!0},_mouseDrag:function(b){var c,d=this.helper,e={},f=this.originalMousePosition,g=this.axis,h=this.position.top,i=this.position.left,j=this.size.width,k=this.size.height,l=b.pageX-f.left||0,m=b.pageY-f.top||0,n=this._change[g];return!!n&&(c=n.apply(this,[b,l,m]),this._updateVirtualBoundaries(b.shiftKey),(this._aspectRatio||b.shiftKey)&&(c=this._updateRatio(c,b)),c=this._respectSize(c,b),this._updateCache(c),this._propagate("resize",b),this.position.top!==h&&(e.top=this.position.top+"px"),this.position.left!==i&&(e.left=this.position.left+"px"),this.size.width!==j&&(e.width=this.size.width+"px"),this.size.height!==k&&(e.height=this.size.height+"px"),d.css(e),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),a.isEmptyObject(e)||this._trigger("resize",b,this.ui()),!1)},_mouseStop:function(b){this.resizing=!1;var c,d,e,f,g,h,i,j=this.options,k=this;return this._helper&&(c=this._proportionallyResizeElements,d=c.length&&/textarea/i.test(c[0].nodeName),e=d&&a.ui.hasScroll(c[0],"left")?0:k.sizeDiff.height,f=d?0:k.sizeDiff.width,g={width:k.helper.width()-f,height:k.helper.height()-e},h=parseInt(k.element.css("left"),10)+(k.position.left-k.originalPosition.left)||null,i=parseInt(k.element.css("top"),10)+(k.position.top-k.originalPosition.top)||null,j.animate||this.element.css(a.extend(g,{top:i,left:h})),k.helper.height(k.size.height),k.helper.width(k.size.width),this._helper&&!j.animate&&this._proportionallyResize()),a("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",b),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(a){var b,c,e,f,g,h=this.options;g={minWidth:d(h.minWidth)?h.minWidth:0,maxWidth:d(h.maxWidth)?h.maxWidth:1/0,minHeight:d(h.minHeight)?h.minHeight:0,maxHeight:d(h.maxHeight)?h.maxHeight:1/0},(this._aspectRatio||a)&&(b=g.minHeight*this.aspectRatio,e=g.minWidth/this.aspectRatio,c=g.maxHeight*this.aspectRatio,f=g.maxWidth/this.aspectRatio,b>g.minWidth&&(g.minWidth=b),e>g.minHeight&&(g.minHeight=e),c<g.maxWidth&&(g.maxWidth=c),f<g.maxHeight&&(g.maxHeight=f)),this._vBoundaries=g},_updateCache:function(a){this.offset=this.helper.offset(),d(a.left)&&(this.position.left=a.left),d(a.top)&&(this.position.top=a.top),d(a.height)&&(this.size.height=a.height),d(a.width)&&(this.size.width=a.width)},_updateRatio:function(a){var b=this.position,c=this.size,e=this.axis;return d(a.height)?a.width=a.height*this.aspectRatio:d(a.width)&&(a.height=a.width/this.aspectRatio),"sw"===e&&(a.left=b.left+(c.width-a.width),a.top=null),"nw"===e&&(a.top=b.top+(c.height-a.height),a.left=b.left+(c.width-a.width)),a},_respectSize:function(a){var b=this._vBoundaries,c=this.axis,e=d(a.width)&&b.maxWidth&&b.maxWidth<a.width,f=d(a.height)&&b.maxHeight&&b.maxHeight<a.height,g=d(a.width)&&b.minWidth&&b.minWidth>a.width,h=d(a.height)&&b.minHeight&&b.minHeight>a.height,i=this.originalPosition.left+this.originalSize.width,j=this.position.top+this.size.height,k=/sw|nw|w/.test(c),l=/nw|ne|n/.test(c);return g&&(a.width=b.minWidth),h&&(a.height=b.minHeight),e&&(a.width=b.maxWidth),f&&(a.height=b.maxHeight),g&&k&&(a.left=i-b.minWidth),e&&k&&(a.left=i-b.maxWidth),h&&l&&(a.top=j-b.minHeight),f&&l&&(a.top=j-b.maxHeight),a.width||a.height||a.left||!a.top?a.width||a.height||a.top||!a.left||(a.left=null):a.top=null,a},_proportionallyResize:function(){if(this._proportionallyResizeElements.length){var a,b,c,d,e,f=this.helper||this.element;for(a=0;a<this._proportionallyResizeElements.length;a++){if(e=this._proportionallyResizeElements[a],!this.borderDif)for(this.borderDif=[],c=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],d=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")],b=0;b<c.length;b++)this.borderDif[b]=(parseInt(c[b],10)||0)+(parseInt(d[b],10)||0);e.css({height:f.height()-this.borderDif[0]-this.borderDif[2]||0,width:f.width()-this.borderDif[1]-this.borderDif[3]||0})}}},_renderProxy:function(){var b=this.element,c=this.options;this.elementOffset=b.offset(),this._helper?(this.helper=this.helper||a("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++c.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(a,b){return{width:this.originalSize.width+b}},w:function(a,b){var c=this.originalSize,d=this.originalPosition;return{left:d.left+b,width:c.width-b}},n:function(a,b,c){var d=this.originalSize,e=this.originalPosition;return{top:e.top+c,height:d.height-c}},s:function(a,b,c){return{height:this.originalSize.height+c}},se:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},sw:function(b,c,d){return a.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[b,c,d]))},ne:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[b,c,d]))},nw:function(b,c,d){return a.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[b,c,d]))}},_propagate:function(b,c){a.ui.plugin.call(this,b,[c,this.ui()]),"resize"!==b&&this._trigger(b,c,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),a.ui.plugin.add("resizable","animate",{stop:function(b){var c=a(this).data("ui-resizable"),d=c.options,e=c._proportionallyResizeElements,f=e.length&&/textarea/i.test(e[0].nodeName),g=f&&a.ui.hasScroll(e[0],"left")?0:c.sizeDiff.height,h=f?0:c.sizeDiff.width,i={width:c.size.width-h,height:c.size.height-g},j=parseInt(c.element.css("left"),10)+(c.position.left-c.originalPosition.left)||null,k=parseInt(c.element.css("top"),10)+(c.position.top-c.originalPosition.top)||null;c.element.animate(a.extend(i,k&&j?{top:k,left:j}:{}),{duration:d.animateDuration,easing:d.animateEasing,step:function(){var d={width:parseInt(c.element.css("width"),10),height:parseInt(c.element.css("height"),10),top:parseInt(c.element.css("top"),10),left:parseInt(c.element.css("left"),10)};e&&e.length&&a(e[0]).css({width:d.width,height:d.height}),c._updateCache(d),c._propagate("resize",b)}})}}),a.ui.plugin.add("resizable","containment",{start:function(){var b,d,e,f,g,h,i,j=a(this).data("ui-resizable"),k=j.options,l=j.element,m=k.containment,n=m instanceof a?m.get(0):/parent/.test(m)?l.parent().get(0):m;n&&(j.containerElement=a(n),/document/.test(m)||m===document?(j.containerOffset={left:0,top:0},j.containerPosition={left:0,top:0},j.parentData={element:a(document),left:0,top:0,width:a(document).width(),height:a(document).height()||document.body.parentNode.scrollHeight}):(b=a(n),d=[],a(["Top","Right","Left","Bottom"]).each(function(a,e){d[a]=c(b.css("padding"+e))}),j.containerOffset=b.offset(),j.containerPosition=b.position(),j.containerSize={height:b.innerHeight()-d[3],width:b.innerWidth()-d[1]},e=j.containerOffset,f=j.containerSize.height,g=j.containerSize.width,h=a.ui.hasScroll(n,"left")?n.scrollWidth:g,i=a.ui.hasScroll(n)?n.scrollHeight:f,j.parentData={element:n,left:e.left,top:e.top,width:h,height:i}))},resize:function(b){var c,d,e,f,g=a(this).data("ui-resizable"),h=g.options,i=g.containerOffset,j=g.position,k=g._aspectRatio||b.shiftKey,l={top:0,left:0},m=g.containerElement;m[0]!==document&&/static/.test(m.css("position"))&&(l=i),j.left<(g._helper?i.left:0)&&(g.size.width=g.size.width+(g._helper?g.position.left-i.left:g.position.left-l.left),k&&(g.size.height=g.size.width/g.aspectRatio),g.position.left=h.helper?i.left:0),j.top<(g._helper?i.top:0)&&(g.size.height=g.size.height+(g._helper?g.position.top-i.top:g.position.top),k&&(g.size.width=g.size.height*g.aspectRatio),g.position.top=g._helper?i.top:0),g.offset.left=g.parentData.left+g.position.left,g.offset.top=g.parentData.top+g.position.top,c=Math.abs((g._helper?g.offset.left-l.left:g.offset.left-l.left)+g.sizeDiff.width),d=Math.abs((g._helper?g.offset.top-l.top:g.offset.top-i.top)+g.sizeDiff.height),e=g.containerElement.get(0)===g.element.parent().get(0),f=/relative|absolute/.test(g.containerElement.css("position")),e&&f&&(c-=Math.abs(g.parentData.left)),c+g.size.width>=g.parentData.width&&(g.size.width=g.parentData.width-c,k&&(g.size.height=g.size.width/g.aspectRatio)),d+g.size.height>=g.parentData.height&&(g.size.height=g.parentData.height-d,k&&(g.size.width=g.size.height*g.aspectRatio))},stop:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.containerOffset,e=b.containerPosition,f=b.containerElement,g=a(b.helper),h=g.offset(),i=g.outerWidth()-b.sizeDiff.width,j=g.outerHeight()-b.sizeDiff.height;b._helper&&!c.animate&&/relative/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j}),b._helper&&!c.animate&&/static/.test(f.css("position"))&&a(this).css({left:h.left-e.left-d.left,width:i,height:j})}}),a.ui.plugin.add("resizable","alsoResize",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=function(b){a(b).each(function(){var b=a(this);b.data("ui-resizable-alsoresize",{width:parseInt(b.width(),10),height:parseInt(b.height(),10),left:parseInt(b.css("left"),10),top:parseInt(b.css("top"),10)})})};"object"!=typeof c.alsoResize||c.alsoResize.parentNode?d(c.alsoResize):c.alsoResize.length?(c.alsoResize=c.alsoResize[0],d(c.alsoResize)):a.each(c.alsoResize,function(a){d(a)})},resize:function(b,c){var d=a(this).data("ui-resizable"),e=d.options,f=d.originalSize,g=d.originalPosition,h={height:d.size.height-f.height||0,width:d.size.width-f.width||0,top:d.position.top-g.top||0,left:d.position.left-g.left||0},i=function(b,d){a(b).each(function(){var b=a(this),e=a(this).data("ui-resizable-alsoresize"),f={},g=d&&d.length?d:b.parents(c.originalElement[0]).length?["width","height"]:["width","height","top","left"];a.each(g,function(a,b){var c=(e[b]||0)+(h[b]||0);c&&c>=0&&(f[b]=c||null)}),b.css(f)})};"object"!=typeof e.alsoResize||e.alsoResize.nodeType?i(e.alsoResize):a.each(e.alsoResize,function(a,b){i(a,b)})},stop:function(){a(this).removeData("resizable-alsoresize")}}),a.ui.plugin.add("resizable","ghost",{start:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size;b.ghost=b.originalElement.clone(),b.ghost.css({opacity:.25,display:"block",position:"relative",height:d.height,width:d.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof c.ghost?c.ghost:""),b.ghost.appendTo(b.helper)},resize:function(){var b=a(this).data("ui-resizable");b.ghost&&b.ghost.css({position:"relative",height:b.size.height,width:b.size.width})},stop:function(){var b=a(this).data("ui-resizable");b.ghost&&b.helper&&b.helper.get(0).removeChild(b.ghost.get(0))}}),a.ui.plugin.add("resizable","grid",{resize:function(){var b=a(this).data("ui-resizable"),c=b.options,d=b.size,e=b.originalSize,f=b.originalPosition,g=b.axis,h="number"==typeof c.grid?[c.grid,c.grid]:c.grid,i=h[0]||1,j=h[1]||1,k=Math.round((d.width-e.width)/i)*i,l=Math.round((d.height-e.height)/j)*j,m=e.width+k,n=e.height+l,o=c.maxWidth&&c.maxWidth<m,p=c.maxHeight&&c.maxHeight<n,q=c.minWidth&&c.minWidth>m,r=c.minHeight&&c.minHeight>n;c.grid=h,q&&(m+=i),r&&(n+=j),o&&(m-=i),p&&(n-=j),/^(se|s|e)$/.test(g)?(b.size.width=m,b.size.height=n):/^(ne)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.top=f.top-l):/^(sw)$/.test(g)?(b.size.width=m,b.size.height=n,b.position.left=f.left-k):(n-j>0?(b.size.height=n,b.position.top=f.top-l):(b.size.height=j,b.position.top=f.top+e.height-j),m-i>0?(b.size.width=m,b.position.left=f.left-k):(b.size.width=i,b.position.left=f.left+e.width-i))}})}(jQuery),function(a){function b(a,b){if(!(a.originalEvent.touches.length>1)){a.preventDefault();var c=a.originalEvent.changedTouches[0],d=document.createEvent("MouseEvents");d.initMouseEvent(b,!0,!0,window,1,c.screenX,c.screenY,c.clientX,c.clientY,!1,!1,!1,!1,0,null),a.target.dispatchEvent(d)}}if(a.support.touch="ontouchend"in document,a.support.touch){var c,d=a.ui.mouse.prototype,e=d._mouseInit,f=d._mouseDestroy;d._touchStart=function(a){var d=this;!c&&d._mouseCapture(a.originalEvent.changedTouches[0])&&(c=!0,d._touchMoved=!1,b(a,"mouseover"),b(a,"mousemove"),b(a,"mousedown"))},d._touchMove=function(a){c&&(this._touchMoved=!0,b(a,"mousemove"))},d._touchEnd=function(a){c&&(b(a,"mouseup"),b(a,"mouseout"),this._touchMoved||b(a,"click"),c=!1)},d._mouseInit=function(){var b=this;b.element.bind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),e.call(b)},d._mouseDestroy=function(){var b=this;b.element.unbind({touchstart:a.proxy(b,"_touchStart"),touchmove:a.proxy(b,"_touchMove"),touchend:a.proxy(b,"_touchEnd")}),f.call(b)}}}(jQuery),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(a){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;n<o;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0!==a.cookie(b)&&(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(a){a.Jcrop=function(b,c){function d(a){return Math.round(a)+"px"}function e(a){return J.baseClass+"-"+a}function f(){return a.fx.step.hasOwnProperty("backgroundColor")}function g(b){var c=a(b).offset();return[c.left,c.top]}function h(a){return[a.pageX-I[0],a.pageY-I[1]]}function i(b){"object"!=typeof b&&(b={}),J=a.extend(J,b),a.each(["onChange","onSelect","onRelease","onDblClick"],function(a,b){"function"!=typeof J[b]&&(J[b]=function(){})})}function j(a,b,c){if(I=g(R),oa.setCursor("move"===a?a:a+"-resize"),"move"===a)return oa.activateHandlers(l(b),q,c);var d=la.getFixed(),e=m(a),f=la.getCorner(m(e));la.setPressed(la.getCorner(e)),la.setCurrent(f),oa.activateHandlers(k(a,d),q,c)}function k(a,b){return function(c){if(J.aspectRatio)switch(a){case"e":c[1]=b.y+1;break;case"w":c[1]=b.y+1;break;case"n":c[0]=b.x+1;break;case"s":c[0]=b.x+1}else switch(a){case"e":c[1]=b.y2;break;case"w":c[1]=b.y2;break;case"n":c[0]=b.x2;break;case"s":c[0]=b.x2}la.setCurrent(c),na.update()}}function l(a){var b=a;return pa.watchKeys(),function(a){la.moveOffset([a[0]-b[0],a[1]-b[1]]),b=a,na.update()}}function m(a){switch(a){case"n":return"sw";case"s":return"nw";case"e":return"nw";case"w":return"ne";case"ne":return"sw";case"nw":return"se";case"se":return"nw";case"sw":return"ne"}}function n(a){return function(b){return!J.disabled&&(!("move"===a&&!J.allowMove)&&(I=g(R),da=!0,j(a,h(b)),b.stopPropagation(),b.preventDefault(),!1))}}function o(a,b,c){var d=a.width(),e=a.height();d>b&&b>0&&(d=b,e=b/a.width()*a.height()),e>c&&c>0&&(e=c,d=c/a.height()*a.width()),ba=a.width()/d,ca=a.height()/e,a.width(d).height(e)}function p(a){return{x:a.x*ba,y:a.y*ca,x2:a.x2*ba,y2:a.y2*ca,w:a.w*ba,h:a.h*ca}}function q(a){var b=la.getFixed();b.w>J.minSelect[0]&&b.h>J.minSelect[1]?(na.enableHandles(),na.done()):na.release(),oa.setCursor(J.allowSelect?"crosshair":"default")}function r(a){if(!J.disabled&&J.allowSelect){da=!0,I=g(R),na.disableHandles(),oa.setCursor("crosshair");var b=h(a);return la.setPressed(b),na.update(),oa.activateHandlers(s,q,"touch"===a.type.substring(0,5)),pa.watchKeys(),a.stopPropagation(),a.preventDefault(),!1}}function s(a){la.setCurrent(a),na.update()}function t(){var b=a("<div></div>").addClass(e("tracker"));return L&&b.css({opacity:0,backgroundColor:"white"}),b}function u(a){U.removeClass().addClass(e("holder")).addClass(a)}function v(a,b){function c(){window.setTimeout(s,l)}var d=a[0]/ba,e=a[1]/ca,f=a[2]/ba,g=a[3]/ca;if(!ea){var h=la.flipCoords(d,e,f,g),i=la.getFixed(),j=[i.x,i.y,i.x2,i.y2],k=j,l=J.animationDelay,m=h[0]-j[0],n=h[1]-j[1],o=h[2]-j[2],p=h[3]-j[3],q=0,r=J.swingSpeed;d=k[0],e=k[1],f=k[2],g=k[3],na.animMode(!0);var s=function(){return function(){q+=(100-q)/r,k[0]=Math.round(d+q/100*m),k[1]=Math.round(e+q/100*n),k[2]=Math.round(f+q/100*o),k[3]=Math.round(g+q/100*p),q>=99.8&&(q=100),q<100?(x(k),c()):(na.done(),na.animMode(!1),"function"==typeof b&&b.call(qa))}}();c()}}function w(a){x([a[0]/ba,a[1]/ca,a[2]/ba,a[3]/ca]),J.onSelect.call(qa,p(la.getFixed())),na.enableHandles()}function x(a){la.setPressed([a[0],a[1]]),la.setCurrent([a[2],a[3]]),na.update()}function y(){return p(la.getFixed())}function z(){return la.getFixed()}function A(a){i(a),H()}function B(){J.disabled=!0,na.disableHandles(),na.setCursor("default"),oa.setCursor("default")}function C(){J.disabled=!1,H()}function D(){na.done(),oa.activateHandlers(null,null)}function E(){U.remove(),O.show(),O.css("visibility","visible"),a(b).removeData("Jcrop")}function F(a,b){na.release(),B();var c=new Image;c.onload=function(){var d=c.width,e=c.height,f=J.boxWidth,g=J.boxHeight;R.width(d).height(e),R.attr("src",a),V.attr("src",a),o(R,f,g),S=R.width(),T=R.height(),V.width(S).height(T),ha.width(S+2*ga).height(T+2*ga),U.width(S).height(T),ma.resize(S,T),C(),"function"==typeof b&&b.call(qa)},c.src=a}function G(a,b,c){var d=b||J.bgColor;J.bgFade&&f()&&J.fadeTime&&!c?a.animate({backgroundColor:d},{queue:!1,duration:J.fadeTime}):a.css("backgroundColor",d)}function H(a){J.allowResize?a?na.enableOnly():na.enableHandles():na.disableHandles(),oa.setCursor(J.allowSelect?"crosshair":"default"),na.setCursor(J.allowMove?"move":"default"),J.hasOwnProperty("trueSize")&&(ba=J.trueSize[0]/S,ca=J.trueSize[1]/T),J.hasOwnProperty("setSelect")&&(w(J.setSelect),na.done(),delete J.setSelect),ma.refresh(),J.bgColor!=ia&&(G(J.shade?ma.getShades():U,J.shade?J.shadeColor||J.bgColor:J.bgColor),ia=J.bgColor),ja!=J.bgOpacity&&(ja=J.bgOpacity,J.shade?ma.refresh():na.setBgOpacity(ja)),Z=J.maxSize[0]||0,$=J.maxSize[1]||0,_=J.minSize[0]||0,aa=J.minSize[1]||0,J.hasOwnProperty("outerImage")&&(R.attr("src",J.outerImage),delete J.outerImage),na.refresh()}var I,J=a.extend({},a.Jcrop.defaults),K=navigator.userAgent.toLowerCase(),L=/msie/.test(K),M=/msie [1-6]\./.test(K);"object"!=typeof b&&(b=a(b)[0]),"object"!=typeof c&&(c={}),i(c);var N={border:"none",visibility:"visible",margin:0,padding:0,position:"absolute",top:0,left:0},O=a(b),P=!0;if("IMG"==b.tagName){if(0!=O[0].width&&0!=O[0].height)O.width(O[0].width),O.height(O[0].height);else{var Q=new Image;Q.src=O[0].src,O.width(Q.width),O.height(Q.height)}var R=O.clone().removeAttr("id").css(N).show();R.width(O.width()),R.height(O.height()),O.after(R).hide()}else R=O.css(N).show(),P=!1,null===J.shade&&(J.shade=!0);o(R,J.boxWidth,J.boxHeight);var S=R.width(),T=R.height(),U=a("<div />").width(S).height(T).addClass(e("holder")).css({position:"relative",backgroundColor:J.bgColor}).insertAfter(O).append(R);J.addClass&&U.addClass(J.addClass);var V=a("<div />"),W=a("<div />").width("100%").height("100%").css({zIndex:310,position:"absolute",overflow:"hidden"}),X=a("<div />").width("100%").height("100%").css("zIndex",320),Y=a("<div />").css({position:"absolute",zIndex:600}).dblclick(function(){var a=la.getFixed();J.onDblClick.call(qa,a)}).insertBefore(R).append(W,X);P&&(V=a("<img />").attr("src",R.attr("src")).css(N).width(S).height(T),W.append(V)),M&&Y.css({overflowY:"hidden"});var Z,$,_,aa,ba,ca,da,ea,fa,ga=J.boundary,ha=t().width(S+2*ga).height(T+2*ga).css({position:"absolute",top:d(-ga),left:d(-ga),zIndex:290}).mousedown(r),ia=J.bgColor,ja=J.bgOpacity;I=g(R);var ka=function(){function a(){var a,b={},c=["touchstart","touchmove","touchend"],d=document.createElement("div");try{for(a=0;a<c.length;a++){var e=c[a];e="on"+e;var f=e in d;f||(d.setAttribute(e,"return;"),f="function"==typeof d[e]),b[c[a]]=f}return b.touchstart&&b.touchend&&b.touchmove}catch(a){return!1}}function b(){return J.touchSupport===!0||J.touchSupport===!1?J.touchSupport:a()}return{createDragger:function(a){return function(b){return!J.disabled&&(!("move"===a&&!J.allowMove)&&(I=g(R),da=!0,j(a,h(ka.cfilter(b)),!0),b.stopPropagation(),b.preventDefault(),!1))}},newSelection:function(a){return r(ka.cfilter(a))},cfilter:function(a){return a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY,a},isSupported:a,support:b()}}(),la=function(){function a(a){a=g(a),o=m=a[0],p=n=a[1]}function b(a){a=g(a),k=a[0]-o,l=a[1]-p,o=a[0],p=a[1]}function c(){return[k,l]}function d(a){var b=a[0],c=a[1];0>m+b&&(b-=b+m),0>n+c&&(c-=c+n),T<p+c&&(c+=T-(p+c)),S<o+b&&(b+=S-(o+b)),m+=b,o+=b,n+=c,p+=c}function e(a){var b=f();switch(a){case"ne":return[b.x2,b.y];case"nw":return[b.x,b.y];case"se":return[b.x2,b.y2];case"sw":return[b.x,b.y2]}}function f(){if(!J.aspectRatio)return i();var a,b,c,d,e=J.aspectRatio,f=J.minSize[0]/ba,g=J.maxSize[0]/ba,k=J.maxSize[1]/ca,l=o-m,q=p-n,r=Math.abs(l),s=Math.abs(q),t=r/s;return 0===g&&(g=10*S),0===k&&(k=10*T),t<e?(b=p,c=s*e,a=l<0?m-c:c+m,a<0?(a=0,d=Math.abs((a-m)/e),b=q<0?n-d:d+n):a>S&&(a=S,d=Math.abs((a-m)/e),b=q<0?n-d:d+n)):(a=o,d=r/e,b=q<0?n-d:n+d,b<0?(b=0,c=Math.abs((b-n)*e),a=l<0?m-c:c+m):b>T&&(b=T,c=Math.abs(b-n)*e,a=l<0?m-c:c+m)),a>m?(a-m<f?a=m+f:a-m>g&&(a=m+g),b=b>n?n+(a-m)/e:n-(a-m)/e):a<m&&(m-a<f?a=m-f:m-a>g&&(a=m-g),b=b>n?n+(m-a)/e:n-(m-a)/e),a<0?(m-=a,a=0):a>S&&(m-=a-S,a=S),b<0?(n-=b,b=0):b>T&&(n-=b-T,b=T),j(h(m,n,a,b))}function g(a){return a[0]<0&&(a[0]=0),a[1]<0&&(a[1]=0),a[0]>S&&(a[0]=S),a[1]>T&&(a[1]=T),[Math.round(a[0]),Math.round(a[1])]}function h(a,b,c,d){var e=a,f=c,g=b,h=d;return c<a&&(e=c,f=a),d<b&&(g=d,h=b),[e,g,f,h]}function i(){var a,b=o-m,c=p-n;return Z&&Math.abs(b)>Z&&(o=b>0?m+Z:m-Z),$&&Math.abs(c)>$&&(p=c>0?n+$:n-$),aa/ca&&Math.abs(c)<aa/ca&&(p=c>0?n+aa/ca:n-aa/ca),_/ba&&Math.abs(b)<_/ba&&(o=b>0?m+_/ba:m-_/ba),m<0&&(o-=m,m-=m),n<0&&(p-=n,n-=n),o<0&&(m-=o,o-=o),p<0&&(n-=p,p-=p),o>S&&(a=o-S,m-=a,o-=a),p>T&&(a=p-T,n-=a,p-=a),m>S&&(a=m-T,p-=a,n-=a),n>T&&(a=n-T,p-=a,n-=a),j(h(m,n,o,p))}function j(a){return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]}}var k,l,m=0,n=0,o=0,p=0;return{flipCoords:h,setPressed:a,setCurrent:b,getOffset:c,moveOffset:d,getCorner:e,getFixed:f}}(),ma=function(){function b(a,b){o.left.css({height:d(b)}),o.right.css({height:d(b)})}function c(){return e(la.getFixed())}function e(a){o.top.css({left:d(a.x),width:d(a.w),height:d(a.y)}),o.bottom.css({top:d(a.y2),left:d(a.x),width:d(a.w),height:d(T-a.y2)}),o.right.css({left:d(a.x2),width:d(S-a.x2)}),o.left.css({width:d(a.x)})}function f(){return a("<div />").css({position:"absolute",backgroundColor:J.shadeColor||J.bgColor}).appendTo(n)}function g(){m||(m=!0,n.insertBefore(R),c(),na.setBgOpacity(1,0,1),V.hide(),h(J.shadeColor||J.bgColor,1),na.isAwake()?j(J.bgOpacity,1):j(1,1))}function h(a,b){G(l(),a,b)}function i(){m&&(n.remove(),V.show(),m=!1,na.isAwake()?na.setBgOpacity(J.bgOpacity,1,1):(na.setBgOpacity(1,1,1),na.disableHandles()),G(U,0,1))}function j(a,b){m&&(J.bgFade&&!b?n.animate({opacity:1-a},{queue:!1,duration:J.fadeTime}):n.css({opacity:1-a}))}function k(){J.shade?g():i(),na.isAwake()&&j(J.bgOpacity)}function l(){return n.children()}var m=!1,n=a("<div />").css({position:"absolute",zIndex:240,opacity:0}),o={top:f(),left:f().height(T),right:f().height(T),bottom:f()};return{update:c,updateRaw:e,getShades:l,setBgColor:h,enable:g,disable:i,resize:b,refresh:k,opacity:j}}(),na=function(){function b(b){var c=a("<div />").css({position:"absolute",opacity:J.borderOpacity}).addClass(e(b));return W.append(c),c}function c(b,c){var d=a("<div />").mousedown(n(b)).css({cursor:b+"-resize",position:"absolute",zIndex:c}).addClass("ord-"+b);return ka.support&&d.bind("touchstart.jcrop",ka.createDragger(b)),X.append(d),d}function f(a){var b=J.handleSize,d=c(a,B++).css({opacity:J.handleOpacity}).addClass(e("handle"));return b&&d.width(b).height(b),d}function g(a){return c(a,B++).addClass("jcrop-dragbar")}function h(a){var b;for(b=0;b<a.length;b++)E[a[b]]=g(a[b])}function i(a){var c,d;for(d=0;d<a.length;d++){switch(a[d]){case"n":c="hline";break;case"s":c="hline bottom";break;case"e":c="vline right";break;case"w":c="vline"}C[a[d]]=b(c)}}function j(a){var b;for(b=0;b<a.length;b++)D[a[b]]=f(a[b])}function k(a,b){J.shade||V.css({top:d(-b),left:d(-a)}),Y.css({top:d(b),left:d(a)})}function l(a,b){Y.width(Math.round(a)).height(Math.round(b))}function m(){var a=la.getFixed();la.setPressed([a.x,a.y]),la.setCurrent([a.x2,a.y2]),o()}function o(a){if(A)return q(a)}function q(a){var b=la.getFixed();l(b.w,b.h),k(b.x,b.y),J.shade&&ma.updateRaw(b),A||s(),a?J.onSelect.call(qa,p(b)):J.onChange.call(qa,p(b))}function r(a,b,c){(A||b)&&(J.bgFade&&!c?R.animate({opacity:a},{queue:!1,duration:J.fadeTime}):R.css("opacity",a))}function s(){Y.show(),J.shade?ma.opacity(ja):r(ja,!0),A=!0}function u(){x(),Y.hide(),J.shade?ma.opacity(1):r(1),A=!1,J.onRelease.call(qa)}function v(){F&&X.show()}function w(){if(F=!0,J.allowResize)return X.show(),!0}function x(){F=!1,X.hide()}function y(a){a?(ea=!0,x()):(ea=!1,w())}function z(){y(!1),m()}var A,B=370,C={},D={},E={},F=!1;J.dragEdges&&a.isArray(J.createDragbars)&&h(J.createDragbars),a.isArray(J.createHandles)&&j(J.createHandles),J.drawBorders&&a.isArray(J.createBorders)&&i(J.createBorders),a(document).bind("touchstart.jcrop-ios",function(b){a(b.currentTarget).hasClass("jcrop-tracker")&&b.stopPropagation()});var G=t().mousedown(n("move")).css({cursor:"move",position:"absolute",zIndex:360});return ka.support&&G.bind("touchstart.jcrop",ka.createDragger("move")),W.append(G),x(),{updateVisible:o,update:q,release:u,refresh:m,isAwake:function(){return A},setCursor:function(a){G.css("cursor",a)},enableHandles:w,enableOnly:function(){F=!0},showHandles:v,disableHandles:x,animMode:y,setBgOpacity:r,done:z}}(),oa=function(){function b(b){ha.css({zIndex:450}),b?a(document).bind("touchmove.jcrop",g).bind("touchend.jcrop",i):m&&a(document).bind("mousemove.jcrop",d).bind("mouseup.jcrop",e)}function c(){ha.css({zIndex:290}),a(document).unbind(".jcrop")}function d(a){return k(h(a)),!1}function e(a){return a.preventDefault(),a.stopPropagation(),da&&(da=!1,l(h(a)),na.isAwake()&&J.onSelect.call(qa,p(la.getFixed())),c(),k=function(){},l=function(){}),!1}function f(a,c,d){return da=!0,k=a,l=c,b(d),!1}function g(a){return k(h(ka.cfilter(a))),!1}function i(a){return e(ka.cfilter(a))}function j(a){ha.css("cursor",a)}var k=function(){},l=function(){},m=J.trackDocument;return m||ha.mousemove(d).mouseup(e).mouseout(e),R.before(ha),{activateHandlers:f,setCursor:j}}(),pa=function(){function b(){J.keySupport&&(f.show(),f.focus())}function c(a){f.hide()}function d(a,b,c){J.allowMove&&(la.moveOffset([b,c]),na.updateVisible(!0)),a.preventDefault(),a.stopPropagation()}function e(a){if(a.ctrlKey||a.metaKey)return!0;fa=!!a.shiftKey;var b=fa?10:1;switch(a.keyCode){case 37:d(a,-b,0);break;case 39:d(a,b,0);break;case 38:d(a,0,-b);break;case 40:d(a,0,b);break;case 27:J.allowSelect&&na.release();break;case 9:return!0}return!1}var f=a('<input type="radio" />').css({position:"fixed",left:"-120px",width:"12px"}).addClass("jcrop-keymgr"),g=a("<div />").css({position:"absolute",overflow:"hidden"}).append(f);return J.keySupport&&(f.keydown(e).blur(c),M||!J.fixedSupport?(f.css({position:"absolute",left:"-20px"}),g.append(f).insertBefore(R)):f.insertBefore(R)),{watchKeys:b}}();ka.support&&ha.bind("touchstart.jcrop",ka.newSelection),X.hide(),H(!0);var qa={setImage:F,animateTo:v,setSelect:w,setOptions:A,tellSelect:y,tellScaled:z,setClass:u,disable:B,enable:C,cancel:D,release:na.release,destroy:E,focus:pa.watchKeys,getBounds:function(){return[S*ba,T*ca]},getWidgetSize:function(){return[S,T]},getScaleFactor:function(){return[ba,ca]},getOptions:function(){return J},ui:{holder:U,selection:Y}};return L&&U.bind("selectstart",function(){return!1}),O.data("Jcrop",qa),qa},a.fn.Jcrop=function(b,c){var d;return this.each(function(){if(a(this).data("Jcrop")){if("api"===b)return a(this).data("Jcrop");a(this).data("Jcrop").setOptions(b)}else"IMG"==this.tagName?a.Jcrop.Loader(this,function(){a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d)}):(a(this).css({display:"block",visibility:"hidden"}),d=a.Jcrop(this,b),a.isFunction(c)&&c.call(d))}),this},a.Jcrop.Loader=function(b,c,d){function e(){g.complete?(f.unbind(".jcloader"),a.isFunction(c)&&c.call(g)):window.setTimeout(e,50)}var f=a(b),g=f[0];f.bind("load.jcloader",e).bind("error.jcloader",function(b){f.unbind(".jcloader"),a.isFunction(d)&&d.call(g)}),g.complete&&a.isFunction(c)&&(f.unbind(".jcloader"),c.call(g))},a.Jcrop.defaults={allowSelect:!0,allowMove:!0,allowResize:!0,trackDocument:!0,
baseClass:"jcrop",addClass:null,bgColor:"black",bgOpacity:.6,bgFade:!1,borderOpacity:.4,handleOpacity:.5,handleSize:null,aspectRatio:0,keySupport:!0,createHandles:["n","s","e","w","nw","ne","se","sw"],createDragbars:["n","s","e","w"],createBorders:["n","s","e","w"],drawBorders:!0,dragEdges:!0,fixedSupport:!0,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}}}(jQuery),!function(a,b){"undefined"!=typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd?define(b):this[a]=b()}("bowser",function(){function a(a){function c(b){var c=a.match(b);return c&&c.length>1&&c[1]||""}function d(b){var c=a.match(b);return c&&c.length>1&&c[2]||""}var e,f=c(/(ipod|iphone|ipad)/i).toLowerCase(),g=/like android/i.test(a),h=!g&&/android/i.test(a),i=/CrOS/.test(a),j=c(/edge\/(\d+(\.\d+)?)/i),k=c(/version\/(\d+(\.\d+)?)/i),l=/tablet/i.test(a),m=!l&&/[^-]mobi/i.test(a);/opera|opr/i.test(a)?e={name:"Opera",opera:b,version:k||c(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(a)?e={name:"Yandex Browser",yandexbrowser:b,version:k||c(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(a)?(e={name:"Windows Phone",windowsphone:b},j?(e.msedge=b,e.version=j):(e.msie=b,e.version=c(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(a)?e={name:"Internet Explorer",msie:b,version:c(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:i?e={name:"Chrome",chromeBook:b,chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(a)?e={name:"Microsoft Edge",msedge:b,version:j}:/chrome|crios|crmo/i.test(a)?e={name:"Chrome",chrome:b,version:c(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:f?(e={name:"iphone"==f?"iPhone":"ipad"==f?"iPad":"iPod"},k&&(e.version=k)):/sailfish/i.test(a)?e={name:"Sailfish",sailfish:b,version:c(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(a)?e={name:"SeaMonkey",seamonkey:b,version:c(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(a)?(e={name:"Firefox",firefox:b,version:c(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(a)&&(e.firefoxos=b)):/silk/i.test(a)?e={name:"Amazon Silk",silk:b,version:c(/silk\/(\d+(\.\d+)?)/i)}:h?e={name:"Android",version:k}:/phantom/i.test(a)?e={name:"PhantomJS",phantom:b,version:c(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(a)||/rim\stablet/i.test(a)?e={name:"BlackBerry",blackberry:b,version:k||c(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(a)?(e={name:"WebOS",webos:b,version:k||c(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(a)&&(e.touchpad=b)):e=/bada/i.test(a)?{name:"Bada",bada:b,version:c(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(a)?{name:"Tizen",tizen:b,version:c(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||k}:/safari/i.test(a)?{name:"Safari",safari:b,version:k}:{name:c(/^(.*)\/(.*) /),version:d(/^(.*)\/(.*) /)},!e.msedge&&/(apple)?webkit/i.test(a)?(e.name=e.name||"Webkit",e.webkit=b,!e.version&&k&&(e.version=k)):!e.opera&&/gecko\//i.test(a)&&(e.name=e.name||"Gecko",e.gecko=b,e.version=e.version||c(/gecko\/(\d+(\.\d+)?)/i)),e.msedge||!h&&!e.silk?f&&(e[f]=b,e.ios=b):e.android=b;var n="";e.windowsphone?n=c(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):f?(n=c(/os (\d+([_\s]\d+)*) like mac os x/i),n=n.replace(/[_\s]/g,".")):h?n=c(/android[ \/-](\d+(\.\d+)*)/i):e.webos?n=c(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):e.blackberry?n=c(/rim\stablet\sos\s(\d+(\.\d+)*)/i):e.bada?n=c(/bada\/(\d+(\.\d+)*)/i):e.tizen&&(n=c(/tizen[\/\s](\d+(\.\d+)*)/i)),n&&(e.osversion=n);var o=n.split(".")[0];return l||"ipad"==f||h&&(3==o||4==o&&!m)||e.silk?e.tablet=b:(m||"iphone"==f||"ipod"==f||h||e.blackberry||e.webos||e.bada)&&(e.mobile=b),e.msedge||e.msie&&e.version>=10||e.yandexbrowser&&e.version>=15||e.chrome&&e.version>=20||e.firefox&&e.version>=20||e.safari&&e.version>=6||e.opera&&e.version>=10||e.ios&&e.osversion&&e.osversion.split(".")[0]>=6||e.blackberry&&e.version>=10.1?e.a=b:e.msie&&e.version<10||e.chrome&&e.version<20||e.firefox&&e.version<20||e.safari&&e.version<6||e.opera&&e.version<10||e.ios&&e.osversion&&e.osversion.split(".")[0]<6?e.c=b:e.x=b,e}var b=!0,c=a("undefined"!=typeof navigator?navigator.userAgent:"");return c.test=function(a){for(var b=0;b<a.length;++b){var d=a[b];if("string"==typeof d&&d in c)return!0}return!1},c._detect=a,c}),!function(a){"use strict";function b(a){return function(b){if(b&&this===b.target)return a.apply(this,arguments)}}var c=function(a,b){this.init(a,b)};c.prototype={constructor:c,init:function(b,c){if(this.$element=a(b),this.options=a.extend({},a.fn.modalmanager.defaults,this.$element.data(),"object"==typeof c&&c),this.stack=[],this.backdropCount=0,this.options.resize){var d,e=this;a(window).on("resize.modal",function(){d&&clearTimeout(d),d=setTimeout(function(){for(var a=0;a<e.stack.length;a++)e.stack[a].isShown&&e.stack[a].layout()},10)})}},createModal:function(b,c){a(b).modal(a.extend({manager:this},c))},appendModal:function(c){this.stack.push(c);var d=this;c.$element.on("show.modalmanager",b(function(b){var e=function(){c.isShown=!0;var b=a.support.transition&&c.$element.hasClass("fade");d.$element.toggleClass("modal-open",d.hasOpenModal()).toggleClass("page-overflow",a(window).height()<d.$element.height()),c.$parent=c.$element.parent(),c.$container=d.createContainer(c),c.$element.appendTo(c.$container),d.backdrop(c,function(){c.$element.show(),b&&c.$element[0].offsetWidth,c.layout(),c.$element.addClass("in").attr("aria-hidden",!1);var e=function(){d.setFocus(),c.$element.trigger("shown")};b?c.$element.one(a.support.transition.end,e):e()})};c.options.replace?d.replace(e):e()})),c.$element.on("hidden.modalmanager",b(function(b){if(d.backdrop(c),c.$element.parent().length)if(c.$backdrop){var e=a.support.transition&&c.$element.hasClass("fade");e&&c.$element[0].offsetWidth,a.support.transition&&c.$element.hasClass("fade")?c.$backdrop.one(a.support.transition.end,function(){c.destroy()}):c.destroy()}else c.destroy();else d.destroyModal(c)})),c.$element.on("destroyed.modalmanager",b(function(a){d.destroyModal(c)}))},getOpenModals:function(){for(var a=[],b=0;b<this.stack.length;b++)this.stack[b].isShown&&a.push(this.stack[b]);return a},hasOpenModal:function(){return this.getOpenModals().length>0},setFocus:function(){for(var a,b=0;b<this.stack.length;b++)this.stack[b].isShown&&(a=this.stack[b]);a&&a.focus()},destroyModal:function(a){a.$element.off(".modalmanager"),a.$backdrop&&this.removeBackdrop(a),this.stack.splice(this.getIndexOfModal(a),1);var b=this.hasOpenModal();this.$element.toggleClass("modal-open",b),b||this.$element.removeClass("page-overflow"),this.removeContainer(a),this.setFocus()},getModalAt:function(a){return this.stack[a]},getIndexOfModal:function(a){for(var b=0;b<this.stack.length;b++)if(a===this.stack[b])return b},replace:function(c){for(var d,e=0;e<this.stack.length;e++)this.stack[e].isShown&&(d=this.stack[e]);d?(this.$backdropHandle=d.$backdrop,d.$backdrop=null,c&&d.$element.one("hidden",b(a.proxy(c,this))),d.hide()):c&&c()},removeBackdrop:function(a){a.$backdrop.remove(),a.$backdrop=null},createBackdrop:function(b,c){var d;return this.$backdropHandle?(d=this.$backdropHandle,d.off(".modalmanager"),this.$backdropHandle=null,this.isLoading&&this.removeSpinner()):d=a(c).addClass(b).appendTo(this.$element),d},removeContainer:function(a){a.$container.remove(),a.$container=null},createContainer:function(c){var e;return e=a('<div class="modal-scrollable">').css("z-index",d("modal",this.getOpenModals().length)).appendTo(this.$element),c&&"static"!=c.options.backdrop?e.on("click.modal",b(function(a){c.hide()})):c&&e.on("click.modal",b(function(a){c.attention()})),e},backdrop:function(b,c){var e=b.$element.hasClass("fade")?"fade":"",f=b.options.backdrop&&this.backdropCount<this.options.backdropLimit;if(b.isShown&&f){var g=a.support.transition&&e&&!this.$backdropHandle;b.$backdrop=this.createBackdrop(e,b.options.backdropTemplate),b.$backdrop.css("z-index",d("backdrop",this.getOpenModals().length)),g&&b.$backdrop[0].offsetWidth,b.$backdrop.addClass("in"),this.backdropCount+=1,g?b.$backdrop.one(a.support.transition.end,c):c()}else if(!b.isShown&&b.$backdrop){b.$backdrop.removeClass("in"),this.backdropCount-=1;var h=this;a.support.transition&&b.$element.hasClass("fade")?b.$backdrop.one(a.support.transition.end,function(){h.removeBackdrop(b)}):h.removeBackdrop(b)}else c&&c()},removeSpinner:function(){this.$spinner&&this.$spinner.remove(),this.$spinner=null,this.isLoading=!1},removeLoading:function(){this.$backdropHandle&&this.$backdropHandle.remove(),this.$backdropHandle=null,this.removeSpinner()},loading:function(b){if(b=b||function(){},this.$element.toggleClass("modal-open",!this.isLoading||this.hasOpenModal()).toggleClass("page-overflow",a(window).height()<this.$element.height()),this.isLoading)if(this.isLoading&&this.$backdropHandle){this.$backdropHandle.removeClass("in");var c=this;a.support.transition?this.$backdropHandle.one(a.support.transition.end,function(){c.removeLoading()}):c.removeLoading()}else b&&b(this.isLoading);else{this.$backdropHandle=this.createBackdrop("fade",this.options.backdropTemplate),this.$backdropHandle[0].offsetWidth;var e=this.getOpenModals();this.$backdropHandle.css("z-index",d("backdrop",e.length+1)).addClass("in");var f=a(this.options.spinner).css("z-index",d("modal",e.length+1)).appendTo(this.$element).addClass("in");this.$spinner=a(this.createContainer()).append(f).on("click.modalmanager",a.proxy(this.loading,this)),this.isLoading=!0,a.support.transition?this.$backdropHandle.one(a.support.transition.end,b):b()}}};var d=function(){var b,c={};return function(d,e){if("undefined"==typeof b){var f=a('<div class="modal hide" />').appendTo("body"),g=a('<div class="modal-backdrop hide" />').appendTo("body");c.modal=+f.css("z-index"),c.backdrop=+g.css("z-index"),b=c.modal-c.backdrop,f.remove(),g.remove(),g=f=null}return c[d]+b*e}}();a.fn.modalmanager=function(b,d){return this.each(function(){var e=a(this),f=e.data("modalmanager");f||e.data("modalmanager",f=new c(this,b)),"string"==typeof b&&f[b].apply(f,[].concat(d))})},a.fn.modalmanager.defaults={backdropLimit:999,resize:!0,spinner:'<div class="loading-spinner fade" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},a.fn.modalmanager.Constructor=c,a(function(){a(document).off("show.bs.modal").off("hidden.bs.modal")})}(jQuery),!function(a){"use strict";var b=function(a,b){this.init(a,b)};b.prototype={constructor:b,init:function(b,c){var d=this;this.options=c,this.$element=a(b).delegate('[data-dismiss="modal"]',"click.dismiss.modal",a.proxy(this.hide,this)),this.options.remote&&this.$element.find(".modal-body").load(this.options.remote,function(){var b=a.Event("loaded");d.$element.trigger(b)});var e="function"==typeof this.options.manager?this.options.manager.call(this):this.options.manager;e=e.appendModal?e:a(e).modalmanager().data("modalmanager"),e.appendModal(this)},toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var b=a.Event("show");this.isShown||(this.$element.trigger(b),b.isDefaultPrevented()||(this.escape(),this.tab(),this.options.loading&&this.loading()))},hide:function(b){b&&b.preventDefault(),b=a.Event("hide"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.tab(),this.isLoading&&this.loading(),a(document).off("focusin.modal"),this.$element.removeClass("in").removeClass("animated").removeClass(this.options.attentionAnimation).removeClass("modal-overflow").attr("aria-hidden",!0),a.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal())},layout:function(){var b=this.options.height?"height":"max-height",c=this.options.height||this.options.maxHeight;if(this.options.width){this.$element.css("width",this.options.width);var d=this;this.$element.css("margin-left",function(){return/%/gi.test(d.options.width)?-(parseInt(d.options.width)/2)+"%":-(a(this).width()/2)+"px"})}else this.$element.css("width",""),this.$element.css("margin-left","");this.$element.find(".modal-body").css("overflow","").css(b,""),c&&this.$element.find(".modal-body").css("overflow","auto").css(b,c);var e=a(window).height()-10<this.$element.height();e||this.options.modalOverflow?this.$element.css("margin-top",0).addClass("modal-overflow"):this.$element.css("margin-top",0-this.$element.height()/2).removeClass("modal-overflow")},tab:function(){var b=this;this.isShown&&this.options.consumeTab?this.$element.on("keydown.tabindex.modal","[data-tabindex]",function(c){if(c.keyCode&&9==c.keyCode){var d=[],e=Number(a(this).data("tabindex"));b.$element.find("[data-tabindex]:enabled:visible:not([readonly])").each(function(b){d.push(Number(a(this).data("tabindex")))}),d.sort(function(a,b){return a-b});var f=a.inArray(e,d);c.shiftKey?0==f?b.$element.find("[data-tabindex="+d[d.length-1]+"]").focus():b.$element.find("[data-tabindex="+d[f-1]+"]").focus():f<d.length-1?b.$element.find("[data-tabindex="+d[f+1]+"]").focus():b.$element.find("[data-tabindex="+d[0]+"]").focus(),c.preventDefault()}}):this.isShown||this.$element.off("keydown.tabindex.modal")},escape:function(){var a=this;this.isShown&&this.options.keyboard?(this.$element.attr("tabindex")||this.$element.attr("tabindex",-1),this.$element.on("keyup.dismiss.modal",function(b){27==b.which&&a.hide()})):this.isShown||this.$element.off("keyup.dismiss.modal")},hideWithTransition:function(){var b=this,c=setTimeout(function(){b.$element.off(a.support.transition.end),b.hideModal()},500);this.$element.one(a.support.transition.end,function(){clearTimeout(c),b.hideModal()})},hideModal:function(){var a=this.options.height?"height":"max-height",b=this.options.height||this.options.maxHeight;b&&this.$element.find(".modal-body").css("overflow","").css(a,""),this.$element.hide().trigger("hidden")},removeLoading:function(){this.$loading.remove(),this.$loading=null,this.isLoading=!1},loading:function(b){b=b||function(){};var c=this.$element.hasClass("fade")?"fade":"";if(this.isLoading)if(this.isLoading&&this.$loading){this.$loading.removeClass("in");var d=this;a.support.transition&&this.$element.hasClass("fade")?this.$loading.one(a.support.transition.end,function(){d.removeLoading()}):d.removeLoading()}else b&&b(this.isLoading);else{var e=a.support.transition&&c;this.$loading=a('<div class="loading-mask '+c+'">').append(this.options.spinner).appendTo(this.$element),e&&this.$loading[0].offsetWidth,this.$loading.addClass("in"),this.isLoading=!0,e?this.$loading.one(a.support.transition.end,b):b()}},focus:function(){var a=this.$element.find(this.options.focusOn);a=a.length?a:this.$element,a.focus()},attention:function(){if(this.options.attentionAnimation){this.$element.removeClass("animated").removeClass(this.options.attentionAnimation);var a=this;setTimeout(function(){a.$element.addClass("animated").addClass(a.options.attentionAnimation)},0)}this.focus()},destroy:function(){var b=a.Event("destroy");this.$element.trigger(b),b.isDefaultPrevented()||(this.$element.off(".modal").removeData("modal").removeClass("in").attr("aria-hidden",!0),this.$parent!==this.$element.parent()?this.$element.appendTo(this.$parent):this.$parent.length||(this.$element.remove(),this.$element=null),this.$element.trigger("destroyed"))}},a.fn.modal=function(c,d){return this.each(function(){var e=a(this),f=e.data("modal"),g=a.extend({},a.fn.modal.defaults,e.data(),"object"==typeof c&&c);f||e.data("modal",f=new b(this,g)),"string"==typeof c?f[c].apply(f,[].concat(d)):g.show&&f.show()})},a.fn.modal.defaults={keyboard:!0,backdrop:!0,loading:!1,show:!0,width:null,height:null,maxHeight:null,modalOverflow:!1,consumeTab:!0,focusOn:null,replace:!1,resize:!1,attentionAnimation:"shake",manager:"body",spinner:'<div class="loading-spinner" style="width: 200px; margin-left: -100px;"><div class="progress progress-striped active"><div class="bar" style="width: 100%;"></div></div></div>',backdropTemplate:'<div class="modal-backdrop" />'},a.fn.modal.Constructor=b,a(function(){a(document).off("click.modal").on("click.modal.data-api",'[data-toggle="modal"]',function(b){var c=a(this),d=c.attr("href"),e=a(c.attr("data-target")||d&&d.replace(/.*(?=#[^\s]+$)/,"")),f=e.data("modal")?"toggle":a.extend({remote:!/#/.test(d)&&d},e.data(),c.data());b.preventDefault(),e.modal(f).one("hide",function(){c.focus()})})})}(window.jQuery),function(a){var b=function(b){var c=this;if(!b){if(this.i=this.i+1,this.i>this.sequence.length)return;b=this.sequence[this.i-1]}if("function"==typeof b)return b(this);b.delete&&a(b.delete).remove();var d;if(b.selector&&(d=a(b.selector)),void 0!==b.content&&(d||(d=a("<div />")),d.html(b.content)),b.id&&d.attr("id",b.id),b.class&&d.addClass(b.class),b.css&&d.css(b.css),void 0!==b.content&&!b.selector){var e=b.container?this.el.find(b.container):this.el;e.append(d)}var f=b.pause||0;if(b.duration){var g=b.pause?{pause:b.pause}:void 0;if(b.no_wait)return d.animate(b.animate,b.duration*this.time_factor,b.easing||"swing"),c.next_cue(g);if(1===d.length)return d.animate(b.animate,b.duration*this.time_factor,b.easing||"swing",function(){c.next_cue(g)});d.animate(b.animate,b.duration*this.time_factor,b.easing||"swing"),f+=b.duration}return f>0?setTimeout(function(){c.next_cue()},f*this.time_factor):c.next_cue()};a.fn.titleSequence=function(c,d){return a(this).each(function(e){var f=a.extend({el:a(this),i:0,sequence:c,next_cue:b,time_factor:1},d);f.next_cue()}),this}}(jQuery),function(a,b,c,d){function e(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function f(a){var b=q.data(a,k);return null===b?d:b}function g(a){return function(b){return Math.round(b*a)*(1/a)}}function h(a,b){var c=a;return p.isString(a)?r.Easings[a]||(c=!1):c=p.isArray(a)&&1===a.length?g.apply(null,a):p.isArray(a)&&2===a.length?t.apply(null,a.concat([b])):!(!p.isArray(a)||4!==a.length)&&s.apply(null,a),c===!1&&(c=r.Easings[r.defaults.easing]?r.defaults.easing:m),c}function i(a){if(a)for(var b=(new Date).getTime(),c=0,e=r.State.calls.length;c<e;c++)if(r.State.calls[c]){var g=r.State.calls[c],h=g[0],k=g[2],l=g[3];l||(l=r.State.calls[c][3]=b-16);for(var m=Math.min((b-l)/k.duration,1),n=0,q=h.length;n<q;n++){var s=h[n],t=s.element;if(f(t)){var v=!1;k.display&&"none"!==k.display&&u.setPropertyValue(t,"display",k.display);for(var w in s)if("element"!==w){var x,y=s[w],z=p.isString(y.easing)?r.Easings[y.easing]:y.easing;if(x=1===m?y.endValue:y.startValue+(y.endValue-y.startValue)*z(m),y.currentValue=x,u.Hooks.registered[w]){var A=u.Hooks.getRoot(w),B=f(t).rootPropertyValueCache[A];B&&(y.rootPropertyValue=B)}var C=u.setPropertyValue(t,w,y.currentValue+(0===parseFloat(x)?"":y.unitType),y.rootPropertyValue,y.scrollData);u.Hooks.registered[w]&&(u.Normalizations.registered[A]?f(t).rootPropertyValueCache[A]=u.Normalizations.registered[A]("extract",null,C[1]):f(t).rootPropertyValueCache[A]=C[1]),"transform"===C[0]&&(v=!0)}k.mobileHA&&f(t).transformCache.translate3d===d&&(f(t).transformCache.translate3d="(0px, 0px, 0px)",v=!0),v&&u.flushTransformCache(t)}}k.display&&"none"!==k.display&&(r.State.calls[c][2].display=!1),k.progress&&k.progress.call(g[1],g[1],m,Math.max(0,l+k.duration-b),l),1===m&&j(c)}r.State.isTicking&&o(i)}function j(a,b){if(!r.State.calls[a])return!1;for(var c=r.State.calls[a][0],e=r.State.calls[a][1],g=r.State.calls[a][2],h=!1,i=0,j=c.length;i<j;i++){var k=c[i].element;if(b||"none"!==g.display||g.loop||u.setPropertyValue(k,"display",g.display),(q.queue(k)[1]===d||!/\.velocityQueueEntryFlag/i.test(q.queue(k)[1]))&&f(k)){f(k).isAnimating=!1,f(k).rootPropertyValueCache={};var l,m=["transformPerspective","translateZ","rotateX","rotateY"],n=!1;for(var o in m)l=m[o],/^\(0[^.]/.test(f(k).transformCache[l])&&(n=!0,delete f(k).transformCache[l]);g.mobileHA&&(n=!0,delete f(k).transformCache.translate3d),n&&u.flushTransformCache(k)}b||!g.complete||g.loop||i!==j-1||g.complete.call(e,e),g.queue!==!1&&q.dequeue(k,g.queue)}r.State.calls[a]=!1;for(var p=0,s=r.State.calls.length;p<s;p++)if(r.State.calls[p]!==!1){h=!0;break}h===!1&&(r.State.isTicking=!1,delete r.State.calls,r.State.calls=[])}var k="velocity",l=400,m="swing",n=function(){if(c.documentMode)return c.documentMode;for(var a=7;a>4;a--){var b=c.createElement("div");if(b.innerHTML="<!--[if IE "+a+"]><span></span><![endif]-->",b.getElementsByTagName("span").length)return b=null,a}return d}(),o=b.requestAnimationFrame||function(){var a=0;return b.webkitRequestAnimationFrame||b.mozRequestAnimationFrame||function(b){var c,d=(new Date).getTime();return c=Math.max(0,16-(d-a)),a=d+c,setTimeout(function(){b(d+c)},c)}}(),p={isString:function(a){return"string"==typeof a},isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},isFunction:function(a){return"[object Function]"===Object.prototype.toString.call(a)},isNodeList:function(a){return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(Object.prototype.toString.call(a))&&a.length!==d&&(0===a.length||"object"==typeof a[0]&&a[0].nodeType>0)},isWrapped:function(a){return a&&(a.jquery||b.Zepto&&b.Zepto.zepto.isZ(a))},isSVG:function(a){return b.SVGElement&&a instanceof SVGElement}},q=b.jQuery||a.Velocity&&a.Velocity.Utilities;if(!q)throw new Error("Velocity: Either jQuery or Velocity's jQuery shim must first be loaded.");if(a.Velocity!==d&&!a.Velocity.Utilities)throw new Error("Velocity: Namespace is occupied.");if(n<=7){if(b.jQuery)return void(b.jQuery.fn.velocity=b.jQuery.fn.animate);throw new Error("Velocity: For IE<=7, Velocity falls back to jQuery, which must first be loaded.")}if(8===n&&!b.jQuery)throw new Error("Velocity: For IE8, Velocity requires jQuery to be loaded. (Velocity's jQuery shim does not work with IE8.)");var r=a.Velocity=a.velocity={State:{isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isAndroid:/Android/i.test(navigator.userAgent),isGingerbread:/Android 2\.3\.[3-7]/i.test(navigator.userAgent),isChrome:b.chrome,prefixElement:c.createElement("div"),prefixMatches:{},scrollAnchor:null,scrollPropertyLeft:null,scrollPropertyTop:null,isTicking:!1,calls:[]},CSS:{},Utilities:b.jQuery?{}:q,Sequences:{},Easings:{},defaults:{queue:"",duration:l,easing:m,begin:null,complete:null,progress:null,display:null,loop:!1,delay:!1,mobileHA:!0,_cacheValues:!0},animate:function(){},mock:!1,debug:!1};b.pageYOffset!==d?(r.State.scrollAnchor=b,r.State.scrollPropertyLeft="pageXOffset",r.State.scrollPropertyTop="pageYOffset"):(r.State.scrollAnchor=c.documentElement||c.body.parentNode||c.body,r.State.scrollPropertyLeft="scrollLeft",r.State.scrollPropertyTop="scrollTop");var s=function(){function a(a,b){return 1-3*b+3*a}function b(a,b){return 3*b-6*a}function c(a){return 3*a}function d(d,e,f){return((a(e,f)*d+b(e,f))*d+c(e))*d}function e(d,e,f){return 3*a(e,f)*d*d+2*b(e,f)*d+c(e)}return function(a,b,c,f){function g(b){for(var f=b,g=0;g<8;++g){var h=e(f,a,c);if(0===h)return f;var i=d(f,a,c)-b;f-=i/h}return f}if(4!==arguments.length)return!1;for(var h=0;h<4;++h)if("number"!=typeof arguments[h]||isNaN(arguments[h])||!isFinite(arguments[h]))return!1;return a=Math.min(a,1),c=Math.min(c,1),a=Math.max(a,0),c=Math.max(c,0),function(e){return a===b&&c===f?e:d(g(e),b,f)}}}(),t=function(){function a(a){return-a.tension*a.x-a.friction*a.v}function b(b,c,d){var e={x:b.x+d.dx*c,v:b.v+d.dv*c,tension:b.tension,friction:b.friction};return{dx:e.v,dv:a(e)}}function c(c,d){var e={dx:c.v,dv:a(c)},f=b(c,.5*d,e),g=b(c,.5*d,f),h=b(c,d,g),i=1/6*(e.dx+2*(f.dx+g.dx)+h.dx),j=1/6*(e.dv+2*(f.dv+g.dv)+h.dv);return c.x=c.x+i*d,c.v=c.v+j*d,c}return function a(b,d,e){var f,g,h,i={x:-1,v:0,tension:null,friction:null},j=[0],k=0,l=1e-4,m=.016;for(b=parseFloat(b)||600,d=parseFloat(d)||20,e=e||null,i.tension=b,i.friction=d,f=null!==e,f?(k=a(b,d),g=k/e*m):g=m;;)if(h=c(h||i,g),j.push(1+h.x),k+=16,!(Math.abs(h.x)>l&&Math.abs(h.v)>l))break;return f?function(a){return j[a*(j.length-1)|0]}:k}}();!function(){r.Easings.linear=function(a){return a},r.Easings.swing=function(a){return.5-Math.cos(a*Math.PI)/2},r.Easings.spring=function(a){return 1-Math.cos(4.5*a*Math.PI)*Math.exp(6*-a)},r.Easings.ease=s(.25,.1,.25,1),r.Easings["ease-in"]=s(.42,0,1,1),r.Easings["ease-out"]=s(0,0,.58,1),r.Easings["ease-in-out"]=s(.42,0,.58,1);var a={};q.each(["Quad","Cubic","Quart","Quint","Expo"],function(b,c){a[c]=function(a){return Math.pow(a,b+2)}}),q.extend(a,{Sine:function(a){return 1-Math.cos(a*Math.PI/2)},Circ:function(a){return 1-Math.sqrt(1-a*a)},Elastic:function(a){return 0===a||1===a?a:-Math.pow(2,8*(a-1))*Math.sin((80*(a-1)-7.5)*Math.PI/15)},Back:function(a){return a*a*(3*a-2)},Bounce:function(a){for(var b,c=4;a<((b=Math.pow(2,--c))-1)/11;);return 1/Math.pow(4,3-c)-7.5625*Math.pow((3*b-2)/22-a,2)}}),q.each(a,function(a,b){r.Easings["easeIn"+a]=b,r.Easings["easeOut"+a]=function(a){return 1-b(1-a)},r.Easings["easeInOut"+a]=function(a){return a<.5?b(2*a)/2:1-b(a*-2+2)/2}})}();var u=r.CSS={RegEx:{valueUnwrap:/^[A-z]+\((.*)\)$/i,wrappedValueAlreadyExtracted:/[0-9.]+ [0-9.]+ [0-9.]+( [0-9.]+)?/,valueSplit:/([A-z]+\(.+\))|(([A-z0-9#-.]+?)(?=\s|$))/gi},Hooks:{templates:{color:["Red Green Blue Alpha","255 255 255 1"],backgroundColor:["Red Green Blue Alpha","255 255 255 1"],borderColor:["Red Green Blue Alpha","255 255 255 1"],borderTopColor:["Red Green Blue Alpha","255 255 255 1"],borderRightColor:["Red Green Blue Alpha","255 255 255 1"],borderBottomColor:["Red Green Blue Alpha","255 255 255 1"],borderLeftColor:["Red Green Blue Alpha","255 255 255 1"],outlineColor:["Red Green Blue Alpha","255 255 255 1"],fill:["Red Green Blue Alpha","255 255 255 1"],stroke:["Red Green Blue Alpha","255 255 255 1"],stopColor:["Red Green Blue Alpha","255 255 255 1"],textShadow:["Color X Y Blur","black 0px 0px 0px"],boxShadow:["Color X Y Blur Spread","black 0px 0px 0px 0px"],clip:["Top Right Bottom Left","0px 0px 0px 0px"],backgroundPosition:["X Y","0% 0%"],transformOrigin:["X Y Z","50% 50% 0px"],perspectiveOrigin:["X Y","50% 50%"]},registered:{},register:function(){var a,b,c;if(n)for(a in u.Hooks.templates){b=u.Hooks.templates[a],c=b[0].split(" ");var d=b[1].match(u.RegEx.valueSplit);"Color"===c[0]&&(c.push(c.shift()),d.push(d.shift()),u.Hooks.templates[a]=[c.join(" "),d.join(" ")])}for(a in u.Hooks.templates){b=u.Hooks.templates[a],c=b[0].split(" ");for(var e in c){var f=a+c[e],g=e;u.Hooks.registered[f]=[a,g]}}},getRoot:function(a){var b=u.Hooks.registered[a];return b?b[0]:a},cleanRootPropertyValue:function(a,b){return u.RegEx.valueUnwrap.test(b)&&(b=b.match(u.Hooks.RegEx.valueUnwrap)[1]),u.Values.isCSSNullValue(b)&&(b=u.Hooks.templates[a][1]),b},extractValue:function(a,b){var c=u.Hooks.registered[a];if(c){var d=c[0],e=c[1];return b=u.Hooks.cleanRootPropertyValue(d,b),b.toString().match(u.RegEx.valueSplit)[e]}return b},injectValue:function(a,b,c){var d=u.Hooks.registered[a];if(d){var e,f,g=d[0],h=d[1];return c=u.Hooks.cleanRootPropertyValue(g,c),e=c.toString().match(u.RegEx.valueSplit),e[h]=b,f=e.join(" ")}return c}},Normalizations:{registered:{clip:function(a,b,c){switch(a){case"name":return"clip";case"extract":var d;return u.RegEx.wrappedValueAlreadyExtracted.test(c)?d=c:(d=c.toString().match(u.RegEx.valueUnwrap),d=d?d[1].replace(/,(\s+)?/g," "):c),d;case"inject":return"rect("+c+")"}},opacity:function(a,b,c){if(n<=8)switch(a){case"name":return"filter";case"extract":var d=c.toString().match(/alpha\(opacity=(.*)\)/i);return c=d?d[1]/100:1;case"inject":return b.style.zoom=1,parseFloat(c)>=1?"":"alpha(opacity="+parseInt(100*parseFloat(c),10)+")"}else switch(a){case"name":return"opacity";case"extract":return c;case"inject":return c}}},register:function(){function a(a){var b,c=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,d=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i;return a=a.replace(c,function(a,b,c,d){return b+b+c+c+d+d}),b=d.exec(a),b?"rgb("+(parseInt(b[1],16)+" "+parseInt(b[2],16)+" "+parseInt(b[3],16))+")":"rgb(0 0 0)"}var b=["translateX","translateY","scale","scaleX","scaleY","skewX","skewY","rotateZ"];n<=9||r.State.isGingerbread||(b=b.concat(["transformPerspective","translateZ","scaleZ","rotateX","rotateY"]));for(var c=0,e=b.length;c<e;c++)!function(){var a=b[c];u.Normalizations.registered[a]=function(b,c,e){switch(b){case"name":return"transform";case"extract":return f(c).transformCache[a]===d?/^scale/i.test(a)?1:0:f(c).transformCache[a].replace(/[()]/g,"");case"inject":var g=!1;switch(a.substr(0,a.length-1)){case"translate":g=!/(%|px|em|rem|\d)$/i.test(e);break;case"scal":case"scale":r.State.isAndroid&&f(c).transformCache[a]===d&&(e=1),g=!/(\d)$/i.test(e);break;case"skew":g=!/(deg|\d)$/i.test(e);break;case"rotate":g=!/(deg|\d)$/i.test(e)}return g||(f(c).transformCache[a]="("+e+")"),f(c).transformCache[a]}}}();for(var g=["fill","stroke","stopColor","color","backgroundColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","outlineColor"],c=0,h=g.length;c<h;c++)!function(){var b=g[c];u.Normalizations.registered[b]=function(c,e,f){switch(c){case"name":return b;case"extract":var g;if(u.RegEx.wrappedValueAlreadyExtracted.test(f))g=f;else{var h,i={aqua:"rgb(0, 255, 255);",black:"rgb(0, 0, 0)",blue:"rgb(0, 0, 255)",fuchsia:"rgb(255, 0, 255)",gray:"rgb(128, 128, 128)",green:"rgb(0, 128, 0)",lime:"rgb(0, 255, 0)",maroon:"rgb(128, 0, 0)",navy:"rgb(0, 0, 128)",olive:"rgb(128, 128, 0)",purple:"rgb(128, 0, 128)",red:"rgb(255, 0, 0)",silver:"rgb(192, 192, 192)",teal:"rgb(0, 128, 128)",white:"rgb(255, 255, 255)",yellow:"rgb(255, 255, 0)"};/^[A-z]+$/i.test(f)?h=i[f]!==d?i[f]:i.black:/^#([A-f\d]{3}){1,2}$/i.test(f)?h=a(f):/^rgba?\(/i.test(f)||(h=i.black),g=(h||f).toString().match(u.RegEx.valueUnwrap)[1].replace(/,(\s+)?/g," ")}return n<=8||3!==g.split(" ").length||(g+=" 1"),g;case"inject":return n<=8?4===f.split(" ").length&&(f=f.split(/\s+/).slice(0,3).join(" ")):3===f.split(" ").length&&(f+=" 1"),(n<=8?"rgb":"rgba")+"("+f.replace(/\s+/g,",").replace(/\.(\d)+(?=,)/g,"")+")"}}}()}},Names:{camelCase:function(a){return a.replace(/-(\w)/g,function(a,b){return b.toUpperCase()})},SVGAttribute:function(a){var b="width|height|x|y|cx|cy|r|rx|ry|x1|x2|y1|y1";return(n||r.State.isAndroid&&!r.State.isChrome)&&(b+="|transform"),new RegExp("^("+b+")$","i").test(a)},prefixCheck:function(a){if(r.State.prefixMatches[a])return[r.State.prefixMatches[a],!0];for(var b=["","Webkit","Moz","ms","O"],c=0,d=b.length;c<d;c++){var e;if(e=0===c?a:b[c]+a.replace(/^\w/,function(a){return a.toUpperCase()}),p.isString(r.State.prefixElement.style[e]))return r.State.prefixMatches[a]=e,[e,!0]}return[a,!1]}},Values:{isCSSNullValue:function(a){return 0==a||/^(none|auto|transparent|(rgba\(0, ?0, ?0, ?0\)))$/i.test(a)},getUnitType:function(a){return/^(rotate|skew)/i.test(a)?"deg":/(^(scale|scaleX|scaleY|scaleZ|alpha|flexGrow|flexHeight|zIndex|fontWeight)$)|((opacity|red|green|blue|alpha)$)/i.test(a)?"":"px"},getDisplayType:function(a){var b=a.tagName.toString().toLowerCase();return/^(b|big|i|small|tt|abbr|acronym|cite|code|dfn|em|kbd|strong|samp|var|a|bdo|br|img|map|object|q|script|span|sub|sup|button|input|label|select|textarea)$/i.test(b)?"inline":/^(li)$/i.test(b)?"list-item":/^(tr)$/i.test(b)?"table-row":"block"}},getPropertyValue:function(a,c,e,g){function h(a,c){var e=0;if(n<=8)e=q.css(a,c);else{if(!g){if("height"===c&&"border-box"!==u.getPropertyValue(a,"boxSizing").toString().toLowerCase())return a.offsetHeight-(parseFloat(u.getPropertyValue(a,"borderTopWidth"))||0)-(parseFloat(u.getPropertyValue(a,"borderBottomWidth"))||0)-(parseFloat(u.getPropertyValue(a,"paddingTop"))||0)-(parseFloat(u.getPropertyValue(a,"paddingBottom"))||0);if("width"===c&&"border-box"!==u.getPropertyValue(a,"boxSizing").toString().toLowerCase())return a.offsetWidth-(parseFloat(u.getPropertyValue(a,"borderLeftWidth"))||0)-(parseFloat(u.getPropertyValue(a,"borderRightWidth"))||0)-(parseFloat(u.getPropertyValue(a,"paddingLeft"))||0)-(parseFloat(u.getPropertyValue(a,"paddingRight"))||0);
}var i;i=f(a)===d?b.getComputedStyle(a,null):f(a).computedStyle?f(a).computedStyle:f(a).computedStyle=b.getComputedStyle(a,null),n&&"borderColor"===c&&(c="borderTopColor"),e=9===n&&"filter"===c?i.getPropertyValue(c):i[c],""!==e&&null!==e||(e=a.style[c])}if("auto"===e&&/^(top|right|bottom|left)$/i.test(c)){var j=h(a,"position");("fixed"===j||"absolute"===j&&/top|left/i.test(c))&&(e=q(a).position()[c]+"px")}return e}var i;if(u.Hooks.registered[c]){var j=c,k=u.Hooks.getRoot(j);e===d&&(e=u.getPropertyValue(a,u.Names.prefixCheck(k)[0])),u.Normalizations.registered[k]&&(e=u.Normalizations.registered[k]("extract",a,e)),i=u.Hooks.extractValue(j,e)}else if(u.Normalizations.registered[c]){var l,m;l=u.Normalizations.registered[c]("name",a),"transform"!==l&&(m=h(a,u.Names.prefixCheck(l)[0]),u.Values.isCSSNullValue(m)&&u.Hooks.templates[c]&&(m=u.Hooks.templates[c][1])),i=u.Normalizations.registered[c]("extract",a,m)}return/^[\d-]/.test(i)||(i=f(a)&&f(a).isSVG&&u.Names.SVGAttribute(c)?/^(height|width)$/i.test(c)?a.getBBox()[c]:a.getAttribute(c):h(a,u.Names.prefixCheck(c)[0])),u.Values.isCSSNullValue(i)&&(i=0),r.debug>=2&&console.log("Get "+c+": "+i),i},setPropertyValue:function(a,c,d,e,g){var h=c;if("scroll"===c)g.container?g.container["scroll"+g.direction]=d:"Left"===g.direction?b.scrollTo(d,g.alternateValue):b.scrollTo(g.alternateValue,d);else if(u.Normalizations.registered[c]&&"transform"===u.Normalizations.registered[c]("name",a))u.Normalizations.registered[c]("inject",a,d),h="transform",d=f(a).transformCache[c];else{if(u.Hooks.registered[c]){var i=c,j=u.Hooks.getRoot(c);e=e||u.getPropertyValue(a,j),d=u.Hooks.injectValue(i,d,e),c=j}if(u.Normalizations.registered[c]&&(d=u.Normalizations.registered[c]("inject",a,d),c=u.Normalizations.registered[c]("name",a)),h=u.Names.prefixCheck(c)[0],n<=8)try{a.style[h]=d}catch(a){r.debug&&console.log("Browser does not support ["+d+"] for ["+h+"]")}else f(a)&&f(a).isSVG&&u.Names.SVGAttribute(c)?a.setAttribute(c,d):a.style[h]=d;r.debug>=2&&console.log("Set "+c+" ("+h+"): "+d)}return[h,d]},flushTransformCache:function(a){function b(b){return parseFloat(u.getPropertyValue(a,b))}var c="";if((n||r.State.isAndroid&&!r.State.isChrome)&&f(a).isSVG){var d={translate:[b("translateX"),b("translateY")],skewX:[b("skewX")],skewY:[b("skewY")],scale:1!==b("scale")?[b("scale"),b("scale")]:[b("scaleX"),b("scaleY")],rotate:[b("rotateZ"),0,0]};q.each(f(a).transformCache,function(a){/^translate/i.test(a)?a="translate":/^scale/i.test(a)?a="scale":/^rotate/i.test(a)&&(a="rotate"),d[a]&&(c+=a+"("+d[a].join(" ")+") ",delete d[a])})}else{var e,g;q.each(f(a).transformCache,function(b){return e=f(a).transformCache[b],"transformPerspective"===b?(g=e,!0):(9===n&&"rotateZ"===b&&(b="rotate"),void(c+=b+e+" "))}),g&&(c="perspective"+g+" "+c)}u.setPropertyValue(a,"transform",c)}};u.Hooks.register(),u.Normalizations.register(),r.animate=function(){function a(){return g||o}function b(){function a(a){function k(a){var c=d,e=d,f=d;return p.isArray(a)?(c=a[0],!p.isArray(a[1])&&/^[\d-]/.test(a[1])||p.isFunction(a[1])?f=a[1]:(p.isString(a[1])||p.isArray(a[1]))&&(e=h(a[1],g.duration),a[2]&&(f=a[2]))):c=a,e=e||g.easing,p.isFunction(c)&&(c=c.call(b,x,w)),p.isFunction(f)&&(f=f.call(b,x,w)),[c||0,e,f]}function l(a,b){var c,d;return d=(b||0).toString().toLowerCase().replace(/[%A-z]+$/,function(a){return c=a,""}),c||(c=u.Values.getUnitType(a)),[d,c]}function m(){var a={parent:b.parentNode,position:u.getPropertyValue(b,"position"),fontSize:u.getPropertyValue(b,"fontSize")},d=a.position===E.lastPosition&&a.parent===E.lastParent,e=a.fontSize===E.lastFontSize&&a.parent===E.lastParent;E.lastParent=a.parent,E.lastPosition=a.position,E.lastFontSize=a.fontSize,null===E.remToPxRatio&&(E.remToPxRatio=parseFloat(u.getPropertyValue(c.body,"fontSize"))||16);var g={overflowX:null,overflowY:null,boxSizing:null,width:null,minWidth:null,maxWidth:null,height:null,minHeight:null,maxHeight:null,paddingLeft:null},h={},i=10;if(h.remToPxRatio=E.remToPxRatio,n&&!f(b).isSVG)var j=/^auto$/i.test(b.currentStyle.width),k=/^auto$/i.test(b.currentStyle.height);d&&e||(f(b).isSVG||(g.overflowX=u.getPropertyValue(b,"overflowX"),g.overflowY=u.getPropertyValue(b,"overflowY"),g.boxSizing=u.getPropertyValue(b,"boxSizing"),g.minWidth=u.getPropertyValue(b,"minWidth"),g.maxWidth=u.getPropertyValue(b,"maxWidth")||"none",g.minHeight=u.getPropertyValue(b,"minHeight"),g.maxHeight=u.getPropertyValue(b,"maxHeight")||"none",g.paddingLeft=u.getPropertyValue(b,"paddingLeft")),g.width=u.getPropertyValue(b,"width",null,!0),g.height=u.getPropertyValue(b,"height",null,!0)),d?(h.percentToPxRatioWidth=E.lastPercentToPxWidth,h.percentToPxRatioHeight=E.lastPercentToPxHeight):(f(b).isSVG||(u.setPropertyValue(b,"overflowX","hidden"),u.setPropertyValue(b,"overflowY","hidden"),u.setPropertyValue(b,"boxSizing","content-box"),u.setPropertyValue(b,"minWidth",i+"%"),u.setPropertyValue(b,"maxWidth",i+"%"),u.setPropertyValue(b,"minHeight",i+"%"),u.setPropertyValue(b,"maxHeight",i+"%")),u.setPropertyValue(b,"width",i+"%"),u.setPropertyValue(b,"height",i+"%")),e?h.emToPxRatio=E.lastEmToPx:f(b).isSVG||u.setPropertyValue(b,"paddingLeft",i+"em"),d||(h.percentToPxRatioWidth=E.lastPercentToPxWidth=(parseFloat(u.getPropertyValue(b,"width",null,!0))||1)/i,h.percentToPxRatioHeight=E.lastPercentToPxHeight=(parseFloat(u.getPropertyValue(b,"height",null,!0))||1)/i),e||(h.emToPxRatio=E.lastEmToPx=(parseFloat(u.getPropertyValue(b,"paddingLeft"))||1)/i);for(var l in g)null!==g[l]&&u.setPropertyValue(b,l,g[l]);return f(b).isSVG||(n?(j&&u.setPropertyValue(b,"width","auto"),k&&u.setPropertyValue(b,"height","auto")):(u.setPropertyValue(b,"height","auto"),g.height!==u.getPropertyValue(b,"height",null,!0)&&u.setPropertyValue(b,"height",g.height),u.setPropertyValue(b,"width","auto"),g.width!==u.getPropertyValue(b,"width",null,!0)&&u.setPropertyValue(b,"width",g.width))),r.debug>=1&&console.log("Unit ratios: "+JSON.stringify(h),b),h}if(g.begin&&0===x&&g.begin.call(o,o),"scroll"===A){var v,y,z,B=/^x$/i.test(g.axis)?"Left":"Top",C=parseFloat(g.offset)||0;g.container?g.container.jquery||g.container.nodeType?(g.container=g.container[0]||g.container,v=g.container["scroll"+B],z=v+q(b).position()[B.toLowerCase()]+C):g.container=null:(v=r.State.scrollAnchor[r.State["scrollProperty"+B]],y=r.State.scrollAnchor[r.State["scrollProperty"+("Left"===B?"Top":"Left")]],z=q(b).offset()[B.toLowerCase()]+C),j={scroll:{rootPropertyValue:!1,startValue:v,currentValue:v,endValue:z,unitType:"",easing:g.easing,scrollData:{container:g.container,direction:B,alternateValue:y}},element:b}}else if("reverse"===A){if(!f(b).tweensContainer)return void q.dequeue(b,g.queue);"none"===f(b).opts.display&&(f(b).opts.display="block"),f(b).opts.loop=!1,f(b).opts.begin=null,f(b).opts.complete=null,t.easing||delete g.easing,t.duration||delete g.duration,g=q.extend({},f(b).opts,g);var D=q.extend(!0,{},f(b).tweensContainer);for(var G in D)if("element"!==G){var H=D[G].startValue;D[G].startValue=D[G].currentValue=D[G].endValue,D[G].endValue=H,t&&(D[G].easing=g.easing)}j=D}else if("start"===A){var D;f(b).tweensContainer&&f(b).isAnimating===!0&&(D=f(b).tweensContainer);for(var I in s){var J=k(s[I]),K=J[0],L=J[1],M=J[2];I=u.Names.camelCase(I);var N=u.Hooks.getRoot(I),O=!1;if(f(b).isSVG||u.Names.prefixCheck(N)[1]!==!1||u.Normalizations.registered[N]!==d){g.display&&"none"!==g.display&&/opacity|filter/.test(I)&&!M&&0!==K&&(M=0),g._cacheValues&&D&&D[I]?(M===d&&(M=D[I].endValue+D[I].unitType),O=f(b).rootPropertyValueCache[N]):u.Hooks.registered[I]?M===d?(O=u.getPropertyValue(b,N),M=u.getPropertyValue(b,I,O)):O=u.Hooks.templates[N][1]:M===d&&(M=u.getPropertyValue(b,I));var P,Q,R,S;P=l(I,M),M=P[0],R=P[1],P=l(I,K),K=P[0].replace(/^([+-\/*])=/,function(a,b){return S=b,""}),Q=P[1],M=parseFloat(M)||0,K=parseFloat(K)||0;var T;if("%"===Q&&(/^(fontSize|lineHeight)$/.test(I)?(K/=100,Q="em"):/^scale/.test(I)?(K/=100,Q=""):/(Red|Green|Blue)$/i.test(I)&&(K=K/100*255,Q="")),/[\/*]/.test(S))Q=R;else if(R!==Q&&0!==M)if(0===K)Q=R;else{T=T||m();var U=/margin|padding|left|right|width|text|word|letter/i.test(I)||/X$/.test(I)?"x":"y";switch(R){case"%":M*="x"===U?T.percentToPxRatioWidth:T.percentToPxRatioHeight;break;case"em":M*=T.emToPxRatio;break;case"rem":M*=T.remToPxRatio;break;case"px":}switch(Q){case"%":M*=1/("x"===U?T.percentToPxRatioWidth:T.percentToPxRatioHeight);break;case"em":M*=1/T.emToPxRatio;break;case"rem":M*=1/T.remToPxRatio;break;case"px":}}switch(S){case"+":K=M+K;break;case"-":K=M-K;break;case"*":K=M*K;break;case"/":K=M/K}j[I]={rootPropertyValue:O,startValue:M,currentValue:M,endValue:K,unitType:Q,easing:L},r.debug&&console.log("tweensContainer ("+I+"): "+JSON.stringify(j[I]),b)}else r.debug&&console.log("Skipping ["+N+"] due to a lack of browser support.")}j.element=b}j.element&&(F.push(j),f(b).tweensContainer=j,f(b).opts=g,f(b).isAnimating=!0,x===w-1?(r.State.calls.length>1e4&&(r.State.calls=e(r.State.calls)),r.State.calls.push([F,o,g]),r.State.isTicking===!1&&(r.State.isTicking=!0,i())):x++)}var b=this,g=q.extend({},r.defaults,t),j={};if(f(b)===d&&q.data(b,k,{isSVG:p.isSVG(b),isAnimating:!1,computedStyle:null,tweensContainer:null,rootPropertyValueCache:{},transformCache:{}}),/^\d/.test(g.delay)&&g.queue!==!1&&q.queue(b,g.queue,function(a){r.velocityQueueEntryFlag=!0,setTimeout(a,parseFloat(g.delay))}),r.mock===!0)g.duration=1;else switch(g.duration.toString().toLowerCase()){case"fast":g.duration=200;break;case"normal":g.duration=l;break;case"slow":g.duration=600;break;default:g.duration=parseFloat(g.duration)||1}g.easing=h(g.easing,g.duration),g.begin&&!p.isFunction(g.begin)&&(g.begin=null),g.progress&&!p.isFunction(g.progress)&&(g.progress=null),g.complete&&!p.isFunction(g.complete)&&(g.complete=null),g.display&&(g.display=g.display.toString().toLowerCase()),g.mobileHA=g.mobileHA&&r.State.isMobile&&!r.State.isGingerbread,g.queue===!1?g.delay?setTimeout(a,g.delay):a():q.queue(b,g.queue,function(b){r.velocityQueueEntryFlag=!0,a(b)}),""!==g.queue&&"fx"!==g.queue||"inprogress"===q.queue(b)[0]||q.dequeue(b)}var g,m,o,s,t,v=arguments[0]&&(q.isPlainObject(arguments[0].properties)&&!arguments[0].properties.names||p.isString(arguments[0].properties));if(p.isWrapped(this)?(m=0,o=this,g=this):(m=1,o=v?arguments[0].elements:arguments[0]),o=p.isWrapped(o)?[].slice.call(o):o){v?(s=arguments[0].properties,t=arguments[0].options):(s=arguments[m],t=arguments[m+1]);var w=p.isArray(o)||p.isNodeList(o)?o.length:1,x=0;if("stop"!==s&&!q.isPlainObject(t)){var y=m+1;t={};for(var z=y;z<arguments.length;z++)!p.isArray(arguments[z])&&/^\d/.test(arguments[z])?t.duration=parseFloat(arguments[z]):p.isString(arguments[z])||p.isArray(arguments[z])?t.easing=arguments[z]:p.isFunction(arguments[z])&&(t.complete=arguments[z])}var A;switch(s){case"scroll":A="scroll";break;case"reverse":A="reverse";break;case"stop":var B=[];return q.each(r.State.calls,function(a,b){b!==!1&&q.each(b[1].nodeType?[b[1]]:b[1],function(b,c){q.each(o.nodeType?[o]:o,function(b,d){d===c&&(f(d)&&q.each(f(d).tweensContainer,function(a,b){b.endValue=b.currentValue}),(t===!0||p.isString(t))&&q.queue(d,p.isString(t)?t:"",[]),B.push(a))})})}),q.each(B,function(a,b){j(b,!0)}),a();default:if(!q.isPlainObject(s)||q.isEmptyObject(s)){if(p.isString(s)&&r.Sequences[s]){var C=o,D=t.duration;return t.backwards===!0&&(o=(o.jquery?[].slice.call(o):o).reverse()),q.each(o,function(a,b){parseFloat(t.stagger)&&(t.delay=parseFloat(t.stagger)*a),t.drag&&(t.duration=parseFloat(D)||(/^(callout|transition)/.test(s)?1e3:l),t.duration=Math.max(t.duration*(t.backwards?1-a/w:(a+1)/w),.75*t.duration,200)),r.Sequences[s].call(b,b,t||{},a,w)}),g||C}return console.log("First argument was not a property map, a known action, or a registered sequence. Aborting."),a()}A="start"}var E={lastParent:null,lastPosition:null,lastFontSize:null,lastPercentToPxWidth:null,lastPercentToPxHeight:null,lastEmToPx:null,remToPxRatio:null},F=[];q.each(o.nodeType?[o]:o,function(a,c){c.nodeType&&b.call(c)});var G,H=q.extend({},r.defaults,t);if(H.loop=parseInt(H.loop),G=2*H.loop-1,H.loop)for(var I=0;I<G;I++){var J={delay:H.delay};H.complete&&I===G-1&&(J.complete=H.complete),r.animate(o,"reverse",J)}return a()}};var v=b.jQuery||b.Zepto;v&&(v.fn.velocity=r.animate,v.fn.velocity.defaults=r.defaults),"undefined"!=typeof define&&define.amd?define(function(){return r}):"undefined"!=typeof module&&module.exports&&(module.exports=r),q.each(["Down","Up"],function(a,b){r.Sequences["slide"+b]=function(a,c){var d=q.extend({},c),e={height:null,marginTop:null,marginBottom:null,paddingTop:null,paddingBottom:null,overflow:null,overflowX:null,overflowY:null},f=d.begin,g=d.complete,h=!1;null!==d.display&&("Down"===b?d.display=d.display||r.CSS.Values.getDisplayType(a):d.display=d.display||"none"),d.begin=function(){function c(){a.style.display="block",e.height=r.CSS.getPropertyValue(a,"height"),a.style.height="auto",r.CSS.getPropertyValue(a,"height")===e.height&&(h=!0),r.CSS.setPropertyValue(a,"height",e.height+"px")}if("Down"===b){e.overflow=[r.CSS.getPropertyValue(a,"overflow"),0],e.overflowX=[r.CSS.getPropertyValue(a,"overflowX"),0],e.overflowY=[r.CSS.getPropertyValue(a,"overflowY"),0],a.style.overflow="hidden",a.style.overflowX="visible",a.style.overflowY="hidden",c();for(var d in e)/^overflow/.test(d)||(e[d]=[r.CSS.getPropertyValue(a,d),0]);a.style.display="none"}else{c();for(var d in e)e[d]=[0,r.CSS.getPropertyValue(a,d)];a.style.overflow="hidden",a.style.overflowX="visible",a.style.overflowY="hidden"}f&&f.call(a,a)},d.complete=function(a){var c="Down"===b?0:1;h===!0?e.height[c]="auto":e.height[c]+="px";for(var d in e)a.style[d]=e[d][c];g&&g.call(a,a)},r.animate(a,e,d)}}),q.each(["In","Out"],function(a,b){r.Sequences["fade"+b]=function(a,c,d,e){var f=q.extend({},c),g={opacity:"In"===b?1:0};d!==e-1&&(f.complete=f.begin=null),null!==f.display&&(f.display="In"===b?r.CSS.Values.getDisplayType(a):"none"),r.animate(this,g,f)}})}(window.jQuery||window.Zepto||window,window,document),+function(a){"use strict";var b=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};b.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1},b.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},b.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},b.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},b.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type);return clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},b.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){if(this.$element.trigger(b),b.isDefaultPrevented())return;var c=this,d=this.tip();this.setContent(),this.options.animation&&d.addClass("fade");var e="function"==typeof this.options.placement?this.options.placement.call(this,d[0],this.$element[0]):this.options.placement,f=/\s?auto?\s?/i,g=f.test(e);g&&(e=e.replace(f,"")||"top"),d.detach().css({top:0,left:0,display:"block"}).addClass(e),this.options.container?d.appendTo(this.options.container):d.insertAfter(this.$element);var h=this.getPosition(),i=d[0].offsetWidth,j=d[0].offsetHeight;if(g){var k=this.$element.parent(),l=e,m=document.documentElement.scrollTop||document.body.scrollTop,n="body"==this.options.container?window.innerWidth:k.outerWidth(),o="body"==this.options.container?window.innerHeight:k.outerHeight(),p="body"==this.options.container?0:k.offset().left;e="bottom"==e&&h.top+h.height+j-m>o?"top":"top"==e&&h.top-m-j<0?"bottom":"right"==e&&h.right+i>n?"left":"left"==e&&h.left-i<p?"right":e,d.removeClass(l).addClass(e)}var q=this.getCalculatedOffset(e,h,i,j);this.applyPlacement(q,e),this.hoverState=null;var r=function(){c.$element.trigger("shown.bs."+c.type)};a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,r).emulateTransitionEnd(150):r()}},b.prototype.applyPlacement=function(b,c){var d,e=this.tip(),f=e[0].offsetWidth,g=e[0].offsetHeight,h=parseInt(e.css("margin-top"),10),i=parseInt(e.css("margin-left"),10);isNaN(h)&&(h=0),isNaN(i)&&(i=0),b.top=b.top+h,b.left=b.left+i,a.offset.setOffset(e[0],a.extend({using:function(a){e.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),e.addClass("in");var j=e[0].offsetWidth,k=e[0].offsetHeight;if("top"==c&&k!=g&&(d=!0,b.top=b.top+g-k),/bottom|top/.test(c)){var l=0;b.left<0&&(l=b.left*-2,b.left=0,e.offset(b),j=e[0].offsetWidth,k=e[0].offsetHeight),this.replaceArrow(l-f+j,j,"left")}else this.replaceArrow(k-g,k,"top");d&&e.offset(b)},b.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},b.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);if(this.$element.trigger(e),!e.isDefaultPrevented())return d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one(a.support.transition.end,b).emulateTransitionEnd(150):b(),this.hoverState=null,this},b.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},b.prototype.hasContent=function(){return this.getTitle()},b.prototype.getPosition=function(){var b=this.$element[0];return a.extend({},"function"==typeof b.getBoundingClientRect?b.getBoundingClientRect():{width:b.offsetWidth,height:b.offsetHeight},this.$element.offset())},b.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},b.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},b.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},b.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},b.prototype.enable=function(){this.enabled=!0},b.prototype.disable=function(){this.enabled=!1},b.prototype.toggleEnabled=function(){this.enabled=!this.enabled},b.prototype.toggle=function(b){var c=b?a(b.currentTarget)[this.type](this.getDelegateOptions()).data("bs."+this.type):this;c.tip().hasClass("in")?c.leave(c):c.enter(c)},b.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var c=a.fn.tooltip;a.fn.tooltip=function(c){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.tooltip",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.tooltip.Constructor=b,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=c,this}}(jQuery),+function(a){"use strict";var b=function(a,b){this.init("popover",a,b)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");b.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),b.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),b.prototype.constructor=b,b.prototype.getDefaults=function(){return b.DEFAULTS},b.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(".popover-title")[this.options.html?"html":"text"](b),a.find(".popover-content")[this.options.html?"string"==typeof c?"html":"append":"text"](c),a.removeClass("fade top bottom left right in"),a.find(".popover-title").html()||a.find(".popover-title").hide()},b.prototype.hasContent=function(){return this.getTitle()||this.getContent()},b.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr("data-content")||("function"==typeof b.content?b.content.call(a[0]):b.content)},b.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},b.prototype.tip=function(){return this.$tip||(this.$tip=a(this.options.template)),this.$tip};var c=a.fn.popover;a.fn.popover=function(c){return this.each(function(){var d=a(this),e=d.data("bs.popover"),f="object"==typeof c&&c;(e||"destroy"!=c)&&(e||d.data("bs.popover",e=new b(this,f)),"string"==typeof c&&e[c]())})},a.fn.popover.Constructor=b,a.fn.popover.noConflict=function(){return a.fn.popover=c,this}}(jQuery),function(){"use strict";function a(){var a={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},b=/&(?!#?\w+;)|<|>|"|'|\//g;return function(){return this?this.replace(b,function(b){return a[b]||b}):this}}function b(a,c,d){return("string"==typeof c?c:c.toString()).replace(a.define||g,function(b,c,e,f){return 0===c.indexOf("def.")&&(c=c.substring(4)),c in d||(":"===e?(a.defineParams&&f.replace(a.defineParams,function(a,b,e){d[c]={arg:b,text:e}}),c in d||(d[c]=f)):new Function("def","def['"+c+"']="+f)(d)),""}).replace(a.use||g,function(c,e){a.useParams&&(e=e.replace(a.useParams,function(a,b,c,e){if(d[c]&&d[c].arg&&e){var f=(c+":"+e).replace(/'|\\/g,"_");return d.__exp=d.__exp||{},d.__exp[f]=d[c].text.replace(new RegExp("(^|[^\\w$])"+d[c].arg+"([^\\w$])","g"),"$1"+e+"$2"),b+"def.__exp['"+f+"']"}}));var f=new Function("def","return "+e)(d);return f?b(a,f,d):f})}function c(a){return a.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}var d,e={version:"1.0.1",templateSettings:{evaluate:/\{\{([\s\S]+?(\}?)+)\}\}/g,interpolate:/\{\{=([\s\S]+?)\}\}/g,encode:/\{\{!([\s\S]+?)\}\}/g,use:/\{\{#([\s\S]+?)\}\}/g,useParams:/(^|[^\w$])def(?:\.|\[[\'\"])([\w$\.]+)(?:[\'\"]\])?\s*\:\s*([\w$\.]+|\"[^\"]+\"|\'[^\']+\'|\{[^\}]+\})/g,define:/\{\{##\s*([\w\.$]+)\s*(\:|=)([\s\S]+?)#\}\}/g,defineParams:/^\s*([\w$]+):([\s\S]+)/,conditional:/\{\{\?(\?)?\s*([\s\S]*?)\s*\}\}/g,iterate:/\{\{~\s*(?:\}\}|([\s\S]+?)\s*\:\s*([\w$]+)\s*(?:\:\s*([\w$]+))?\s*\}\})/g,varname:"it",strip:!0,append:!0,selfcontained:!1},template:void 0,compile:void 0};"undefined"!=typeof module&&module.exports?module.exports=e:"function"==typeof define&&define.amd?define(function(){return e}):(d=function(){return this||(0,eval)("this")}(),d.doT=e),String.prototype.encodeHTML=a();var f={append:{start:"'+(",end:")+'",endencode:"||'').toString().encodeHTML()+'"},split:{start:"';out+=(",end:");out+='",endencode:"||'').toString().encodeHTML();out+='"}},g=/$^/;e.template=function(d,h,i){h=h||e.templateSettings;var j,k,l=h.append?f.append:f.split,m=0,n=h.use||h.define?b(h,d,i||{}):d;n=("var out='"+(h.strip?n.replace(/(^|\r|\n)\t* +| +\t*(\r|\n|$)/g," ").replace(/\r|\n|\t|\/\*[\s\S]*?\*\//g,""):n).replace(/'|\\/g,"\\$&").replace(h.interpolate||g,function(a,b){return l.start+c(b)+l.end}).replace(h.encode||g,function(a,b){return j=!0,l.start+c(b)+l.endencode}).replace(h.conditional||g,function(a,b,d){return b?d?"';}else if("+c(d)+"){out+='":"';}else{out+='":d?"';if("+c(d)+"){out+='":"';}out+='"}).replace(h.iterate||g,function(a,b,d,e){return b?(m+=1,k=e||"i"+m,b=c(b),"';var arr"+m+"="+b+";if(arr"+m+"){var "+d+","+k+"=-1,l"+m+"=arr"+m+".length-1;while("+k+"<l"+m+"){"+d+"=arr"+m+"["+k+"+=1];out+='"):"';} } out+='"}).replace(h.evaluate||g,function(a,b){return"';"+c(b)+"out+='"})+"';return out;").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/(\s|;|\}|^|\{)out\+='';/g,"$1").replace(/\+''/g,"").replace(/(\s|;|\}|^|\{)out\+=''\+/g,"$1out+="),j&&h.selfcontained&&(n="String.prototype.encodeHTML=("+a.toString()+"());"+n);try{return new Function(h.varname,n)}catch(a){throw"undefined"!=typeof console&&console.log("Could not create a template function: "+n),a}},e.compile=function(a,b){return e.template(a,null,b)}}(),!function(a,b){"use strict";var c,d,e=a,f=e.document,g=e.navigator,h=e.setTimeout,i=e.encodeURIComponent,j=e.ActiveXObject,k=e.Error,l=e.Number.parseInt||e.parseInt,m=e.Number.parseFloat||e.parseFloat,n=e.Number.isNaN||e.isNaN,o=e.Math.round,p=e.Date.now,q=e.Object.keys,r=e.Object.defineProperty,s=e.Object.prototype.hasOwnProperty,t=e.Array.prototype.slice,u=function(){var a=function(a){return a};if("function"==typeof e.wrap&&"function"==typeof e.unwrap)try{var b=f.createElement("div"),c=e.unwrap(b);1===b.nodeType&&c&&1===c.nodeType&&(a=e.unwrap)}catch(a){}return a}(),v=function(a){return t.call(a,0)},w=function(){var a,c,d,e,f,g,h=v(arguments),i=h[0]||{};for(a=1,c=h.length;c>a;a++)if(null!=(d=h[a]))for(e in d)s.call(d,e)&&(f=i[e],g=d[e],i!==g&&g!==b&&(i[e]=g));return i},x=function(a){var b,c,d,e;if("object"!=typeof a||null==a)b=a;else if("number"==typeof a.length)for(b=[],c=0,d=a.length;d>c;c++)s.call(a,c)&&(b[c]=x(a[c]));else{b={};for(e in a)s.call(a,e)&&(b[e]=x(a[e]))}return b},y=function(a,b){for(var c={},d=0,e=b.length;e>d;d++)b[d]in a&&(c[b[d]]=a[b[d]]);return c},z=function(a,b){var c={};for(var d in a)-1===b.indexOf(d)&&(c[d]=a[d]);return c},A=function(a){if(a)for(var b in a)s.call(a,b)&&delete a[b];return a},B=function(a,b){if(a&&1===a.nodeType&&a.ownerDocument&&b&&(1===b.nodeType&&b.ownerDocument&&b.ownerDocument===a.ownerDocument||9===b.nodeType&&!b.ownerDocument&&b===a.ownerDocument))do{if(a===b)return!0;a=a.parentNode}while(a);return!1},C=function(a){var b;return"string"==typeof a&&a&&(b=a.split("#")[0].split("?")[0],b=a.slice(0,a.lastIndexOf("/")+1)),b},D=function(a){var b,c;return"string"==typeof a&&a&&(c=a.match(/^(?:|[^:@]*@|.+\)@(?=http[s]?|file)|.+?\s+(?: at |@)(?:[^:\(]+ )*[\(]?)((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]?b=c[1]:(c=a.match(/\)@((?:http[s]?|file):\/\/[\/]?.+?\/[^:\)]*?)(?::\d+)(?::\d+)?/),c&&c[1]&&(b=c[1]))),b},E=function(){var a,b;try{throw new k}catch(a){b=a}return b&&(a=b.sourceURL||b.fileName||D(b.stack)),a},F=function(){var a,c,d;if(f.currentScript&&(a=f.currentScript.src))return a;if(c=f.getElementsByTagName("script"),1===c.length)return c[0].src||b;if("readyState"in c[0])for(d=c.length;d--;)if("interactive"===c[d].readyState&&(a=c[d].src))return a;return"loading"===f.readyState&&(a=c[c.length-1].src)?a:(a=E())?a:b},G=function(){var a,c,d,e=f.getElementsByTagName("script");for(a=e.length;a--;){if(!(d=e[a].src)){c=null;break}if(d=C(d),null==c)c=d;else if(c!==d){c=null;break}}return c||b},H=function(){var a=C(F())||G()||"";return a+"ZeroClipboard.swf"},I={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},J="11.0.0",K={},L={},M=null,N={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},O={swfPath:H(),trustedDomains:a.location.host?[a.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},P=function(a){if("object"==typeof a&&null!==a)for(var b in a)if(s.call(a,b))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(b))O[b]=a[b];else if(null==I.bridge)if("containerId"===b||"swfObjectId"===b){if(!ca(a[b]))throw new Error("The specified `"+b+"` value is not valid as an HTML4 Element ID");O[b]=a[b]}else O[b]=a[b];return"string"==typeof a&&a?s.call(O,a)?O[a]:void 0:x(O)},Q=function(){return{browser:y(g,["userAgent","platform","appName"]),flash:z(I,["bridge"]),zeroclipboard:{version:Fa.version,config:Fa.config()}}},R=function(){return!!(I.disabled||I.outdated||I.unavailable||I.deactivated)},S=function(a,b){var c,d,e,f={};if("string"==typeof a&&a)e=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)s.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&Fa.on(c,a[c]);if(e&&e.length){for(c=0,d=e.length;d>c;c++)a=e[c].replace(/^on/,""),f[a]=!0,K[a]||(K[a]=[]),K[a].push(b);if(f.ready&&I.ready&&Fa.emit({type:"ready"}),f.error){var g=["disabled","outdated","unavailable","deactivated","overdue"];for(c=0,d=g.length;d>c;c++)if(I[g[c]]===!0){Fa.emit({type:"error",name:"flash-"+g[c]});break}}}return Fa},T=function(a,b){var c,d,e,f,g;if(0===arguments.length)f=q(K);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)s.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&Fa.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=K[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return Fa},U=function(a){var b;return b="string"==typeof a&&a?x(K[a])||null:x(K)},V=function(a){var b,c,d;return a=da(a),a&&!ja(a)?"ready"===a.type&&I.overdue===!0?Fa.emit({type:"error",name:"flash-overdue"}):(b=w({},a),ia.call(this,b),"copy"===a.type&&(d=pa(L),c=d.data,M=d.formatMap),c):void 0},W=function(){if("boolean"!=typeof I.ready&&(I.ready=!1),!Fa.isFlashUnusable()&&null===I.bridge){var a=O.flashLoadTimeout;"number"==typeof a&&a>=0&&h(function(){"boolean"!=typeof I.deactivated&&(I.deactivated=!0),I.deactivated===!0&&Fa.emit({type:"error",name:"flash-deactivated"})},a),I.overdue=!1,na()}},X=function(){Fa.clearData(),Fa.blur(),Fa.emit("destroy"),oa(),Fa.off()},Y=function(a,b){var c;if("object"==typeof a&&a&&"undefined"==typeof b)c=a,Fa.clearData();else{if("string"!=typeof a||!a)return;c={},c[a]=b}for(var d in c)"string"==typeof d&&d&&s.call(c,d)&&"string"==typeof c[d]&&c[d]&&(L[d]=c[d])},Z=function(a){"undefined"==typeof a?(A(L),M=null):"string"==typeof a&&s.call(L,a)&&delete L[a]},$=function(a){return"undefined"==typeof a?x(L):"string"==typeof a&&s.call(L,a)?L[a]:void 0},_=function(a){if(a&&1===a.nodeType){c&&(xa(c,O.activeClass),c!==a&&xa(c,O.hoverClass)),c=a,wa(a,O.hoverClass);var b=a.getAttribute("title")||O.title;if("string"==typeof b&&b){var d=ma(I.bridge);d&&d.setAttribute("title",b);
}var e=O.forceHandCursor===!0||"pointer"===ya(a,"cursor");Ca(e),Ba()}},aa=function(){var a=ma(I.bridge);a&&(a.removeAttribute("title"),a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.top="1px"),c&&(xa(c,O.hoverClass),xa(c,O.activeClass),c=null)},ba=function(){return c||null},ca=function(a){return"string"==typeof a&&a&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(a)},da=function(a){var b;if("string"==typeof a&&a?(b=a,a={}):"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(b=a.type),b){!a.target&&/^(copy|aftercopy|_click)$/.test(b.toLowerCase())&&(a.target=d),w(a,{type:b.toLowerCase(),target:a.target||c||null,relatedTarget:a.relatedTarget||null,currentTarget:I&&I.bridge||null,timeStamp:a.timeStamp||p()||null});var e=N[a.type];return"error"===a.type&&a.name&&e&&(e=e[a.name]),e&&(a.message=e),"ready"===a.type&&w(a,{target:null,version:I.version}),"error"===a.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(a.name)&&w(a,{target:null,minimumVersion:J}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(a.name)&&w(a,{version:I.version})),"copy"===a.type&&(a.clipboardData={setData:Fa.setData,clearData:Fa.clearData}),"aftercopy"===a.type&&(a=qa(a,M)),a.target&&!a.relatedTarget&&(a.relatedTarget=ea(a.target)),a=fa(a)}},ea=function(a){var b=a&&a.getAttribute&&a.getAttribute("data-clipboard-target");return b?f.getElementById(b):null},fa=function(a){if(a&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)){var c=a.target,d="_mouseover"===a.type&&a.relatedTarget?a.relatedTarget:b,g="_mouseout"===a.type&&a.relatedTarget?a.relatedTarget:b,h=Aa(c),i=e.screenLeft||e.screenX||0,j=e.screenTop||e.screenY||0,k=f.body.scrollLeft+f.documentElement.scrollLeft,l=f.body.scrollTop+f.documentElement.scrollTop,m=h.left+("number"==typeof a._stageX?a._stageX:0),n=h.top+("number"==typeof a._stageY?a._stageY:0),o=m-k,p=n-l,q=i+o,r=j+p,s="number"==typeof a.movementX?a.movementX:0,t="number"==typeof a.movementY?a.movementY:0;delete a._stageX,delete a._stageY,w(a,{srcElement:c,fromElement:d,toElement:g,screenX:q,screenY:r,pageX:m,pageY:n,clientX:o,clientY:p,x:o,y:p,movementX:s,movementY:t,offsetX:0,offsetY:0,layerX:0,layerY:0})}return a},ga=function(a){var b=a&&"string"==typeof a.type&&a.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(b)},ha=function(a,b,c,d){d?h(function(){a.apply(b,c)},0):a.apply(b,c)},ia=function(a){if("object"==typeof a&&a&&a.type){var b=ga(a),c=K["*"]||[],d=K[a.type]||[],f=c.concat(d);if(f&&f.length){var g,h,i,j,k,l=this;for(g=0,h=f.length;h>g;g++)i=f[g],j=l,"string"==typeof i&&"function"==typeof e[i]&&(i=e[i]),"object"==typeof i&&i&&"function"==typeof i.handleEvent&&(j=i,i=i.handleEvent),"function"==typeof i&&(k=w({},a),ha(i,j,[k],b))}return this}},ja=function(a){var b=a.target||c||null,e="swf"===a._source;delete a._source;var f=["flash-disabled","flash-outdated","flash-unavailable","flash-deactivated","flash-overdue"];switch(a.type){case"error":-1!==f.indexOf(a.name)&&w(I,{disabled:"flash-disabled"===a.name,outdated:"flash-outdated"===a.name,unavailable:"flash-unavailable"===a.name,deactivated:"flash-deactivated"===a.name,overdue:"flash-overdue"===a.name,ready:!1});break;case"ready":var g=I.deactivated===!0;w(I,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:g,ready:!g});break;case"beforecopy":d=b;break;case"copy":var h,i,j=a.relatedTarget;!L["text/html"]&&!L["text/plain"]&&j&&(i=j.value||j.outerHTML||j.innerHTML)&&(h=j.value||j.textContent||j.innerText)?(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",h),i!==h&&a.clipboardData.setData("text/html",i)):!L["text/plain"]&&a.target&&(h=a.target.getAttribute("data-clipboard-text"))&&(a.clipboardData.clearData(),a.clipboardData.setData("text/plain",h));break;case"aftercopy":Fa.clearData(),b&&b!==va()&&b.focus&&b.focus();break;case"_mouseover":Fa.focus(b),O.bubbleEvents===!0&&e&&(b&&b!==a.relatedTarget&&!B(a.relatedTarget,b)&&ka(w({},a,{type:"mouseenter",bubbles:!1,cancelable:!1})),ka(w({},a,{type:"mouseover"})));break;case"_mouseout":Fa.blur(),O.bubbleEvents===!0&&e&&(b&&b!==a.relatedTarget&&!B(a.relatedTarget,b)&&ka(w({},a,{type:"mouseleave",bubbles:!1,cancelable:!1})),ka(w({},a,{type:"mouseout"})));break;case"_mousedown":wa(b,O.activeClass),O.bubbleEvents===!0&&e&&ka(w({},a,{type:a.type.slice(1)}));break;case"_mouseup":xa(b,O.activeClass),O.bubbleEvents===!0&&e&&ka(w({},a,{type:a.type.slice(1)}));break;case"_click":d=null,O.bubbleEvents===!0&&e&&ka(w({},a,{type:a.type.slice(1)}));break;case"_mousemove":O.bubbleEvents===!0&&e&&ka(w({},a,{type:a.type.slice(1)}))}return!!/^_(?:click|mouse(?:over|out|down|up|move))$/.test(a.type)||void 0},ka=function(a){if(a&&"string"==typeof a.type&&a){var b,c=a.target||null,d=c&&c.ownerDocument||f,g={view:d.defaultView||e,canBubble:!0,cancelable:!0,detail:"click"===a.type?1:0,button:"number"==typeof a.which?a.which-1:"number"==typeof a.button?a.button:d.createEvent?0:1},h=w(g,a);c&&d.createEvent&&c.dispatchEvent&&(h=[h.type,h.canBubble,h.cancelable,h.view,h.detail,h.screenX,h.screenY,h.clientX,h.clientY,h.ctrlKey,h.altKey,h.shiftKey,h.metaKey,h.button,h.relatedTarget],b=d.createEvent("MouseEvents"),b.initMouseEvent&&(b.initMouseEvent.apply(b,h),b._source="js",c.dispatchEvent(b)))}},la=function(){var a=f.createElement("div");return a.id=O.containerId,a.className=O.containerClass,a.style.position="absolute",a.style.left="0px",a.style.top="-9999px",a.style.width="1px",a.style.height="1px",a.style.zIndex=""+Da(O.zIndex),a},ma=function(a){for(var b=a&&a.parentNode;b&&"OBJECT"===b.nodeName&&b.parentNode;)b=b.parentNode;return b||null},na=function(){var a,b=I.bridge,c=ma(b);if(!b){var d=ua(e.location.host,O),g="never"===d?"none":"all",h=sa(O),i=O.swfPath+ra(O.swfPath,O);c=la();var j=f.createElement("div");c.appendChild(j),f.body.appendChild(c);var k=f.createElement("div"),l="activex"===I.pluginType;k.innerHTML='<object id="'+O.swfObjectId+'" name="'+O.swfObjectId+'" width="100%" height="100%" '+(l?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+i+'"')+">"+(l?'<param name="movie" value="'+i+'"/>':"")+'<param name="allowScriptAccess" value="'+d+'"/><param name="allowNetworking" value="'+g+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+h+'"/></object>',b=k.firstChild,k=null,u(b).ZeroClipboard=Fa,c.replaceChild(b,j)}return b||(b=f[O.swfObjectId],b&&(a=b.length)&&(b=b[a-1]),!b&&c&&(b=c.firstChild)),I.bridge=b||null,b},oa=function(){var a=I.bridge;if(a){var b=ma(a);b&&("activex"===I.pluginType&&"readyState"in a?(a.style.display="none",function c(){if(4===a.readyState){for(var d in a)"function"==typeof a[d]&&(a[d]=null);a.parentNode&&a.parentNode.removeChild(a),b.parentNode&&b.parentNode.removeChild(b)}else h(c,10)}()):(a.parentNode&&a.parentNode.removeChild(a),b.parentNode&&b.parentNode.removeChild(b))),I.ready=null,I.bridge=null,I.deactivated=null}},pa=function(a){var b={},c={};if("object"==typeof a&&a){for(var d in a)if(d&&s.call(a,d)&&"string"==typeof a[d]&&a[d])switch(d.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":b.text=a[d],c.text=d;break;case"text/html":case"html":case"air:html":case"flash:html":b.html=a[d],c.html=d;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":b.rtf=a[d],c.rtf=d}return{data:b,formatMap:c}}},qa=function(a,b){if("object"!=typeof a||!a||"object"!=typeof b||!b)return a;var c={};for(var d in a)if(s.call(a,d)){if("success"!==d&&"data"!==d){c[d]=a[d];continue}c[d]={};var e=a[d];for(var f in e)f&&s.call(e,f)&&s.call(b,f)&&(c[d][b[f]]=e[f])}return c},ra=function(a,b){var c=null==b||b&&b.cacheBust===!0;return c?(-1===a.indexOf("?")?"?":"&")+"noCache="+p():""},sa=function(a){var b,c,d,f,g="",h=[];if(a.trustedDomains&&("string"==typeof a.trustedDomains?f=[a.trustedDomains]:"object"==typeof a.trustedDomains&&"length"in a.trustedDomains&&(f=a.trustedDomains)),f&&f.length)for(b=0,c=f.length;c>b;b++)if(s.call(f,b)&&f[b]&&"string"==typeof f[b]){if(d=ta(f[b]),!d)continue;if("*"===d){h.length=0,h.push(d);break}h.push.apply(h,[d,"//"+d,e.location.protocol+"//"+d])}return h.length&&(g+="trustedOrigins="+i(h.join(","))),a.forceEnhancedClipboard===!0&&(g+=(g?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof a.swfObjectId&&a.swfObjectId&&(g+=(g?"&":"")+"swfObjectId="+i(a.swfObjectId)),g},ta=function(a){if(null==a||""===a)return null;if(a=a.replace(/^\s+|\s+$/g,""),""===a)return null;var b=a.indexOf("//");a=-1===b?a:a.slice(b+2);var c=a.indexOf("/");return a=-1===c?a:-1===b||0===c?null:a.slice(0,c),a&&".swf"===a.slice(-4).toLowerCase()?null:a||null},ua=function(){var a=function(a){var b,c,d,e=[];if("string"==typeof a&&(a=[a]),"object"!=typeof a||!a||"number"!=typeof a.length)return e;for(b=0,c=a.length;c>b;b++)if(s.call(a,b)&&(d=ta(a[b]))){if("*"===d){e.length=0,e.push("*");break}-1===e.indexOf(d)&&e.push(d)}return e};return function(b,c){var d=ta(c.swfPath);null===d&&(d=b);var e=a(c.trustedDomains),f=e.length;if(f>0){if(1===f&&"*"===e[0])return"always";if(-1!==e.indexOf(b))return 1===f&&b===d?"sameDomain":"always"}return"never"}}(),va=function(){try{return f.activeElement}catch(a){return null}},wa=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)||a.classList.add(b),a;if(b&&"string"==typeof b){var c=(b||"").split(/\s+/);if(1===a.nodeType)if(a.className){for(var d=" "+a.className+" ",e=a.className,f=0,g=c.length;g>f;f++)d.indexOf(" "+c[f]+" ")<0&&(e+=" "+c[f]);a.className=e.replace(/^\s+|\s+$/g,"")}else a.className=b}return a},xa=function(a,b){if(!a||1!==a.nodeType)return a;if(a.classList)return a.classList.contains(b)&&a.classList.remove(b),a;if("string"==typeof b&&b){var c=b.split(/\s+/);if(1===a.nodeType&&a.className){for(var d=(" "+a.className+" ").replace(/[\n\t]/g," "),e=0,f=c.length;f>e;e++)d=d.replace(" "+c[e]+" "," ");a.className=d.replace(/^\s+|\s+$/g,"")}}return a},ya=function(a,b){var c=e.getComputedStyle(a,null).getPropertyValue(b);return"cursor"!==b||c&&"auto"!==c||"A"!==a.nodeName?c:"pointer"},za=function(){var a,b,c,d=1;return"function"==typeof f.body.getBoundingClientRect&&(a=f.body.getBoundingClientRect(),b=a.right-a.left,c=f.body.offsetWidth,d=o(b/c*100)/100),d},Aa=function(a){var b={left:0,top:0,width:0,height:0};if(a.getBoundingClientRect){var c,d,g,h=a.getBoundingClientRect();"pageXOffset"in e&&"pageYOffset"in e?(c=e.pageXOffset,d=e.pageYOffset):(g=za(),c=o(f.documentElement.scrollLeft/g),d=o(f.documentElement.scrollTop/g));var i=f.documentElement.clientLeft||0,j=f.documentElement.clientTop||0;b.left=h.left+c-i,b.top=h.top+d-j,b.width="width"in h?h.width:h.right-h.left,b.height="height"in h?h.height:h.bottom-h.top}return b},Ba=function(){var a;if(c&&(a=ma(I.bridge))){var b=Aa(c);w(a.style,{width:b.width+"px",height:b.height+"px",top:b.top+"px",left:b.left+"px",zIndex:""+Da(O.zIndex)})}},Ca=function(a){I.ready===!0&&(I.bridge&&"function"==typeof I.bridge.setHandCursor?I.bridge.setHandCursor(a):I.ready=!1)},Da=function(a){if(/^(?:auto|inherit)$/.test(a))return a;var b;return"number"!=typeof a||n(a)?"string"==typeof a&&(b=Da(l(a,10))):b=a,"number"==typeof b?b:"auto"},Ea=function(a){function b(a){var b=a.match(/[\d]+/g);return b.length=3,b.join(".")}function c(a){return!!a&&(a=a.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(a)||"chrome.plugin"===a.slice(-13))}function d(a){a&&(i=!0,a.version&&(l=b(a.version)),!l&&a.description&&(l=b(a.description)),a.filename&&(k=c(a.filename)))}var e,f,h,i=!1,j=!1,k=!1,l="";if(g.plugins&&g.plugins.length)e=g.plugins["Shockwave Flash"],d(e),g.plugins["Shockwave Flash 2.0"]&&(i=!0,l="2.0.0.11");else if(g.mimeTypes&&g.mimeTypes.length)h=g.mimeTypes["application/x-shockwave-flash"],e=h&&h.enabledPlugin,d(e);else if("undefined"!=typeof a){j=!0;try{f=new a("ShockwaveFlash.ShockwaveFlash.7"),i=!0,l=b(f.GetVariable("$version"))}catch(c){try{f=new a("ShockwaveFlash.ShockwaveFlash.6"),i=!0,l="6.0.21"}catch(c){try{f=new a("ShockwaveFlash.ShockwaveFlash"),i=!0,l=b(f.GetVariable("$version"))}catch(a){j=!1}}}}I.disabled=i!==!0,I.outdated=l&&m(l)<m(J),I.version=l||"0.0.0",I.pluginType=k?"pepper":j?"activex":i?"netscape":"unknown"};Ea(j);var Fa=function(){return this instanceof Fa?void("function"==typeof Fa._createClient&&Fa._createClient.apply(this,v(arguments))):new Fa};r(Fa,"version",{value:"2.1.6",writable:!1,configurable:!0,enumerable:!0}),Fa.config=function(){return P.apply(this,v(arguments))},Fa.state=function(){return Q.apply(this,v(arguments))},Fa.isFlashUnusable=function(){return R.apply(this,v(arguments))},Fa.on=function(){return S.apply(this,v(arguments))},Fa.off=function(){return T.apply(this,v(arguments))},Fa.handlers=function(){return U.apply(this,v(arguments))},Fa.emit=function(){return V.apply(this,v(arguments))},Fa.create=function(){return W.apply(this,v(arguments))},Fa.destroy=function(){return X.apply(this,v(arguments))},Fa.setData=function(){return Y.apply(this,v(arguments))},Fa.clearData=function(){return Z.apply(this,v(arguments))},Fa.getData=function(){return $.apply(this,v(arguments))},Fa.focus=Fa.activate=function(){return _.apply(this,v(arguments))},Fa.blur=Fa.deactivate=function(){return aa.apply(this,v(arguments))},Fa.activeElement=function(){return ba.apply(this,v(arguments))};var Ga=0,Ha={},Ia=0,Ja={},Ka={};w(O,{autoActivate:!0});var La=function(a){var b=this;b.id=""+Ga++,Ha[b.id]={instance:b,elements:[],handlers:{}},a&&b.clip(a),Fa.on("*",function(a){return b.emit(a)}),Fa.on("destroy",function(){b.destroy()}),Fa.create()},Ma=function(a,b){var c,d,e,f={},g=Ha[this.id]&&Ha[this.id].handlers;if("string"==typeof a&&a)e=a.toLowerCase().split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)s.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.on(c,a[c]);if(e&&e.length){for(c=0,d=e.length;d>c;c++)a=e[c].replace(/^on/,""),f[a]=!0,g[a]||(g[a]=[]),g[a].push(b);if(f.ready&&I.ready&&this.emit({type:"ready",client:this}),f.error){var h=["disabled","outdated","unavailable","deactivated","overdue"];for(c=0,d=h.length;d>c;c++)if(I[h[c]]){this.emit({type:"error",name:"flash-"+h[c],client:this});break}}}return this},Na=function(a,b){var c,d,e,f,g,h=Ha[this.id]&&Ha[this.id].handlers;if(0===arguments.length)f=q(h);else if("string"==typeof a&&a)f=a.split(/\s+/);else if("object"==typeof a&&a&&"undefined"==typeof b)for(c in a)s.call(a,c)&&"string"==typeof c&&c&&"function"==typeof a[c]&&this.off(c,a[c]);if(f&&f.length)for(c=0,d=f.length;d>c;c++)if(a=f[c].toLowerCase().replace(/^on/,""),g=h[a],g&&g.length)if(b)for(e=g.indexOf(b);-1!==e;)g.splice(e,1),e=g.indexOf(b,e);else g.length=0;return this},Oa=function(a){var b=null,c=Ha[this.id]&&Ha[this.id].handlers;return c&&(b="string"==typeof a&&a?c[a]?c[a].slice(0):[]:x(c)),b},Pa=function(a){if(Ua.call(this,a)){"object"==typeof a&&a&&"string"==typeof a.type&&a.type&&(a=w({},a));var b=w({},da(a),{client:this});Va.call(this,b)}return this},Qa=function(a){a=Wa(a);for(var b=0;b<a.length;b++)if(s.call(a,b)&&a[b]&&1===a[b].nodeType){a[b].zcClippingId?-1===Ja[a[b].zcClippingId].indexOf(this.id)&&Ja[a[b].zcClippingId].push(this.id):(a[b].zcClippingId="zcClippingId_"+Ia++,Ja[a[b].zcClippingId]=[this.id],O.autoActivate===!0&&Xa(a[b]));var c=Ha[this.id]&&Ha[this.id].elements;-1===c.indexOf(a[b])&&c.push(a[b])}return this},Ra=function(a){var b=Ha[this.id];if(!b)return this;var c,d=b.elements;a="undefined"==typeof a?d.slice(0):Wa(a);for(var e=a.length;e--;)if(s.call(a,e)&&a[e]&&1===a[e].nodeType){for(c=0;-1!==(c=d.indexOf(a[e],c));)d.splice(c,1);var f=Ja[a[e].zcClippingId];if(f){for(c=0;-1!==(c=f.indexOf(this.id,c));)f.splice(c,1);0===f.length&&(O.autoActivate===!0&&Ya(a[e]),delete a[e].zcClippingId)}}return this},Sa=function(){var a=Ha[this.id];return a&&a.elements?a.elements.slice(0):[]},Ta=function(){this.unclip(),this.off(),delete Ha[this.id]},Ua=function(a){if(!a||!a.type)return!1;if(a.client&&a.client!==this)return!1;var b=Ha[this.id]&&Ha[this.id].elements,c=!!b&&b.length>0,d=!a.target||c&&-1!==b.indexOf(a.target),e=a.relatedTarget&&c&&-1!==b.indexOf(a.relatedTarget),f=a.client&&a.client===this;return!!(d||e||f)},Va=function(a){if("object"==typeof a&&a&&a.type){var b=ga(a),c=Ha[this.id]&&Ha[this.id].handlers["*"]||[],d=Ha[this.id]&&Ha[this.id].handlers[a.type]||[],f=c.concat(d);if(f&&f.length){var g,h,i,j,k,l=this;for(g=0,h=f.length;h>g;g++)i=f[g],j=l,"string"==typeof i&&"function"==typeof e[i]&&(i=e[i]),"object"==typeof i&&i&&"function"==typeof i.handleEvent&&(j=i,i=i.handleEvent),"function"==typeof i&&(k=w({},a),ha(i,j,[k],b))}return this}},Wa=function(a){return"string"==typeof a&&(a=[]),"number"!=typeof a.length?[a]:a},Xa=function(a){if(a&&1===a.nodeType){var b=function(a){(a||(a=e.event))&&("js"!==a._source&&(a.stopImmediatePropagation(),a.preventDefault()),delete a._source)},c=function(c){(c||(c=e.event))&&(b(c),Fa.focus(a))};a.addEventListener("mouseover",c,!1),a.addEventListener("mouseout",b,!1),a.addEventListener("mouseenter",b,!1),a.addEventListener("mouseleave",b,!1),a.addEventListener("mousemove",b,!1),Ka[a.zcClippingId]={mouseover:c,mouseout:b,mouseenter:b,mouseleave:b,mousemove:b}}},Ya=function(a){if(a&&1===a.nodeType){var b=Ka[a.zcClippingId];if("object"==typeof b&&b){for(var c,d,e=["move","leave","enter","out","over"],f=0,g=e.length;g>f;f++)c="mouse"+e[f],d=b[c],"function"==typeof d&&a.removeEventListener(c,d,!1);delete Ka[a.zcClippingId]}}};Fa._createClient=function(){La.apply(this,v(arguments))},Fa.prototype.on=function(){return Ma.apply(this,v(arguments))},Fa.prototype.off=function(){return Na.apply(this,v(arguments))},Fa.prototype.handlers=function(){return Oa.apply(this,v(arguments))},Fa.prototype.emit=function(){return Pa.apply(this,v(arguments))},Fa.prototype.clip=function(){return Qa.apply(this,v(arguments))},Fa.prototype.unclip=function(){return Ra.apply(this,v(arguments))},Fa.prototype.elements=function(){return Sa.apply(this,v(arguments))},Fa.prototype.destroy=function(){return Ta.apply(this,v(arguments))},Fa.prototype.setText=function(a){return Fa.setData("text/plain",a),this},Fa.prototype.setHtml=function(a){return Fa.setData("text/html",a),this},Fa.prototype.setRichText=function(a){return Fa.setData("application/rtf",a),this},Fa.prototype.setData=function(){return Fa.setData.apply(this,v(arguments)),this},Fa.prototype.clearData=function(){return Fa.clearData.apply(this,v(arguments)),this},Fa.prototype.getData=function(){return Fa.getData.apply(this,v(arguments))},"function"==typeof define&&define.amd?define(function(){return Fa}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=Fa:a.ZeroClipboard=Fa}(function(){return this||window}()),angular.module("ngClipboard",[]).provider("ngClip",function(){var a=this;return this.path="//cdnjs.cloudflare.com/ajax/libs/zeroclipboard/2.1.1/ZeroClipboard.swf",{setPath:function(b){a.path=b},$get:function(){return{path:a.path}}}}).run(["ngClip",function(a){ZeroClipboard.config({swfPath:a.path,trustedDomains:["*"],allowScriptAccess:"always",forceHandCursor:!0})}]).directive("clipCopy",["ngClip",function(){return{scope:{clipCopy:"&",clipClick:"&"},restrict:"A",link:function(a,b,c){var d=new ZeroClipboard(b);""===c.clipCopy&&(a.clipCopy=function(){return b[0].previousElementSibling.innerText}),d.on("ready",function(){d.on("copy",function(b){var c=b.clipboardData;c.setData("text/plain",a.$eval(a.clipCopy))}),d.on("aftercopy",function(){angular.isDefined(c.clipClick)&&a.$apply(a.clipClick)}),a.$on("$destroy",function(){d.destroy()})})}}}]),function(a,b,c){function d(a,b,c){return a.addEventListener?void a.addEventListener(b,c,!1):void a.attachEvent("on"+b,c)}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return z[a.which]?z[a.which]:A[a.which]?A[a.which]:String.fromCharCode(a.which).toLowerCase()}function f(a,b){return a.sort().join(",")===b.sort().join(",")}function g(a){a=a||{};var b,c=!1;for(b in F)a[b]?c=!0:F[b]=0;c||(I=!1)}function h(a,b,c,d,e,g){var h,i,j=[],k=c.type;if(!D[a])return[];for("keyup"==k&&o(a)&&(b=[a]),h=0;h<D[a].length;++h)if(i=D[a][h],(d||!i.seq||F[i.seq]==i.level)&&k==i.action&&("keypress"==k&&!c.metaKey&&!c.ctrlKey||f(b,i.modifiers))){var l=!d&&i.combo==e,m=d&&i.seq==d&&i.level==g;(l||m)&&D[a].splice(h,1),j.push(i)}return j}function i(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function j(a){return a.preventDefault?void a.preventDefault():void(a.returnValue=!1)}function k(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)}function l(a,b,c,d){K.stopCallback(b,b.target||b.srcElement,c,d)||a(b,c)===!1&&(j(b),k(b))}function m(a,b,c){var d,e=h(a,b,c),f={},i=0,j=!1;for(d=0;d<e.length;++d)e[d].seq&&(i=Math.max(i,e[d].level));for(d=0;d<e.length;++d)if(e[d].seq){if(e[d].level!=i)continue;j=!0,f[e[d].seq]=1,l(e[d].callback,c,e[d].combo,e[d].seq)}else j||l(e[d].callback,c,e[d].combo);var k="keypress"==c.type&&H;c.type!=I||o(a)||k||g(f),H=j&&"keydown"==c.type}function n(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);if(b)return"keyup"==a.type&&G===b?void(G=!1):void K.handleKey(b,i(a),a)}function o(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function p(){clearTimeout(y),y=setTimeout(g,1e3)}function q(){if(!x){x={};for(var a in z)a>95&&a<112||z.hasOwnProperty(a)&&(x[z[a]]=a)}return x}function r(a,b,c){return c||(c=q()[a]?"keydown":"keypress"),"keypress"==c&&b.length&&(c="keydown"),c}function s(a,b,c,d){function f(b){return function(){I=b,++F[a],p()}}function h(b){l(c,b,a),"keyup"!==d&&(G=e(b)),setTimeout(g,10)}F[a]=0;for(var i=0;i<b.length;++i){var j=i+1===b.length,k=j?h:f(d||u(b[i+1]).action);v(b[i],k,d,a,i)}}function t(a){return"+"===a?["+"]:a.split("+")}function u(a,b){var c,d,e,f=[];for(c=t(a),e=0;e<c.length;++e)d=c[e],C[d]&&(d=C[d]),b&&"keypress"!=b&&B[d]&&(d=B[d],f.push("shift")),o(d)&&f.push(d);return b=r(d,f,b),{key:d,modifiers:f,action:b}}function v(a,b,c,d,e){E[a+":"+c]=b,a=a.replace(/\s+/g," ");var f,g=a.split(" ");return g.length>1?void s(a,g,b,c):(f=u(a,c),D[f.key]=D[f.key]||[],h(f.key,f.modifiers,{type:f.action},d,a,e),void D[f.key][d?"unshift":"push"]({callback:b,modifiers:f.modifiers,action:f.action,seq:d,level:e,combo:a}))}function w(a,b,c){for(var d=0;d<a.length;++d)v(a[d],b,c)}for(var x,y,z={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},A={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},B={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},C={option:"alt",command:"meta",return:"enter",escape:"esc",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},D={},E={},F={},G=!1,H=!1,I=!1,J=1;J<20;++J)z[111+J]="f"+J;for(J=0;J<=9;++J)z[J+96]=J;d(b,"keypress",n),d(b,"keydown",n),d(b,"keyup",n);var K={bind:function(a,b,c){return a=a instanceof Array?a:[a],w(a,b,c),this},unbind:function(a,b){return K.bind(a,function(){},b)},trigger:function(a,b){return E[a+":"+b]&&E[a+":"+b]({},a),this},reset:function(){return D={},E={},this},stopCallback:function(a,b){return!((" "+b.className+" ").indexOf(" mousetrap ")>-1)&&("INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable)},handleKey:m};a.Mousetrap=K,"function"==typeof define&&define.amd&&define(K)}(window,document),function(){"use strict";angular.module("cfp.hotkeys",[]).provider("hotkeys",["$injector",function(a){this.includeCheatSheet=!0,this.useNgRoute=a.has("ngViewDirective"),this.templateTitle="Keyboard Shortcuts:",this.templateHeader=null,this.templateFooter=null,this.template='<div class="cfp-hotkeys-container fade" ng-class="{in: helpVisible}" style="display: none;"><div class="cfp-hotkeys"><h4 class="cfp-hotkeys-title" ng-if="!header">{{ title }}</h4><div ng-bind-html="header" ng-if="header"></div><table><tbody><tr ng-repeat="hotkey in hotkeys | filter:{ description: \'!$$undefined$$\' }"><td class="cfp-hotkeys-keys"><span ng-repeat="key in hotkey.format() track by $index" class="cfp-hotkeys-key">{{ key }}</span></td><td class="cfp-hotkeys-text">{{ hotkey.description }}</td></tr></tbody></table><div ng-bind-html="footer" ng-if="footer"></div><div class="cfp-hotkeys-close" ng-click="toggleCheatSheet()">&#215;</div></div></div>',this.cheatSheetHotkey="?",this.cheatSheetDescription="Show / hide this help menu",this.$get=["$rootElement","$rootScope","$compile","$window","$document",function(a,b,c,d,e){function f(){q=!1}function g(){q=!0}function h(a){var b={command:"",shift:"",left:"",right:"",up:"",down:"",return:"",backspace:""};a=a.split("+");for(var c=0;c<a.length;c++)"mod"===a[c]&&(d.navigator&&d.navigator.platform.indexOf("Mac")>=0?a[c]="command":a[c]="ctrl"),a[c]=b[a[c]]||a[c];return a.join(" + ")}function i(a,b,c,d,e,f){this.combo=a instanceof Array?a:[a],this.description=b,this.callback=c,this.action=d,this.allowIn=e,this.persistent=f,this._formated=null}function j(){for(var a=r.hotkeys.length;a--;){var b=r.hotkeys[a];b&&!b.persistent&&m(b)}}function k(){r.helpVisible=!r.helpVisible,r.helpVisible?(w=n("esc"),m("esc"),l("esc",w.description,k,null,["INPUT","SELECT","TEXTAREA"])):(m("esc"),w!==!1&&l(w))}function l(a,b,c,d,e,f){var g,h=["INPUT","SELECT","TEXTAREA"],j=Object.prototype.toString.call(a);if("[object Object]"===j&&(b=a.description,c=a.callback,d=a.action,f=a.persistent,e=a.allowIn,a=a.combo),m(a),b instanceof Function?(d=c,c=b,b="$$undefined$$"):angular.isUndefined(b)&&(b="$$undefined$$"),void 0===f&&(f=!0),"function"==typeof c){g=c,e instanceof Array||(e=[]);for(var k,l=0;l<e.length;l++)e[l]=e[l].toUpperCase(),k=h.indexOf(e[l]),k!==-1&&h.splice(k,1);c=function(a){var b=!0;if(a){var c=a.target||a.srcElement,d=c.nodeName.toUpperCase();if((" "+c.className+" ").indexOf(" mousetrap ")>-1)b=!0;else for(var e=0;e<h.length;e++)if(h[e]===d){b=!1;break}}b&&p(g.apply(this,arguments))}}"string"==typeof d?Mousetrap.bind(a,p(c),d):Mousetrap.bind(a,p(c));var n=new i(a,b,c,d,e,f);return r.hotkeys.push(n),n}function m(a){var b=a instanceof i?a.combo:a;if(Mousetrap.unbind(b),angular.isArray(b)){for(var c=!0,d=b.length;d--;)c=m(b[d])&&c;return c}var e=r.hotkeys.indexOf(n(b));return e>-1&&(r.hotkeys[e].combo.length>1?r.hotkeys[e].combo.splice(r.hotkeys[e].combo.indexOf(b),1):(angular.forEach(s,function(a){var b=a.indexOf(r.hotkeys[e]);b!==-1&&a.splice(b,1)}),r.hotkeys.splice(e,1)),!0)}function n(a){if(!a)return r.hotkeys;for(var b,c=0;c<r.hotkeys.length;c++)if(b=r.hotkeys[c],b.combo.indexOf(a)>-1)return b;return!1}function o(a){return a.$id in s||(s[a.$id]=[],a.$on("$destroy",function(){for(var b=s[a.$id].length;b--;)m(s[a.$id].pop())})),{add:function(b){var c;return c=arguments.length>1?l.apply(this,arguments):l(b),s[a.$id].push(c),this}}}function p(a){return function(c,d){if(a instanceof Array){var e=a[0],f=a[1];a=function(a){f.scope.$eval(e)}}b.$apply(function(){a(c,n(d))})}}var q=!0;Mousetrap.prototype.stopCallback=function(a,b){return!q||!((" "+b.className+" ").indexOf(" mousetrap ")>-1)&&(b.contentEditable&&"true"==b.contentEditable)},i.prototype.format=function(){if(null===this._formated){for(var a=this.combo[0],b=a.split(/[\s]/),c=0;c<b.length;c++)b[c]=h(b[c]);this._formated=b}return this._formated};var r=b.$new();r.hotkeys=[],r.helpVisible=!1,r.title=this.templateTitle,r.header=this.templateHeader,r.footer=this.templateFooter,r.toggleCheatSheet=k;var s={};if(this.useNgRoute&&b.$on("$routeChangeSuccess",function(a,b){j(),b&&b.hotkeys&&angular.forEach(b.hotkeys,function(a){var c=a[2];("string"==typeof c||c instanceof String)&&(a[2]=[c,b]),a[5]=!1,l.apply(this,a)})}),this.includeCheatSheet){var t=e[0],u=a[0],v=angular.element(this.template);l(this.cheatSheetHotkey,this.cheatSheetDescription,k),u!==t&&u!==t.documentElement||(u=t.body),angular.element(u).append(c(v)(r))}var w=!1,x={add:l,del:m,get:n,bindTo:o,template:this.template,toggleCheatSheet:k,includeCheatSheet:this.includeCheatSheet,cheatSheetHotkey:this.cheatSheetHotkey,cheatSheetDescription:this.cheatSheetDescription,useNgRoute:this.useNgRoute,purgeHotkeys:j,templateTitle:this.templateTitle,pause:f,unpause:g};return x}]}]).directive("hotkey",["hotkeys",function(a){return{restrict:"A",link:function(b,c,d){var e,f=[];angular.forEach(b.$eval(d.hotkey),function(b,c){e="string"==typeof d.hotkeyAllowIn?d.hotkeyAllowIn.split(/[\s,]+/):[],f.push(c),a.add({combo:c,description:d.hotkeyDescription,callback:b,action:d.hotkeyAction,allowIn:e})}),c.bind("$destroy",function(){angular.forEach(f,a.del)})}}}]).run(["hotkeys",function(a){}])}(),function(a,b,c){function d(a,b,c){return a.addEventListener?void a.addEventListener(b,c,!1):void a.attachEvent("on"+b,c)}function e(a){if("keypress"==a.type){var b=String.fromCharCode(a.which);return a.shiftKey||(b=b.toLowerCase()),b}return r[a.which]?r[a.which]:s[a.which]?s[a.which]:String.fromCharCode(a.which).toLowerCase()}function f(a,b){return a.sort().join(",")===b.sort().join(",")}function g(a){var b=[];return a.shiftKey&&b.push("shift"),a.altKey&&b.push("alt"),a.ctrlKey&&b.push("ctrl"),a.metaKey&&b.push("meta"),b}function h(a){return a.preventDefault?void a.preventDefault():void(a.returnValue=!1)}function i(a){return a.stopPropagation?void a.stopPropagation():void(a.cancelBubble=!0)}function j(a){return"shift"==a||"ctrl"==a||"alt"==a||"meta"==a}function k(){if(!q){q={};for(var a in r)a>95&&a<112||r.hasOwnProperty(a)&&(q[r[a]]=a)}return q}function l(a,b,c){return c||(c=k()[a]?"keydown":"keypress"),"keypress"==c&&b.length&&(c="keydown"),c}function m(a){return"+"===a?["+"]:(a=a.replace(/\+{2}/g,"+plus"),a.split("+"))}function n(a,b){var c,d,e,f=[];for(c=m(a),e=0;e<c.length;++e)d=c[e],u[d]&&(d=u[d]),b&&"keypress"!=b&&t[d]&&(d=t[d],f.push("shift")),j(d)&&f.push(d);return b=l(d,f,b),{key:d,modifiers:f,action:b}}function o(a,c){return a!==b&&(a===c||o(a.parentNode,c))}function p(a){function c(a){a=a||{};var b,c=!1;for(b in u)a[b]?c=!0:u[b]=0;c||(x=!1)}function k(a,b,c,d,e,g){var h,i,k=[],l=c.type;if(!s._callbacks[a])return[];for("keyup"==l&&j(a)&&(b=[a]),h=0;h<s._callbacks[a].length;++h)if(i=s._callbacks[a][h],(d||!i.seq||u[i.seq]==i.level)&&l==i.action&&("keypress"==l&&!c.metaKey&&!c.ctrlKey||f(b,i.modifiers))){var m=!d&&i.combo==e,n=d&&i.seq==d&&i.level==g;(m||n)&&s._callbacks[a].splice(h,1),k.push(i)}return k}function l(a,b,c,d){s.stopCallback(b,b.target||b.srcElement,c,d)||a(b,c)===!1&&(h(b),i(b))}function m(a){"number"!=typeof a.which&&(a.which=a.keyCode);var b=e(a);if(b)return"keyup"==a.type&&v===b?void(v=!1):void s.handleKey(b,g(a),a)}function o(){clearTimeout(t),t=setTimeout(c,1e3)}function q(a,b,d,f){function g(b){return function(){x=b,++u[a],o()}}function h(b){l(d,b,a),"keyup"!==f&&(v=e(b)),setTimeout(c,10)}u[a]=0;for(var i=0;i<b.length;++i){var j=i+1===b.length,k=j?h:g(f||n(b[i+1]).action);r(b[i],k,f,a,i)}}function r(a,b,c,d,e){s._directMap[a+":"+c]=b,a=a.replace(/\s+/g," ");var f,g=a.split(" ");return g.length>1?void q(a,g,b,c):(f=n(a,c),s._callbacks[f.key]=s._callbacks[f.key]||[],k(f.key,f.modifiers,{type:f.action},d,a,e),void s._callbacks[f.key][d?"unshift":"push"]({callback:b,modifiers:f.modifiers,action:f.action,seq:d,level:e,combo:a}))}var s=this;if(a=a||b,!(s instanceof p))return new p(a);s.target=a,s._callbacks={},s._directMap={};var t,u={},v=!1,w=!1,x=!1;s._handleKey=function(a,b,d){var e,f=k(a,b,d),g={},h=0,i=!1;for(e=0;e<f.length;++e)f[e].seq&&(h=Math.max(h,f[e].level));for(e=0;e<f.length;++e)if(f[e].seq){if(f[e].level!=h)continue;i=!0,g[f[e].seq]=1,l(f[e].callback,d,f[e].combo,f[e].seq)}else i||l(f[e].callback,d,f[e].combo);var m="keypress"==d.type&&w;d.type!=x||j(a)||m||c(g),w=i&&"keydown"==d.type},s._bindMultiple=function(a,b,c){for(var d=0;d<a.length;++d)r(a[d],b,c);
},d(a,"keypress",m),d(a,"keydown",m),d(a,"keyup",m)}for(var q,r={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},s={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},t={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},u={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"},v=1;v<20;++v)r[111+v]="f"+v;for(v=0;v<=9;++v)r[v+96]=v;p.prototype.bind=function(a,b,c){var d=this;return a=a instanceof Array?a:[a],d._bindMultiple.call(d,a,b,c),d},p.prototype.unbind=function(a,b){var c=this;return c.bind.call(c,a,function(){},b)},p.prototype.trigger=function(a,b){var c=this;return c._directMap[a+":"+b]&&c._directMap[a+":"+b]({},a),c},p.prototype.reset=function(){var a=this;return a._callbacks={},a._directMap={},a},p.prototype.stopCallback=function(a,b){var c=this;return!((" "+b.className+" ").indexOf(" mousetrap ")>-1)&&(!o(b,c.target)&&("INPUT"==b.tagName||"SELECT"==b.tagName||"TEXTAREA"==b.tagName||b.isContentEditable))},p.prototype.handleKey=function(){var a=this;return a._handleKey.apply(a,arguments)},p.init=function(){var a=p(b);for(var c in a)"_"!==c.charAt(0)&&(p[c]=function(b){return function(){return a[b].apply(a,arguments)}}(c))},p.init(),a.Mousetrap=p,"undefined"!=typeof module&&module.exports&&(module.exports=p),"function"==typeof define&&define.amd&&define(function(){return p})}(window,document),angular.module("ngDraggable",[]).service("ngDraggable",[function(){var a=this;a.inputEvent=function(a){return angular.isDefined(a.touches)?a.touches[0]:angular.isDefined(a.originalEvent)&&angular.isDefined(a.originalEvent.touches)?a.originalEvent.touches[0]:a},a.touchTimeout=100}]).directive("ngDrag",["$rootScope","$parse","$document","$window","ngDraggable",function(a,b,c,d,e){return{restrict:"A",link:function(f,g,h){f.value=h.ngDrag;var i,j,k,l,m,n,o,p,q=!1,r=("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,"touchstart mousedown"),s="touchmove mousemove",t="touchend mouseup",u=f.$id,v=null,w=null,x=!1,y=null,z=b(h.ngDragStart)||null,A=b(h.ngDragStop)||null,B=b(h.ngDragSuccess)||null,C=!angular.isDefined(h.allowTransform)||f.$eval(h.allowTransform),D=b(h.ngDragData),E=angular.noop,F=function(){if(g.attr("draggable","false"),g[0].querySelectorAll)var a=angular.element(g[0].querySelectorAll("[ng-drag-handle]"));else var a=g.find("[ng-drag-handle]");a.length&&(p=a),G(!0)},G=function(a){a&&(f.$on("$destroy",H),f.$watch(h.ngDrag,I),f.$watch(h.ngCenterAnchor,J),p?p.on(r,L):g.on(r,L),"img"==g[0].nodeName.toLowerCase()&&g.on("mousedown",function(){return!1}))},H=function(a){G(!1)},I=function(a,b){x=a},J=function(a,b){angular.isDefined(a)&&(q=a||"true")},K=function(a){return angular.isDefined(angular.element(a.target).attr("ng-cancel-drag"))},L=function(a){if(x&&!K(a)&&("mousedown"!=a.type||0==a.button)){var b="touchstart"===a.type;b?(M(),y=setTimeout(function(){M(),N(a)},e.touchTimeout),c.on(s,M),c.on(t,M)):N(a)}},M=function(){clearTimeout(y),c.off(s,M),c.off(t,M)},N=function(b){x&&(b.preventDefault(),i=g[0].getBoundingClientRect(),w=C?i:{left:document.body.scrollLeft,top:document.body.scrollTop},g.centerX=g[0].offsetWidth/2,g.centerY=g[0].offsetHeight/2,j=e.inputEvent(b).pageX,k=e.inputEvent(b).pageY,n=j-i.left,o=k-i.top,q?(l=j-g.centerX-d.pageXOffset,m=k-g.centerY-d.pageYOffset):(l=j-n-d.pageXOffset,m=k-o-d.pageYOffset),c.on(s,O),c.on(t,P),E=a.$on("draggable:_triggerHandlerMove",function(a,b){O(b)}))},O=function(b){x&&(b.preventDefault(),g.hasClass("dragging")||(v=D(f),g.addClass("dragging"),a.$broadcast("draggable:start",{x:j,y:k,tx:l,ty:m,event:b,element:g,data:v}),z&&f.$apply(function(){z(f,{$data:v,$event:b})})),j=e.inputEvent(b).pageX,k=e.inputEvent(b).pageY,q?(l=j-g.centerX-w.left,m=k-g.centerY-w.top):(l=j-n-w.left,m=k-o-w.top),S(l,m),a.$broadcast("draggable:move",{x:j,y:k,tx:l,ty:m,event:b,element:g,data:v,uid:u,dragOffset:w}))},P=function(b){x&&(b.preventDefault(),a.$broadcast("draggable:end",{x:j,y:k,tx:l,ty:m,event:b,element:g,data:v,callback:Q,uid:u}),g.removeClass("dragging"),g.parent().find(".drag-enter").removeClass("drag-enter"),R(),c.off(s,O),c.off(t,P),A&&f.$apply(function(){A(f,{$data:v,$event:b})}),E())},Q=function(a){B&&f.$apply(function(){B(f,{$data:v,$event:a})})},R=function(){C?g.css({transform:"","z-index":"","-webkit-transform":"","-ms-transform":""}):g.css({position:"",top:"",left:""})},S=function(a,b){C?g.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+b+", 0, 1)","z-index":99999,"-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+b+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+a+", "+b+")"}):g.css({left:a+"px",top:b+"px",position:"fixed"})};F()}}}]).directive("ngDrop",["$parse","$timeout","$window","$document","ngDraggable",function(a,b,c,d,e){return{restrict:"A",link:function(c,e,f){c.value=f.ngDrop,c.isTouching=!1;var g=null,h=c.$id,i=!1,j=a(f.ngDropSuccess),k=a(f.ngDragStart),l=a(f.ngDragStop),m=a(f.ngDragMove),n=function(){o(!0)},o=function(a){a&&(c.$watch(f.ngDrop,q),c.$on("$destroy",p),c.$on("draggable:start",r),c.$on("draggable:move",s),c.$on("draggable:end",t))},p=function(a){o(!1)},q=function(a,b){i=a},r=function(a,d){i&&(u(d.x,d.y,d.element),f.ngDragStart&&b(function(){k(c,{$data:d.data,$event:d})}))},s=function(a,d){i&&(u(d.x,d.y,d.element),f.ngDragMove&&b(function(){m(c,{$data:d.data,$event:d})}))},t=function(a,d){return i&&h!==d.uid?(u(d.x,d.y,d.element)&&(d.callback&&d.callback(d),f.ngDropSuccess&&b(function(){j(c,{$data:d.data,$event:d,$target:c.$eval(c.value)})})),f.ngDragStop&&b(function(){l(c,{$data:d.data,$event:d})}),void v(!1,d.element)):void v(!1,d.element)},u=function(a,b,d){var f=w(a,b);return c.isTouching=f,f&&(g=e),v(f,d),f},v=function(a,b){a?(e.addClass("drag-enter"),b.addClass("drag-over")):g==e&&(g=null,e.removeClass("drag-enter"),b.removeClass("drag-over"))},w=function(a,b){var c=e[0].getBoundingClientRect();return a-=d[0].body.scrollLeft+d[0].documentElement.scrollLeft,b-=d[0].body.scrollTop+d[0].documentElement.scrollTop,a>=c.left&&a<=c.right&&b<=c.bottom&&b>=c.top};n()}}}]).directive("ngDragClone",["$parse","$timeout","ngDraggable",function(a,b,c){return{restrict:"A",link:function(a,b,c){var d,e=!0;a.clonedData={};var f=function(){d=b.find("img"),b.attr("draggable","false"),d.attr("draggable","false"),l(),g(!0)},g=function(b){b&&(a.$on("draggable:start",i),a.$on("draggable:move",j),a.$on("draggable:end",k),h())},h=function(){d.off("mousedown touchstart touchmove touchend touchcancel",n),d.on("mousedown touchstart touchmove touchend touchcancel",n)},i=function(c,d,f){e=!0,angular.isDefined(d.data.allowClone)&&(e=d.data.allowClone),e&&(a.$apply(function(){a.clonedData=d.data}),b.css("width",d.element[0].offsetWidth),b.css("height",d.element[0].offsetHeight),m(d.tx,d.ty))},j=function(a,b){e&&(_tx=b.tx+b.dragOffset.left,_ty=b.ty+b.dragOffset.top,m(_tx,_ty))},k=function(a,b){e&&l()},l=function(){b.css({left:0,top:0,position:"fixed","z-index":-1,visibility:"hidden"})},m=function(a,c){b.css({transform:"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+c+", 0, 1)","z-index":99999,visibility:"visible","-webkit-transform":"matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, "+a+", "+c+", 0, 1)","-ms-transform":"matrix(1, 0, 0, 1, "+a+", "+c+")"})},n=function(a){var b=a;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,!1};f()}}}]).directive("ngPreventDrag",["$parse","$timeout",function(a,b){return{restrict:"A",link:function(a,b,c){var d=function(){b.attr("draggable","false"),e(!0)},e=function(a){a&&b.on("mousedown touchstart touchmove touchend touchcancel",f)},f=function(a){var b=a.originalEvent;return b.preventDefault&&b.preventDefault(),b.stopPropagation&&b.stopPropagation(),b.cancelBubble=!0,b.returnValue=!1,!1};d()}}}]).directive("ngCancelDrag",[function(){return{restrict:"A",link:function(a,b,c){b.find("*").attr("ng-cancel-drag","ng-cancel-drag")}}}]).directive("ngDragScroll",["$window","$interval","$timeout","$document","$rootScope",function(a,b,c,d,e){return{restrict:"A",link:function(b,c,f){var g=null,h={verticalScroll:f.verticalScroll||!0,horizontalScroll:f.horizontalScroll||!0,activationDistance:f.activationDistance||75,scrollDistance:f.scrollDistance||15},i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1e3/60)}}(),j=!1,k=function(){function b(a){var c=Array.prototype.slice.call(arguments);j&&i(function(){e.$apply(function(){a.apply(null,c),b(a)})})}j=!0,b(function(){if(g){var b=Math.max(document.documentElement.clientWidth,window.innerWidth||0),f=Math.max(document.documentElement.clientHeight,window.innerHeight||0),i=0,j=0;if(h.horizontalScroll&&(g.clientX<h.activationDistance?i=-h.scrollDistance:g.clientX>b-h.activationDistance&&(i=h.scrollDistance)),h.verticalScroll&&(g.clientY<h.activationDistance?j=-h.scrollDistance:g.clientY>f-h.activationDistance&&(j=h.scrollDistance)),0!==i||0!==j){var k=a.pageXOffset||d[0].documentElement.scrollLeft,l=a.pageYOffset||d[0].documentElement.scrollTop,m=c.css("transform");c.css("transform","initial"),a.scrollBy(i,j);var n=(a.pageXOffset||d[0].documentElement.scrollLeft)-k,o=(a.pageYOffset||d[0].documentElement.scrollTop)-l;c.css("transform",m),g.pageX+=n,g.pageY+=o,e.$emit("draggable:_triggerHandlerMove",g)}}})},l=function(){j=!1};b.$on("draggable:start",function(a,b){b.element[0]===c[0]&&(j||k())}),b.$on("draggable:end",function(a,b){b.element[0]===c[0]&&j&&l()}),b.$on("draggable:move",function(a,b){b.element[0]===c[0]&&(g=b.event)})}}}]),function(a,b,c){b.module("angular-md5",["gdi2290.md5"]),b.module("ngMd5",["gdi2290.md5"]),b.module("gdi2290.md5",["gdi2290.gravatar-filter","gdi2290.md5-service","gdi2290.md5-filter"]),b.module("gdi2290.gravatar-filter",[]).filter("gravatar",["md5",function(a){var b={};return function(c,d){return b[c]||(d=d?a.createHash(d.toString().toLowerCase()):"",b[c]=c?a.createHash(c.toString().toLowerCase()):d),b[c]}}]),b.module("gdi2290.md5-filter",[]).filter("md5",["md5",function(a){return function(b){return b?a.createHash(b.toString().toLowerCase()):b}}]),b.module("gdi2290.md5-service",[]).factory("md5",[function(){var a={createHash:function(a){var b,c,d,e,f,g,h,i,j,k,l=function(a,b){return a<<b|a>>>32-b},m=function(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f},n=function(a,b,c){return a&b|~a&c},o=function(a,b,c){return a&c|b&~c},p=function(a,b,c){return a^b^c},q=function(a,b,c){return b^(a|~c)},r=function(a,b,c,d,e,f,g){return a=m(a,m(m(n(b,c,d),e),g)),m(l(a,f),b)},s=function(a,b,c,d,e,f,g){return a=m(a,m(m(o(b,c,d),e),g)),m(l(a,f),b)},t=function(a,b,c,d,e,f,g){return a=m(a,m(m(p(b,c,d),e),g)),m(l(a,f),b)},u=function(a,b,c,d,e,f,g){return a=m(a,m(m(q(b,c,d),e),g)),m(l(a,f),b)},v=function(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;i<c;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g},w=function(a){var b,c,d="",e="";for(c=0;c<=3;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d},x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(x=v(a),h=1732584193,i=4023233417,j=2562383102,k=271733878,b=x.length,c=0;c<b;c+=16)d=h,e=i,f=j,g=k,h=r(h,i,j,k,x[c+0],y,3614090360),k=r(k,h,i,j,x[c+1],z,3905402710),j=r(j,k,h,i,x[c+2],A,606105819),i=r(i,j,k,h,x[c+3],B,3250441966),h=r(h,i,j,k,x[c+4],y,4118548399),k=r(k,h,i,j,x[c+5],z,1200080426),j=r(j,k,h,i,x[c+6],A,2821735955),i=r(i,j,k,h,x[c+7],B,4249261313),h=r(h,i,j,k,x[c+8],y,1770035416),k=r(k,h,i,j,x[c+9],z,2336552879),j=r(j,k,h,i,x[c+10],A,4294925233),i=r(i,j,k,h,x[c+11],B,2304563134),h=r(h,i,j,k,x[c+12],y,1804603682),k=r(k,h,i,j,x[c+13],z,4254626195),j=r(j,k,h,i,x[c+14],A,2792965006),i=r(i,j,k,h,x[c+15],B,1236535329),h=s(h,i,j,k,x[c+1],C,4129170786),k=s(k,h,i,j,x[c+6],D,3225465664),j=s(j,k,h,i,x[c+11],E,643717713),i=s(i,j,k,h,x[c+0],F,3921069994),h=s(h,i,j,k,x[c+5],C,3593408605),k=s(k,h,i,j,x[c+10],D,38016083),j=s(j,k,h,i,x[c+15],E,3634488961),i=s(i,j,k,h,x[c+4],F,3889429448),h=s(h,i,j,k,x[c+9],C,568446438),k=s(k,h,i,j,x[c+14],D,3275163606),j=s(j,k,h,i,x[c+3],E,4107603335),i=s(i,j,k,h,x[c+8],F,1163531501),h=s(h,i,j,k,x[c+13],C,2850285829),k=s(k,h,i,j,x[c+2],D,4243563512),j=s(j,k,h,i,x[c+7],E,1735328473),i=s(i,j,k,h,x[c+12],F,2368359562),h=t(h,i,j,k,x[c+5],G,4294588738),k=t(k,h,i,j,x[c+8],H,2272392833),j=t(j,k,h,i,x[c+11],I,1839030562),i=t(i,j,k,h,x[c+14],J,4259657740),h=t(h,i,j,k,x[c+1],G,2763975236),k=t(k,h,i,j,x[c+4],H,1272893353),j=t(j,k,h,i,x[c+7],I,4139469664),i=t(i,j,k,h,x[c+10],J,3200236656),h=t(h,i,j,k,x[c+13],G,681279174),k=t(k,h,i,j,x[c+0],H,3936430074),j=t(j,k,h,i,x[c+3],I,3572445317),i=t(i,j,k,h,x[c+6],J,76029189),h=t(h,i,j,k,x[c+9],G,3654602809),k=t(k,h,i,j,x[c+12],H,3873151461),j=t(j,k,h,i,x[c+15],I,530742520),i=t(i,j,k,h,x[c+2],J,3299628645),h=u(h,i,j,k,x[c+0],K,4096336452),k=u(k,h,i,j,x[c+7],L,1126891415),j=u(j,k,h,i,x[c+14],M,2878612391),i=u(i,j,k,h,x[c+5],N,4237533241),h=u(h,i,j,k,x[c+12],K,1700485571),k=u(k,h,i,j,x[c+3],L,2399980690),j=u(j,k,h,i,x[c+10],M,4293915773),i=u(i,j,k,h,x[c+1],N,2240044497),h=u(h,i,j,k,x[c+8],K,1873313359),k=u(k,h,i,j,x[c+15],L,4264355552),j=u(j,k,h,i,x[c+6],M,2734768916),i=u(i,j,k,h,x[c+13],N,1309151649),h=u(h,i,j,k,x[c+4],K,4149444226),k=u(k,h,i,j,x[c+11],L,3174756917),j=u(j,k,h,i,x[c+2],M,718787259),i=u(i,j,k,h,x[c+9],N,3951481745),h=m(h,d),i=m(i,e),j=m(j,f),k=m(k,g);var O=w(h)+w(i)+w(j)+w(k);return O.toLowerCase()}};return a}])}(this,this.angular,void 0),!function(a){"use strict";a.module("ngSlider",["ngSanitize"]).directive("slider",["$timeout",function(a){return{restrict:"AE",require:"?ngModel",scope:{options:"="},priority:1,templateUrl:"ng-slider/slider-bar.tmpl.html",link:function(b,c,d,e){e&&(b.sliderTmplId=d.id+"-slider-span",b.sliderScaleDivTmplId=d.id+"-slider-scale",b.mainSliderClass="jslider",b.mainSliderClass+=" jslider_round",e.$render=function(){(e.$viewValue||0===e.$viewValue)&&("number"==typeof e.$viewValue&&(e.$viewValue=""+e.$viewValue),e.$viewValue.split(";")[1]||(b.mainSliderClass+=" jslider-single"),b.slider&&(b.slider.getPointers()[0].set(e.$viewValue.split(";")[0],!0),e.$viewValue.split(";")[1]&&b.slider.getPointers()[1].set(e.$viewValue.split(";")[1],!0)))},b.init=function(){b.from=""+b.options.from,b.to=""+b.options.to,b.options.calculate&&"function"==typeof b.options.calculate&&(b.from=b.options.calculate(b.from),b.to=b.options.calculate(b.to));var c={from:b.options.from,to:b.options.to,step:b.options.step,smooth:b.options.smooth,limits:!0,round:b.options.round||!1,value:e.$viewValue,dimension:"",scale:b.options.scale,sliderSpanId:b.sliderTmplId,callback:function(a){b.$apply(function(){e.$setViewValue(a)}),b.options.callback&&b.options.callback(a,$("#"+d.id).get(0))}};c.calculate=b.options.calculate||void 0,c.onstatechange=b.options.onstatechange||void 0,a(function(){b.slider=$("#"+d.id).slider(c),$("#"+b.sliderScaleDivTmplId).html(b.generateScale()),b.drawScale()})},b.generateScale=function(){if(b.options.scale&&b.options.scale.length>0){for(var a="",c=b.options.scale,d=(100/(c.length-1)).toFixed(2),e=0;e<c.length;e++)a+='<span style="left: '+e*d+'%">'+("|"!=c[e]?"<ins>"+c[e]+"</ins>":"")+"</span>";return a}return""},b.drawScale=function(){$("#"+d.id+"-slider-span").find(".jslider-scale span ins").each(function(){$(this).css({marginLeft:-$(this).outerWidth()/2})})},b.$watch("options",function(){b.init()}))}}}]).config(function(){}).run(function(){}),function(a){function b(a){return"undefined"!=typeof a&&(a instanceof Array||!(a instanceof Object)&&"[object Array]"==Object.prototype.toString.call(a)||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))}function c(){return this.init.apply(this,arguments)}function d(){this._init.apply(this,arguments)}function e(){d.apply(this,arguments)}var f={settings:{from:1,to:40,step:1,smooth:!0,limits:!0,value:"3",dimension:""},className:"jslider",selector:".jslider-"};a.slider=function(b,d){var e=a(b);return e.data("jslider")||e.data("jslider",new c(b,d)),e.data("jslider")},a.fn.slider=function(c,d){function e(a){return void 0!==a}function f(a){return e(a)&&null!==a}var g,h=arguments;return this.each(function(){var i=a.slider(this,c);if("string"==typeof c){var j;switch(c){case"value":e(h[1])&&e(h[2])?(j=i.getPointers(),f(j[0])&&f(h[1])&&(j[0].set(h[1]),j[0].setIndexOver()),f(j[1])&&f(h[2])&&(j[1].set(h[2]),j[1].setIndexOver())):e(h[1])?(j=i.getPointers(),f(j[0])&&f(h[1])&&(j[0].set(h[1]),j[0].setIndexOver())):g=i.getValue();break;case"prc":e(h[1])&&e(h[2])?(j=i.getPointers(),f(j[0])&&f(h[1])&&(j[0]._set(h[1]),j[0].setIndexOver()),f(j[1])&&f(h[2])&&(j[1]._set(h[2]),j[1].setIndexOver())):e(h[1])?(j=i.getPointers(),f(j[0])&&f(h[1])&&(j[0]._set(h[1]),j[0].setIndexOver())):g=i.getPrcValue();break;case"calculatedValue":var k=i.getValue().split(";");g="";for(var l=0;l<k.length;l++)g+=(l>0?";":"")+i.nice(k[l]);break;case"skin":i.setSkin(h[1])}}else c||d?g=i:(b(g)||(g=[]),g.push(i))}),b(g)&&1==g.length&&(g=g[0]),g||this},c.prototype.init=function(b,c){this.settings=a.extend(!0,{},f.settings,c?c:{}),this.inputNode=a(b).hide(),this.settings.interval=this.settings.to-this.settings.from,this.settings.calculate&&a.isFunction(this.settings.calculate)&&(this.nice=this.settings.calculate),this.settings.onstatechange&&a.isFunction(this.settings.onstatechange)&&(this.onstatechange=this.settings.onstatechange),this.is={init:!1},this.o={},this.create()},c.prototype.create=function(){var b=this;this.domNode=a("#"+this.settings.sliderSpanId),this.inputNode.after(this.domNode),this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},a.extend(this.o,{pointers:{},labels:{0:{o:this.domNode.find(f.selector+"value").not(f.selector+"value-to")},1:{o:this.domNode.find(f.selector+"value").filter(f.selector+"value-to")}},limits:{0:this.domNode.find(f.selector+"label").not(f.selector+"label-to"),1:this.domNode.find(f.selector+"label").filter(f.selector+"label-to")}}),a.extend(this.o.labels[0],{value:this.o.labels[0].o.find("span")}),a.extend(this.o.labels[1],{value:this.o.labels[1].o.find("span")}),b.settings.value.split(";")[1]||(this.settings.single=!0),this.domNode.find(f.selector+"pointer").each(function(a){var c=b.settings.value.split(";")[a];if(c){b.o.pointers[a]=new e(this,a,b);var d=b.settings.value.split(";")[a-1];d&&parseInt(c,10)<parseInt(d,10)&&(c=d);var f=c<b.settings.from?b.settings.from:c;f=c>b.settings.to?b.settings.to:c,b.o.pointers[a].set(f,!0),0===a&&b.domNode.mousedown(function(c){return b.o.pointers[a]._parent={offset:b.domNode.offset(),width:b.domNode.width()},b.o.pointers[a]._mousemove(c),b.o.pointers[a].onmouseup(),!1})}}),this.o.value=this.domNode.find(".v"),this.is.init=!0,a.each(this.o.pointers,function(){b.redraw(this)}),function(b){a(window).resize(function(){b.onresize()})}(this)},c.prototype.nice=function(a){return a},c.prototype.onstatechange=function(){},c.prototype.limits=function(a,b){if(!this.settings.smooth){var c=100*this.settings.step/this.settings.interval;a=Math.round(a/c)*c}var d=this.o.pointers[1-b.uid];return d&&b.uid&&a<d.value.prc&&(a=d.value.prc),d&&!b.uid&&a>d.value.prc&&(a=d.value.prc),0>a&&(a=0),a>100&&(a=100),Math.round(10*a)/10},c.prototype.setPointersIndex=function(){a.each(this.getPointers(),function(a){this.index(a)})},c.prototype.getPointers=function(){return this.o.pointers},c.prototype.onresize=function(){var b=this;this.sizes={domWidth:this.domNode.width(),domOffset:this.domNode.offset()},a.each(this.o.pointers,function(){b.redraw(this)})},c.prototype.update=function(){this.onresize(),this.drawScale()},c.prototype.drawScale=function(){this.domNode.find(f.selector+"scale span ins").each(function(){a(this).css({marginLeft:-a(this).outerWidth()/2})})},c.prototype.redraw=function(a){return!!this.is.init&&(this.setValue(),this.o.pointers[0]&&this.o.pointers[1]&&this.o.value.css({left:this.o.pointers[0].value.prc+"%",width:this.o.pointers[1].value.prc-this.o.pointers[0].value.prc+"%"}),this.o.labels[a.uid].value.html(this.nice(a.value.origin)),void this.redrawLabels(a))},c.prototype.redrawLabels=function(a){function b(a,b,d){b.margin=-b.label/2;var e=b.border+b.margin;return 0>e&&(b.margin-=e),b.border+b.label/2>c.sizes.domWidth?(b.margin=0,b.right=!0):b.right=!1,a.o.css({left:d+"%",marginLeft:b.margin,right:"auto"}),b.right&&a.o.css({left:"auto",right:0}),b}var c=this,d=this.o.labels[a.uid],e=a.value.prc,f={label:d.o.outerWidth(),right:!1,border:e*this.sizes.domWidth/100},g=null;if(!this.settings.single){var h=this.o.pointers[1-a.uid];switch(g=this.o.labels[h.uid],a.uid){case 0:f.border+f.label/2>g.o.offset().left-this.sizes.domOffset.left?(g.o.css({visibility:"hidden"}),g.value.html(this.nice(h.value.origin)),d.o.css({visibility:"visible"}),e=(h.value.prc-e)/2+e,h.value.prc!=a.value.prc&&(d.value.html(this.nice(a.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(h.value.origin)),f.label=d.o.outerWidth(),f.border=e*this.sizes.domWidth/100)):g.o.css({visibility:"visible"});break;case 1:f.border-f.label/2<g.o.offset().left-this.sizes.domOffset.left+g.o.outerWidth()?(g.o.css({visibility:"hidden"}),g.value.html(this.nice(h.value.origin)),d.o.css({visibility:"visible"}),e=(e-h.value.prc)/2+h.value.prc,h.value.prc!=a.value.prc&&(d.value.html(this.nice(h.value.origin)+"&nbsp;&ndash;&nbsp;"+this.nice(a.value.origin)),f.label=d.o.outerWidth(),f.border=e*this.sizes.domWidth/100)):g.o.css({visibility:"visible"})}}f=b(d,f,e),g&&(f={label:g.o.outerWidth(),right:!1,border:h.value.prc*this.sizes.domWidth/100},f=b(g,f,h.value.prc)),this.redrawLimits()},c.prototype.redrawLimits=function(){if(this.settings.limits){var a=[!0,!0];for(var b in this.o.pointers)if(!this.settings.single||0===b){var c=this.o.pointers[b],d=this.o.labels[c.uid],e=d.o.offset().left-this.sizes.domOffset.left,f=this.o.limits[0];e<f.outerWidth()&&(a[0]=!1),f=this.o.limits[1],e+d.o.outerWidth()>this.sizes.domWidth-f.outerWidth()&&(a[1]=!1)}for(var g=0;g<a.length;g++)a[g]?this.o.limits[g].fadeIn("fast"):this.o.limits[g].fadeOut("fast")}},c.prototype.setValue=function(){var a=this.getValue();this.inputNode.attr("value",a),this.onstatechange.call(this,a,this.inputNode[0])},c.prototype.getValue=function(){if(!this.is.init)return!1;var b=this,c="";return a.each(this.o.pointers,function(a){void 0===this.value.prc||isNaN(this.value.prc)||(c+=(a>0?";":"")+b.prcToValue(this.value.prc))}),c},c.prototype.getPrcValue=function(){if(!this.is.init)return!1;var b="";return a.each(this.o.pointers,function(a){void 0===this.value.prc||isNaN(this.value.prc)||(b+=(a>0?";":"")+this.value.prc)}),b},c.prototype.prcToValue=function(a){var b;if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0)for(var c=this.settings.heterogeneity,d=0,e=this.settings.from,f=0;f<=c.length;f++){var g;g=c[f]?c[f].split("/"):[100,this.settings.to],a>=d&&a<=g[0]&&(b=e+(a-d)*(g[1]-e)/(g[0]-d)),d=g[0],e=g[1]}else b=this.settings.from+a*this.settings.interval/100;return this.round(b)},c.prototype.valueToPrc=function(a,b){var c;if(this.settings.heterogeneity&&this.settings.heterogeneity.length>0)for(var d=this.settings.heterogeneity,e=0,f=this.settings.from,g=0;g<=d.length;g++){var h;h=d[g]?d[g].split("/"):[100,this.settings.to],a>=f&&a<=h[1]&&(c=b.limits(e+(a-f)*(h[0]-e)/(h[1]-f))),e=h[0],f=h[1]}else c=b.limits(100*(a-this.settings.from)/this.settings.interval);return c},c.prototype.round=function(a){return a=Math.round(a/this.settings.step)*this.settings.step,a=this.settings.round?Math.round(a*Math.pow(10,this.settings.round))/Math.pow(10,this.settings.round):Math.round(a)},d.prototype.oninit=function(){},d.prototype.events=function(){},d.prototype.onmousedown=function(){this.ptr.css({position:"absolute"})},d.prototype.onmousemove=function(a,b,c){this.ptr.css({left:b,top:c})},d.prototype.onmouseup=function(){},d.prototype.isDefault={drag:!1,clicked:!1,toclick:!0,mouseup:!1},d.prototype._init=function(){if(arguments.length>0){this.ptr=a(arguments[0]),this.outer=a(".draggable-outer"),this.is={},a.extend(this.is,this.isDefault);var b=this.ptr.offset();this.d={left:b.left,top:b.top,width:this.ptr.width(),height:this.ptr.height()},this.oninit.apply(this,arguments),this._events()}},d.prototype._getPageCoords=function(a){return a.targetTouches&&a.targetTouches[0]?{x:a.targetTouches[0].pageX,y:a.targetTouches[0].pageY}:{x:a.pageX,y:a.pageY}},d.prototype._bindEvent=function(a,b,c){this.supportTouches_?a.get(0).addEventListener(this.events_[b],c,!1):a.bind(this.events_[b],c)},d.prototype._events=function(){var b=this;this.supportTouches_="ontouchend"in document,this.events_={click:this.supportTouches_?"touchstart":"click",down:this.supportTouches_?"touchstart":"mousedown",move:this.supportTouches_?"touchmove":"mousemove",up:this.supportTouches_?"touchend":"mouseup"},this._bindEvent(a(document),"move",function(a){b.is.drag&&(a.stopPropagation(),a.preventDefault(),b._mousemove(a))}),this._bindEvent(a(document),"down",function(a){b.is.drag&&(a.stopPropagation(),a.preventDefault())}),this._bindEvent(a(document),"up",function(a){b._mouseup(a)}),this._bindEvent(this.ptr,"down",function(a){return b._mousedown(a),!1}),this._bindEvent(this.ptr,"up",function(a){b._mouseup(a)}),this.ptr.find("a").click(function(){return b.is.clicked=!0,b.is.toclick?void 0:(b.is.toclick=!0,!1)}).mousedown(function(a){return b._mousedown(a),!1}),this.events()},d.prototype._mousedown=function(b){this.is.drag=!0,this.is.clicked=!1,this.is.mouseup=!1;var c=this.ptr.offset(),d=this._getPageCoords(b);this.cx=d.x-c.left,this.cy=d.y-c.top,a.extend(this.d,{left:c.left,top:c.top,width:this.ptr.width(),height:this.ptr.height()}),this.outer&&this.outer.get(0)&&this.outer.css({height:Math.max(this.outer.height(),a(document.body).height()),overflow:"hidden"}),this.onmousedown(b)},d.prototype._mousemove=function(a){this.is.toclick=!1;var b=this._getPageCoords(a);this.onmousemove(a,b.x-this.cx,b.y-this.cy)},d.prototype._mouseup=function(b){this.is.drag&&(this.is.drag=!1,this.outer&&this.outer.get(0)&&(this.outer.css(a.browser.mozilla?{overflow:"hidden"}:{overflow:"visible"}),this.outer.css(a.browser.msie&&"6.0"==a.browser.version?{height:"100%"}:{height:"auto"})),this.onmouseup(b))},window.Draggable=d,e.prototype=new d,e.prototype.oninit=function(a,b,c){this.uid=b,this.parent=c,this.value={},this.settings=this.parent.settings},e.prototype.onmousedown=function(){this._parent={offset:this.parent.domNode.offset(),width:this.parent.domNode.width()},this.ptr.addClass("jslider-pointer-hover"),this.setIndexOver()},e.prototype.onmousemove=function(a){var b=this._getPageCoords(a);this._set(this.calc(b.x))},e.prototype.onmouseup=function(){this.parent.settings.callback&&a.isFunction(this.parent.settings.callback)&&this.parent.settings.callback.call(this.parent,this.parent.getValue()),this.ptr.removeClass("jslider-pointer-hover")},e.prototype.setIndexOver=function(){this.parent.setPointersIndex(1),this.index(2)},e.prototype.index=function(a){this.ptr.css({zIndex:a})},e.prototype.limits=function(a){return this.parent.limits(a,this)},e.prototype.calc=function(a){var b=this.limits(100*(a-this._parent.offset.left)/this._parent.width);return b},e.prototype.set=function(a,b){this.value.origin=this.parent.round(a),this._set(this.parent.valueToPrc(a,this),b)},e.prototype._set=function(a,b){b||(this.value.origin=this.parent.prcToValue(a)),this.value.prc=a,this.ptr.css({left:a+"%"}),this.parent.redraw(this)}}(jQuery)}(angular),!function(a){"use strict";a.module("ngSlider").run(["$templateCache",function(a){a.put("ng-slider/slider-bar.tmpl.html",'<span ng-class="mainSliderClass" id="{{sliderTmplId}}"><table><tr><td><div class="jslider-bg"><i class="l"></i><i class="f"></i><i class="r"></i></div><div class="jslider-pointer"></div><div class="jslider-pointer jslider-pointer-to"></div><div class="jslider-label"><span ng-bind-html="from"></span></div><div class="jslider-label jslider-label-to"><span ng-bind-html="to"></span>{{options.dimension}}</div><div class="jslider-value"><span></span>{{options.dimension}}</div><div class="jslider-value jslider-value-to"><span></span>{{options.dimension}}</div><div class="jslider-scale" id="{{sliderScaleDivTmplId}}"></div></td></tr></table></span>')}])}(window.angular);var saveAs=saveAs||function(a){"use strict";if(!("undefined"==typeof a||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var b=a.document,c=function(){return a.URL||a.webkitURL||a},d=b.createElementNS("http://www.w3.org/1999/xhtml","a"),e="download"in d,f=function(a){var b=new MouseEvent("click");a.dispatchEvent(b)},g=/constructor/i.test(a.HTMLElement)||a.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent),i=function(b){(a.setImmediate||a.setTimeout)(function(){throw b},0)},j="application/octet-stream",k=4e4,l=function(a){var b=function(){"string"==typeof a?c().revokeObjectURL(a):a.remove()};setTimeout(b,k)},m=function(a,b,c){b=[].concat(b);for(var d=b.length;d--;){var e=a["on"+b[d]];if("function"==typeof e)try{e.call(a,c||a)}catch(a){i(a)}}},n=function(a){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a},o=function(b,i,k){k||(b=n(b));var o,p=this,q=b.type,r=q===j,s=function(){m(p,"writestart progress write writeend".split(" "))},t=function(){if((h||r&&g)&&a.FileReader){var d=new FileReader;return d.onloadend=function(){var b=h?d.result:d.result.replace(/^data:[^;]*;/,"data:attachment/file;"),c=a.open(b,"_blank");c||(a.location.href=b),b=void 0,p.readyState=p.DONE,s()},d.readAsDataURL(b),void(p.readyState=p.INIT)}if(o||(o=c().createObjectURL(b)),r)a.location.href=o;else{var e=a.open(o,"_blank");e||(a.location.href=o)}p.readyState=p.DONE,s(),l(o)};return p.readyState=p.INIT,e?(o=c().createObjectURL(b),void setTimeout(function(){d.href=o,d.download=i,f(d),s(),l(o),p.readyState=p.DONE})):void t()},p=o.prototype,q=function(a,b,c){return new o(a,b||a.name||"download",c)};return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(a,b,c){return b=b||a.name||"download",c||(a=n(a)),navigator.msSaveOrOpenBlob(a,b)}:(p.abort=function(){},p.readyState=p.INIT=0,p.WRITING=1,p.DONE=2,p.error=p.onwritestart=p.onprogress=p.onwrite=p.onabort=p.onerror=p.onwriteend=null,q)}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define("FileSaver.js",function(){return saveAs}),function(a){var b=function(a){var b=a.module("FBAngular",[]);return b.factory("Fullscreen",["$document","$rootScope",function(b,c){var d=b[0],e="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element&&Element.ALLOW_KEYBOARD_INPUT,f=c.$new();b.on("fullscreenchange webkitfullscreenchange mozfullscreenchange MSFullscreenChange",function(){f.$emit("FBFullscreen.change",g.isEnabled())});var g={$on:a.bind(f,f.$on),all:function(){g.enable(d.documentElement)},enable:function(a){a.requestFullScreen?a.requestFullScreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?/Version\/[\d]{1,2}(\.[\d]{1,2}){1}(\.(\d){1,2}){0,1} Safari/.test(navigator.userAgent)?a.webkitRequestFullscreen():a.webkitRequestFullscreen(e):a.msRequestFullscreen&&a.msRequestFullscreen();
},cancel:function(){d.cancelFullScreen?d.cancelFullScreen():d.mozCancelFullScreen?d.mozCancelFullScreen():d.webkitExitFullscreen?d.webkitExitFullscreen():d.msExitFullscreen&&d.msExitFullscreen()},isEnabled:function(){var a=d.fullscreenElement||d.mozFullScreenElement||d.webkitFullscreenElement||d.msFullscreenElement;return!!a},toggleAll:function(){g.isEnabled()?g.cancel():g.all()},isSupported:function(){var a=d.documentElement,b=a.requestFullScreen||a.mozRequestFullScreen||a.webkitRequestFullscreen||a.msRequestFullscreen;return!!b}};return g}]),b.directive("fullscreen",["Fullscreen",function(a){return{link:function(b,c,d){if(d.fullscreen){b.$watch(d.fullscreen,function(b){var d=a.isEnabled();b&&!d?(a.enable(c[0]),c.addClass("isInFullScreen")):!b&&d&&(a.cancel(),c.removeClass("isInFullScreen"))});var e=a.$on("FBFullscreen.change",function(a,e){e||b.$evalAsync(function(){b.$eval(d.fullscreen+"= false"),c.removeClass("isInFullScreen")})});b.$on("$destroy",function(){e()})}else{if(void 0!==d.onlyWatchedProperty)return;c.on("click",function(b){a.enable(c[0])})}}}}]),b};"function"==typeof define&&define.amd?define("FBAngular",["angular"],function(a){return b(a)}):b(a.angular)}(window),function(a,b){"function"==typeof define&&define.amd?define(["angular"],b):"object"==typeof module&&module.exports?module.exports=b(require("angular")):b(a.angular)}(this,function(a){var b=a.module("rzModule",[]).value("throttle",function(a,b,c){"use strict";var d,e,f,g=Date.now||function(){return(new Date).getTime()},h=null,i=0;c=c||{};var j=function(){i=c.leading===!1?0:g(),h=null,f=a.apply(d,e),d=e=null};return function(){var k=g();i||c.leading!==!1||(i=k);var l=b-(k-i);return d=this,e=arguments,l<=0?(clearTimeout(h),h=null,i=k,f=a.apply(d,e),d=e=null):h||c.trailing===!1||(h=setTimeout(j,l)),f}}).factory("RzSlider",["$timeout","$document","$window","throttle",function(b,c,d,e){"use strict";var f=function(a,b,c){this.scope=a,this.attributes=c,this.sliderElem=b,this.range=void 0!==c.rzSliderHigh&&void 0!==c.rzSliderModel,this.dragRange=this.range&&"true"===c.rzSliderDraggableRange,this.dragging={active:!1,value:0,difference:0,offset:0,lowDist:0,highDist:0},this.handleHalfWidth=0,this.alwaysShowBar=!!c.rzSliderAlwaysShowBar,this.maxLeft=0,this.precision=0,this.step=0,this.tracking="",this.minValue=0,this.maxValue=0,this.hideLimitLabels=!!c.rzSliderHideLimitLabels,this.presentOnly="true"===c.rzSliderPresentOnly,this.valueRange=0,this.initHasRun=!1,this.customTrFn=this.scope.rzSliderTranslate()||function(a){return String(a)},this.deRegFuncs=[],this.fullBar=null,this.selBar=null,this.minH=null,this.maxH=null,this.flrLab=null,this.ceilLab=null,this.minLab=null,this.maxLab=null,this.cmbLab=null,this.init()};return f.prototype={init:function(){var c,f,g,h=a.bind(this,this.calcViewDimensions),i=this;this.initElemHandles(),this.calcViewDimensions(),this.setMinAndMax(),this.precision=void 0===this.scope.rzSliderPrecision?0:+this.scope.rzSliderPrecision,this.step=void 0===this.scope.rzSliderStep?1:+this.scope.rzSliderStep,b(function(){i.updateCeilLab(),i.updateFloorLab(),i.initHandles(),i.presentOnly||i.bindEvents()}),g=this.scope.$on("reCalcViewDimensions",h),this.deRegFuncs.push(g),a.element(d).on("resize",h),this.initHasRun=!0,c=e(function(){i.setMinAndMax(),i.updateLowHandle(i.valueToOffset(i.scope.rzSliderModel)),i.updateSelectionBar(),i.range&&i.updateCmbLabel()},350,{leading:!1}),f=e(function(){i.setMinAndMax(),i.updateHighHandle(i.valueToOffset(i.scope.rzSliderHigh)),i.updateSelectionBar(),i.updateCmbLabel()},350,{leading:!1}),this.scope.$on("rzSliderForceRender",function(){i.resetLabelsValue(),c(),i.range&&f(),i.resetSlider()}),g=this.scope.$watch("rzSliderModel",function(a,b){a!==b&&c()}),this.deRegFuncs.push(g),g=this.scope.$watch("rzSliderHigh",function(a,b){a!==b&&f()}),this.deRegFuncs.push(g),this.scope.$watch("rzSliderFloor",function(a,b){a!==b&&i.resetSlider()}),this.deRegFuncs.push(g),g=this.scope.$watch("rzSliderCeil",function(a,b){a!==b&&i.resetSlider()}),this.deRegFuncs.push(g),this.scope.$on("$destroy",function(){i.minH.off(),i.maxH.off(),i.fullBar.off(),i.selBar.off(),a.element(d).off("resize",h),i.deRegFuncs.map(function(a){a()})})},resetSlider:function(){this.setMinAndMax(),this.updateCeilLab(),this.updateFloorLab(),this.calcViewDimensions()},resetLabelsValue:function(){this.minLab.rzsv=void 0,this.maxLab.rzsv=void 0},initHandles:function(){this.updateLowHandle(this.valueToOffset(this.scope.rzSliderModel)),this.range&&(this.updateHighHandle(this.valueToOffset(this.scope.rzSliderHigh)),this.updateCmbLabel()),this.updateSelectionBar()},translateFn:function(a,b,c){c=void 0===c||c;var d=String(c?this.customTrFn(a):a),e=!1;(void 0===b.rzsv||b.rzsv.length!==d.length||b.rzsv.length>0&&0===b.rzsw)&&(e=!0,b.rzsv=d),b.text(d),e&&this.getWidth(b)},setMinAndMax:function(){this.scope.rzSliderFloor?this.minValue=+this.scope.rzSliderFloor:this.minValue=this.scope.rzSliderFloor=0,this.scope.rzSliderCeil?this.maxValue=+this.scope.rzSliderCeil:this.scope.rzSliderCeil=this.maxValue=this.range?this.scope.rzSliderHigh:this.scope.rzSliderModel,this.scope.rzSliderStep&&(this.step=+this.scope.rzSliderStep),this.valueRange=this.maxValue-this.minValue},initElemHandles:function(){a.forEach(this.sliderElem.children(),function(b,c){var d=a.element(b);switch(c){case 0:this.fullBar=d;break;case 1:this.selBar=d;break;case 2:this.minH=d;break;case 3:this.maxH=d;break;case 4:this.flrLab=d;break;case 5:this.ceilLab=d;break;case 6:this.minLab=d;break;case 7:this.maxLab=d;break;case 8:this.cmbLab=d}},this),this.selBar.rzsl=0,this.minH.rzsl=0,this.maxH.rzsl=0,this.flrLab.rzsl=0,this.ceilLab.rzsl=0,this.minLab.rzsl=0,this.maxLab.rzsl=0,this.cmbLab.rzsl=0,this.hideLimitLabels&&(this.flrLab.rzAlwaysHide=!0,this.ceilLab.rzAlwaysHide=!0,this.hideEl(this.flrLab),this.hideEl(this.ceilLab)),this.range===!1&&(this.cmbLab.remove(),this.maxLab.remove(),this.maxH.rzAlwaysHide=!0,this.maxH[0].style.zIndex="-1000",this.hideEl(this.maxH)),this.range===!1&&this.alwaysShowBar===!1&&(this.maxH.remove(),this.selBar.remove()),this.dragRange&&(this.selBar.css("cursor","move"),this.selBar.addClass("rz-draggable"))},calcViewDimensions:function(){var a=this.getWidth(this.minH);this.handleHalfWidth=a/2,this.barWidth=this.getWidth(this.fullBar),this.maxLeft=this.barWidth-a,this.getWidth(this.sliderElem),this.sliderElem.rzsl=this.sliderElem[0].getBoundingClientRect().left,this.initHasRun&&(this.updateCeilLab(),this.initHandles())},updateCeilLab:function(){this.translateFn(this.scope.rzSliderCeil,this.ceilLab),this.setLeft(this.ceilLab,this.barWidth-this.ceilLab.rzsw),this.getWidth(this.ceilLab)},updateFloorLab:function(){this.translateFn(this.scope.rzSliderFloor,this.flrLab),this.getWidth(this.flrLab)},callOnStart:function(){if(this.scope.rzSliderOnStart){var a=this;b(function(){a.scope.rzSliderOnStart()})}},callOnChange:function(){if(this.scope.rzSliderOnChange){var a=this;b(function(){a.scope.rzSliderOnChange()})}},callOnEnd:function(){if(this.scope.rzSliderOnEnd){var a=this;b(function(){a.scope.rzSliderOnEnd()})}},updateHandles:function(a,b){return"rzSliderModel"===a?(this.updateLowHandle(b),this.updateSelectionBar(),void(this.range&&this.updateCmbLabel())):"rzSliderHigh"===a?(this.updateHighHandle(b),this.updateSelectionBar(),void(this.range&&this.updateCmbLabel())):(this.updateLowHandle(b),this.updateHighHandle(b),this.updateSelectionBar(),void this.updateCmbLabel())},updateLowHandle:function(a){var b=Math.abs(this.minH.rzsl-a);this.minLab.rzsv&&b<1||(this.setLeft(this.minH,a),this.translateFn(this.scope.rzSliderModel,this.minLab),this.setLeft(this.minLab,a-this.minLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil())},updateHighHandle:function(a){this.setLeft(this.maxH,a),this.translateFn(this.scope.rzSliderHigh,this.maxLab),this.setLeft(this.maxLab,a-this.maxLab.rzsw/2+this.handleHalfWidth),this.shFloorCeil()},shFloorCeil:function(){var a=!1,b=!1;this.minLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+5?(a=!0,this.hideEl(this.flrLab)):(a=!1,this.showEl(this.flrLab)),this.minLab.rzsl+this.minLab.rzsw>=this.ceilLab.rzsl-this.handleHalfWidth-10?(b=!0,this.hideEl(this.ceilLab)):(b=!1,this.showEl(this.ceilLab)),this.range&&(this.maxLab.rzsl+this.maxLab.rzsw>=this.ceilLab.rzsl-10?this.hideEl(this.ceilLab):b||this.showEl(this.ceilLab),this.maxLab.rzsl<=this.flrLab.rzsl+this.flrLab.rzsw+this.handleHalfWidth?this.hideEl(this.flrLab):a||this.showEl(this.flrLab))},updateSelectionBar:function(){this.setWidth(this.selBar,Math.abs(this.maxH.rzsl-this.minH.rzsl)),this.setLeft(this.selBar,this.range?this.minH.rzsl+this.handleHalfWidth:0)},updateCmbLabel:function(){var a,b;this.minLab.rzsl+this.minLab.rzsw+10>=this.maxLab.rzsl?(this.customTrFn?(a=this.customTrFn(this.scope.rzSliderModel),b=this.customTrFn(this.scope.rzSliderHigh)):(a=this.scope.rzSliderModel,b=this.scope.rzSliderHigh),this.translateFn(a+" - "+b,this.cmbLab,!1),this.setLeft(this.cmbLab,this.selBar.rzsl+this.selBar.rzsw/2-this.cmbLab.rzsw/2),this.hideEl(this.minLab),this.hideEl(this.maxLab),this.showEl(this.cmbLab)):(this.showEl(this.maxLab),this.showEl(this.minLab),this.hideEl(this.cmbLab))},roundStep:function(a){var b=this.step,c=+((a-this.minValue)%b).toFixed(3),d=c>b/2?a+b-c:a-c;return d=d.toFixed(this.precision),+d},hideEl:function(a){return a.css({opacity:0})},showEl:function(a){return a.rzAlwaysHide?a:a.css({opacity:1})},setLeft:function(a,b){return a.rzsl=b,a.css({left:b+"px"}),b},getWidth:function(a){var b=a[0].getBoundingClientRect();return a.rzsw=b.right-b.left,a.rzsw},setWidth:function(a,b){return a.rzsw=b,a.css({width:b+"px"}),b},valueToOffset:function(a){return(a-this.minValue)*this.maxLeft/this.valueRange},offsetToValue:function(a){return a/this.maxLeft*this.valueRange+this.minValue},getEventX:function(a){return"clientX"in a?a.clientX:void 0===a.originalEvent?a.touches[0].clientX:a.originalEvent.touches[0].clientX},getNearestHandle:function(a){if(!this.range)return this.minH;var b=this.getEventX(a)-this.sliderElem.rzsl-this.handleHalfWidth;return Math.abs(b-this.minH.rzsl)<Math.abs(b-this.maxH.rzsl)?this.minH:this.maxH},bindEvents:function(){var b,c,d;this.dragRange?(b="rzSliderDrag",c=this.onDragStart,d=this.onDragMove):(b="rzSliderModel",c=this.onStart,d=this.onMove),this.minH.on("mousedown",a.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("mousedown",a.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("mousedown",a.bind(this,this.onStart,null,null)),this.fullBar.on("mousedown",a.bind(this,this.onMove,this.fullBar)),this.selBar.on("mousedown",a.bind(this,c,null,b)),this.selBar.on("mousedown",a.bind(this,d,this.selBar)),this.minH.on("touchstart",a.bind(this,this.onStart,this.minH,"rzSliderModel")),this.range&&this.maxH.on("touchstart",a.bind(this,this.onStart,this.maxH,"rzSliderHigh")),this.fullBar.on("touchstart",a.bind(this,this.onStart,null,null)),this.fullBar.on("touchstart",a.bind(this,this.onMove,this.fullBar)),this.selBar.on("touchstart",a.bind(this,c,null,b)),this.selBar.on("touchstart",a.bind(this,d,this.selBar))},onStart:function(b,d,e){var f,g,h=this.getEventNames(e);e.stopPropagation(),e.preventDefault(),""===this.tracking&&(this.calcViewDimensions(),b?this.tracking=d:(b=this.getNearestHandle(e),this.tracking=b===this.minH?"rzSliderModel":"rzSliderHigh"),b.addClass("rz-active"),f=a.bind(this,this.dragging.active?this.onDragMove:this.onMove,b),g=a.bind(this,this.onEnd,f),c.on(h.moveEvent,f),c.one(h.endEvent,g),this.callOnStart())},onMove:function(a,b){var c,d,e,f=this.getEventX(b);if(c=this.sliderElem.rzsl,d=f-c-this.handleHalfWidth,d<=0){if(0===a.rzsl)return;e=this.minValue,d=0}else if(d>=this.maxLeft){if(a.rzsl===this.maxLeft)return;e=this.maxValue,d=this.maxLeft}else e=this.offsetToValue(d),e=this.roundStep(e),d=this.valueToOffset(e);this.positionTrackingHandle(e,d)},onDragStart:function(a,b,c){var d=this.getEventX(c)-this.sliderElem.rzsl-this.handleHalfWidth;this.dragging={active:!0,value:this.offsetToValue(d),difference:this.scope.rzSliderHigh-this.scope.rzSliderModel,offset:d,lowDist:d-this.minH.rzsl,highDist:this.maxH.rzsl-d},this.minH.addClass("rz-active"),this.maxH.addClass("rz-active"),this.onStart(a,b,c)},onDragMove:function(a,b){var c,d,e,f,g=this.getEventX(b)-this.sliderElem.rzsl-this.handleHalfWidth;if(g<=this.dragging.lowDist){if(a.rzsl===this.dragging.lowDist)return;e=this.minValue,c=0,f=this.dragging.difference,d=this.valueToOffset(f)}else if(g>=this.maxLeft-this.dragging.highDist){if(a.rzsl===this.dragging.highDist)return;f=this.maxValue,d=this.maxLeft,e=this.maxValue-this.dragging.difference,c=this.valueToOffset(e)}else e=this.offsetToValue(g-this.dragging.lowDist),e=this.roundStep(e),c=this.valueToOffset(e),f=e+this.dragging.difference,d=this.valueToOffset(f);this.positionTrackingBar(e,f,c,d)},positionTrackingBar:function(a,b,c,d){this.scope.rzSliderModel=a,this.scope.rzSliderHigh=b,this.updateHandles("rzSliderModel",c),this.updateHandles("rzSliderHigh",d),this.scope.$apply(),this.callOnChange()},positionTrackingHandle:function(a,b){this.range&&("rzSliderModel"===this.tracking&&a>=this.scope.rzSliderHigh?(this.scope[this.tracking]=this.scope.rzSliderHigh,this.updateHandles(this.tracking,this.maxH.rzsl),this.tracking="rzSliderHigh",this.minH.removeClass("rz-active"),this.maxH.addClass("rz-active"),this.scope.$apply(),this.callOnChange()):"rzSliderHigh"===this.tracking&&a<=this.scope.rzSliderModel&&(this.scope[this.tracking]=this.scope.rzSliderModel,this.updateHandles(this.tracking,this.minH.rzsl),this.tracking="rzSliderModel",this.maxH.removeClass("rz-active"),this.minH.addClass("rz-active"),this.scope.$apply(),this.callOnChange())),this.scope[this.tracking]!==a&&(this.scope[this.tracking]=a,this.updateHandles(this.tracking,b),this.scope.$apply(),this.callOnChange())},onEnd:function(a,b){var d=this.getEventNames(b).moveEvent;this.minH.removeClass("rz-active"),this.maxH.removeClass("rz-active"),c.off(d,a),this.scope.$emit("slideEnded"),this.tracking="",this.dragging.active=!1,this.callOnEnd()},getEventNames:function(a){var b={moveEvent:"",endEvent:""};return a.touches||void 0!==a.originalEvent&&a.originalEvent.touches?(b.moveEvent="touchmove",b.endEvent="touchend"):(b.moveEvent="mousemove",b.endEvent="mouseup"),b}},f}]).directive("rzslider",["RzSlider",function(a){"use strict";return{restrict:"E",scope:{rzSliderFloor:"=?",rzSliderCeil:"=?",rzSliderStep:"@",rzSliderPrecision:"@",rzSliderModel:"=?",rzSliderHigh:"=?",rzSliderDraggable:"@",rzSliderTranslate:"&",rzSliderHideLimitLabels:"=?",rzSliderAlwaysShowBar:"=?",rzSliderPresentOnly:"@",rzSliderOnStart:"&",rzSliderOnChange:"&",rzSliderOnEnd:"&"},templateUrl:function(a,b){return b.rzSliderTplUrl||"rzSliderTpl.html"},link:function(b,c,d){return new a(b,c,d)}}}]);return b.run(["$templateCache",function(a){"use strict";a.put("rzSliderTpl.html",'<span class=rz-bar-wrapper><span class=rz-bar></span></span> <span class=rz-bar-wrapper><span class="rz-bar rz-selection"></span></span> <span class=rz-pointer></span> <span class=rz-pointer></span> <span class="rz-bubble rz-limit"></span> <span class="rz-bubble rz-limit"></span> <span class=rz-bubble></span> <span class=rz-bubble></span> <span class=rz-bubble></span>')}]),b}),function(a){"use strict";function b(){this.frames=[],this.lastId=0,this.raf=c,this.batch={hash:{},read:[],write:[],mode:null}}var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)};b.prototype.read=function(a,b){var c=this.add("read",a,b),d=c.id;this.batch.read.push(c.id);var e="reading"===this.batch.mode||this.batch.scheduled;return e?d:(this.scheduleBatch(),d)},b.prototype.write=function(a,b){var c=this.add("write",a,b),d=this.batch.mode,e=c.id;this.batch.write.push(c.id);var f="writing"===d||"reading"===d||this.batch.scheduled;return f?e:(this.scheduleBatch(),e)},b.prototype.defer=function(a,b,c){"function"==typeof a&&(c=b,b=a,a=1);var d=this,e=a-1;return this.schedule(e,function(){d.run({fn:b,ctx:c})})},b.prototype.clear=function(a){if("function"==typeof a)return this.clearFrame(a);a=Number(a);var b=this.batch.hash[a];if(b){var c=this.batch[b.type],d=c.indexOf(a);delete this.batch.hash[a],~d&&c.splice(d,1)}},b.prototype.clearFrame=function(a){var b=this.frames.indexOf(a);~b&&this.frames.splice(b,1)},b.prototype.scheduleBatch=function(){var a=this;this.schedule(0,function(){a.batch.scheduled=!1,a.runBatch()}),this.batch.scheduled=!0},b.prototype.uniqueId=function(){return++this.lastId},b.prototype.flush=function(a){for(var b;b=a.shift();)this.run(this.batch.hash[b])},b.prototype.runBatch=function(){try{this.batch.mode="reading",this.flush(this.batch.read),this.batch.mode="writing",this.flush(this.batch.write),this.batch.mode=null}catch(a){throw this.runBatch(),a}},b.prototype.add=function(a,b,c){var d=this.uniqueId();return this.batch.hash[d]={id:d,fn:b,ctx:c,type:a}},b.prototype.run=function(a){var b=a.ctx||this,c=a.fn;if(delete this.batch.hash[a.id],!this.onError)return c.call(b);try{c.call(b)}catch(a){this.onError(a)}},b.prototype.loop=function(){var a=this,b=this.raf;this.looping||(b(function c(){var d=a.frames.shift();a.frames.length?b(c):a.looping=!1,d&&d()}),this.looping=!0)},b.prototype.schedule=function(a,b){return this.frames[a]?this.schedule(a+1,b):(this.loop(),this.frames[a]=b)},a=a||new b,"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define&&define.amd?define(function(){return a}):window.fastdom=a}(window.fastdom),function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(a){var b=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(b,c,d,e,f,g){function h(){d.cancel(j),g.complete(),l=0,k=0}function i(b){var d,e=c.get("$http"),f=a.defaults;!b.cache&&!f.cache||b.cache===!1||"GET"!==b.method&&"JSONP"!==b.method||(d=angular.isObject(b.cache)?b.cache:angular.isObject(f.cache)?f.cache:e);var g=void 0!==d&&void 0!==d.get(b.url);return void 0!==b.cached&&g!==b.cached?b.cached:(b.cached=g,g)}var j,k=0,l=0,m=g.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||i(a)||(e.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===k&&(j=d(function(){g.start()},m)),k++,g.set(l/k)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),a):(f.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||i(a.config)||(l++,e.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),l>=k?h():g.set(l/k)),b.reject(a)):(f.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),b.reject(a))}}}];a.interceptors.push(b)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(a,b,c,d){function e(){k||(k=a.get("$animate"));var e=b.find(n).eq(0);c.cancel(m),r||(d.$broadcast("cfpLoadingBar:started"),r=!0,v&&k.enter(o,e,angular.element(e[0].lastChild)),u&&k.enter(q,e,angular.element(e[0].lastChild)),f(w))}function f(a){if(r){var b=100*a+"%";p.css("width",b),s=a,t&&(c.cancel(l),l=c(function(){g()},250))}}function g(){if(!(h()>=1)){var a=0,b=h();a=b>=0&&b<.25?(3*Math.random()+3)/100:b>=.25&&b<.65?3*Math.random()/100:b>=.65&&b<.9?2*Math.random()/100:b>=.9&&b<.99?.005:0;var c=h()+a;f(c)}}function h(){return s}function i(){s=0,r=!1}function j(){k||(k=a.get("$animate")),d.$broadcast("cfpLoadingBar:completed"),f(1),c.cancel(m),m=c(function(){var a=k.leave(o,i);a&&a.then&&a.then(i),k.leave(q)},500)}var k,l,m,n=this.parentSelector,o=angular.element(this.loadingBarTemplate),p=o.find("div").eq(0),q=angular.element(this.spinnerTemplate),r=!1,s=0,t=this.autoIncrement,u=this.includeSpinner,v=this.includeBar,w=this.startSize;return{start:e,set:f,status:h,inc:g,complete:j,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(),function(){var a=[].slice;!function(b,c){var d;return d=function(){function a(a){var d=this;this.$el=b(a),b(c).resize(function(){return d.refresh()})}return a.prototype.start=function(){var a,b,c,d;if(this._overlay_visible())return!1;for(this._add_overlay_layer(),d=this.$el.find("*[data-intro]:visible"),b=0,c=d.length;b<c;b++)a=d[b],this._show_element(a);return this.$el.trigger("chardinJs:start")},a.prototype.toggle=function(){return this._overlay_visible()?this.stop():this.start()},a.prototype.refresh=function(){var a,b,c,d,e;if(this._overlay_visible()){for(d=this.$el.find("*[data-intro]:visible"),e=[],b=0,c=d.length;b<c;b++)a=d[b],e.push(this._position_helper_layer(a));return e}return this},a.prototype.stop=function(){return this.$el.find(".chardinjs-overlay").fadeOut(function(){return b(this).remove()}),this.$el.find(".chardinjs-helper-layer").remove(),this.$el.find(".chardinjs-show-element").removeClass("chardinjs-show-element"),this.$el.find(".chardinjs-relative-position").removeClass("chardinjs-relative-position"),c.removeEventListener?c.removeEventListener("keydown",this._onKeyDown,!0):document.detachEvent&&document.detachEvent("onkeydown",this._onKeyDown),this.$el.trigger("chardinJs:stop")},a.prototype._overlay_visible=function(){return 0!==this.$el.find(".chardinjs-overlay").length},a.prototype._add_overlay_layer=function(){var a,b,c,d=this;return!this._overlay_visible()&&(b=document.createElement("div"),c="",b.className="chardinjs-overlay","BODY"===this.$el.prop("tagName")?(c+="top: 0;bottom: 0; left: 0;right: 0;position: fixed;",b.setAttribute("style",c)):(a=this._get_offset(this.$el.get()[0]),a&&(c+="width: "+a.width+"px; height:"+a.height+"px; top:"+a.top+"px;left: "+a.left+"px;",b.setAttribute("style",c))),this.$el.get()[0].appendChild(b),b.onclick=function(){return d.stop()},setTimeout(function(){return c+="opacity: .8;opacity: .8;-ms-filter: 'progid:DXImageTransform.Microsoft.Alpha(Opacity=80)';filter: alpha(opacity=80);",b.setAttribute("style",c)},10))},a.prototype._get_position=function(a){return a.getAttribute("data-position")||"bottom"},a.prototype._place_tooltip=function(a){var c,d,e,f,g,h,i;switch(h=b(a).data("tooltip_layer"),i=this._get_offset(h),h.style.top=null,h.style.right=null,h.style.bottom=null,h.style.left=null,this._get_position(a)){case"top":case"bottom":e=this._get_offset(a),g=e.width,d=b(h).width(),h.style.left=""+(g/2-i.width/2)+"px";break;case"left":case"right":e=this._get_offset(a),f=e.height,c=b(h).height(),h.style.top=""+(f/2-i.height/2)+"px"}switch(this._get_position(a)){case"left":return h.style.left="-"+(i.width-34)+"px";case"right":return h.style.right="-"+(i.width-34)+"px";case"bottom":return h.style.bottom="-"+i.height+"px";case"top":return h.style.top="-"+i.height+"px"}},a.prototype._position_helper_layer=function(a){var c,d;return d=b(a).data("helper_layer"),c=this._get_offset(a),d.setAttribute("style","width: "+c.width+"px; height:"+c.height+"px; top:"+c.top+"px; left: "+c.left+"px;")},a.prototype._show_element=function(a){var c,d,e,f;if(d=this._get_offset(a),e=document.createElement("div"),f=document.createElement("div"),b(a).data("helper_layer",e).data("tooltip_layer",f),a.id&&e.setAttribute("data-id",a.id),e.className="chardinjs-helper-layer chardinjs-"+this._get_position(a),this._position_helper_layer(a),this.$el.get()[0].appendChild(e),f.className="chardinjs-tooltip chardinjs-"+this._get_position(a),f.innerHTML="<div class='chardinjs-tooltiptext'>"+a.getAttribute("data-intro")+"</div>",e.appendChild(f),this._place_tooltip(a),a.className+=" chardinjs-show-element",c="",a.currentStyle?c=a.currentStyle.position:document.defaultView&&document.defaultView.getComputedStyle&&(c=document.defaultView.getComputedStyle(a,null).getPropertyValue("position")),c=c.toLowerCase(),"absolute"!==c&&"relative"!==c)return a.className+=" chardinjs-relative-position"},a.prototype._get_offset=function(a){var b,c,d;for(b={width:a.offsetWidth,height:a.offsetHeight},c=0,d=0;a&&!isNaN(a.offsetLeft)&&!isNaN(a.offsetTop);)c+=a.offsetLeft,d+=a.offsetTop,a=a.offsetParent;return b.top=d,b.left=c,b},a}(),b.fn.extend({chardinJs:function(){var c,e,f,g;return g=arguments[0],e=2<=arguments.length?a.call(arguments,1):[],c=b(this[0]),f=c.data("chardinJs"),f||c.data("chardinJs",f=new d(this,g)),"string"==typeof g&&f[g].apply(f,e),f}})}(window.jQuery,window)}.call(this),angular.module("angularHelpOverlay",[]).directive("helpOverlay",["$document",function(a){var b=!1;return{restrict:"A",scope:{helpOverlay:"=",overlayStart:"&overlayStartCallback",overlayStop:"&overlayStopCallback"},link:function(c,d,e){a.on("chardinJs:start",function(a){angular.isFunction(c.overlayStart)&&c.overlayStart(a),c.helpOverlay===!1&&c.$apply(function(){b=!0,c.helpOverlay=!0})}),a.on("chardinJs:stop",function(a){angular.isFunction(c.overlayStop)&&c.overlayStop(a),c.helpOverlay===!0&&c.$apply(function(){b=!0,c.helpOverlay=!1})}),c.$watch("helpOverlay",function(a,c){a!==c&&(b===!0?b=!1:a===!0?$(d).chardinJs("start"):a===!1&&$(d).chardinJs("stop"))})}}}]),!function(a,b,c){"use strict";function d(a){return D(a)?a:Object.keys(a).map(function(b){return a[b]})}function e(a){return null===a}function f(a,b){var d=Object.keys(a);return-1==d.map(function(d){return b[d]!==c&&b[d]==a[d]}).indexOf(!1)}function g(a,b){if(""===b)return a;var c=a.indexOf(b.charAt(0));return-1!==c&&g(a.substr(c+1),b.substr(1))}function h(a,b,c){var d=0;return a.filter(function(a){var e=x(c)?b>d&&c(a):b>d;return d=e?d+1:d,e})}function i(a,b,c){return c.round(a*c.pow(10,b))/c.pow(10,b)}function j(a,b,c){b=b||[];var d=Object.keys(a);return d.forEach(function(d){if(C(a[d])&&!D(a[d])){var e=c?c+"."+d:c;j(a[d],b,e||d)}else{var f=c?c+"."+d:d;b.push(f)}}),b}function k(a){return a&&a.$evalAsync&&a.$watch}function l(){return function(a,b){return a>b}}function m(){return function(a,b){return a>=b}}function n(){return function(a,b){return b>a}}function o(){return function(a,b){return b>=a}}function p(){return function(a,b){return a==b}}function q(){return function(a,b){return a!=b}}function r(){return function(a,b){return a===b}}function s(){return function(a,b){return a!==b}}function t(a){return function(b,c){return b=C(b)?d(b):b,!(!D(b)||y(c))&&b.some(function(b){return C(b)||z(c)?a(c)(b):b===c})}}function u(a,b){return b=b||0,b>=a.length?a:D(a[b])?u(a.slice(0,b).concat(a[b],a.slice(b+1)),b):u(a,b+1)}function v(a){return function(b,c){function e(a,b){return!y(b)&&a.some(function(a){return H(a,b)})}if(b=C(b)?d(b):b,!D(b))return b;var f=[],g=a(c);return y(c)?b.filter(function(a,b,c){return c.indexOf(a)===b}):b.filter(function(a){var b=g(a);return!e(f,b)&&(f.push(b),!0)})}}function w(a,b,c){return b?a+c+w(a,--b,c):a}var x=b.isDefined,y=b.isUndefined,z=b.isFunction,A=b.isString,B=b.isNumber,C=b.isObject,D=b.isArray,E=b.forEach,F=b.extend,G=b.copy,H=b.equals;String.prototype.contains||(String.prototype.contains=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),b.module("a8m.angular",[]).filter("isUndefined",function(){return function(a){return b.isUndefined(a)}}).filter("isDefined",function(){return function(a){return b.isDefined(a)}}).filter("isFunction",function(){return function(a){return b.isFunction(a)}}).filter("isString",function(){return function(a){return b.isString(a)}}).filter("isNumber",function(){return function(a){return b.isNumber(a)}}).filter("isArray",function(){return function(a){return b.isArray(a)}}).filter("isObject",function(){return function(a){return b.isObject(a)}}).filter("isEqual",function(){return function(a,c){return b.equals(a,c)}}),b.module("a8m.conditions",[]).filter({isGreaterThan:l,">":l,isGreaterThanOrEqualTo:m,">=":m,isLessThan:n,"<":n,isLessThanOrEqualTo:o,"<=":o,isEqualTo:p,"==":p,isNotEqualTo:q,"!=":q,isIdenticalTo:r,"===":r,isNotIdenticalTo:s,"!==":s}),b.module("a8m.is-null",[]).filter("isNull",function(){return function(a){return e(a)}}),b.module("a8m.after-where",[]).filter("afterWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(-1===c?0:c)}}),b.module("a8m.after",[]).filter("after",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(b):a}}),b.module("a8m.before-where",[]).filter("beforeWhere",function(){return function(a,b){if(a=C(a)?d(a):a,!D(a)||y(b))return a;var c=a.map(function(a){return f(b,a)}).indexOf(!0);return a.slice(0,-1===c?a.length:++c)}}),b.module("a8m.before",[]).filter("before",function(){return function(a,b){return a=C(a)?d(a):a,D(a)?a.slice(0,b?--b:b):a}}),b.module("a8m.chunk-by",["a8m.filter-watcher"]).filter("chunkBy",["filterWatcher",function(a){return function(b,c,d){function e(a,b){for(var c=[];a--;)c[a]=b;return c}function f(a,b,c){return D(a)?a.map(function(a,d,f){return d*=b,a=f.slice(d,d+b),!y(c)&&a.length<b?a.concat(e(b-a.length,c)):a}).slice(0,Math.ceil(a.length/b)):a}return a.isMemoized("chunkBy",arguments)||a.memoize("chunkBy",arguments,this,f(b,c,d))}}]),b.module("a8m.concat",[]).filter("concat",[function(){return function(a,b){if(y(b))return a;if(D(a))return C(b)?a.concat(d(b)):a.concat(b);if(C(a)){var c=d(a);return C(b)?c.concat(d(b)):c.concat(b)}return a}}]),b.module("a8m.contains",[]).filter({contains:["$parse",t],some:["$parse",t]}),b.module("a8m.count-by",[]).filter("countBy",["$parse",function(a){return function(b,c){var e,f={},g=a(c);return b=C(b)?d(b):b,!D(b)||y(c)?b:(b.forEach(function(a){e=g(a),f[e]||(f[e]=0),f[e]++}),f)}}]),b.module("a8m.defaults",[]).filter("defaults",["$parse",function(a){return function(b,c){if(b=C(b)?d(b):b,!D(b)||!C(c))return b;var e=j(c);return b.forEach(function(b){e.forEach(function(d){var e=a(d),f=e.assign;y(e(b))&&f(b,e(c))})}),b}}]),b.module("a8m.every",[]).filter("every",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!(D(b)&&!y(c))||b.every(function(b){return C(b)||z(c)?a(c)(b):b===c})}}]),b.module("a8m.filter-by",[]).filter("filterBy",["$parse",function(a){return function(b,e,f){var g;return f=A(f)||B(f)?String(f).toLowerCase():c,b=C(b)?d(b):b,!D(b)||y(f)?b:b.filter(function(b){return e.some(function(c){if(~c.indexOf("+")){var d=c.replace(new RegExp("\\s","g"),"").split("+");g=d.reduce(function(c,d,e){return 1===e?a(c)(b)+" "+a(d)(b):c+" "+a(d)(b)})}else g=a(c)(b);return!(!A(g)&&!B(g))&&String(g).toLowerCase().contains(f)})})}}]),b.module("a8m.first",[]).filter("first",["$parse",function(a){return function(b){var e,f,g;return b=C(b)?d(b):b,D(b)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(b,e,f?a(f):f):b[0]):b}}]),b.module("a8m.flatten",[]).filter("flatten",function(){return function(a,b){return b=b||!1,a=C(a)?d(a):a,D(a)?b?[].concat.apply([],a):u(a,0):a}}),b.module("a8m.fuzzy-by",[]).filter("fuzzyBy",["$parse",function(a){return function(b,c,e,f){var h,i,j=f||!1;return b=C(b)?d(b):b,!D(b)||y(c)||y(e)?b:(i=a(c),b.filter(function(a){return h=i(a),!!A(h)&&(h=j?h:h.toLowerCase(),e=j?e:e.toLowerCase(),g(h,e)!==!1)}))}}]),b.module("a8m.fuzzy",[]).filter("fuzzy",function(){return function(a,b,c){function e(a,b){var c,d,e=Object.keys(a);return 0<e.filter(function(e){return c=a[e],!!d||!!A(c)&&(c=f?c:c.toLowerCase(),d=g(c,b)!==!1)}).length}var f=c||!1;
return a=C(a)?d(a):a,!D(a)||y(b)?a:(b=f?b:b.toLowerCase(),a.filter(function(a){return A(a)?(a=f?a:a.toLowerCase(),g(a,b)!==!1):!!C(a)&&e(a,b)}))}}),b.module("a8m.group-by",["a8m.filter-watcher"]).filter("groupBy",["$parse","filterWatcher",function(a,b){return function(c,d){function e(a,b){var c,d={};return E(a,function(a){c=b(a),d[c]||(d[c]=[]),d[c].push(a)}),d}return!C(c)||y(d)?c:b.isMemoized("groupBy",arguments)||b.memoize("groupBy",arguments,this,e(c,a(d)))}}]),b.module("a8m.is-empty",[]).filter("isEmpty",function(){return function(a){return C(a)?!d(a).length:!a.length}}),b.module("a8m.join",[]).filter("join",function(){return function(a,b){return y(a)||!D(a)?a:(y(b)&&(b=" "),a.join(b))}}),b.module("a8m.last",[]).filter("last",["$parse",function(a){return function(b){var e,f,g,i=G(b);return i=C(i)?d(i):i,D(i)?(g=Array.prototype.slice.call(arguments,1),e=B(g[0])?g[0]:1,f=B(g[0])?B(g[1])?c:g[1]:g[0],g.length?h(i.reverse(),e,f?a(f):f).reverse():i[i.length-1]):i}}]),b.module("a8m.map",[]).filter("map",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.map(function(b){return a(c)(b)})}}]),b.module("a8m.omit",[]).filter("omit",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return!a(c)(b)})}}]),b.module("a8m.pick",[]).filter("pick",["$parse",function(a){return function(b,c){return b=C(b)?d(b):b,!D(b)||y(c)?b:b.filter(function(b){return a(c)(b)})}}]),b.module("a8m.range",[]).filter("range",function(){return function(a,b){for(var c=0;c<parseInt(b);c++)a.push(c);return a}}),b.module("a8m.remove-with",[]).filter("removeWith",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return!f(b,a)}))}}),b.module("a8m.remove",[]).filter("remove",function(){return function(a){a=C(a)?d(a):a;var b=Array.prototype.slice.call(arguments,1);return D(a)?a.filter(function(a){return!b.some(function(b){return H(b,a)})}):a}}),b.module("a8m.reverse",[]).filter("reverse",[function(){return function(a){return a=C(a)?d(a):a,A(a)?a.split("").reverse().join(""):D(a)?a.slice().reverse():a}}]),b.module("a8m.search-field",[]).filter("searchField",["$parse",function(a){return function(b){var c,e;b=C(b)?d(b):b;var f=Array.prototype.slice.call(arguments,1);return D(b)&&f.length?b.map(function(b){return e=f.map(function(d){return(c=a(d))(b)}).join(" "),F(b,{searchField:e})}):b}}]),b.module("a8m.to-array",[]).filter("toArray",function(){return function(a,b){return C(a)?b?Object.keys(a).map(function(b){return F(a[b],{$key:b})}):d(a):a}}),b.module("a8m.unique",[]).filter({unique:["$parse",v],uniq:["$parse",v]}),b.module("a8m.where",[]).filter("where",function(){return function(a,b){return y(b)?a:(a=C(a)?d(a):a,a.filter(function(a){return f(b,a)}))}}),b.module("a8m.xor",[]).filter("xor",["$parse",function(a){return function(b,c,e){function f(b,c){var d=a(e);return c.some(function(a){return e?H(d(a),d(b)):H(a,b)})}return e=e||!1,b=C(b)?d(b):b,c=C(c)?d(c):c,D(b)&&D(c)?b.concat(c).filter(function(a){return!(f(a,b)&&f(a,c))}):b}}]),b.module("a8m.math.byteFmt",["a8m.math"]).filter("byteFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" B":1048576>b?i(b/1024,c,a)+" KB":1073741824>b?i(b/1048576,c,a)+" MB":i(b/1073741824,c,a)+" GB":"NaN"}}]),b.module("a8m.math.degrees",["a8m.math"]).filter("degrees",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)){var d=180*b/a.PI;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.kbFmt",["a8m.math"]).filter("kbFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?1024>b?i(b,c,a)+" KB":1048576>b?i(b/1024,c,a)+" MB":i(b/1048576,c,a)+" GB":"NaN"}}]),b.module("a8m.math",[]).factory("$math",["$window",function(a){return a.Math}]),b.module("a8m.math.max",["a8m.math"]).filter("max",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.max.apply(a,e))}return function(b,d){return D(b)?y(d)?a.max.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.min",["a8m.math"]).filter("min",["$math","$parse",function(a,b){function c(c,d){var e=c.map(function(a){return b(d)(a)});return e.indexOf(a.min.apply(a,e))}return function(b,d){return D(b)?y(d)?a.min.apply(a,b):b[c(b,d)]:b}}]),b.module("a8m.math.percent",["a8m.math"]).filter("percent",["$math","$window",function(a,b){return function(c,d,e){var f=A(c)?b.Number(c):c;return d=d||100,e=e||!1,!B(f)||b.isNaN(f)?c:e?a.round(f/d*100):f/d*100}}]),b.module("a8m.math.radians",["a8m.math"]).filter("radians",["$math",function(a){return function(b,c){if(B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)){var d=3.14159265359*b/180;return a.round(d*a.pow(10,c))/a.pow(10,c)}return"NaN"}}]),b.module("a8m.math.radix",[]).filter("radix",function(){return function(a,b){var c=/^[2-9]$|^[1-2]\d$|^3[0-6]$/;return B(a)&&c.test(b)?a.toString(b).toUpperCase():a}}),b.module("a8m.math.shortFmt",["a8m.math"]).filter("shortFmt",["$math",function(a){return function(b,c){return B(c)&&isFinite(c)&&c%1===0&&c>=0&&B(b)&&isFinite(b)?1e3>b?b:1e6>b?i(b/1e3,c,a)+" K":1e9>b?i(b/1e6,c,a)+" M":i(b/1e9,c,a)+" B":"NaN"}}]),b.module("a8m.math.sum",[]).filter("sum",function(){return function(a,b){return D(a)?a.reduce(function(a,b){return a+b},b||0):a}}),b.module("a8m.ends-with",[]).filter("endsWith",function(){return function(a,b,c){var d,e=c||!1;return!A(a)||y(b)?a:(a=e?a:a.toLowerCase(),d=a.length-b.length,-1!==a.indexOf(e?b:b.toLowerCase(),d))}}),b.module("a8m.latinize",[]).filter("latinize",[function(){function a(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return c[a]||a})}for(var b=[{base:"A",letters:"A"},{base:"AA",letters:""},{base:"AE",letters:""},{base:"AO",letters:""},{base:"AU",letters:""},{base:"AV",letters:""},{base:"AY",letters:""},{base:"B",letters:"B"},{base:"C",letters:"C"},{base:"D",letters:"D"},{base:"DZ",letters:""},{base:"Dz",letters:""},{base:"E",letters:"E"},{base:"F",letters:"F"},{base:"G",letters:"G"},{base:"H",letters:"H"},{base:"I",letters:"I"},{base:"J",letters:"J"},{base:"K",letters:"K"},{base:"L",letters:"L"},{base:"LJ",letters:""},{base:"Lj",letters:""},{base:"M",letters:"M"},{base:"N",letters:"N"},{base:"NJ",letters:""},{base:"Nj",letters:""},{base:"O",letters:"O"},{base:"OI",letters:""},{base:"OO",letters:""},{base:"OU",letters:""},{base:"OE",letters:""},{base:"oe",letters:""},{base:"P",letters:"P"},{base:"Q",letters:"Q"},{base:"R",letters:"R"},{base:"S",letters:"S"},{base:"T",letters:"T"},{base:"TZ",letters:""},{base:"U",letters:"U"},{base:"V",letters:"V"},{base:"VY",letters:""},{base:"W",letters:"W"},{base:"X",letters:"X"},{base:"Y",letters:"Y"},{base:"Z",letters:"Z"},{base:"a",letters:"a"},{base:"aa",letters:""},{base:"ae",letters:""},{base:"ao",letters:""},{base:"au",letters:""},{base:"av",letters:""},{base:"ay",letters:""},{base:"b",letters:"b"},{base:"c",letters:"c"},{base:"d",letters:"d"},{base:"dz",letters:""},{base:"e",letters:"e"},{base:"f",letters:"f"},{base:"g",letters:"g"},{base:"h",letters:"h"},{base:"hv",letters:""},{base:"i",letters:"i"},{base:"j",letters:"j"},{base:"k",letters:"k"},{base:"l",letters:"l"},{base:"lj",letters:""},{base:"m",letters:"m"},{base:"n",letters:"n"},{base:"nj",letters:""},{base:"o",letters:"o"},{base:"oi",letters:""},{base:"ou",letters:""},{base:"oo",letters:""},{base:"p",letters:"p"},{base:"q",letters:"q"},{base:"r",letters:"r"},{base:"s",letters:"s"},{base:"t",letters:"t"},{base:"tz",letters:""},{base:"u",letters:"u"},{base:"v",letters:"v"},{base:"vy",letters:""},{base:"w",letters:"w"},{base:"x",letters:"x"},{base:"y",letters:"y"},{base:"z",letters:"z"}],c={},d=0;d<b.length;d++)for(var e=b[d].letters.split(""),f=0;f<e.length;f++)c[e[f]]=b[d].base;return function(b){return A(b)?a(b):b}}]),b.module("a8m.ltrim",[]).filter("ltrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+"),""):a}}),b.module("a8m.match",[]).filter("match",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?a.match(d):null}}),b.module("a8m.repeat",[]).filter("repeat",[function(){return function(a,b,c){var d=~~b;return A(a)&&d?w(a,--b,c||""):a}}]),b.module("a8m.rtrim",[]).filter("rtrim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp(c+"+$"),""):a}}),b.module("a8m.slugify",[]).filter("slugify",[function(){return function(a,b){var c=y(b)?"-":b;return A(a)?a.toLowerCase().replace(/\s+/g,c):a}}]),b.module("a8m.starts-with",[]).filter("startsWith",function(){return function(a,b,c){var d=c||!1;return!A(a)||y(b)?a:(a=d?a:a.toLowerCase(),!a.indexOf(d?b:b.toLowerCase()))}}),b.module("a8m.stringular",[]).filter("stringular",function(){return function(a){var b=Array.prototype.slice.call(arguments,1);return a.replace(/{(\d+)}/g,function(a,c){return y(b[c])?a:b[c]})}}),b.module("a8m.strip-tags",[]).filter("stripTags",function(){return function(a){return A(a)?a.replace(/<\S[^><]*>/g,""):a}}),b.module("a8m.test",[]).filter("test",function(){return function(a,b,c){var d=new RegExp(b,c);return A(a)?d.test(a):a}}),b.module("a8m.trim",[]).filter("trim",function(){return function(a,b){var c=b||"\\s";return A(a)?a.replace(new RegExp("^"+c+"+|"+c+"+$","g"),""):a}}),b.module("a8m.truncate",[]).filter("truncate",function(){return function(a,b,c,d){return b=y(b)?a.length:b,d=d||!1,c=c||"",!A(a)||a.length<=b?a:a.substring(0,d?-1===a.indexOf(" ",b)?a.length:a.indexOf(" ",b):b)+c}}),b.module("a8m.ucfirst",[]).filter("ucfirst",[function(){return function(a){return A(a)?a.split(" ").map(function(a){return a.charAt(0).toUpperCase()+a.substring(1)}).join(" "):a}}]),b.module("a8m.uri-component-encode",[]).filter("uriComponentEncode",["$window",function(a){return function(b){return A(b)?a.encodeURIComponent(b):b}}]),b.module("a8m.uri-encode",[]).filter("uriEncode",["$window",function(a){return function(b){return A(b)?a.encodeURI(b):b}}]),b.module("a8m.wrap",[]).filter("wrap",function(){return function(a,b,c){return A(a)&&x(b)?[b,a,c||b].join(""):a}}),b.module("a8m.filter-watcher",[]).provider("filterWatcher",function(){this.$get=["$window","$rootScope",function(a,b){function c(b,c){function d(){var b=[];return function(c,d){if(C(d)&&!e(d)){if(~b.indexOf(d))return"[Circular]";b.push(d)}return a==d?"$WINDOW":a.document==d?"$DOCUMENT":k(d)?"$SCOPE":d}}return[b,JSON.stringify(c,d())].join("#").replace(/"/g,"")}function d(a){var b=a.targetScope.$id;E(l[b],function(a){delete j[a]}),delete l[b]}function f(){m(function(){b.$$phase||(j={})},2e3)}function g(a,b){var c=a.$id;return y(l[c])&&(a.$on("$destroy",d),l[c]=[]),l[c].push(b)}function h(a,b){var d=c(a,b);return j[d]}function i(a,b,d,e){var h=c(a,b);return j[h]=e,k(d)?g(d,h):f(),e}var j={},l={},m=a.setTimeout;return{isMemoized:h,memoize:i}}]}),b.module("angular.filter",["a8m.ucfirst","a8m.uri-encode","a8m.uri-component-encode","a8m.slugify","a8m.latinize","a8m.strip-tags","a8m.stringular","a8m.truncate","a8m.starts-with","a8m.ends-with","a8m.wrap","a8m.trim","a8m.ltrim","a8m.rtrim","a8m.repeat","a8m.test","a8m.match","a8m.to-array","a8m.concat","a8m.contains","a8m.unique","a8m.is-empty","a8m.after","a8m.after-where","a8m.before","a8m.before-where","a8m.defaults","a8m.where","a8m.reverse","a8m.remove","a8m.remove-with","a8m.group-by","a8m.count-by","a8m.chunk-by","a8m.search-field","a8m.fuzzy-by","a8m.fuzzy","a8m.omit","a8m.pick","a8m.every","a8m.filter-by","a8m.xor","a8m.map","a8m.first","a8m.last","a8m.flatten","a8m.join","a8m.range","a8m.math","a8m.math.max","a8m.math.min","a8m.math.percent","a8m.math.radix","a8m.math.sum","a8m.math.degrees","a8m.math.radians","a8m.math.byteFmt","a8m.math.kbFmt","a8m.math.shortFmt","a8m.angular","a8m.conditions","a8m.is-null","a8m.filter-watcher"])}(window,window.angular),function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.Clipboard=a()}}(function(){var a;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){function d(a,b){for(;a&&a!==document;){if(a.matches(b))return a;a=a.parentNode}}if(Element&&!Element.prototype.matches){var e=Element.prototype;e.matches=e.matchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector}b.exports=d},{}],2:[function(a,b,c){function d(a,b,c,d,f){var g=e.apply(this,arguments);return a.addEventListener(c,g,f),{destroy:function(){a.removeEventListener(c,g,f)}}}function e(a,b,c,d){return function(c){c.delegateTarget=f(c.target,b),c.delegateTarget&&d.call(a,c)}}var f=a("./closest");b.exports=d},{"./closest":1}],3:[function(a,b,c){c.node=function(a){return void 0!==a&&a instanceof HTMLElement&&1===a.nodeType},c.nodeList=function(a){var b=Object.prototype.toString.call(a);return void 0!==a&&("[object NodeList]"===b||"[object HTMLCollection]"===b)&&"length"in a&&(0===a.length||c.node(a[0]))},c.string=function(a){return"string"==typeof a||a instanceof String},c.fn=function(a){var b=Object.prototype.toString.call(a);return"[object Function]"===b}},{}],4:[function(a,b,c){function d(a,b,c){if(!a&&!b&&!c)throw new Error("Missing required arguments");if(!h.string(b))throw new TypeError("Second argument must be a String");if(!h.fn(c))throw new TypeError("Third argument must be a Function");if(h.node(a))return e(a,b,c);if(h.nodeList(a))return f(a,b,c);if(h.string(a))return g(a,b,c);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function e(a,b,c){return a.addEventListener(b,c),{destroy:function(){a.removeEventListener(b,c)}}}function f(a,b,c){return Array.prototype.forEach.call(a,function(a){a.addEventListener(b,c)}),{destroy:function(){Array.prototype.forEach.call(a,function(a){a.removeEventListener(b,c)})}}}function g(a,b,c){return i(document.body,a,b,c)}var h=a("./is"),i=a("delegate");b.exports=d},{"./is":3,delegate:2}],5:[function(a,b,c){function d(a){var b;if("SELECT"===a.nodeName)a.focus(),b=a.value;else if("INPUT"===a.nodeName||"TEXTAREA"===a.nodeName)a.focus(),a.setSelectionRange(0,a.value.length),b=a.value;else{a.hasAttribute("contenteditable")&&a.focus();var c=window.getSelection(),d=document.createRange();d.selectNodeContents(a),c.removeAllRanges(),c.addRange(d),b=c.toString()}return b}b.exports=d},{}],6:[function(a,b,c){function d(){}d.prototype={on:function(a,b,c){var d=this.e||(this.e={});return(d[a]||(d[a]=[])).push({fn:b,ctx:c}),this},once:function(a,b,c){function d(){e.off(a,d),b.apply(c,arguments)}var e=this;return d._=b,this.on(a,d,c)},emit:function(a){var b=[].slice.call(arguments,1),c=((this.e||(this.e={}))[a]||[]).slice(),d=0,e=c.length;for(d;d<e;d++)c[d].fn.apply(c[d].ctx,b);return this},off:function(a,b){var c=this.e||(this.e={}),d=c[a],e=[];if(d&&b)for(var f=0,g=d.length;f<g;f++)d[f].fn!==b&&d[f].fn._!==b&&e.push(d[f]);return e.length?c[a]=e:delete c[a],this}},b.exports=d},{}],7:[function(b,c,d){!function(e,f){if("function"==typeof a&&a.amd)a(["module","select"],f);else if("undefined"!=typeof d)f(c,b("select"));else{var g={exports:{}};f(g,e.select),e.clipboardAction=g.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=c(b),f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=function(){function a(b){d(this,a),this.resolveOptions(b),this.initSelection()}return g(a,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=a.action,this.emitter=a.emitter,this.target=a.target,this.text=a.text,this.trigger=a.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var a=this,b="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return a.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[b?"right":"left"]="-9999px";var c=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,c)),this.fakeElem.style.top=c+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,e.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,e.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var a=void 0;try{a=document.execCommand(this.action)}catch(b){a=!1}this.handleResult(a)}},{key:"handleResult",value:function(a){this.emitter.emit(a?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=a,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(a){if(void 0!==a){if(!a||"object"!==("undefined"==typeof a?"undefined":f(a))||1!==a.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&a.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(a.hasAttribute("readonly")||a.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=a}},get:function(){return this._target}}]),a}();a.exports=h})},{select:5}],8:[function(b,c,d){!function(e,f){if("function"==typeof a&&a.amd)a(["module","./clipboard-action","tiny-emitter","good-listener"],f);else if("undefined"!=typeof d)f(c,b("./clipboard-action"),b("tiny-emitter"),b("good-listener"));else{var g={exports:{}};f(g,e.clipboardAction,e.tinyEmitter,e.goodListener),e.clipboard=g.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){var c="data-clipboard-"+a;if(b.hasAttribute(c))return b.getAttribute(c)}var j=e(b),k=e(c),l=e(d),m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(a,c){f(this,b);var d=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return d.resolveOptions(c),d.listenClick(a),d}return h(b,a),m(b,[{key:"resolveOptions",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof a.action?a.action:this.defaultAction,this.target="function"==typeof a.target?a.target:this.defaultTarget,this.text="function"==typeof a.text?a.text:this.defaultText}},{key:"listenClick",value:function(a){var b=this;this.listener=(0,l.default)(a,"click",function(a){return b.onClick(a)})}},{key:"onClick",value:function(a){var b=a.delegateTarget||a.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new j.default({action:this.action(b),target:this.target(b),text:this.text(b),trigger:b,emitter:this})}},{key:"defaultAction",value:function(a){return i("action",a)}},{key:"defaultTarget",value:function(a){var b=i("target",a);if(b)return document.querySelector(b)}},{key:"defaultText",value:function(a){return i("text",a)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),b}(k.default);a.exports=n})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(){"use strict";var a,b={}.hasOwnProperty;a=function(){function a(a,b){this.$=a,this.location=null!=b?b:location,this.configEnvs={"local-beta":"config-local-beta.json",dev:"config-dev.json",beta:"config-beta.json",foxtrot:"config-foxtrot.json",kappa:"config-kappa.json",stage:"config-stage.json",pi:"config-pi.json","local-stage":"config-local-stage.json",prod:"config-prod.json"},this.domainEnvs=[["corp.shutterfly.com","config-local-beta.json"],["localhost","config-local-beta.json"],["0.0.0.0","config-local-beta.json"],["10.0.2.2","config-local-beta.json"],["dev.shutterfly.com","config-dev.json"],["beta.shutterfly.com","config-beta.json"],["app131.internal.shutterfly.com","config-prod.json"],["app132.internal.shutterfly.com","config-prod.json"],["foxtrot.shutterfly.com","config-foxtrot.json"],["kappa.shutterfly.com","config-kappa.json"],["stage.shutterfly.com","config-stage.json"],["pi.shutterfly.com","config-stage.json"],["shutterfly.com","config-prod.json"]],this.queryParams={},this.config={}}return a.prototype.url=function(){return this.getConfigUrlForEnv(this.getParameterByName("env"))},a.prototype.getParameterByName=function(a,b){var c;return null==b&&(b=this.location.search),null!=(c=this._queryparams(b)[a])?c:""},a.prototype.getConfigUrlForEnv=function(a,b){var c;return null==b&&(b=this.location.href),""!==a?this._getConfigValue(a):(c=this._getHrefValue(b),null!=c?c:"config-local-beta.json")},a.prototype._getHrefValue=function(a){var b,c,d,e;for(d=this.domainEnvs,b=0,c=d.length;b<c;b++)if(e=d[b],a.indexOf(e[0])!==-1)return e[1]},a.prototype._getConfigValue=function(a){var b;return null!=(b=this.configEnvs[a])?b:"config-beta.json"},a.prototype._queryparams=function(a){var b,c,d,e,f,g;for(null==a&&(a=this.location.search),d={},f=a.split(/[&?]/g),b=0,c=f.length;b<c;b++)g=f[b],g.indexOf("=")!==-1&&(e=g.split(/[=]/),d[e[0]]=e[1]);return d},a.prototype._overrideQueryParams=function(a){var c,d,e,f;null==a&&(a=this.location.search),d=this._queryparams(a),e=[];for(c in d)b.call(d,c)&&(f=d[c],e.push(this.queryParams[c]=f));return e},a.prototype.load=function(a,b){var c;return null==b&&(b={}),c=b[this.url().replace(/\.json/,"")],null!=c?this._loadCachedVersion(c,a):null!=this.$.getJSON?this._loadJQuery(this.$,a):this._loadXhr(this.$,a)},a.prototype._loadCachedVersion=function(a,b){return this._doSuccess(a,null!=b?b.success:void 0)},a.prototype._loadJQuery=function(a,b){return a.getJSON(this.url()).done(function(a){return function(c){return a._doSuccess(c,null!=b?b.success:void 0)}}(this)).fail(function(){return this._doFailure(null!=b?b.error:void 0)})},a.prototype._loadXhr=function(a,b){return a({method:"GET",uri:this.url(),responseType:"text"},function(a){return function(c,d,e){return c?a._doFailure(null!=b?b.error:void 0):a._doSuccess(JSON.parse(e),null!=b?b.success:void 0)}}(this))},a.prototype._doSuccess=function(a,c){var d,e;for(d in a)b.call(a,d)&&(e=a[d],this.config[d]=e,this._overrideQueryParams());return"function"==typeof c?c():void 0},a.prototype._doFailure=function(a){return"function"==typeof a?a():void 0},a}(),"undefined"!=typeof module&&null!==module&&(module.exports=a),"undefined"!=typeof window&&null!==window&&(window.Env=a)}.call(this),function(){"use strict";var a;a=function(){function a(){}return a.prototype.interceptErrors=function(a){var b,c;if(c=a.onerror)return b=this,a.onerror=function(){return c.apply(this,arguments),b._onError.apply(b,arguments)}},a.prototype._onError=function(a,b,c,d,e){return!(null==a||!a.error)},a}(),"undefined"!=typeof module&&null!==module&&(module.exports=a),"undefined"!=typeof window&&null!==window&&(window.GlobalErrorHandler=a)}.call(this);